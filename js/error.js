
 //libs/modules/egret/egret.min.js
function __extends(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i}var egret;!function(t){function e(){return""}function i(t){throw new Error("#"+t)}function n(){}function r(){}function s(){}t.getString=e,t.$error=i,t.$warn=n,t.$markReadOnly=r,t.$markCannotUse=s}(egret||(egret={}));var egret;!function(t){function e(t,e,i){var n=t.prototype;n.__class__=e;var r=[e];i&&(r=r.concat(i));var s=n.__types__;if(n.__types__)for(var a=s.length,o=0;a>o;o++){var h=s[o];-1==r.indexOf(h)&&r.push(h)}n.__types__=r}t.registerClass=e}(egret||(egret={}));var __define=this.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})},egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}var i=__define,n=e,r=n.prototype;return i(r,"hashCode",function(){return this.$hashCode}),e}();t.HashObject=e,t.registerClass(e,"egret.HashObject",["egret.IHashObject"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function n(t){void 0===t&&(t=null),i.call(this),this.$EventDispatcher={0:t?t:this,1:{},2:{},3:0}}__extends(n,i);var r=n,s=r.prototype;return s.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},s.addEventListener=function(t,e,i,n,r){this.$addListener(t,e,i,n,r)},s.once=function(t,e,i,n,r){this.$addListener(t,e,i,n,r,!0)},s.$addListener=function(t,e,i,n,r,s){var a=this.$EventDispatcher,o=n?a[2]:a[1],h=o[t];h?0!==a[3]&&(o[t]=h=h.concat()):h=o[t]=[],this.$insertEventBin(h,t,e,i,n,r,s)},s.$insertEventBin=function(t,e,i,n,r,s,a){s=0|+s;for(var o=-1,h=t.length,l=0;h>l;l++){var u=t[l];if(u.listener==i&&u.thisObject==n&&u.target==this)return!1;-1==o&&u.priority<s&&(o=l)}var c={type:e,listener:i,thisObject:n,priority:s,target:this,useCapture:r,dispatchOnce:!!a};return-1!==o?t.splice(o,0,c):t.push(c),!0},s.removeEventListener=function(t,e,i,n){var r=this.$EventDispatcher,s=n?r[2]:r[1],a=s[t];a&&(0!==r[3]&&(s[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(s[t]=null))},s.$removeEventBin=function(t,e,i){for(var n=t.length,r=0;n>r;r++){var s=t[r];if(s.listener==e&&s.thisObject==i&&s.target==this)return t.splice(r,1),!0}return!1},s.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},s.willTrigger=function(t){return this.hasEventListener(t)},s.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},s.$notifyListener=function(t,i){var n=this.$EventDispatcher,r=i?n[2]:n[1],s=r[t.$type];if(!s)return!0;var a=s.length;if(0==a)return!0;var o=e;n[3]++;for(var h=0;a>h;h++){var l=s[h];if(l.listener.call(l.thisObject,t),l.dispatchOnce&&o.push(l),t.$isPropagationImmediateStopped)break}for(n[3]--;o.length;)l=o.pop(),l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture);return!t.$isDefaultPrevented},s.dispatchEventWith=function(e,i,n){if(i||this.hasEventListener(e)){var r=t.Event.create(t.Event,e,i);r.data=n;var s=this.dispatchEvent(r);return t.Event.release(r),s}return!0},n}(t.HashObject);t.EventDispatcher=i,t.registerClass(i,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function n(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),i.call(this),this.x=t,this.y=e,this.width=n,this.height=r}__extends(n,i);var r=__define,s=n,a=s.prototype;return n.release=function(t){t&&e.push(t)},n.create=function(){var t=e.pop();return t||(t=new n),t},r(a,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),r(a,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),r(a,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),r(a,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),r(a,"topLeft",function(){return new t.Point(this.left,this.top)},function(t){this.top=t.y,this.left=t.x}),r(a,"bottomRight",function(){return new t.Point(this.right,this.bottom)},function(t){this.bottom=t.y,this.right=t.x}),a.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},a.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},a.intersection=function(t){return this.clone().$intersectInPlace(t)},a.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},a.$intersectInPlace=function(t){var e=this.x,i=this.y,n=t.x,r=t.y,s=Math.max(e,n),a=Math.min(e+this.width,n+t.width);if(a>=s){var o=Math.max(i,r),h=Math.min(i+this.height,r+t.height);if(h>=o)return this.setTo(s,o,a-s,h-o),this}return this.setEmpty(),this},a.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},a.isEmpty=function(){return this.width<=0||this.height<=0},a.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},a.clone=function(){return new n(this.x,this.y,this.width,this.height)},a.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y?!0:!1},a.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,r=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<r&&e>this.x&&n>=e&&i>this.y&&r>=i},a.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},a.inflatePoint=function(t){this.inflate(t.x,t.y)},a.offset=function(t,e){this.x+=t,this.y+=e},a.offsetPoint=function(t){this.offset(t.x,t.y)},a.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},a.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},a.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},a.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},n}(t.HashObject);t.Rectangle=i,t.registerClass(i,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function n(){i.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$touchEnabled=n.defaultTouchEnabled,this.$scrollRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$maskRect=null,this.$parentDisplayList=null,this.$renderNode=null,this.$displayFlags=2032,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1,12:0,13:0,14:0/0,15:0/0,16:0,17:0,18:0,19:null}}__extends(n,i);var r=__define,s=n,a=s.prototype;return a.$setFlags=function(t){this.$displayFlags|=t},a.$removeFlags=function(t){this.$displayFlags&=~t},a.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},a.$hasFlags=function(t){return(this.$displayFlags&t)==t},a.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},a.$propagateFlagsDown=function(t){this.$setFlags(t)},a.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},a.$invalidateMatrix=function(){this.$setFlags(8),this.$invalidatePosition()},a.$invalidatePosition=function(){var t=this;t.$invalidateTransform(),t.$propagateFlagsDown(48),t.$parent&&t.$parent.$propagateFlagsUp(4)},r(a,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),r(a,"parent",function(){return this.$parent}),a.$setParent=function(t){return this.$parent==t?!1:(this.$parent=t,!0)},a.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,this.$hasAddToStage=!0,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},a.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},r(a,"stage",function(){return this.$stage}),r(a,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),a.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},a.$setMatrix=function(t,i){void 0===i&&(i=!0);var n=this,r=n.$DisplayObject,s=r[6];return s.equals(t)?!1:(s.copyFrom(t),i&&(r[0]=s.$getScaleX(),r[1]=s.$getScaleY(),r[2]=t.$getSkewX(),r[3]=t.$getSkewY(),r[16]=e(180*r[2]/Math.PI),r[17]=e(180*r[3]/Math.PI),r[4]=e(180*r[3]/Math.PI)),n.$removeFlags(8),n.$invalidatePosition(),!0)},a.$getConcatenatedMatrix=function(){var e=this.$DisplayObject[7];if(this.$hasFlags(16)){this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e):e.copyFrom(this.$getMatrix());var i=this.$DisplayObject,n=i[12],r=i[13],s=this.$scrollRect;s?e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-s.x-n,-s.y-r),e):(0!=n||0!=r)&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-n,-r),e),this.$displayList&&(this.$displayList.$renderNode.moved=!0),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(16)}return e},a.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},r(a,"x",function(){return this.$getX()},function(t){this.$setX(t)}),a.$getX=function(){return this.$DisplayObject[6].tx},a.$setX=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.tx?!1:(e.tx=t,this.$invalidatePosition(),!0)},r(a,"y",function(){return this.$getY()},function(t){this.$setY(t)}),a.$getY=function(){return this.$DisplayObject[6].ty},a.$setY=function(t){t=+t||0;var e=this.$DisplayObject[6];return t==e.ty?!1:(e.ty=t,this.$invalidatePosition(),!0)},r(a,"scaleX",function(){return this.$getScaleX()},function(t){this.$setScaleX(t)}),a.$getScaleX=function(){return this.$DisplayObject[0]},a.$setScaleX=function(t){t=+t||0;var e=this.$DisplayObject;return t==e[0]?!1:(e[0]=t,this.$invalidateMatrix(),!0)},r(a,"scaleY",function(){return this.$getScaleY()},function(t){this.$setScaleY(t)}),a.$getScaleY=function(){return this.$DisplayObject[1]},a.$setScaleY=function(t){return t=+t||0,t==this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=t,this.$invalidateMatrix(),!0)},r(a,"rotation",function(){return this.$getRotation()},function(t){this.$setRotation(t)}),a.$getRotation=function(){return this.$DisplayObject[4]},a.$setRotation=function(t){t=+t||0,t=e(t);var i=this.$DisplayObject;if(t==i[4])return!1;var n=t-i[4],r=n/180*Math.PI;return i[2]+=r,i[3]+=r,i[4]=t,this.$invalidateMatrix(),!0},r(a,"skewX",function(){return this.$DisplayObject[16]},function(t){this.$setSkewX(t)}),a.$setSkewX=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[16]?!1:(i[16]=t,t=e(t),t=t/180*Math.PI,i[2]=t,this.$invalidateMatrix(),!0)},r(a,"skewY",function(){return this.$DisplayObject[17]},function(t){this.$setSkewY(t)}),a.$setSkewY=function(t){t=+t||0;var i=this.$DisplayObject;return t==i[17]?!1:(i[17]=t,t=e(t),t=t/180*Math.PI,i[3]=t,this.$invalidateMatrix(),!0)},r(a,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),a.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},a.$getExplicitWidth=function(){return this.$DisplayObject[14]},a.$setWidth=function(t){return this.$DisplayObject[14]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},r(a,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),a.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},a.$getExplicitHeight=function(){return this.$DisplayObject[15]},a.$setHeight=function(t){return this.$DisplayObject[15]=isNaN(t)?0/0:t,t=+t,0>t?!1:(this.$invalidateMatrix(),!0)},r(a,"measuredWidth",function(){return this.$getOriginalBounds().width}),r(a,"measuredHeight",function(){return this.$getOriginalBounds().height}),r(a,"anchorOffsetX",function(){return this.$DisplayObject[12]},function(t){this.$setAnchorOffsetX(t)}),a.$getAnchorOffsetX=function(){return this.$DisplayObject[12]},a.$setAnchorOffsetX=function(t){return t=+t||0,t==this.$DisplayObject[12]?!1:(this.$DisplayObject[12]=t,this.$invalidatePosition(),!0)},r(a,"anchorOffsetY",function(){return this.$DisplayObject[13]},function(t){this.$setAnchorOffsetY(t)}),a.$getAnchorOffsetY=function(){return this.$DisplayObject[13]},a.$setAnchorOffsetY=function(t){return t=+t||0,t==this.$DisplayObject[13]?!1:(this.$DisplayObject[13]=t,this.$invalidatePosition(),!0)},r(a,"visible",function(){return this.$visible},function(t){this.$setVisible(t)}),a.$setVisible=function(t){return t=!!t,t==this.$visible?!1:(this.$visible=t,this.$propagateFlagsDown(1024),this.$invalidateTransform(),!0)},a.$getConcatenatedVisible=function(){var t=this.$DisplayObject;if(this.$hasFlags(1024)){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();t[19]=e&&this.$visible}else t[19]=this.$visible;this.$removeFlags(1024)}return t[19]},r(a,"cacheAsBitmap",function(){return this.$DisplayObject[11]},function(t){t=!!t,this.$DisplayObject[11]=t,this.$setHasDisplayList(t)}),a.$setHasDisplayList=function(e){var i=!!this.$displayList;if(i!=e)if(e){var n=t.sys.DisplayList.create(this);n&&(this.$displayList=n,this.$parentDisplayList&&this.$parentDisplayList.markDirty(n),this.$cacheAsBitmapChanged())}else this.$displayList=null,this.$cacheAsBitmapChanged()},a.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderNode&&t&&t.markDirty(this),this.$propagateFlagsDown(48)},r(a,"alpha",function(){return this.$alpha},function(t){this.$setAlpha(t)}),a.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),!0)},a.$getConcatenatedAlpha=function(){var t=this.$DisplayObject;if(this.$hasFlags(64)){if(this.$parent){var e=this.$parent.$getConcatenatedAlpha();t[18]=e*this.$alpha}else t[18]=this.$alpha;this.$removeFlags(64)}return t[18]},r(a,"touchEnabled",function(){return this.$getTouchEnabled()},function(t){this.$setTouchEnabled(t)}),a.$getTouchEnabled=function(){return this.$touchEnabled},a.$setTouchEnabled=function(t){return this.$touchEnabled==t?!1:(this.$touchEnabled=t,!0)},r(a,"scrollRect",function(){return this.$scrollRect},function(t){this.$setScrollRect(t)}),a.$setScrollRect=function(e){return e||this.$scrollRect?(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e)):this.$scrollRect=null,this.$invalidatePosition(),!0):!1},r(a,"blendMode",function(){return t.sys.numberToBlendMode(this.$blendMode)},function(e){var i=t.sys.blendModeToNumber(e);i!=this.$blendMode&&(this.$blendMode=i,this.$invalidateTransform())}),r(a,"mask",function(){return this.$mask?this.$mask:this.$maskRect},function(t){if(t!==this){if(t)if(t instanceof n){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,t.$invalidateTransform(),this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null;else this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}}),a.$setMaskRect=function(e){return e||this.$maskRect?(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null,this.$invalidatePosition(),!0):!1},r(a,"filters",function(){return this.$DisplayObject[20]},function(t){var e=this.$DisplayObject[20];if(!e&&!t)return void(this.$DisplayObject[20]=t);if(this.$invalidateContentBounds(),this.$invalidate(!0),e&&e.length)for(var i=e.length,n=0;i>n;n++)e[n].$removeTarget(this);if(this.$DisplayObject[20]=t,t&&t.length)for(i=t.length,n=0;i>n;n++)t[n].$addTarget(this)}),a.$getFilters=function(){return this.$DisplayObject[20]},a.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},a.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;(0!=i[12]||0!=i[13])&&(t.x-=i[12],t.y-=i[13])}return t},a.$getTransformedBounds=function(e,i){var n=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(n),e==this||i.isEmpty())return i;var r;if(e){r=t.$TempMatrix;var s=e.$getInvertedConcatenatedMatrix();s.$preMultiplyInto(this.$getConcatenatedMatrix(),r)}else r=this.$getConcatenatedMatrix();return r.$transformBounds(i),i},a.globalToLocal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.$getInvertedConcatenatedMatrix();return n.transformPoint(t,e,i)},a.localToGlobal=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.$getConcatenatedMatrix();return n.transformPoint(t,e,i)},a.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},a.$getOriginalBounds=function(){var t=this.$DisplayObject[9];if(this.$hasFlags(4)){t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderNode.moved=!0);var e=this.$measureFiltersBounds(t);t.copyFrom(e)}return t},a.$measureChildBounds=function(t){},a.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(2)),t},a.$measureContentBounds=function(t){},a.$invalidate=function(t){if(this.$renderNode&&!this.$hasFlags(256)){this.$setFlags(384);var e=this.$displayList?this.$displayList:this.$parentDisplayList;e&&e.markDirty(this)}},a.$invalidateTransform=function(){var t=this;if(!t.$hasFlags(512)){t.$setFlags(512);var e=t.$displayList;(e||t.$renderNode)&&t.$parentDisplayList&&t.$parentDisplayList.markDirty(e||t)}},a.$getRenderNode=function(){var t=this.$renderNode;return t?(128&this.$displayFlags&&(t.cleanBeforeRender(),this.$render(),this.$removeFlags(128),t=this.$renderNode),t):null},a.$update=function(e,i){var n=this;n.$removeFlagsUp(768);var r=n.$renderNode;r.renderAlpha=n.$getConcatenatedAlpha();var s=n.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var a=n.$displayList||n.$parentDisplayList;if(!a)return!1;var o=r.renderMatrix;o.copyFrom(s);var h=a.root;h!==n.$stage&&n.$getConcatenatedMatrixAt(h,o)}else{var l=i||n.$getContentBounds();r.renderVisible=n.$getConcatenatedVisible();var a=n.$displayList||n.$parentDisplayList,u=r.renderRegion;if(!a)return u.setTo(0,0,0,0),r.moved=!1,!1;if(!r.moved)return!1;r.moved=!1;var o=r.renderMatrix;o.copyFrom(s);var h=a.root;h!==n.$stage&&n.$getConcatenatedMatrixAt(h,o),l=n.$measureFiltersBounds(l),u.updateRegion(l,o)}return!0},a.$measureFiltersBounds=function(e){var i=this.$DisplayObject[20];if(i&&i.length){var r=i.length;n.boundsForUpdate.copyFrom(e),e=n.boundsForUpdate;for(var s=e.x,a=e.y,o=e.width,h=e.height,l=0;r>l;l++){var u=i[l];if("blur"==u.type){var c=u.blurX,d=u.blurY;s-=c,a-=d,o+=2*c,h+=2*d}else if("glow"==u.type){var c=u.blurX,d=u.blurY;s-=c,a-=d,o+=2*c,h+=2*d;var f=u.distance||0,g=u.angle||0,p=0,v=0;0!=f&&(p=Math.ceil(f*t.NumberUtils.cos(g)),v=Math.ceil(f*t.NumberUtils.sin(g)),p>0?o+=p:0>p&&(s+=p,o-=p),v>0?h+=v:0>v&&(a+=v,h-=v))}}e.x=s,e.y=a,e.width=o,e.height=h}return e},a.$getConcatenatedMatrixAt=function(e,i){var n=e.$getInvertedConcatenatedMatrix();if(0===n.a||0===n.d){var r=this,s=e.$nestLevel;for(i.identity();r.$nestLevel>s;){var a=r.$scrollRect;a&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),i.concat(r.$getMatrix()),r=r.$parent}}else n.$preMultiplyInto(i,i)},a.$getConcatenatedAlphaAt=function(t,e){var i=t.$getConcatenatedAlpha();if(0===i){e=1;for(var n=this,r=t.$nestLevel;n.$nestLevel>r;)e*=n.$alpha,n=n.$parent}else e/=i;return e},a.$render=function(){},a.$hitTest=function(t,e){var i=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==i[0]||0==i[1])return null;var n=this.$getInvertedConcatenatedMatrix();if(0==n.a&&0==n.b&&0==n.c&&0==n.d)return null;var r=this.$getContentBounds(),s=n.a*t+n.c*e+n.tx,a=n.b*t+n.d*e+n.ty;if(r.contains(s,a)){if(!this.$children){var o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(s,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},a.hitTestPoint=function(e,i,n){if(n){var r,s=this.$getInvertedConcatenatedMatrix(),a=s.a*e+s.c*i+s.tx,o=s.b*e+s.d*i+s.ty,h=this.$displayList;if(h){var l=h.renderBuffer;try{r=l.getPixel(a-h.offsetX,o-h.offsetY)}catch(u){throw new Error(t.sys.tr(1039))}}else{var l=t.sys.hitTestBuffer;l.resize(3,3);var c=t.Matrix.create();c.identity(),c.translate(1-a,1-o),t.sys.canvasRenderer.render(this,l,c,null,!0),t.Matrix.release(c);try{r=l.getPixel(1,1)}catch(u){throw new Error(t.sys.tr(1039))}}return 0===r[3]?!1:!0}var d=this.$DisplayObject;if(0==d[0]||0==d[1])return!1;var s=this.$getInvertedConcatenatedMatrix(),f=this.getBounds(null,!1),a=s.a*e+s.c*i+s.tx,o=s.b*e+s.d*i+s.ty;if(f.contains(a,o)){var g=this.$scrollRect?this.$scrollRect:this.$maskRect;return g&&!g.contains(a,o)?!1:!0}return!1},a.$addListener=function(e,r,s,a,o,h){i.prototype.$addListener.call(this,e,r,s,a,o,h);var l=e==t.Event.ENTER_FRAME;if(l||e==t.Event.RENDER){var u=l?n.$enterFrameCallBackList:n.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},a.removeEventListener=function(e,r,s,a){i.prototype.removeEventListener.call(this,e,r,s,a);var o=e==t.Event.ENTER_FRAME;if((o||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=o?n.$enterFrameCallBackList:n.$renderCallBackList,l=h.indexOf(this);-1!==l&&h.splice(l,1)}},a.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),n=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,n),!t.$isDefaultPrevented},a.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},a.$dispatchPropagationEvent=function(t,e,i){for(var n=e.length,r=i-1,s=0;n>s;s++){var a=e[s];if(t.$currentTarget=a,r>s?t.$eventPhase=1:s==i||s==r?t.$eventPhase=2:t.$eventPhase=3,a.$notifyListener(t,i>s),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},a.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},n.defaultTouchEnabled=!1,n.boundsForUpdate=new t.Rectangle,n.$enterFrameCallBackList=[],n.$renderCallBackList=[],n}(t.EventDispatcher);t.DisplayObject=i,t.registerClass(i,"egret.DisplayObject",["egret.sys.Renderable"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(n){e.call(this),this.$scale9Grid=null,this.$fillMode="scale",this._pixelHitTest=!1,this.$renderNode=new t.sys.BitmapNode,this.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:i.defaultSmoothing,11:0/0,12:0/0},this.$setBitmapData(n)}__extends(i,e);var n=__define,r=i,s=r.prototype;return s.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n);var r=this.$Bitmap[0];r&&t.Texture.$addDisplayObject(this,r)},s.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=this.$Bitmap[0];i&&t.Texture.$removeDisplayObject(this,i)},n(s,"bitmapData",function(){var e=this.$Bitmap[0];return e instanceof t.Texture?null:e},function(t){this.$setBitmapData(t)}),n(s,"texture",function(){var e=this.$Bitmap[0];return e instanceof t.Texture?e:null},function(t){this.$setBitmapData(t)}),s.$setBitmapData=function(e){var i=this.$Bitmap,n=i[0];if(e==n)return!1;if(i[0]=e,!e)return n&&t.Texture.$removeDisplayObject(this,n),this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$invalidateContentBounds(),!0;if(this.$refreshImageData(),this.$stage){if(n){var r;r=n._bitmapData&&n._bitmapData.hashCode?n._bitmapData.hashCode:n.hashCode;var s;if(s=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,r==s)return this.$invalidateContentBounds(),!0;t.Texture.$removeDisplayObject(this,n)}t.Texture.$addDisplayObject(this,e)}return this.$invalidateContentBounds(),!0},s.$refreshImageData=function(){var e=this.$Bitmap,i=e[0];if(i)if(i instanceof t.Texture){var n=i;this.setImageData(n._bitmapData,n._bitmapX,n._bitmapY,n._bitmapWidth,n._bitmapHeight,n._offsetX,n._offsetY,n.$getTextureWidth(),n.$getTextureHeight(),n._sourceWidth,n._sourceHeight)}else{var r=i.width,s=i.height;this.setImageData(i,0,0,r,s,0,0,r,s,r,s)}},s.setImageData=function(t,e,i,n,r,s,a,o,h,l,u){var c=this.$Bitmap;c[1]=t,c[2]=e,c[3]=i,c[4]=n,c[5]=r,c[6]=s,c[7]=a,c[8]=o,c[9]=h,c[13]=l,c[14]=u},n(s,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds()}),n(s,"fillMode",function(){return this.$fillMode},function(t){this.$setFillMode(t)}),s.$setFillMode=function(t){return t==this.$fillMode?!1:(this.$fillMode=t,!0)},n(s,"smoothing",function(){var t=this.$Bitmap;return t[10]},function(t){t=!!t;var e=this.$Bitmap;t!=e[10]&&(e[10]=t,this.$invalidate())}),s.$setWidth=function(t){var e=this.$Bitmap;return 0>t||t==e[11]?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},s.$setHeight=function(t){var e=this.$Bitmap;return 0>t||t==e[12]?!1:(e[12]=t,this.$invalidateContentBounds(),!0)},s.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[11])?this.$getContentBounds().width:t[11]},s.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[12])?this.$getContentBounds().height:t[12]},s.$measureContentBounds=function(t){var e=this.$Bitmap;if(e[1]){var e=this.$Bitmap,i=isNaN(e[11])?e[8]:e[11],n=isNaN(e[12])?e[9]:e[12];t.setTo(0,0,i,n)}else i=isNaN(e[11])?0:e[11],n=isNaN(e[12])?0:e[12],t.setTo(0,0,i,n)},s.$render=function(){var e=this.$Bitmap;if(e[1]){var i=isNaN(e[11])?e[8]:e[11],n=isNaN(e[12])?e[9]:e[12];t.sys.BitmapNode.$updateTextureData(this.$renderNode,e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],i,n,e[13],e[14],this.scale9Grid||e[0].scale9Grid,this.fillMode,e[10])}},n(s,"pixelHitTest",function(){return this._pixelHitTest},function(t){this._pixelHitTest=!!t}),s.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n&&this._pixelHitTest&&(n=this.hitTestPixel(t,i)),n},s.hitTestPixel=function(e,i){var n,r=this.$getInvertedConcatenatedMatrix(),s=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,o=this.$displayList;if(o){var h=o.renderBuffer;try{n=h.getPixel(s-o.offsetX,a-o.offsetY)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}else{var h=t.sys.hitTestBuffer;h.resize(3,3);var u=this.$getRenderNode(),c=t.Matrix.create();c.identity(),c.translate(1-s,1-a),t.sys.canvasRenderer.drawNodeToBuffer(u,h,c,!0),t.Matrix.release(c);try{n=h.getPixel(1,1)}catch(l){throw console.log(this.$Bitmap[0]),new Error(t.sys.tr(1039))}}return 0===n[3]?null:this},i.$drawImage=function(e,i,n,r,s,a,o,h,l,u,c,d,f,g,p,v,$){console.warn("deprecated method : Bitmap.$drawImage,use egret.sys.BitmapNode.$drawImage instead of it"),t.sys.BitmapNode.$updateTextureData.call(this,arguments)},i.defaultSmoothing=!0,i}(t.DisplayObject);t.Bitmap=e,t.registerClass(e,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){t.BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"}}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,t.registerClass(e,"egret.BlendMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){var e=r[t];return void 0===e?0:e}function i(t){var e=n[t];return void 0===e?"normal":e}for(var n=["normal","add","erase"],r={},s=n.length,a=0;s>a;a++){var o=n[a];r[o]=a}t.blendModeToNumber=e,t.numberToBlendMode=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"}}(egret||(egret={}));var egret;!function(t){t.DirtyRegionPolicy={OFF:"off",ON:"on"}}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$touchChildren=!0,this.$children=[]}__extends(i,e);var n=__define,r=i,s=r.prototype;return s.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var e=this.$children,i=e.length,n=0;i>n;n++)e[n].$propagateFlagsDown(t)}},n(s,"numChildren",function(){return this.$children.length}),s.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},s.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},s.$doAddChild=function(e,n,r){void 0===r&&(r=!0);var s=e.$parent;if(s==this)return this.doSetChildIndex(e,n),e;s&&s.removeChild(e),this.$children.splice(n,0,e),e.$setParent(this);var a=this.$stage;if(a&&e.$onAddToStage(a,this.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),a)for(var o=i.$EVENT_ADD_TO_STAGE_LIST;o.length;){var h=o.shift();h.$stage&&r&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(e,l,l),e.$propagateFlagsDown(1648),this.$propagateFlagsUp(4),this.$childAdded(e,n),e},s.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},s.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},s.getChildIndex=function(t){return this.$children.indexOf(t)},s.getChildByName=function(t){for(var e,i=this.$children,n=i.length,r=0;n>r;r++)if(e=i[r],e.name==t)return e;return null},s.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},s.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},s.$doRemoveChild=function(e,n){void 0===n&&(n=!0),e=0|+e;var r=this.$children,s=r[e];if(this.$childRemoved(s,e),n&&s.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var a=i.$EVENT_REMOVE_FROM_STAGE_LIST;a.length>0;){var o=a.shift();n&&o.$hasAddToStage&&(o.$hasAddToStage=!1,o.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),o.$hasAddToStage=!1,o.$stage=null}}var h=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(s,h,null),s.$propagateFlagsDown(1648),s.$setParent(null);var l=r.indexOf(s);return-1!=l&&r.splice(l,1),this.$propagateFlagsUp(4),s},s.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},s.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);i!=e&&(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),t.$invalidateTransform(),this.$propagateFlagsUp(4))},s.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},s.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);-1==i||-1==n||this.doSwapChildrenAt(i,n)},s.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var n=this.$children,r=n[t],s=n[e];this.$childRemoved(r,t),this.$childRemoved(s,e),n[t]=s,n[e]=r,this.$childAdded(s,t),this.$childAdded(r,e),r.$invalidateTransform(),s.$invalidateTransform(),this.$propagateFlagsUp(4)},s.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},s.$childAdded=function(t,e){},s.$childRemoved=function(t,e){},s.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var n=this.$children,r=n.length;i++;for(var s=0;r>s;s++){var a=this.$children[s];a.$onAddToStage(t,i)}},s.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,n=0;i>n;n++){var r=t[n];r.$onRemoveFromStage()}},s.$measureChildBounds=function(e){var i=this.$children,n=i.length;if(0!=n){for(var r=0,s=0,a=0,o=0,h=!1,l=-1;n>l;l++){var u=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);u.isEmpty()||(h?(r=Math.min(r,u.x),s=Math.max(s,u.x+u.width),a=Math.min(a,u.y),o=Math.max(o,u.y+u.height)):(h=!0,r=u.x,s=r+u.width,a=u.y,o=a+u.height))
}e.setTo(r,a,s-r,o-a)}},n(s,"touchChildren",function(){return this.$getTouchChildren()},function(t){this.$setTouchChildren(!!t)}),s.$getTouchChildren=function(){return this.$touchChildren},s.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},s.$invalidate=function(t){if(e.prototype.$invalidate.call(this,t),t){var i=this.$displayList||this.$parentDisplayList,n=this.$children;if(n)for(var r=n.length-1;r>=0;r--)this.markChildDirty(n[r],i)}},s.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},s.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderNode)&&e&&e.markDirty(i||t),!i){var n=t.$children;if(n)for(var r=n.length-1;r>=0;r--)this.markChildDirty(n[r],e)}}},s.$cacheAsBitmapChanged=function(){e.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,i=this.$children,n=i.length-1;n>=0;n--)this.assignParentDisplayList(i[n],t,t)},s.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var n=t.$displayList;if((t.$renderNode||n)&&e&&e.markDirty(n||t),!n){var r=t.$children;if(r)for(var s=r.length-1;s>=0;s--)this.assignParentDisplayList(r[s],e,i)}},s.$hitTest=function(t,i){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),r=n.a*t+n.c*i+n.tx,s=n.b*t+n.d*i+n.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var o=this.$children,h=!1,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject){var c=u.$hitTest(t,i);if(c){if(h=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:h?this:e.prototype.$hitTest.call(this,t,i)},s.$setAlpha=function(t){return t=+t||0,t==this.$alpha?!1:(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),this.$invalidateAllChildren(),!0)},s.$invalidateAllChildren=function(){var t=this.$children;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i.$invalidate(),i.$children&&i.$invalidateAllChildren()}},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,t.registerClass(e,"egret.DisplayObjectContainer")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,t.registerClass(e,"egret.GradientType")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=2*Math.PI,0>t&&(t+=2*Math.PI),t}var i=function(i){function n(){i.call(this),this.lastX=0,this.lastY=0,this.fillPath=null,this.strokePath=null,this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=0,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.includeLastPosition=!0,this.$renderNode=new t.sys.GraphicsNode}__extends(n,i);var r=n,s=r.prototype;return s.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.targetDisplay=t},s.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},s.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},s.beginGradientFill=function(t,e,i,n,r){void 0===r&&(r=null),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,n,r,this.strokePath),this.$renderNode.drawData.length>1&&this.fillPath.moveTo(this.lastX,this.lastY)},s.endFill=function(){this.fillPath=null},s.lineStyle=function(t,e,i,n,r,s,a,o){void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r="normal"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===o&&(o=3),t=+t||0,0>=t?(this.strokePath=null,this.setStrokeWidth(0)):(e=+e||0,i=+i||0,o=+o||0,this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,s,a,o),this.$renderNode.drawData.length>1&&this.strokePath.moveTo(this.lastX,this.lastY))},s.drawRect=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var r=this.fillPath,s=this.strokePath;r&&r.drawRect(t,e,i,n),s&&s.drawRect(t,e,i,n),this.extendBoundsByPoint(t+i,e+n),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.drawRoundRect=function(t,e,i,n,r,s){t=+t||0,e=+e||0,i=+i||0,n=+n||0,r=+r||0,s=+s||0;var a=this.fillPath,o=this.strokePath;a&&a.drawRoundRect(t,e,i,n,r,s),o&&o.drawRoundRect(t,e,i,n,r,s);var h=.5*r|0,l=s?.5*s|0:h,u=t+i,c=e+n,d=c-l;this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(u,c),this.updatePosition(u,d),this.$renderNode.dirtyRender=!0},s.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0;var n=this.fillPath,r=this.strokePath;n&&n.drawCircle(t,e,i),r&&r.drawCircle(t,e,i),this.extendBoundsByPoint(t-i,e-i),this.extendBoundsByPoint(t+i,e+i),this.updatePosition(t+i,e),this.$renderNode.dirtyRender=!0},s.drawEllipse=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var r=this.fillPath,s=this.strokePath;r&&r.drawEllipse(t,e,i,n),s&&s.drawEllipse(t,e,i,n),this.extendBoundsByPoint(t+i,e+n),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.moveTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,n=this.strokePath;i&&i.moveTo(t,e),n&&n.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.$renderNode.dirtyRender=!0},s.lineTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,n=this.strokePath;i&&i.lineTo(t,e),n&&n.lineTo(t,e),this.updatePosition(t,e),this.$renderNode.dirtyRender=!0},s.curveTo=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var r=this.fillPath,s=this.strokePath;r&&r.curveTo(t,e,i,n),s&&s.curveTo(t,e,i,n),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,n),this.updatePosition(i,n),this.$renderNode.dirtyRender=!0},s.cubicCurveTo=function(t,e,i,n,r,s){t=+t||0,e=+e||0,i=+i||0,n=+n||0,r=+r||0,s=+s||0;var a=this.fillPath,o=this.strokePath;a&&a.cubicCurveTo(t,e,i,n,r,s),o&&o.cubicCurveTo(t,e,i,n,r,s),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,n),this.extendBoundsByPoint(r,s),this.updatePosition(r,s),this.$renderNode.dirtyRender=!0},s.drawArc=function(t,i,n,r,s,a){if(!(0>n||r===s)){t=+t||0,i=+i||0,n=+n||0,r=+r||0,s=+s||0,a=!!a,r=e(r),s=e(s);var o=this.fillPath,h=this.strokePath;o&&o.drawArc(t,i,n,r,s,a),h&&h.drawArc(t,i,n,r,s,a),a?this.arcBounds(t,i,n,s,r):this.arcBounds(t,i,n,r,s);var l=t+Math.cos(s)*n,u=i+Math.sin(s)*n;this.updatePosition(l,u),this.$renderNode.dirtyRender=!0}},s.arcBounds=function(t,e,i,n,r){var s=Math.PI;if(Math.abs(n-r)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);n>r&&(r+=2*s);for(var a=Math.cos(n)*i,o=Math.cos(r)*i,h=Math.min(a,o),l=Math.max(a,o),u=Math.sin(n)*i,c=Math.sin(r)*i,d=Math.min(u,c),f=Math.max(u,c),g=n/(.5*s),p=r/(.5*s),v=Math.ceil(g);p>=v;v++)switch(v%4){case 0:l=i;break;case 1:f=i;break;case 2:h=-i;break;case 3:d=-i}h=Math.floor(h),d=Math.floor(d),l=Math.ceil(l),f=Math.ceil(f),this.extendBoundsByPoint(h+t,d+e),this.extendBoundsByPoint(l+t,f+e)},s.clear=function(){this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},s.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},s.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},s.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},s.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},s.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e),this.targetDisplay.$invalidateContentBounds()},s.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},s.$hitTest=function(e,i){var n=this.targetDisplay,r=n.$getInvertedConcatenatedMatrix(),s=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,o=t.sys.hitTestBuffer;o.resize(3,3);var h=this.$renderNode,l=t.Matrix.create();l.identity(),l.translate(1-s,1-a),t.sys.canvasRenderer.drawNodeToBuffer(h,o,l,!0),t.Matrix.release(l);try{var u=o.getPixel(1,1)}catch(c){throw new Error(t.sys.tr(1039))}return 0===u[3]?null:n},n}(t.HashObject);t.Graphics=i,t.registerClass(i,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){t.JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"}}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this,i),this._verticesDirty=!0,this._bounds=new t.Rectangle,this.$renderNode=new t.sys.MeshNode}__extends(i,e);var n=i,r=n.prototype;return r.$render=function(){var e=this.$Bitmap,i=e[1];if(i){var n=(t.$TextureScaleFactor,this.$renderNode);n.smoothing=e[10],n.image=i,n.imageWidth=e[13],n.imageHeight=e[14];var r=isNaN(e[11])?e[8]:e[11],s=isNaN(e[12])?e[9]:e[12],a=r/e[8],o=s/e[9],h=e[4],l=e[5];n.drawMesh(e[2],e[3],h,l,e[6]*a,e[7]*o,a*h,o*l)}},r.$updateVertices=function(){this._verticesDirty=!0,this.$invalidateContentBounds()},r.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(var n=0,r=i.length;r>n;n+=2){var s=i[n],a=i[n+1];this._bounds.x>s&&(this._bounds.x=s),this._bounds.width<s&&(this._bounds.width=s),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i}(t.Bitmap);t.Mesh=e,t.registerClass(e,"egret.Mesh")}(egret||(egret={}));var egret;!function(t){t.OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"}}(egret||(egret={}));var egret;!function(t){function e(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t}t.createMap=e}(egret||(egret={}));var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){e.call(this),this._bitmapX=0,this._bitmapY=0,this._bitmapWidth=0,this._bitmapHeight=0,this._offsetX=0,this._offsetY=0,this._textureWidth=0,this._textureHeight=0,this._sourceWidth=0,this._sourceHeight=0,this._bitmapData=null}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"textureWidth",function(){return this.$getTextureWidth()}),s.$getTextureWidth=function(){return this._textureWidth},n(s,"textureHeight",function(){return this.$getTextureHeight()}),s.$getTextureHeight=function(){return this._textureHeight},s.$getScaleBitmapWidth=function(){return this._bitmapWidth*t.$TextureScaleFactor},s.$getScaleBitmapHeight=function(){return this._bitmapHeight*t.$TextureScaleFactor},n(s,"bitmapData",function(){return this._bitmapData}),s._setBitmapData=function(e){this._bitmapData=e;var i=e.width*t.$TextureScaleFactor,n=e.height*t.$TextureScaleFactor;this.$initData(0,0,i,n,0,0,i,n,i,n)},s.$initData=function(e,n,r,s,a,o,h,l,u,c){var d=t.$TextureScaleFactor;this._bitmapX=e/d,this._bitmapY=n/d,this._bitmapWidth=r/d,this._bitmapHeight=s/d,this._offsetX=a,this._offsetY=o,this._textureWidth=h,this._textureHeight=l,this._sourceWidth=u,this._sourceHeight=c,i.$invalidate(this)},s.getPixel32=function(t,e){throw new Error},s.toDataURL=function(t,e){throw new Error},s.saveToFile=function(t,e,i){throw new Error},s.dispose=function(){this._bitmapData&&(t.Capabilities.runtimeType==t.RuntimeType.WEB&&"webgl"==t.Capabilities.renderMode&&t.WebGLUtils.deleteWebGLTexture(this._bitmapData),this._bitmapData.dispose&&this._bitmapData.dispose(),i.$dispose(this),this._bitmapData=null)},i.$addDisplayObject=function(t,e){var n;if(n=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode){if(!i._displayList[n])return void(i._displayList[n]=[t]);var r=i._displayList[n];r.indexOf(t)<0&&r.push(t)}},i.$removeDisplayObject=function(t,e){var n;if(n=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n&&i._displayList[n]){var r=i._displayList[n],s=r.indexOf(t);s>=0&&r.splice(s)}},i.$invalidate=function(e){var n;if(n=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n&&i._displayList[n])for(var r=i._displayList[n],s=0;s<r.length;s++)r[s]instanceof t.Bitmap&&r[s].$refreshImageData(),r[s].$invalidateContentBounds()},i.$dispose=function(e){var n;if(n=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode,n&&i._displayList[n]){for(var r=i._displayList[n],s=0;s<r.length;s++)r[s]instanceof t.Bitmap&&(r[s].$Bitmap[1]=null),r[s].$invalidateContentBounds();delete i._displayList[n]}},i._displayList=t.createMap(),i}(t.HashObject);t.Texture=e,t.registerClass(e,"egret.Texture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.renderBuffer=new t.sys.RenderBuffer,this._setBitmapData(this.renderBuffer.surface)}__extends(i,e);var n=i,r=n.prototype;return r.drawToTexture=function(e,i,n){if(void 0===n&&(n=1),i&&(0==i.width||0==i.height))return!1;var r=i||e.$getOriginalBounds();if(0==r.width||0==r.height)return!1;n/=t.$TextureScaleFactor;var s=(r.x+r.width)*n,a=(r.y+r.height)*n;i&&(s=r.width*n,a=r.height*n);var o=this.renderBuffer;if(!o)return!1;o.resize(s,a);var h=t.Matrix.create();return h.identity(),i&&h.translate(-i.x,-i.y),h.scale(n,n),t.sys.systemRenderer.render(e,o,h,null,!0),t.Matrix.release(h),this.$initData(0,0,s,a,0,0,s,a,s,a),e.$propagateFlagsDown(128),!0},r.getPixel32=function(e,i){var n;if(this.renderBuffer){var r=t.$TextureScaleFactor;e=Math.round(e/r),i=Math.round(i/r),n=this.renderBuffer.getPixel(e,i)}return n},r.dispose=function(){e.prototype.dispose.call(this),this.renderBuffer=null},i}(t.Texture);t.RenderTexture=e,t.registerClass(e,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$setTarget(this)}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"graphics",function(){return this.$graphics}),s.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},s.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n==this&&(n=this.$graphics.$hitTest(t,i)),n},i}(t.DisplayObject);t.Shape=e,t.registerClass(e,"egret.Shape")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$setTarget(this)}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"graphics",function(){return this.$graphics}),s.$hitTest=function(e,i){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),r=n.a*e+n.c*i+n.tx,s=n.b*e+n.d*i+n.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,s))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var o=this.$children,h=!1,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject){var c=u.$hitTest(e,i);if(c){if(h=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:h?this:(c=t.DisplayObject.prototype.$hitTest.call(this,e,i),c&&(c=this.$graphics.$hitTest(e,i)),c)},s.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i}(t.DisplayObjectContainer);t.Sprite=e,t.registerClass(e,"egret.Sprite")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this),this._bitmapX=0,this._bitmapY=0,this._textureMap=t.createMap(),this.$texture=i,this._bitmapX=i._bitmapX-i._offsetX,this._bitmapY=i._bitmapY-i._offsetY}__extends(i,e);var n=i,r=n.prototype;return r.getTexture=function(t){return this._textureMap[t]},r.createTexture=function(e,i,n,r,s,a,o,h,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=a+r),void 0===l&&(l=o+s);var u=new t.Texture;return u._bitmapData=this.$texture._bitmapData,u.$initData(this._bitmapX+i,this._bitmapY+n,r,s,a,o,h,l,this.$texture._sourceWidth,this.$texture._sourceHeight),this._textureMap[e]=u,u},r.dispose=function(){this.$texture&&this.$texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,t.registerClass(e,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$stageWidth=0,this.$stageHeight=0,this.implMap={},this.$scaleMode=t.StageScaleMode.SHOW_ALL,this.$orientation=t.OrientationMode.AUTO,this.$maxTouches=99,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.$stage=this,this.$nestLevel=1}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"frameRate",function(){return t.sys.$ticker.$frameRate},function(e){t.sys.$ticker.$setFrameRate(e)}),n(s,"stageWidth",function(){return this.$stageWidth}),n(s,"stageHeight",function(){return this.$stageHeight}),s.invalidate=function(){t.sys.$invalidateRenderFlag=!0},s.registerImplementation=function(t,e){this.implMap[t]=e},s.getImplementation=function(t){return this.implMap[t]},n(s,"scaleMode",function(){return this.$scaleMode},function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())}),n(s,"orientation",function(){return this.$orientation},function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())}),n(s,"textureScaleFactor",function(){return t.$TextureScaleFactor},function(e){t.$TextureScaleFactor=e}),n(s,"maxTouches",function(){return this.$maxTouches},function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())}),n(s,"dirtyRegionPolicy",function(){return this.$dirtyRegionPolicy},function(t){this.$dirtyRegionPolicy!=t&&(this.$dirtyRegionPolicy=t,this.$displayList.setDirtyRegionPolicy(t))}),s.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.DisplayObjectContainer);t.Stage=e,t.registerClass(e,"egret.Stage")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r){t.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=e,this.$bubbles=!!i,this.$cancelable=!!n,this.data=r}__extends(e,t);var i=__define,n=e,r=n.prototype;return i(r,"type",function(){return this.$type}),i(r,"bubbles",function(){return this.$bubbles}),i(r,"cancelable",function(){return this.$cancelable}),i(r,"eventPhase",function(){return this.$eventPhase}),i(r,"currentTarget",function(){return this.$currentTarget}),i(r,"target",function(){return this.$target}),r.$setTarget=function(t){return this.$target=t,!0},r.isDefaultPrevented=function(){return this.$isDefaultPrevented},r.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},r.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},r.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},r.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,n,r){void 0===n&&(n=!1);var s=e.create(e,i,n),a=e._getPropertyData(e);void 0!=r&&(a.data=r);var o=t.dispatchEvent(s);return e.release(s),o},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,n){var r=t.eventPool;if(r||(r=t.eventPool=[]),r.length){var s=r.pop();return s.$type=e,s.$bubbles=!!i,s.$cancelable=!!n,s.$isDefaultPrevented=!1,s.$isPropagationStopped=!1,s.$isPropagationImmediateStopped=!1,s.$eventPhase=2,s}return new t(e,i,n)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,t.registerClass(e,"egret.Event")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)}__extends(e,t);var i=e;i.prototype;return e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,t.registerClass(e,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;i.prototype;return e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,t.registerClass(e,"egret.GeolocationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n),this._status=0}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"status",function(){return this._status}),i.dispatchHTTPStatusEvent=function(e,n){var r=t.Event.create(i,i.HTTP_STATUS);r._status=n;var s=e.dispatchEvent(r);return t.Event.release(r),s},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,t.registerClass(e,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}__extends(i,e);var n=i;n.prototype;return i.dispatchIOErrorEvent=function(e){var n=t.Event.create(i,i.IO_ERROR),r=e.dispatchEvent(n);return t.Event.release(n),r},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,t.registerClass(e,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;i.prototype;return e}(t.Event);t.MotionEvent=e,t.registerClass(e,"egret.MotionEvent")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=e;i.prototype;return e}(t.Event);t.OrientationEvent=e,t.registerClass(e,"egret.OrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===s&&(s=0),e.call(this,t,i,n),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=r,this.bytesTotal=s}__extends(i,e);var n=i;n.prototype;return i.dispatchProgressEvent=function(e,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0);var a=t.Event.create(i,n);a.bytesLoaded=r,a.bytesTotal=s;var o=e.dispatchEvent(a);return t.Event.release(a),o},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,t.registerClass(e,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}__extends(i,e);var n=i;n.prototype;return i.dispatchStageOrientationEvent=function(e,n){var r=t.Event.create(i,n),s=e.dispatchEvent(r);return t.Event.release(r),s},i.ORIENTATION_CHANGE="orientationChange",i}(t.Event);t.StageOrientationEvent=e,t.registerClass(e,"egret.StageOrientationEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=""),e.call(this,t,i,n),this.text=r}__extends(i,e);var n=i;n.prototype;return i.dispatchTextEvent=function(e,n,r){var s=t.Event.create(i,n);s.text=r;var a=e.dispatchEvent(s);return t.Event.release(s),a},i.LINK="link",i}(t.Event);t.TextEvent=e,t.registerClass(e,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){e.call(this,t,i,n)}__extends(i,e);var n=i,r=n.prototype;return r.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.dispatchTimerEvent=function(e,n,r,s){var a=t.Event.create(i,n,r,s),o=e.dispatchEvent(a);return t.Event.release(a),o},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,t.registerClass(e,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,n=function(n){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=0),n.call(this),this.x=t,this.y=e}__extends(r,n);var s=__define,a=r,o=a.prototype;return r.release=function(t){t&&e.push(t)},r.create=function(t,i){var n=e.pop();return n||(n=new r),n.setTo(t,i)},s(o,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)}),o.setTo=function(t,e){return this.x=t,this.y=e,this},o.clone=function(){return new r(this.x,this.y)},o.equals=function(t){return this.x==t.x&&this.y==t.y},r.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},o.copyFrom=function(t){this.x=t.x,this.y=t.y},o.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.interpolate=function(t,e,i){var n=1-i;return new r(t.x*i+e.x*n,t.y*i+e.y*n)},o.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},o.offset=function(t,e){this.x+=t,this.y+=e},r.polar=function(e,n){return new r(e*t.NumberUtils.cos(n/i),e*t.NumberUtils.sin(n/i))},o.subtract=function(t){return new r(this.x-t.x,this.y-t.y)},o.toString=function(){return"(x="+this.x+", y="+this.y+")"},r}(t.HashObject);t.Point=n,t.registerClass(n,"egret.Point"),t.$TempPoint=new n}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function n(t,e,n,r,s,a){i.call(this,t,e,n),this.targetChanged=!0,this.touchDown=!1,this.$initTo(r,s,a)}__extends(n,i);var r=__define,s=n,a=s.prototype;return a.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},r(a,"stageX",function(){return this.$stageX}),r(a,"stageY",function(){return this.$stageY}),r(a,"localX",function(){return this.targetChanged&&this.getLocalXY(),this._localX}),r(a,"localY",function(){return this.targetChanged&&this.getLocalXY(),this._localY}),a.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},a.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},a.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},n.dispatchTouchEvent=function(e,i,r,s,a,o,h,l){if(void 0===l&&(l=!1),!r&&!e.hasEventListener(i))return!0;var u=t.Event.create(n,i,r,s);u.$initTo(a,o,h),u.touchDown=l;var c=e.dispatchEvent(u);return t.Event.release(u),c},n.TOUCH_MOVE="touchMove",n.TOUCH_BEGIN="touchBegin",n.TOUCH_END="touchEnd",n.TOUCH_CANCEL="touchcancel",n.TOUCH_TAP="touchTap",n.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",n.TOUCH_ROLL_OUT="touchRollOut",n.TOUCH_ROLL_OVER="touchRollOver",n}(t.Event);t.TouchEvent=i,t.registerClass(i,"egret.TouchEvent")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.type=null,this.$targets=[]}__extends(e,t);var i=e,n=i.prototype;return n.$addTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return;this.$targets.push(t)},n.$removeTarget=function(t){for(var e=this.$targets.length,i=0;e>i;i++)if(this.$targets[i].$hashCode==t.$hashCode)return void this.$targets.splice(i,1)},n.invalidate=function(){for(var t=this.$targets.length,e=0;t>e;e++)this.$targets[e].$invalidateContentBounds()},e}(t.HashObject);t.Filter=e,t.registerClass(e,"egret.Filter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n){void 0===e&&(e=4),void 0===i&&(i=4),void 0===n&&(n=1),t.call(this),this.type="blur",this.$blurX=e,this.$blurY=i,this.$quality=n}__extends(e,t);var i=__define,n=e,r=n.prototype;return i(r,"blurX",function(){return this.$blurX},function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())}),i(r,"blurY",function(){return this.$blurY},function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())}),e}(t.Filter);t.BlurFilter=e,t.registerClass(e,"egret.BlurFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.$matrix=[],this.matrix2=[],this.type="colorTransform",this.setMatrix(e)}__extends(e,t);var i=__define,n=e,r=n.prototype;return i(r,"matrix",function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},function(t){this.setMatrix(t),this.invalidate()}),r.setMatrix=function(t){if(t)for(var e=0;20>e;e++)this.$matrix[e]=t[e];else for(var e=0;20>e;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0},e}(t.Filter);t.ColorMatrixFilter=e,t.registerClass(e,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r,s,a,o,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===n&&(n=6),void 0===r&&(r=6),void 0===s&&(s=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===h&&(h=!1),t.call(this),this.type="glow",this.$color=e,this.$blue=255&e,this.$green=(65280&e)>>8,this.$red=e>>16,this.$alpha=i,this.$blurX=n,this.$blurY=r,this.$strength=s,this.$quality=a,this.$inner=o,this.$knockout=h}__extends(e,t);var i=__define,n=e,r=n.prototype;return i(r,"color",function(){return this.$color},function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.invalidate())}),i(r,"alpha",function(){return this.$alpha},function(t){this.$alpha!=t&&(this.$alpha=t,this.invalidate())}),i(r,"blurX",function(){return this.$blurX},function(t){this.$blurX!=t&&(this.$blurX=t,this.invalidate())}),i(r,"blurY",function(){return this.$blurY},function(t){this.$blurY!=t&&(this.$blurY=t,this.invalidate())}),i(r,"strength",function(){return this.$strength},function(t){this.$strength!=t&&(this.$strength=t,this.invalidate())}),i(r,"quality",function(){return this.$quality},function(t){this.$quality!=t&&(this.$quality=t,this.invalidate())}),i(r,"inner",function(){return this.$inner},function(t){this.$inner!=t&&(this.$inner=t,this.invalidate())}),i(r,"knockout",function(){return this.$knockout},function(t){this.$knockout!=t&&(this.$knockout=t,this.invalidate())}),e}(t.Filter);t.GlowFilter=e,t.registerClass(e,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r,s,a,o,h,l,u,c){void 0===e&&(e=4),void 0===i&&(i=45),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1),t.call(this,n,r,s,a,o,h,l,u),this.$distance=e,this.$angle=i,this.$hideObject=c}__extends(e,t);var i=__define,n=e,r=n.prototype;return i(r,"distance",function(){return this.$distance},function(t){this.$distance!=t&&(this.$distance=t,this.invalidate())}),i(r,"angle",function(){return this.$angle},function(t){this.$angle!=t&&(this.$angle=t,this.invalidate())}),i(r,"hideObject",function(){return this.$hideObject},function(t){this.$hideObject!=t&&(this.$hideObject=t,this.invalidate())}),e}(t.GlowFilter);t.DropShadowFilter=e,t.registerClass(e,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){var e=Math.PI,i=2*e,n=e/180,r=[],s=function(s){function a(t,e,i,n,r,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=0),s.call(this),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=a}__extends(a,s);var o=a,h=o.prototype;return a.release=function(t){t&&r.push(t)},a.create=function(){var t=r.pop();return t||(t=new a),t},h.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},h.concat=function(t){var e=this.a*t.a,i=0,n=0,r=this.d*t.d,s=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,r+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,s+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a},h.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},h.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},h.invert=function(){this.$invertInto(this)},h.$invertInto=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=this.ty;
if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==r?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,r=t.d=1/r,t.tx=-e*s,t.ty=-r*a));var o=e*r-i*n;if(0==o)return void t.identity();o=1/o;var h=t.a=r*o;i=t.b=-i*o,n=t.c=-n*o,r=t.d=e*o,t.tx=-(h*s+n*a),t.ty=-(i*s+r*a)},h.rotate=function(e){if(e=+e,0!==e){e/=n;var i=t.NumberUtils.cos(e),r=t.NumberUtils.sin(e),s=this.a,a=this.b,o=this.c,h=this.d,l=this.tx,u=this.ty;this.a=s*i-a*r,this.b=s*r+a*i,this.c=o*i-h*r,this.d=o*r+h*i,this.tx=l*i-u*r,this.ty=l*r+u*i}},h.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},h.setTo=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},h.transformPoint=function(e,i,n){var r=this.a*e+this.c*i+this.tx,s=this.b*e+this.d*i+this.ty;return n?(n.setTo(r,s),n):new t.Point(r,s)},h.translate=function(t,e){this.tx+=t,this.ty+=e},h.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},h.prepend=function(t,e,i,n,r,s){var a=this.tx;if(1!=t||0!=e||0!=i||1!=n){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=a*t+this.ty*i+r,this.ty=a*e+this.ty*n+s,this},h.append=function(t,e,i,n,r,s){var a=this.a,o=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+n*h,this.d=i*o+n*l),this.tx=r*a+s*h+this.tx,this.ty=r*o+s*l+this.ty,this},h.deltaTransformPoint=function(e){var i=this,n=i.a*e.x+i.c*e.y,r=i.b*e.x+i.d*e.y;return new t.Point(n,r)},h.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},h.createBox=function(e,i,r,s,a){void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0);var o=this;if(0!==r){r/=n;var h=t.NumberUtils.cos(r),l=t.NumberUtils.sin(r);o.a=h*e,o.b=l*i,o.c=-l*e,o.d=h*i}else o.a=e,o.b=0,o.c=0,o.d=i;o.tx=s,o.ty=a},h.createGradientBox=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.createBox(t/1638.4,e/1638.4,i,n+t/2,r+e/2)},h.$transformBounds=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=this.ty,o=t.x,h=t.y,l=o+t.width,u=h+t.height,c=e*o+n*h+s,d=i*o+r*h+a,f=e*l+n*h+s,g=i*l+r*h+a,p=e*l+n*u+s,v=i*l+r*u+a,$=e*o+n*u+s,y=i*o+r*u+a,m=0;c>f&&(m=c,c=f,f=m),p>$&&(m=p,p=$,$=m),t.x=Math.floor(p>c?c:p),t.width=Math.ceil((f>$?f:$)-t.x),d>g&&(m=d,d=g,g=m),v>y&&(m=v,v=y,y=m),t.y=Math.floor(v>d?d:v),t.height=Math.ceil((g>y?g:y)-t.y)},h.getDeterminant=function(){return this.a*this.d-this.b*this.c},h.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},h.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},h.$getSkewX=function(){return Math.atan2(this.d,this.c)-e/2},h.$getSkewY=function(){return Math.atan2(this.b,this.a)},h.$updateScaleAndRotation=function(e,r,s,a){if(!(0!=s&&s!=i||0!=a&&a!=i))return this.a=e,this.b=this.c=0,void(this.d=r);s/=n,a/=n;var o=t.NumberUtils.cos(s),h=t.NumberUtils.sin(s);s==a?(this.a=o*e,this.b=h*e):(this.a=t.NumberUtils.cos(a)*e,this.b=t.NumberUtils.sin(a)*e),this.c=-h*r,this.d=o*r},h.$preMultiplyInto=function(t,e){var i=t.a*this.a,n=0,r=0,s=t.d*this.d,a=t.tx*this.a+this.tx,o=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,s+=t.c*this.b,n+=t.a*this.b+t.b*this.d,r+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,o+=t.tx*this.b),e.a=i,e.b=n,e.c=r,e.d=s,e.tx=a,e.ty=o},a}(t.HashObject);t.Matrix=s,t.registerClass(s,"egret.Matrix"),t.$TempMatrix=new s}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="crossOrigin images can not set pixelHitTest  property!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="egret.MainContext.runtimeType is deprecated, please use egret.Capabilities.runtimeType replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=t.$locale_strings[t.$language][e];if(!r)return"{"+e+"}";for(var s=i.length,a=0;s>a;a++)r=r.replace("{"+a+"}",i[a]);return r}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]=" pixelHitTest !",e[1040]="hitTestPoint ! ",e[1041]="egret.MainContext.runtimeType ,egret.Capabilities.runtimeType ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){n.indexOf(t)<0&&n.push(t)}function i(t){var e=n.indexOf(t);return e>=0?(n.splice(e,1),!0):!1}var n=[];t.$pushSoundChannel=e,t.$popSoundChannel=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null,this.onResponseHeaderFunc=null,this.onResponseHeaderThisObject=null}var i=e,n=i.prototype;return e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},n.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},n.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},n.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},n.onResponseHeader=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onResponseHeaderFunc&&this.onResponseHeaderFunc.apply(this.onResponseHeaderThisObject,t)},n.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,this.onResponseHeaderFunc=void 0,this.onResponseHeaderThisObject=void 0,e.promiseObjectList.push(this)},e.promiseObjectList=[],e}();t.PromiseObject=e,t.registerClass(e,"egret.PromiseObject")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.GET="GET",t.POST="POST",t}();t.HttpMethod=e,t.registerClass(e,"egret.HttpMethod")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,t.registerClass(e,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i=t.minX<e.minX?t.minX:e.minX,n=t.minY<e.minY?t.minY:e.minY,r=t.maxX>e.maxX?t.maxX:e.maxX,s=t.maxY>e.maxY?t.maxY:e.maxY;return(r-i)*(s-n)}var n=function(){function n(e){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=e}var r=n,s=r.prototype;return s.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},s.addRegion=function(i){var n=i.minX,r=i.minY,s=i.maxX,a=i.maxY;if(this.hasClipRect&&(0>n&&(n=0),0>r&&(r=0),s>this.clipWidth&&(s=this.clipWidth),a>this.clipHeight&&(a=this.clipHeight)),n>=s||r>=a)return!1;if(this.clipRectChanged)return!0;var o=this.dirtyList,h=e.Region.create();return o.push(h.setTo(n,r,s,a)),this.$dirtyRegionPolicy!=t.DirtyRegionPolicy.OFF&&this.mergeDirtyList(o),!0},s.clear=function(){for(var t=this.dirtyList,i=t.length,n=0;i>n;n++)e.Region.release(t[n]);t.length=0},s.getDirtyRegions=function(){var i=this.dirtyList;if(this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF||t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&!t["native"].$supportCanvas){this.clipRectChanged=!0,this.clear();var n=e.Region.create();if(this.hasClipRect)i.push(n.setTo(0,0,this.clipWidth,this.clipHeight));else{var r=this.root.$getOriginalBounds();i.push(n.setTo(r.x,r.y,r.width,r.height))}}else if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var n=e.Region.create();i.push(n.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(i););var s=this.dirtyList.length;if(s>0)for(var a=0;s>a;a++)this.dirtyList[a].intValues();return this.dirtyList},s.mergeDirtyList=function(t){var n=t.length;if(2>n)return!1;for(var r=this.hasClipRect,s=n>3?Number.POSITIVE_INFINITY:0,a=0,o=0,h=0,l=0;n-1>l;l++){var u=t[l];r&&(h+=u.area);for(var c=l+1;n>c;c++){var d=t[c],f=i(u,d)-u.area-d.area;s>f&&(a=l,o=c,s=f)}}if(r&&h/this.clipArea>.95&&(this.clipRectChanged=!0),a!=o){var g=t[o];return t[a].union(g),e.Region.release(g),t.splice(o,1),!0}return!1},s.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t},n}();e.DirtyRegion=n,t.registerClass(n,"egret.sys.DirtyRegion")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(n){i.call(this),this.isStage=!1,this.$renderNode=new e.BitmapNode,this.renderBuffer=null,this.offsetX=0,this.offsetY=0,this.offsetMatrix=new t.Matrix,this.isDirty=!1,this.needUpdateRegions=!1,this.dirtyNodeList=[],this.dirtyList=null,this.sizeChanged=!1,this.$dirtyRegionPolicy=t.DirtyRegionPolicy.ON,this.root=n,this.dirtyRegion=new e.DirtyRegion(n),this.isStage=n instanceof t.Stage,this.dirtyNodes=t.createMap()}__extends(n,i);var r=n,s=r.prototype;return n.create=function(i){var n=new t.sys.DisplayList(i);try{var r=new e.RenderBuffer}catch(s){return null}return n.renderBuffer=r,n.root=i,n},s.$getRenderNode=function(){return this.$renderNode},s.$update=function(e){var i=this.root;if(null==i)return!1;i.$removeFlagsUp(768);var n=this.$renderNode,r=i.$getConcatenatedMatrix();if(e==t.DirtyRegionPolicy.OFF){var s=i.$parentDisplayList;if(this.needUpdateRegions&&this.updateDirtyRegions(),!s)return!1;var a=n.renderMatrix;a.copyFrom(r);var o=s.root;o!==i.$stage&&i.$getConcatenatedMatrixAt(o,a)}else{var h=i.$getOriginalBounds(),s=i.$parentDisplayList,l=n.renderRegion;if(this.needUpdateRegions&&this.updateDirtyRegions(),!s)return l.setTo(0,0,0,0),n.moved=!1,!1;if(!n.moved)return!1;n.moved=!1;var a=n.renderMatrix;a.copyFrom(r);var o=s.root;o!==i.$stage&&i.$getConcatenatedMatrixAt(o,a),l.updateRegion(h,a)}return!0},s.setClipRect=function(t,e){this.dirtyRegion.setClipRect(t,e),this.renderBuffer.resize(t,e)},s.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needUpdateRegions)){this.needUpdateRegions=!0,this.isDirty=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},s.updateDirtyRegions=function(){var e=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes=t.createMap(),this.needUpdateRegions=!1;for(var i=this.dirtyRegion,n=e.length,r=0;n>r;r++){var s=e[r],a=s.$getRenderNode();if(a.needRedraw=!1,this.isStage){a.renderAlpha>0&&a.renderVisible&&i.addRegion(a.renderRegion)&&(a.needRedraw=!0);var o=s.$update(this.$dirtyRegionPolicy);a.renderAlpha>0&&a.renderVisible&&(o||!a.needRedraw)&&i.addRegion(a.renderRegion)&&(a.needRedraw=!0)}else{i.addRegion(a.renderRegion)&&(a.needRedraw=!0);var o=s.$update(this.$dirtyRegionPolicy);(o||!a.needRedraw)&&i.addRegion(a.renderRegion)&&(a.needRedraw=!0)}}return this.dirtyList=i.getDirtyRegions(),this.dirtyList},s.drawToSurface=function(){var i=0,n=this.dirtyList;if(n&&n.length>0){this.isStage||this.changeSurfaceSize();var r=this.renderBuffer;r.beginClip(this.dirtyList,this.offsetX,this.offsetY);var n=this.$dirtyRegionPolicy==t.DirtyRegionPolicy.OFF?null:this.dirtyList,i=e.systemRenderer.render(this.root,r,this.offsetMatrix,n);r.endClip();var s=r.surface,a=this.$renderNode;a.drawData.length=0,a.image=s;var o=s.width,h=s.height;a.imageWidth=o,a.imageHeight=h,a.drawImage(0,0,o,h,-this.offsetX,-this.offsetY,o,h)}return this.dirtyList=null,this.dirtyRegion.clear(),this.isDirty=!1,i},s.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,i=this.root.$getOriginalBounds();this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(1,0,0,1,this.offsetX,this.offsetY);var n=this.renderBuffer,r=Math.max(257,i.width),s=Math.max(257,i.height);(this.offsetX!=t||this.offsetY!=e||n.surface.width!=r||n.surface.height!=s)&&(this.sizeChanged?n.resizeTo(r,s,this.offsetX-t,this.offsetY-e):(this.sizeChanged=!0,n.resize(r,s)))},s.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t,this.dirtyRegion.setDirtyRegionPolicy(t),this.renderBuffer.setDirtyRegionPolicy(t)},n}(t.HashObject);e.DisplayList=i,t.registerClass(i,"egret.sys.DisplayList",["egret.sys.Renderable"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(i,n,r,s){if(n&&(t.log=function(){for(var t=arguments.length,i="",n=0;t>n;n++)i+=arguments[n]+" ";e.$logToFPS(i),console.log.apply(console,a(arguments))}),l=s?{}:s,n=!!n,this.showFPS=!!i,this.showLog=n,!this.fpsDisplay){var o=void 0===s.x?0:s.x,c=void 0===s.y?0:s.y;h=this.fpsDisplay=new FPS(this.stage,i,n,r,s),h.x=o,h.y=c;for(var d=u.length,f=0;d>f;f++)h.updateInfo(u[f]);u=null}}function n(t){t=!!t,this._showPaintRect!=t&&(this._showPaintRect=t,t?(this.stageDisplayList||(this.stageDisplayList=e.DisplayList.create(this.stage)),this.stage.$displayList=this.stageDisplayList):this.stage.$displayList=this.screenDisplayList)}function r(t){for(var e=t.length,i=[],n=0;e>n;n++){var r=t[n];i[n]=[r.minX,r.minY,r.width,r.height],r.width-=1,r.height-=1}var s=this.paintList;s.push(i),s.length>1&&s.shift();var a=this.screenDisplayList.renderBuffer,o=a.context;for(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.surface.width,a.surface.height),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),e=s.length,n=0;e>n;n++){i=s[n];for(var h=i.length-1;h>=0;h--){var l=i[h];this.drawDirtyRect(l[0],l[1],l[2],l[3],o)}}o.save(),o.beginPath();for(var e=t.length,n=0;e>n;n++){var r=t[n];o.clearRect(r.minX,r.minY,r.width,r.height),o.rect(r.minX,r.minY,r.width,r.height)}o.clip(),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),o.restore()}function s(t,e,i,n,r){r.strokeStyle="rgb(255,0,0)",r.lineWidth=5,r.strokeRect(t-.5,e-.5,i,n)}function a(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}var o=function(a){function o(t,e,o){a.call(this),this.isPlaying=!1,this.entryClassName=o,this.stage=e,this.screenDisplayList=this.createDisplayList(e,t),this.showFPS=!1,this.showLog=!1,this._showPaintRect=!1,this.stageDisplayList=null,this.paintList=[],this.displayFPS=i,this.showPaintRect=n,this.drawPaintRect=r,this.drawDirtyRect=s}__extends(o,a);var h=o,l=h.prototype;return l.createDisplayList=function(t,i){var n=new e.DisplayList(t);return n.renderBuffer=i,t.$displayList=n,n},l.start=function(){!this.isPlaying&&this.stage&&(e.$TempStage=e.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),e.$ticker.$addPlayer(this))},l.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},l.stop=function(){this.pause(),this.stage=null},l.pause=function(){this.isPlaying&&(this.isPlaying=!1,e.$ticker.$removePlayer(this))},l.$render=function(e,i){(this.showFPS||this.showLog)&&this.stage.addChild(this.fpsDisplay),this.callLaters(),this.callLaterAsyncs();var n=this.stage,r=t.getTimer(),s=n.$displayList.updateDirtyRegions(),a=t.getTimer();s=s.concat();var o=n.$displayList.drawToSurface();this._showPaintRect&&this.drawPaintRect(s);var h=t.getTimer();if(e&&this.showFPS){var l=0;if(o>0){for(var u=s.length,c=0,d=0;u>d;d++)c+=s[d].area;l=Math.ceil(1e3*c/(n.stageWidth*n.stageHeight))/10}this.fpsDisplay.update(o,l,a-r,h-a,i)}},l.callLaters=function(){if(t.$callLaterFunctionList.length>0){var e=t.$callLaterFunctionList;t.$callLaterFunctionList=[];var i=t.$callLaterThisList;t.$callLaterThisList=[];var n=t.$callLaterArgsList;t.$callLaterArgsList=[]}if(e)for(var r=e.length,s=0;r>s;s++){var a=e[s];null!=a&&a.apply(i[s],n[s])}},l.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,n=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var r=0;r<e.length;r++){var s=e[r];null!=s&&s.apply(i[r],n[r])}}},l.updateStageSize=function(e,i){var n=this.stage;n.$stageWidth=e,n.$stageHeight=i,this.screenDisplayList.setClipRect(e,i),this.stageDisplayList&&this.stageDisplayList.setClipRect(e,i),n.dispatchEventWith(t.Event.RESIZE),n.$invalidate(!0)},o}(t.HashObject);e.Player=o,t.registerClass(o,"egret.sys.Player");var h,l,u=[];e.$logToFPS=function(t){return h?void h.updateInfo(t):void u.push(t)},FPS=function(i){function n(e,n,r,s,a){i.call(this),this.isFPS=!0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0,this._stage=e,this.showFPS=n,this.showLog=r,this.logFilter=s,this.touchChildren=!1,this.touchEnabled=!1,this.styles=a,this.fpsDisplay=new t.FPSDisplay(e,n,r,s,a),this.addChild(this.fpsDisplay);try{var o=s?new RegExp(s):null}catch(h){t.log(h)}this.filter=function(t){return o?o.test(t):!s||0==t.indexOf(s)}}return __extends(n,i),n.prototype.update=function(i,n,r,s,a){var o=t.getTimer();if(this.totalTime+=o-this.lastTime,this.lastTime=o,this.totalTick++,this.drawCalls+=i,this.dirtyRatio+=n,this.costDirty+=r,this.costRender+=s,this.costTicker+=a,this.totalTime>=1e3){var h=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),e.$ticker.$frameRate),l=Math.round(this.drawCalls/this.totalTick),u=Math.round(this.dirtyRatio/this.totalTick),c=Math.round(this.costDirty/this.totalTick),d=Math.round(this.costRender/this.totalTick),f=Math.round(this.costTicker/this.totalTick);this.fpsDisplay.update({fps:h,draw:l,dirty:u,costTicker:f,costDirty:c,costRender:d}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0}},n.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},n}(t.Sprite),t.warn=function(){console.warn.apply(console,a(arguments))},t.error=function(){console.error.apply(console,a(arguments))},t.assert=function(){console.assert.apply(console,a(arguments))},t.log=function(){console.log.apply(console,a(arguments))}}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=[],n=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var e=t,n=e.prototype;return t.release=function(t){i.push(t)},t.create=function(){var e=i.pop();return e||(e=new t),e},n.setTo=function(t,e,i,n){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=n,this.updateArea(),this},n.intValues=function(){this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this.updateArea()},n.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},n.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},n.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},n.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},n.isEmpty=function(){return this.width<=0||this.height<=0},n.intersects=function(t){if(this.isEmpty())return!1;var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return e>i?!1:(e=this.minY>t.minY?this.minY:t.minY,i=this.maxY<t.maxY?this.maxY:t.maxY,i>=e)},n.updateRegion=function(t,e){if(0==t.width||0==t.height)return void this.setEmpty();var i,n,r,s,a=e,o=a.a,h=a.b,l=a.c,u=a.d,c=a.tx,d=a.ty,f=t.x,g=t.y,p=f+t.width,v=g+t.height;if(1==o&&0==h&&0==l&&1==u)i=f+c-1,n=g+d-1,r=p+c+1,s=v+d+1;else{var $=o*f+l*g+c,y=h*f+u*g+d,m=o*p+l*g+c,T=h*p+u*g+d,x=o*p+l*v+c,b=h*p+u*v+d,_=o*f+l*v+c,E=h*f+u*v+d,F=0;$>m&&(F=$,$=m,m=F),x>_&&(F=x,x=_,_=F),i=(x>$?$:x)-1,r=(m>_?m:_)+1,y>T&&(F=y,y=T,T=F),b>E&&(F=b,b=E,E=F),n=(b>y?y:b)-1,s=(T>E?T:E)+1}this.minX=i,this.minY=n,this.maxX=r,this.maxY=s,this.width=r-i,this.height=s-n,this.area=this.width*this.height},t}();e.Region=n,t.registerClass(n,"egret.sys.Region")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this)}__extends(i,e);var n=i,r=n.prototype;return r.calculateStageSize=function(e,i,n,r,s){var a=i,o=n,h=r,l=s,u=i/h||0,c=n/l||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(n/u);break;case t.StageScaleMode.NO_BORDER:u>c?o=Math.round(l*u):a=Math.round(h*c);break;case t.StageScaleMode.SHOW_ALL:u>c?a=Math.round(h*c):o=Math.round(l*u);break;case t.StageScaleMode.FIXED_NARROW:u>c?h=Math.round(i/c):l=Math.round(n/u);break;case t.StageScaleMode.FIXED_WIDE:u>c?l=Math.round(n/u):h=Math.round(i/c);break;default:h=i,l=n}return a%2!=0&&(a+=1),o%2!=0&&(o+=1),{stageWidth:h,stageHeight:l,displayWidth:a,displayHeight:o}},i}(t.HashObject);e.DefaultScreenAdapter=i,t.registerClass(i,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,t.registerClass(e,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$START_TIME=0,e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,e.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}var n=i,r=n.prototype;return r.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},r.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},r.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},r.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},r.getTickIndex=function(t,e){for(var i=this.callBackList,n=this.thisObjectList,r=i.length-1;r>=0;r--)if(i[r]==t&&n[r]==e)return r;return-1},r.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},r.$setFrameRate=function(e){return e=+e||0,0>=e?!1:this.$frameRate==e?!1:(this.$frameRate=e,e>60&&(e=60),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(egret_native.setFrameRate(e),e=60),this.frameDeltaTime=1e3/e,this.lastCount=this.frameInterval=Math.round(6e4/e),!0)},r.update=function(){for(var i=t.getTimer(),n=this.callBackList,r=this.thisObjectList,s=n.length,a=e.$requestRenderingFlag,o=t.getTimer(),h=0;s>h;h++)n[h].call(r[h],o)&&(a=!0);var l=t.getTimer(),u=o-this.lastTimeStamp;if(u>=this.frameDeltaTime)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return void(a&&this.render(!1,this.costEnterFrame+l-i));this.lastCount+=this.frameInterval}this.lastTimeStamp=o,this.render(!0,this.costEnterFrame+l-i);var c=t.getTimer();this.broadcastEnterFrame();var d=t.getTimer();this.costEnterFrame=d-c},r.render=function(t,i){var n=this.playerList,r=n.length;if(0!=r){e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var s=0;r>s;s++)n[s].$render(t,i);e.$requestRenderingFlag=!1}},r.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.ENTER_FRAME)}},r.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.RENDER)}},i}();e.SystemTicker=i,t.registerClass(i,"egret.sys.SystemTicker"),e.$ticker=new e.SystemTicker}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret_stages,egret;!function(t){var e;!function(e){var i=function(e){function i(t){e.call(this),this.maxTouches=0,this.useTouchesCount=0,this.touchDownTarget={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(i,e);var n=i,r=n.prototype;return r.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches
},r.onTouchBegin=function(e,i,n){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);null==this.touchDownTarget[n]&&(this.touchDownTarget[n]=r,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,n,!0)}},r.onTouchMove=function(e,i,n){if(null!=this.touchDownTarget[n]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,n,!0)}},r.onTouchEnd=function(e,i,n){if(null!=this.touchDownTarget[n]){var r=this.findTarget(e,i),s=this.touchDownTarget[n];delete this.touchDownTarget[n],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_END,!0,!0,e,i,n,!1),s==r?t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,n,!1):t.TouchEvent.dispatchTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,n,!1)}},r.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,t.registerClass(i,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function i(){this.type=0,this.needRedraw=!1,this.renderAlpha=1,this.renderVisible=!0,this.renderMatrix=new t.Matrix,this.renderRegion=new e.Region,this.moved=!1,this.drawData=[],this.renderCount=0}var n=i,r=n.prototype;return r.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},r.$getRenderCount=function(){return this.renderCount},i}();e.RenderNode=i,t.registerClass(i,"egret.sys.RenderNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this),this.image=null,this.smoothing=!0,this.blendMode=null,this.type=1}__extends(i,e);var n=i,r=n.prototype;return r.drawImage=function(t,e,i,n,r,s,a,o){this.drawData.push(t,e,i,n,r,s,a,o),this.renderCount++},r.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i.$updateTextureData=function(e,n,r,s,a,o,h,l,u,c,d,f,g,p,v,$,y){if(n){var m=t.$TextureScaleFactor;if(e.smoothing=y,e.image=n,e.imageWidth=g,e.imageHeight=p,v)i.$updateTextureDataWithScale9Grid(e,v,r,s,a,o,h,l,u,c,d,f);else if($==t.BitmapFillMode.SCALE){var T=d/u,x=f/c;e.drawImage(r,s,a,o,h*T,l*x,T*a,x*o)}else if($==t.BitmapFillMode.CLIP){var b=Math.min(u,d),_=Math.min(c,f),E=a*m,F=o*m;i.drawClipImage(e,m,r,s,E,F,h,l,b,_)}else for(var E=a*m,F=o*m,C=0;d>C;C+=u)for(var w=0;f>w;w+=c){var b=Math.min(d-C,u),_=Math.min(f-w,c);i.drawClipImage(e,m,r,s,E,F,h,l,b,_,C,w)}}},i.$updateTextureDataWithScale9Grid=function(e,i,n,r,s,a,o,h,l,u,c,d){var f=s,g=a;c-=l-s*t.$TextureScaleFactor,d-=u-a*t.$TextureScaleFactor;var p=i.x-o,v=i.y-h,$=p/t.$TextureScaleFactor,y=v/t.$TextureScaleFactor,m=i.width/t.$TextureScaleFactor,T=i.height/t.$TextureScaleFactor;0==T&&(T=1,y>=g&&y--),0==m&&(m=1,$>=f&&$--);var x=n,b=x+$,_=b+m,E=f-$-m,F=r,C=F+y,w=C+T,R=g-y-T,S=E*t.$TextureScaleFactor,D=R*t.$TextureScaleFactor;if(($+E)*t.$TextureScaleFactor>c||(y+R)*t.$TextureScaleFactor>d)return void e.drawImage(n,r,s,a,o,h,c,d);var O=o,L=O+p,M=O+(c-S),N=c-p-S,A=h,I=A+v,B=A+d-D,P=d-v-D;y>0&&($>0&&e.drawImage(x,F,$,y,O,A,p,v),m>0&&e.drawImage(b,F,m,y,L,A,N,v),E>0&&e.drawImage(_,F,E,y,M,A,S,v)),T>0&&($>0&&e.drawImage(x,C,$,T,O,I,p,P),m>0&&e.drawImage(b,C,m,T,L,I,N,P),E>0&&e.drawImage(_,C,E,T,M,I,S,P)),R>0&&($>0&&e.drawImage(x,w,$,R,O,B,p,D),m>0&&e.drawImage(b,w,m,R,L,B,N,D),E>0&&e.drawImage(_,w,E,R,M,B,S,D))},i.drawClipImage=function(t,e,i,n,r,s,a,o,h,l,u,c){void 0===u&&(u=0),void 0===c&&(c=0);var d=a+r-h;d>0&&(r-=d),d=o+s-l,d>0&&(s-=d),t.drawImage(i,n,r/e,s/e,u+a,c+o,r,s)},i}(e.RenderNode);e.BitmapNode=i,t.registerClass(i,"egret.sys.BitmapNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=["none","round","square"],n=["bevel","miter","round"],r=function(r){function s(){r.call(this),this.dirtyRender=!0,this.type=3}__extends(s,r);var a=s,o=a.prototype;return o.beginFill=function(t,i,n){void 0===i&&(i=1);var r=new e.FillPath;if(r.fillColor=t,r.fillAlpha=i,n){var s=this.drawData.lastIndexOf(n);this.drawData.splice(s,0,r)}else this.drawData.push(r);return r},o.beginGradientFill=function(i,n,r,s,a,o){var h=new t.Matrix;a?(h.a=819.2*a.a,h.b=819.2*a.b,h.c=819.2*a.c,h.d=819.2*a.d,h.tx=a.tx,h.ty=a.ty):(h.a=100,h.d=100);var l=new e.GradientFillPath;if(l.gradientType=i,l.colors=n,l.alphas=r,l.ratios=s,l.matrix=h,o){var u=this.drawData.lastIndexOf(o);this.drawData.splice(u,0,l)}else this.drawData.push(l);return l},o.lineStyle=function(r,s,a,o,h,l){void 0===a&&(a=1),void 0===l&&(l=3),-1==i.indexOf(o)&&(o="round"),-1==n.indexOf(h)&&(h="round");var u=new e.StrokePath;return u.lineWidth=r,u.lineColor=s,u.lineAlpha=a,u.caps=o||t.CapsStyle.ROUND,u.joints=h,u.miterLimit=l,this.drawData.push(u),u},o.clear=function(){this.drawData.length=0,this.dirtyRender=!0},o.cleanBeforeRender=function(){},s}(e.RenderNode);e.GraphicsNode=r,t.registerClass(r,"egret.sys.GraphicsNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=4}__extends(e,t);var i=e,n=i.prototype;return n.addNode=function(t){this.drawData.push(t)},n.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;e>=0;e--)t[e].cleanBeforeRender()},n.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;i>=0;i--)t+=e[i].$getRenderCount();return t},e}(e.RenderNode);e.GroupNode=i,t.registerClass(i,"egret.sys.GroupNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this),this.image=null,this.smoothing=!0,this.bounds=new t.Rectangle,this.type=7,this.vertices=[],this.uvs=[],this.indices=[]}__extends(i,e);var n=i,r=n.prototype;return r.drawMesh=function(t,e,i,n,r,s,a,o){this.drawData.push(t,e,i,n,r,s,a,o),this.renderCount++},r.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i}(e.RenderNode);e.MeshNode=i,t.registerClass(i,"egret.sys.MeshNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=6}__extends(e,t);var i=e,n=i.prototype;return n.setAlpha=function(t){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t),this.renderCount++},e}(e.RenderNode);e.SetAlphaNode=i,t.registerClass(i,"egret.sys.SetAlphaNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.textColor=16777215,this.strokeColor=0,this.size=30,this.stroke=0,this.bold=!1,this.italic=!1,this.fontFamily="Arial",this.dirtyRender=!0,this.type=2}__extends(e,t);var i=e,n=i.prototype;return n.drawText=function(t,e,i,n){this.drawData.push(t,e,i,n),this.renderCount++,this.dirtyRender=!0},n.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this)},e}(e.RenderNode);e.TextNode=i,t.registerClass(i,"egret.sys.TextNode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0}var e=t,i=e.prototype;return i.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},i.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},i.curveTo=function(t,e,i,n){this.$commands[this.commandPosition++]=3;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.$data[r++]=i,this.$data[r++]=n,this.dataPosition=r},i.cubicCurveTo=function(t,e,i,n,r,s){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=i,this.$data[a++]=n,this.$data[a++]=r,this.$data[a++]=s,this.dataPosition=a},i.drawRect=function(t,e,i,n){var r=t+i,s=e+n;this.moveTo(t,e),this.lineTo(r,e),this.lineTo(r,s),this.lineTo(t,s),this.lineTo(t,e)},i.drawRoundRect=function(t,e,i,n,r,s){var a=.5*r|0,o=s?.5*s|0:a;if(!a||!o)return void this.drawRect(t,e,i,n);var h=.5*i,l=.5*n;if(a>h&&(a=h),o>l&&(o=l),h===a&&l===o)return void(a===o?this.drawCircle(t+a,e+o,a):this.drawEllipse(t,e,2*a,2*o));var u=t+i,c=e+n,d=t+a,f=u-a,g=e+o,p=c-o;this.moveTo(u,p),this.curveTo(u,c,f,c),this.lineTo(d,c),this.curveTo(t,c,t,p),this.lineTo(t,g),this.curveTo(t,e,d,e),this.lineTo(f,e),this.curveTo(u,e,u,g),this.lineTo(u,p)},i.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},i.drawEllipse=function(t,e,i,n){var r=.5*i,s=.5*n;t+=r,e+=s,this.arcToBezier(t,e,r,s,0,2*Math.PI)},i.drawArc=function(t,e,i,n,r,s){s?r>=n&&(r-=2*Math.PI):n>=r&&(r+=2*Math.PI),this.arcToBezier(t,e,i,i,n,r,s)},i.arcToBezier=function(t,e,i,n,r,s,a){var o=.5*Math.PI,h=r,l=h;a?(l+=-o-h%o,s>l&&(l=s)):(l+=o-h%o,l>s&&(l=s));var u=t+Math.cos(h)*i,c=e+Math.sin(h)*n;this.moveTo(u,c);for(var d=Math.cos(h),f=Math.sin(h),g=0;4>g;g++){var p=l-h,v=4*Math.tan(p/4)/3,$=u-f*v*i,y=c+d*v*n;d=Math.cos(l),f=Math.sin(l),u=t+d*i,c=e+f*n;var m=u+f*v*i,T=c-d*v*n;if(this.cubicCurveTo($,y,m,T,u,c),l===s)break;h=l,a?(l=h-o,s>l&&(l=s)):(l=h+o,l>s&&(l=s))}},t}();e.Path2D=i,t.registerClass(i,"egret.sys.Path2D")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=1}__extends(e,t);var i=e;i.prototype;return e}(e.Path2D);e.FillPath=i,t.registerClass(i,"egret.sys.FillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=2}__extends(e,t);var i=e;i.prototype;return e}(e.Path2D);e.GradientFillPath=i,t.registerClass(i,"egret.sys.GradientFillPath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(t){function e(){t.call(this),this.type=3}__extends(e,t);var i=e;i.prototype;return e}(e.Path2D);e.StrokePath=i,t.registerClass(i,"egret.sys.StrokePath")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t,e){var i=null==e.italic?t.italic:e.italic,n=null==e.bold?t.bold:e.bold,r=null==e.size?t.size:e.size,s=e.fontFamily||t.fontFamily,a=i?"italic ":"normal ";return a+=n?"bold ":"normal ",a+=r+"px "+s}function i(t,e){var i=t>>16,n=t>>8&255,r=255&t;return"rgba("+i+","+n+","+r+","+e+")"}function n(e,n,r,s,a,o){var h;h=n==t.GradientType.LINEAR?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(0,0,0,0,0,1);for(var l=r.length,u=0;l>u;u++)h.addColorStop(a[u]/255,i(r[u],s[u]));return h}function r(t,e,i,n){for(var r=n[0],s=n[1],a=n[2],o=n[3],h=n[4],l=n[5],u=n[6],c=n[7],d=n[8],f=n[9],g=n[10],p=n[11],v=n[12],$=n[13],y=n[14],m=n[15],T=n[16],x=n[17],b=n[18],_=n[19],E=0,F=e*i*4;F>E;E+=4){var C=t[E+0],w=t[E+1],R=t[E+2],S=t[E+3];t[E+0]=r*C+s*w+a*R+o*S+h,t[E+1]=l*C+u*w+c*R+d*S+f,t[E+2]=g*C+p*w+v*R+$*S+y,t[E+3]=m*C+T*w+x*R+b*S+_}}function s(t,e,i,n,r){a(t,e,i,n),o(t,e,i,r)}function a(t,e,i,n){for(var r=new Uint8ClampedArray(4*e),s=4*e,a=2*n+1,o=0;i>o;o++){for(var h=o*s,l=0,u=0,c=0,d=0,f=0,g=0,p=4*-n,v=4*n+4;v>p;p+=4){var $=h+p;h>$||$>=h+s||(f=t[$+3],l+=t[$+0]*f,u+=t[$+1]*f,c+=t[$+2]*f,d+=f)}for(var p=h,v=h+s,y=0,m=p-4*n,T=p+4*(n+1);v>p;p+=4,y+=4,T+=4,m+=4)r[y+0]=l/d,r[y+1]=u/d,r[y+2]=c/d,r[y+3]=d/a,f=t[T+3],g=t[m+3],f||0==f?g||0==g?(l+=t[T+0]*f-t[m+0]*g,u+=t[T+1]*f-t[m+1]*g,c+=t[T+2]*f-t[m+2]*g,d+=f-g):(l+=t[T+0]*f,u+=t[T+1]*f,c+=t[T+2]*f,d+=f):(g||0==g)&&(l+=-t[m+0]*g,u+=-t[m+1]*g,c+=-t[m+2]*g,d+=-g);t.set(r,h)}}function o(t,e,i,n){for(var r=new Uint8ClampedArray(4*i),s=4*e,a=2*n+1,o=0;e>o;o++){for(var h=4*o,l=0,u=0,c=0,d=0,f=0,g=0,p=-n*s,v=n*s+s;v>p;p+=s){var $=h+p;h>$||$>=h+i*s||(f=t[$+3],l+=t[$+0]*f,u+=t[$+1]*f,c+=t[$+2]*f,d+=f)}for(var p=h,v=h+i*s,y=0,m=h-n*s,T=h+(n+1)*s;v>p;p+=s,y+=4,T+=s,m+=s)r[y+0]=l/d,r[y+1]=u/d,r[y+2]=c/d,r[y+3]=d/a,f=t[T+3],g=t[m+3],f||0==f?g||0==g?(l+=t[T+0]*f-t[m+0]*g,u+=t[T+1]*f-t[m+1]*g,c+=t[T+2]*f-t[m+2]*g,d+=f-g):(l+=t[T+0]*f,u+=t[T+1]*f,c+=t[T+2]*f,d+=f):(g||0==g)&&(l+=-t[m+0]*g,u+=-t[m+1]*g,c+=-t[m+2]*g,d+=-g);for(var x=4*o,v=x+i*s,b=0;v>x;x+=s,b+=4)t[x+0]=r[b+0],t[x+1]=r[b+1],t[x+2]=r[b+2],t[x+3]=r[b+3]}}function h(t,e,i,n,r,a,o,h,f){var g=l(t,n);u(g,e,i,o,h),s(g,e,i,r,a),c(g,f),d(g,t),t.set(g)}function l(t,e){e||(e=[0,0,0,0]);for(var i=new Uint8ClampedArray(t),n=0,r=i.length;r>n;n+=4){var s=i[n+3];i[n+0]=e[0]*s,i[n+1]=e[1]*s,i[n+2]=e[2]*s}return i}function u(t,e,i,n,r){for(var s=Math.sin(n)*r|0,a=Math.cos(n)*r|0,o=new Int32Array(t.buffer),h=new Int32Array(o.length),l=0;i>l;l++){var u=l+s;if(!(0>u||u>i))for(var c=0;e>c;c++){var d=c+a;0>d||d>e||(h[u*e+d]=o[l*e+c])}}o.set(h)}function c(t,e){for(var i=0,n=t.length;n>i;i+=4)t[i+3]*=e}function d(t,e){for(var i=0,n=t.length;n>i;i+=4){var r=t[i+0],s=t[i+1],a=t[i+2],o=t[i+3]/255,h=e[i+0],l=e[i+1],u=e[i+2],c=e[i+3]/255;t[i+0]=h+r*(1-c),t[i+1]=l+s*(1-c),t[i+2]=u+a*(1-c),t[i+3]=255*(c+o*(1-c))}}var f=["source-over","lighter","destination-out"],g="source-over",p="#000000",v={none:"butt",square:"square",round:"round"},$=[],y=function(){function a(){this.nestLevel=0,this.renderingMask=!1}var o=a,l=o.prototype;return l.render=function(t,e,i,n,r){this.nestLevel++;var s=e.context,a=r?t:null,o=this.drawDisplayObject(t,s,n,i,null,null,a);if(this.nestLevel--,0===this.nestLevel){$.length>6&&($.length=6);for(var h=$.length,l=0;h>l;l++)$[l].resize(0,0)}return o},l.drawDisplayObject=function(e,i,n,r,s,a,o){var h,l=0;if(s&&!o?(s.isDirty&&(l+=s.drawToSurface()),h=s.$renderNode):h=e.$getRenderNode(),h){if(n){var u=h.renderRegion;if(a&&!a.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var c=n.length,d=0;c>d;d++)if(u.intersects(n[d])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){var f,g;o?(f=e.$getConcatenatedAlphaAt(o,e.$getConcatenatedAlpha()),g=t.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(o,g),r.$preMultiplyInto(g,g),i.setTransform(g.a,g.b,g.c,g.d,g.tx,g.ty),t.Matrix.release(g)):(f=h.renderAlpha,g=h.renderMatrix,i.setTransform(g.a,g.b,g.c,g.d,g.tx+r.tx,g.ty+r.ty)),i.globalAlpha=f,l+=this.renderNode(h,i),h.needRedraw=!1}}if(s&&!o)return l;var p=e.$children;if(p)for(var v=p.length,$=0;v>$;$++){var y=p[$];if(!(!y.$visible||y.$alpha<=0||y.$maskedObject)){var m=y.$getFilters();m&&m.length>0?l+=this.drawWithFilter(y,i,n,r,a,o):0!==y.$blendMode||y.$mask&&(y.$mask.$parentDisplayList||o)?l+=this.drawWithClip(y,i,n,r,a,o):y.$scrollRect||y.$maskRect?l+=this.drawWithScrollRect(y,i,n,r,a,o):y.isFPS?this.drawDisplayObject(y,i,n,r,y.$displayList,a,o):l+=this.drawDisplayObject(y,i,n,r,y.$displayList,a,o)}}return l},l.drawWithFilter=function(e,i,n,a,o,l){var u=0,c=e.$getFilters(),d=c.length,p=0!==e.$blendMode;if(p){var v=f[e.$blendMode];v||(v=g)}var y=t.Matrix.create();y.copyFrom(e.$getConcatenatedMatrix());var m;m=t.sys.Region.create();var T=e.$getOriginalBounds();m.updateRegion(T,y);var x=this.createRenderBuffer(m.width,m.height),b=x.context;b.setTransform(1,0,0,1,-m.minX,-m.minY);var _=t.Matrix.create().setTo(1,0,0,1,-m.minX,-m.minY);if(u+=this.drawDisplayObject(e,b,n,_,e.$displayList,m,l),t.Matrix.release(_),u>0){p&&(i.globalCompositeOperation=v),u++,i.globalAlpha=1,i.setTransform(1,0,0,1,m.minX+a.tx,m.minY+a.ty);for(var E=b.getImageData(0,0,x.surface.width,x.surface.height),F=0;d>F;F++){var C=c[F];if("colorTransform"==C.type)r(E.data,x.surface.width,x.surface.height,C.$matrix);else if("blur"==C.type)s(E.data,x.surface.width,x.surface.height,C.$blurX,C.$blurY);else if("glow"==C.type){var w=C.$red,R=C.$green,S=C.$blue,D=C.$alpha;h(E.data,x.surface.width,x.surface.height,[w,R,S,D],C.$blurX,C.$blurY,C.$angle||0,C.$distance||0,C.$strength)}}b.putImageData(E,0,0),i.drawImage(x.surface,0,0),p&&(i.globalCompositeOperation=g)}return $.push(x),t.sys.Region.release(m),t.Matrix.release(y),u},l.drawWithClip=function(e,i,n,r,s,a){var o=0,h=0!==e.$blendMode;if(h){var l=f[e.$blendMode];l||(l=g)}var u=e.$scrollRect?e.$scrollRect:e.$maskRect,c=e.$mask;if(c){var d=c.$getRenderNode();if(d){var p=d.renderMatrix;if(0==p.a&&0==p.b||0==p.c&&0==p.d)return o}}var v,y=t.Matrix.create();if(y.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var m,T=e.$parentDisplayList.root;T!==e.$stage&&e.$getConcatenatedMatrixAt(T,y)}if(c){var x=c.$getOriginalBounds();v=t.sys.Region.create();var b=t.Matrix.create();b.copyFrom(c.$getConcatenatedMatrix()),m&&m.$preMultiplyInto(b,b),v.updateRegion(x,b),t.Matrix.release(b)}var _;if(u&&(_=t.sys.Region.create(),_.updateRegion(u,y)),_&&v?(_.intersect(v),t.sys.Region.release(v)):!_&&v&&(_=v),_){if(_.isEmpty()||s&&!s.intersects(_))return t.sys.Region.release(_),t.Matrix.release(y),o}else _=t.sys.Region.create(),x=e.$getOriginalBounds(),_.updateRegion(x,y);var E=!1;if(n){for(var F=n.length,C=0;F>C;C++)if(_.intersects(n[C])){E=!0;break}}else E=!0;if(!E)return t.sys.Region.release(_),t.Matrix.release(y),o;if(!(c||e.$children&&0!=e.$children.length)){if(u){var b=y;i.save(),i.setTransform(b.a,b.b,b.c,b.d,b.tx-_.minX,b.ty-_.minY),i.beginPath(),i.rect(u.x,u.y,u.width,u.height),i.clip()}return h&&(i.globalCompositeOperation=l),o+=this.drawDisplayObject(e,i,n,r,e.$displayList,s,a),h&&(i.globalCompositeOperation=g),u&&i.restore(),o}if(c&&t.Capabilities.$runtimeType==t.RuntimeType.WEB&&(!c.$children||0==c.$children.length)&&d&&3==d.type&&1==d.drawData.length&&1==d.drawData[0].type&&1==d.drawData[0].fillAlpha){this.renderingMask=!0,i.save();var w=this.drawDisplayObject(c,i,n,r,c.$displayList,s,a);if(this.renderingMask=!1,u){var b=y;i.setTransform(b.a,b.b,b.c,b.d,b.tx-_.minX,b.ty-_.minY),i.beginPath(),i.rect(u.x,u.y,u.width,u.height),i.clip()}return w+=this.drawDisplayObject(e,i,n,r,e.$displayList,s,a),i.restore(),w}var R=this.createRenderBuffer(_.width,_.height),S=R.context;if(!S)return o+=this.drawDisplayObject(e,i,n,r,e.$displayList,s,a),t.sys.Region.release(_),t.Matrix.release(y),o;S.setTransform(1,0,0,1,-_.minX,-_.minY);var D=t.Matrix.create().setTo(1,0,0,1,-_.minX,-_.minY);if(o+=this.drawDisplayObject(e,S,n,D,e.$displayList,_,a),c)if(t.Capabilities.$runtimeType==t.RuntimeType.WEB&&d&&1==d.$getRenderCount()||c.$displayList)S.globalCompositeOperation="destination-in",o+=this.drawDisplayObject(c,S,n,D,c.$displayList,_,a);else{var O=this.createRenderBuffer(_.width,_.height),L=O.context;if(!L)return o+=this.drawDisplayObject(e,i,n,r,e.$displayList,s,a),$.push(R),t.sys.Region.release(_),t.Matrix.release(y),o;L.setTransform(1,0,0,1,-_.minX,-_.minY),D=t.Matrix.create().setTo(1,0,0,1,-_.minX,-_.minY);var w=this.drawDisplayObject(c,L,n,D,c.$displayList,_,a);w>0&&(o+=w,S.globalCompositeOperation="destination-in",S.setTransform(1,0,0,1,0,0),S.globalAlpha=1,S.drawImage(O.surface,0,0)),$.push(O)}if(t.Matrix.release(D),o>0){if(o++,h&&(i.globalCompositeOperation=l),u){var b=y;i.save(),i.setTransform(b.a,b.b,b.c,b.d,b.tx-_.minX,b.ty-_.minY),i.beginPath(),i.rect(u.x,u.y,u.width,u.height),i.clip()}i.globalAlpha=1,i.setTransform(1,0,0,1,_.minX+r.tx,_.minY+r.ty),i.drawImage(R.surface,0,0),u&&i.restore(),h&&(i.globalCompositeOperation=g)}return $.push(R),t.sys.Region.release(_),t.Matrix.release(y),o},l.drawWithScrollRect=function(e,i,n,r,s,a){var o=0,h=e.$scrollRect?e.$scrollRect:e.$maskRect;if(0==h.width||0==h.height)return o;var l=t.Matrix.create();if(l.copyFrom(e.$getConcatenatedMatrix()),a)e.$getConcatenatedMatrixAt(a,l);else if(e.$parentDisplayList){var u=e.$parentDisplayList.root;u!==e.$stage&&e.$getConcatenatedMatrixAt(u,l)}var c=t.sys.Region.create();if(h.isEmpty()||c.updateRegion(h,l),c.isEmpty()||s&&!s.intersects(c))return t.sys.Region.release(c),t.Matrix.release(l),o;var d=!1;if(n){for(var f=n.length,g=0;f>g;g++)if(c.intersects(n[g])){d=!0;break}}else d=!0;return d?(i.save(),i.setTransform(l.a,l.b,l.c,l.d,l.tx+r.tx,l.ty+r.ty),i.beginPath(),i.rect(h.x,h.y,h.width,h.height),i.clip(),o+=this.drawDisplayObject(e,i,n,r,e.$displayList,c,a),i.restore(),t.sys.Region.release(c),t.Matrix.release(l),o):(t.sys.Region.release(c),t.Matrix.release(l),o)},l.drawNodeToBuffer=function(t,e,i,n){var r=e.context;r.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,r,n)},l.renderNode=function(t,e,i){var n=0;switch(t.type){case 1:n=this.renderBitmap(t,e);break;case 2:n=1,this.renderText(t,e);break;case 3:n=1,this.renderGraphics(t,e,i);break;case 4:n=this.renderGroup(t,e);break;case 6:e.globalAlpha=t.drawData[0]}return n},l.renderBitmap=function(t,e){var i=t.image;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var n=t.drawData,r=n.length,s=0,a=t.matrix,o=t.blendMode,h=!1;a&&(e.saveTransform?e.saveTransform():e.save(),h=!0,e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty)),o&&(e.globalCompositeOperation=f[o]);for(var l=0;r>s;)l++,e.drawImage(i,n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++],n[s++]);return h?e.restoreTransform?(e.restoreTransform(),o&&(e.globalCompositeOperation=g)):e.restore():o&&(e.globalCompositeOperation=g),l},l.renderText=function(i,n){n.textAlign="left",n.textBaseline="middle",n.lineJoin="round";for(var r=i.drawData,s=r.length,a=0;s>a;){var o=r[a++],h=r[a++],l=r[a++],u=r[a++];n.font=e(i,u);var c=null==u.textColor?i.textColor:u.textColor,d=null==u.strokeColor?i.strokeColor:u.strokeColor,f=null==u.stroke?i.stroke:u.stroke;n.fillStyle=t.toColorString(c),n.strokeStyle=t.toColorString(d),f&&(n.lineWidth=2*f,n.strokeText(l,o,h)),n.fillText(l,o,h)}},l.renderGraphics=function(t,e,r){var s=t.drawData,a=s.length;r=!!r;for(var o=0;a>o;o++){var h=s[o];switch(h.type){case 1:var l=h;e.fillStyle=r?p:i(l.fillColor,l.fillAlpha),this.renderPath(h,e),this.renderingMask?e.clip():e.fill();break;case 2:var u=h;e.fillStyle=r?p:n(e,u.gradientType,u.colors,u.alphas,u.ratios,u.matrix),e.save();var c=u.matrix;this.renderPath(h,e),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),e.fill(),e.restore();break;case 3:var d=h,f=d.lineWidth;e.lineWidth=f,e.strokeStyle=r?p:i(d.lineColor,d.lineAlpha),e.lineCap=v[d.caps],e.lineJoin=d.joints,e.miterLimit=d.miterLimit;var g=1===f||3===f;g&&e.translate(.5,.5),this.renderPath(h,e),e.stroke(),g&&e.translate(-.5,-.5)}}},l.renderPath=function(t,e){e.beginPath();for(var i=t.$data,n=t.$commands,r=n.length,s=0,a=0;r>a;a++){var o=n[a];switch(o){case 4:e.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case 3:e.quadraticCurveTo(i[s++],i[s++],i[s++],i[s++]);break;case 2:e.lineTo(i[s++],i[s++]);break;case 1:e.moveTo(i[s++],i[s++])}}},l.renderGroup=function(t,e){for(var i=0,n=t.drawData,r=n.length,s=0;r>s;s++){var a=n[s];i+=this.renderNode(a,e)}return i},l.createRenderBuffer=function(e,i){var n=$.pop();return n?n.resize(e,i,!0):n=new t.sys.RenderBuffer(e,i),n},a}();t.CanvasRenderer=y,t.registerClass(y,"egret.CanvasRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={}));var egret;!function(t){t.DeviceOrientation=null}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.WEB="web",t.NATIVE="native",t}();t.RuntimeType=e,t.registerClass(e,"egret.RuntimeType");var i=function(){function t(){}var e=__define,i=t;i.prototype;return e(t,"language",function(){return t.$language}),e(t,"isMobile",function(){return t.$isMobile}),e(t,"os",function(){return t.$os}),e(t,"runtimeType",function(){return t.$runtimeType}),e(t,"supportVersion",function(){return t.$supportVersion}),t.$setNativeCapabilities=function(e){var i=e.split("-");if(i.length<=4){var n=i[0];switch(n){case"android":n="Android";break;case"ios":n="iOS"}t.$os=n;var r=i[2].substring(1,i[2].length);t.$supportVersion=r}},e(t,"renderMode",function(){return t.$renderMode}),e(t,"boundingClientWidth",function(){return t.$boundingClientWidth}),e(t,"boundingClientHeight",function(){return t.$boundingClientHeight}),t.$language="zh-CN",t.$os="Unknown",t.$runtimeType="Unknown",t.$supportVersion="Unknown",t.$renderMode="Unknown",t.$boundingClientWidth=0,t.$boundingClientHeight=0,t}();t.Capabilities=i,t.registerClass(i,"egret.Capabilities")}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};egret.Capabilities.$isMobile=testDeviceType(),egret.Capabilities.$runtimeType=testRuntimeType()?egret.RuntimeType.WEB:egret.RuntimeType.NATIVE;var egret;!function(t){var e=function(t){function e(e,i){t.call(this,e),this.firstCharHeight=0,"string"==typeof i?this.charList=this.parseConfig(i):i&&i.hasOwnProperty("frames")?this.charList=i.frames:this.charList={}}__extends(e,t);var i=e,n=i.prototype;return n.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},n.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},n._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var n=e.h;void 0===n&&(n=0);var r=e.offY;void 0===r&&(r=0),i=n+r}if(0>=i)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},n.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),n={},r=4;4+i>r;r++){var s=e[r],a=String.fromCharCode(this.getConfigByKey(s,"id")),o={};n[a]=o,o.x=this.getConfigByKey(s,"x"),o.y=this.getConfigByKey(s,"y"),o.w=this.getConfigByKey(s,"width"),o.h=this.getConfigByKey(s,"height"),o.offX=this.getConfigByKey(s,"xoffset"),o.offY=this.getConfigByKey(s,"yoffset"),o.xadvance=this.getConfigByKey(s,"xadvance")}return n},n.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,r=i.length;r>n;n++){var s=i[n];if(e==s.substring(0,e.length)){var a=s.substring(e.length+1);return parseInt(a)}}return 0},e}(t.SpriteSheet);t.BitmapFont=e,t.registerClass(e,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,this.$lineHeights=[],this.$renderNode=new t.sys.BitmapNode,this.$BitmapText={0:0/0,1:0/0,2:"",3:0,4:0,5:null,6:!1,7:!1,8:!1,9:!1,10:"left",11:"top",12:t.Bitmap.defaultSmoothing}}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"smoothing",function(){var t=this.$BitmapText;return t[12]},function(t){t=!!t;var e=this.$BitmapText;t!=e[12]&&(e[12]=t,this.$invalidate())}),n(s,"text",function(){return this.$BitmapText[2]},function(t){this.$setText(t)}),s.$setText=function(t){t=String(t);var e=this.$BitmapText;return t==e[2]?!1:(e[2]=t,this.$invalidateContentBounds(),!0)},s.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},s.$setWidth=function(t){var e=this.$BitmapText;return 0>t||t==e[0]?!1:(e[0]=t,this.$invalidateContentBounds(),!0)},s.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},s.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},s.$setHeight=function(t){var e=this.$BitmapText;return 0>t||t==e[1]?!1:(e[1]=t,this.$invalidateContentBounds(),!0)},n(s,"font",function(){return this.$BitmapText[5]},function(t){this.$setFont(t)}),s.$setFont=function(t){var e=this.$BitmapText;return e[5]==t?!1:(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds(),!0)},n(s,"lineSpacing",function(){return this.$BitmapText[3]},function(t){this.$setLineSpacing(t)}),s.$setLineSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[3]==t?!1:(e[3]=t,this.$invalidateContentBounds(),!0)},n(s,"letterSpacing",function(){return this.$BitmapText[4]},function(t){this.$setLetterSpacing(t)}),s.$setLetterSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[4]==t?!1:(e[4]=t,this.$invalidateContentBounds(),!0)},n(s,"textAlign",function(){return this.$BitmapText[10]},function(t){this.$setTextAlign(t)}),s.$setTextAlign=function(t){var e=this.$BitmapText;return e[10]==t?!1:(e[10]=t,this.$invalidateContentBounds(),!0)},n(s,"verticalAlign",function(){return this.$BitmapText[11]},function(t){this.$setVerticalAlign(t)}),s.$setVerticalAlign=function(t){var e=this.$BitmapText;return e[11]==t?!1:(e[11]=t,this.$invalidateContentBounds(),!0)},s.$render=function(){var e=this.$BitmapText,n=this.$getTextLines(),r=n.length;if(0!=r){var s=this.$textLinesWidth,a=e[5],o=this.$renderNode;a.$texture&&(o.image=a.$texture._bitmapData),o.smoothing=e[12];for(var h=a._getFirstCharHeight(),l=Math.ceil(h*i.EMPTY_FACTOR),u=!isNaN(e[1]),c=e[8],d=e[0],f=e[1],g=e[10],p=this.$textOffsetY+this.$textStartY,v=this.$lineHeights,$=0;r>$;$++){var y=v[$];if(u&&$>0&&p+y>f)break;var m=n[$],T=m.length,x=this.$textOffsetX;if(g!=t.HorizontalAlign.LEFT){var b=d>c?d:c;g==t.HorizontalAlign.RIGHT?x+=b-s[$]:g==t.HorizontalAlign.CENTER&&(x+=Math.floor((b-s[$])/2))}for(var _=0;T>_;_++){var E=m.charAt(_),F=a.getTexture(E);if(F){var C=F._bitmapWidth,w=F._bitmapHeight;o.imageWidth=F._sourceWidth,o.imageHeight=F._sourceHeight,o.drawImage(F._bitmapX,F._bitmapY,C,w,x+F._offsetX,p+F._offsetY,F.$getScaleBitmapWidth(),F.$getScaleBitmapHeight()),x+=a.getConfig(E,"xadvance")||F.$getTextureWidth()+e[4]}else" "==E?x+=l:t.$warn(1046,E)}p+=y+e[3]}}},s.$measureContentBounds=function(t){var e=this.$getTextLines();0==e.length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$BitmapText[8]-this.$textOffsetX,this.$BitmapText[9]-this.$textOffsetY)},n(s,"textWidth",function(){return this.$getTextLines(),this.$BitmapText[8]}),n(s,"textHeight",function(){return this.$getTextLines(),this.$BitmapText[9]}),s.$getTextLines=function(){function e(t){return p&&r.length>0&&u>p?!1:(u+=C+o,R||S||(w-=h),r.push(t),a.push(C),s.push(w),l=Math.max(w,l),!0)}var n=this.$BitmapText;if(!n[7])return this.textLines;var r=[];this.textLines=r;var s=[];this.$textLinesWidth=s,n[7]=!1;var a=[];if(this.$lineHeights=a,!n[2]||!n[5])return r;for(var o=n[3],h=n[4],l=0,u=0,c=0,d=0,f=!isNaN(n[0]),g=n[0],p=n[1],v=n[5],$=v._getFirstCharHeight(),y=Math.ceil($*i.EMPTY_FACTOR),m=n[2],T=m.split(/(?:\r\n|\r|\n)/),x=T.length,b=!0,_=0;x>_;_++){for(var E=T[_],F=E.length,C=0,w=0,R=!0,S=!1,D=0;F>D;D++){R||(w+=h);var O,L,M=E.charAt(D),N=0,A=0,I=v.getTexture(M);if(I)O=I.$getTextureWidth(),L=I.$getTextureHeight(),N=I._offsetX,A=I._offsetY;else{if(" "!=M){t.$warn(1046,M),R&&(R=!1);continue}O=y,L=$}if(R&&(R=!1,c=Math.min(N,c)),b&&(b=!1,d=Math.min(A,d)),f&&D>0&&w+O>g){if(!e(E.substring(0,D)))break;E=E.substring(D),F=E.length,D=0,w=D==F-1?O:v.getConfig(M,"xadvance")||O,C=L}else w+=D==F-1?O:v.getConfig(M,"xadvance")||O,C=Math.max(L,C)}if(p&&_>0&&u>p)break;if(S=!0,!e(E))break}u-=o,n[8]=l,n[9]=u,this.$textOffsetX=c,this.$textOffsetY=d,this.$textStartX=0,this.$textStartY=0;var B;return g>l&&(B=n[10],B==t.HorizontalAlign.RIGHT?this.$textStartX=g-l:B==t.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((g-l)/2))),p>u&&(B=n[11],B==t.VerticalAlign.BOTTOM?this.$textStartY=p-u:B==t.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((p-u)/2))),r},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,t.registerClass(e,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,t.registerClass(e,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}var i=e,n=i.prototype;return n.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},n.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],n=this.replaceArr[e][1];
t=t.replace(i,n)}return t},n.parser=function(e){this.stackArray=[],this.resutlArr=[];for(var i=0,n=e.length;n>i;){var r=e.indexOf("<",i);if(0>r)this.addToResultArr(e.substring(i)),i=n;else{this.addToResultArr(e.substring(i,r));var s=e.indexOf(">",r);-1==s?(t.$error(1038),s=r):"/"==e.charAt(r+1)?this.stackArray.pop():this.addToArray(e.substring(r+1,s)),i=s+1}}return this.resutlArr},n.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.stackArray.length>0?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},n.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var n,r=0;n=t.match(this.getHeadReg());){var s=n[0],a="",t=t.substring(s.length).trim();if('"'==t.charAt(0)){var r=t.indexOf('"',1);a=t.substring(1,r),r+=1}else if("'"==t.charAt(0)){var r=t.indexOf("'",1);a=t.substring(1,r),r+=1}else a=t.match(/(\S)+/)[0],r=a.length;this.addProperty(e,s.substring(0,s.length-1).trim(),a.trim()),t=t.substring(r).trim()}}return e},n.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},n.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},n.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var n in i)null==e[n]&&(e[n]=i[n]);this.stackArray.push(e)}},e}();t.HtmlTextParser=e,t.registerClass(e,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.stageTextAdded=!1,this._text=null,this._isFocus=!1}__extends(i,e);var n=i,r=n.prototype;return r.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},r._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},r._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},r._getText=function(){return this.stageText.$getText()},r._setText=function(t){this.stageText.$setText(t)},r._setColor=function(t){this.stageText.$setColor(t)},r.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||(this._text.$isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},r.blurHandler=function(e){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},r.onMouseDownHandler=function(t){t.stopPropagation(),this.$onFocus()},r.$onFocus=function(){this._text.visible&&(this._isFocus||(this.tempStage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.$show()))},r.onStageDownHandler=function(t){this.stageText.$hide()},r.updateTextHandler=function(e){var i=this._text.$TextField,n=this.stageText.$getText(),r=!1;if(null!=i[35]){var s=new RegExp("["+i[35]+"]","g"),a=n.match(s);n=a?a.join(""):"",r=!0}null!=i[36]&&(s=new RegExp("[^"+i[36]+"]","g"),a=n.match(s),n=a?a.join(""):"",r=!0),r&&this.stageText.$getText()!=n&&this.stageText.$setText(n),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},r.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},r._hideInput=function(){this.stageText.$removeFromStage()},r.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},r._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;;){if(!i)break;if(e=e.parent,e==t)break;i=e.$visible}this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},i}(t.HashObject);t.InputController=e,t.registerClass(e,"egret.InputController")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i,r){r=r||{};var s=null==r.italic?i[16]:r.italic,a=null==r.bold?i[15]:r.bold,o=null==r.size?i[0]:r.size,h=r.fontFamily||i[8]||n.default_fontFamily;return t.sys.measureText(e,h,o,a,s)}var i=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])"),n=function(n){function r(){n.call(this),this.$inputEnabled=!1,this.inputUtils=null,this.graphicsNode=null,this.isFlow=!1,this.textArr=[],this.linesArr=[],this.$isTyping=!1;var e=new t.sys.TextNode;e.fontFamily=r.default_fontFamily,this.textNode=e,this.$renderNode=e,this.$TextField={0:30,1:0,2:16777215,3:0/0,4:0/0,5:0,6:0,7:0,8:r.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT}}__extends(r,n);var s=__define,a=r,o=a.prototype;return o.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},o.$setTouchEnabled=function(t){var e=n.prototype.$setTouchEnabled.call(this,t);return this.isInput()&&(this.$inputEnabled=!0),e},s(o,"fontFamily",function(){return this.$TextField[8]},function(t){this.$setFontFamily(t)}),o.$setFontFamily=function(t){var e=this.$TextField;return e[8]==t?!1:(e[8]=t,this.invalidateFontString(),!0)},s(o,"size",function(){return this.$TextField[0]},function(t){this.$setSize(t)}),o.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]==t?!1:(e[0]=t,this.invalidateFontString(),!0)},s(o,"bold",function(){return this.$TextField[15]},function(t){this.$setBold(t)}),o.$setBold=function(t){t=!!t;var e=this.$TextField;return t==e[15]?!1:(e[15]=t,this.invalidateFontString(),!0)},s(o,"italic",function(){return this.$TextField[16]},function(t){this.$setItalic(t)}),o.$setItalic=function(t){t=!!t;var e=this.$TextField;return t==e[16]?!1:(e[16]=t,this.invalidateFontString(),!0)},o.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},s(o,"textAlign",function(){return this.$TextField[9]},function(t){this.$setTextAlign(t)}),o.$setTextAlign=function(t){var e=this.$TextField;return e[9]==t?!1:(e[9]=t,this.$invalidateTextField(),!0)},s(o,"verticalAlign",function(){return this.$TextField[10]},function(t){this.$setVerticalAlign(t)}),o.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]==t?!1:(e[10]=t,this.$invalidateTextField(),!0)},s(o,"lineSpacing",function(){return this.$TextField[1]},function(t){this.$setLineSpacing(t)}),o.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]==t?!1:(e[1]=t,this.$invalidateTextField(),!0)},s(o,"textColor",function(){return this.$TextField[2]},function(t){this.$setTextColor(t)}),o.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]==t?!1:(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidate(),!0)},s(o,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))}),s(o,"type",function(){return this.$TextField[24]},function(t){this.$setType(t)}),o.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},s(o,"inputType",function(){return this.$TextField[37]},function(t){this.$TextField[37]=t}),s(o,"text",function(){return this.$getText()},function(t){this.$setText(t)}),o.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},o.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),!0}return!1},o.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},s(o,"displayAsPassword",function(){return this.$TextField[20]},function(t){this.$setDisplayAsPassword(t)}),o.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},s(o,"strokeColor",function(){return this.$TextField[25]},function(t){t=+t||0,this.$setStrokeColor(t)}),o.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e?(this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e),!0):!1},s(o,"stroke",function(){return this.$TextField[27]},function(t){this.$setStroke(t)}),o.$setStroke=function(t){return this.$TextField[27]!=t?(this.$invalidateTextField(),this.$TextField[27]=t,!0):!1},s(o,"maxChars",function(){return this.$TextField[21]},function(t){this.$setMaxChars(t)}),o.$setMaxChars=function(t){return this.$TextField[21]!=t?(this.$TextField[21]=t,!0):!1},s(o,"scrollV",function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()}),s(o,"maxScrollV",function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)}),s(o,"selectionBeginIndex",function(){return 0}),s(o,"selectionEndIndex",function(){return 0}),s(o,"caretIndex",function(){return 0}),o.$setSelection=function(t,e){return!1},o.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},s(o,"numLines",function(){return this.$getLinesArr(),this.$TextField[29]}),s(o,"multiline",function(){return this.$TextField[30]},function(t){this.$setMultiline(t)}),o.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},s(o,"restrict",function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}}),o.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=0/0}else{if(e[3]==t)return!1;e[3]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},o.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=0/0}else{if(e[4]==t)return!1;e[4]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),!0)},o.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},o.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},s(o,"border",function(){return this.$TextField[31]},function(t){this.$TextField[31]=!!t,this.$invalidate()}),s(o,"borderColor",function(){return this.$TextField[32]},function(t){this.$TextField[32]=+t||0,this.$invalidate()}),s(o,"background",function(){return this.$TextField[33]},function(t){this.$TextField[33]=t,this.$invalidate()}),s(o,"backgroundColor",function(){return this.$TextField[34]},function(t){this.$TextField[34]=t,this.$invalidate()}),o.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var n=this.$TextField;if(n[33]||n[31]||e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var r=new t.sys.GroupNode;r.addNode(i),r.addNode(this.textNode),this.$renderNode=r}var s,a;if(n[33]&&(s=i.beginFill(n[34]),s.drawRect(0,0,this.$getWidth(),this.$getHeight())),n[31]&&(a=i.lineStyle(1,n[32]),a.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e.length>0)for(var o=n[2],h=-1,l=e.length,u=0;l>u;u+=4){var c=e[u],d=e[u+1],f=e[u+2],g=e[u+3]||o;(0>h||h!=g)&&(h=g,a=i.lineStyle(2,g,1,t.CapsStyle.NONE)),a.moveTo(c,d),a.lineTo(c+f,d)}}if(i){var p=this.$getRenderBounds();i.x=p.x,i.y=p.y,i.width=p.width,i.height=p.height,t.Rectangle.release(p)}},o.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},o.$onRemoveFromStage=function(){n.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText()},o.$onAddToStage=function(e,i){n.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},o.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},o.$update=function(e,i){var r=this.$getRenderBounds(),s=n.prototype.$update.call(this,e,r);return t.Rectangle.release(r),s},o.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var n=2*this.$TextField[27];return n>0&&(i.width+=2*n,i.height+=2*n),i.x-=n+2,i.y-=n+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},o.$measureContentBounds=function(e){this.$getLinesArr();var i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],n=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4];e.setTo(0,0,i,n)},o.$render=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if((this.$hasAnyFlags(2032)||this.$hasAnyFlags(1648))&&this.inputUtils._updateProperties(),this.$isTyping)return}else if(0==this.$TextField[3])return;var e=this.drawText();this.fillBackground(e);var i=this.$getRenderBounds(),n=this.textNode;n.x=i.x,n.y=i.y,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),t.Rectangle.release(i)},s(o,"textFlow",function(){return this.textArr},function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var n=t[i];e+=n.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))}),o.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,n=t.length;n>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},o.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},s(o,"textWidth",function(){return this.$getLinesArr(),this.$TextField[5]}),s(o,"textHeight",function(){return this.$getLinesArr(),t.TextFieldUtils.$getTextHeight(this)}),o.appendText=function(t){this.appendElement({text:t})},o.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},o.$getLinesArr=function(){var n=this.$TextField;if(!n[18])return this.linesArr;n[18]=!1;var r=this.textArr;this.linesArr.length=0,n[6]=0,n[5]=0;var s=n[3];if(!isNaN(s)&&0==s)return n[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var a,o=this.linesArr,h=0,l=0,u=0,c=0,d=0,f=r.length;f>d;d++){var g=r[d];if(g.text){g.style=g.style||{};for(var p=g.text.toString(),v=p.split(/(?:\r\n|\r|\n)/),$=0,y=v.length;y>$;$++){null==o[c]&&(a={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},o[c]=a,h=0,u=0,l=0),u=n[24]==t.TextFieldType.INPUT?n[0]:Math.max(u,g.style.size||n[0]);var m=!0;if(""==v[$])$==y-1&&(m=!1);else{var T=e(v[$],n,g.style);if(isNaN(s))h+=T,l+=v[$].length,a.elements.push({width:T,text:v[$],style:g.style}),$==y-1&&(m=!1);else if(s>=h+T)a.elements.push({width:T,text:v[$],style:g.style}),h+=T,l+=v[$].length,$==y-1&&(m=!1);else{var x=0,b=0,_=v[$];if(n[19])var E=_.split(i);else E=_.match(/./g);for(var F=E.length,C=0;F>x&&(T=e(E[x],n,g.style),!(0!=h&&h+T>s&&h+x!=0));x++)if(b+T>s)for(var w=E[x].match(/./g),R=0,S=w.length;S>R&&(T=e(w[R],n,g.style),!(R>0&&h+T>s));R++)C+=w[R].length,b+=T,h+=T,l+=C;else C+=E[x].length,b+=T,h+=T,l+=C;if(x>0){a.elements.push({width:b,text:_.substring(0,C),style:g.style});for(var D=_.substring(C),O=0,L=D.length;L>O&&" "==D.charAt(O);O++);v[$]=D.substring(O)}""!=v[$]&&($--,m=!1)}}m&&(l++,a.hasNextLine=!0),$<v.length-1&&(a.width=h,a.height=u,a.charNum=l,n[5]=Math.max(n[5],h),n[6]+=u,c++)}d==r.length-1&&a&&(a.width=h,a.height=u,a.charNum=l,n[5]=Math.max(n[5],h),n[6]+=u)}else a&&(a.width=h,a.height=u,a.charNum=l,n[5]=Math.max(n[5],h),n[6]+=u)}return n[29]=o.length,o},o.drawText=function(){var e=this.textNode,i=this.$TextField;e.bold=i[15],e.fontFamily=i[8]||r.default_fontFamily,e.italic=i[16],e.size=i[0],e.stroke=i[27],e.strokeColor=i[25],e.textColor=i[2];var n=this.$getLinesArr();if(0==i[5])return[];var s=isNaN(i[3])?i[5]:i[3],a=t.TextFieldUtils.$getTextHeight(this),o=0,h=t.TextFieldUtils.$getStartLine(this),l=i[4];if(!isNaN(l)&&l>a){var u=t.TextFieldUtils.$getValign(this);o+=u*(l-a)}o=Math.round(o);for(var c=t.TextFieldUtils.$getHalign(this),d=0,f=[],g=h,p=i[29];p>g;g++){var v=n[g],$=v.height;if(o+=$/2,g!=h){if(i[24]==t.TextFieldType.INPUT&&!i[30])break;if(!isNaN(l)&&o>l)break}d=Math.round((s-v.width)*c);for(var y=0,m=v.elements.length;m>y;y++){var T=v.elements[y],x=T.style.size||i[0];e.drawText(d,o+($-x)/2,T.text,T.style),T.style.underline&&f.push(d,o+$/2,T.width,T.style.textColor),d+=T.width}o+=$/2+i[1]}return f},o.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var n=i.style;if(n&&n.href)if(n.href.match(/^event:/)){var r=n.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,n.href.substring(r.length))}else open(n.href,n.target||"_blank")}}},r.default_fontFamily="Arial",r}(t.DisplayObject);t.TextField=n,t.registerClass(n,"egret.TextField")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.TEXT="text",t.TEL="tel",t.PASSWORD="password",t}();t.TextFieldInputType=e,t.registerClass(e,"egret.TextFieldInputType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,t.registerClass(e,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;i.prototype;return e.$getStartLine=function(t){var i=t.$TextField,n=e.$getTextHeight(t),r=0,s=i[4];return isNaN(s)||(s>n||n>s&&(r=Math.max(i[28]-1,0),r=Math.min(i[29]-1,r)),i[30]||(r=Math.max(i[28]-1,0),i[29]>0&&(r=Math.min(i[29]-1,r)))),r},e.$getHalign=function(e){var i=e.$getLinesArr(),n=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?n=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(n=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(n=0),n},e.$getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e.$getValign=function(i){var n=e.$getTextHeight(i),r=i.$TextField[4];if(!isNaN(r)&&r>n){var s=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?s=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(s=1),s}return 0},e.$getTextElement=function(t,i,n){var r=e.$getHit(t,i,n),s=t.$getLinesArr();return r&&s[r.lineIndex]&&s[r.lineIndex].elements[r.textElementIndex]?s[r.lineIndex].elements[r.textElementIndex]:null},e.$getHit=function(t,i,n){var r=t.$getLinesArr();if(0==t.$TextField[3])return null;var s=0,a=e.$getTextHeight(t),o=0,h=t.$TextField[4];if(!isNaN(h)&&h>a){var l=e.$getValign(t);o=l*(h-a),0!=o&&(n-=o)}for(var u=e.$getStartLine(t),c=0,d=u;d<r.length;d++){var f=r[d];if(c+f.height>=n){s=d+1;break}if(c+=f.height,c+t.$TextField[1]>n)return null;c+=t.$TextField[1]}if(0==s)return null;var g=r[s-1],p=0;for(d=0;d<g.elements.length;d++){var v=g.elements[d];if(!(p+v.width<i))return{lineIndex:s-1,textElementIndex:d};p+=v.width}return null},e.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,n=t.size,r=t.lineSpacing;e=Math.floor(i/(n+r));var s=i-(n+r)*e;s>n/2&&e++}return e},e}();t.TextFieldUtils=e,t.registerClass(e,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){var e;!function(t){}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,t.registerClass(e,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,t.registerClass(e,"egret.Endian");var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}var n=__define,r=i,s=r.prototype;return s._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},s.setArrayBuffer=function(t){},n(s,"buffer",function(){return this.data.buffer},function(t){this.data=new DataView(t)}),n(s,"dataView",function(){return this.data},function(t){this.data=t,this.write_position=t.byteLength}),n(s,"bufferOffset",function(){return this.data.byteOffset}),n(s,"position",function(){return this._position},function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position}),n(s,"length",function(){return this.write_position},function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var n=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=e.buffer}),n(s,"bytesAvailable",function(){return this.data.byteLength-this._position}),s.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},s.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},s.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},s.readBytes=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),0==n)n=this.bytesAvailable;else if(!this.validate(n))return null;t?t.validateBuffer(e+n):t=new i(new ArrayBuffer(e+n));for(var r=0;n>r;r++)t.data.setUint8(r+e,this.data.getUint8(this.position++))},s.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},s.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},s.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},s.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},s.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},s.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},s.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},s.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t>0?this.readUTFBytes(t):""},s.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},s.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},s.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},s.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(!(0>e)&&!(0>i)&&(n=0==i?t.length-e:Math.min(t.length-e,i),n>0)){this.validateBuffer(n);for(var r=new DataView(t.buffer),i=n,s=4;i>s;i-=s)this.data.setUint32(this._position,r.getUint32(e)),this.position+=s,e+=s;for(;i>0;i--)this.data.setUint8(this.position++,r.getUint8(e++))}},s.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},s.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},s.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},s.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},s.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},s.writeUnsignedShort=function(t){this.validateBuffer(i.SIZE_OF_UINT16),this.data.setUint16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16},s.writeUTF=function(t){var n=this.encodeUTF8(t),r=n.length;this.validateBuffer(i.SIZE_OF_UINT16+r),this.data.setUint16(this.position,r,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(n,!1)},s.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},s.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},s._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},s.validate=function(e){return this.data.byteLength>0&&this._position+e<=this.data.byteLength?!0:void t.$error(1025)},s.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),n=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=i.buffer}},s.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),n=[];i.length>e;){var r=i[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))n.push(r);else{var s,a;for(this.inRange(r,128,2047)?(s=1,a=192):this.inRange(r,2048,65535)?(s=2,a=224):this.inRange(r,65536,1114111)&&(s=3,a=240),n.push(this.div(r,Math.pow(64,s))+a);s>0;){var o=this.div(r,Math.pow(64,s-1));n.push(128+o%64),s-=1}}}return new Uint8Array(n)},s.decodeUTF8=function(t){for(var e,i=!1,n=0,r="",s=0,a=0,o=0,h=0;t.length>n;){var l=t[n++];if(l==this.EOF_byte)e=0!=a?this.decoderError(i):this.EOF_code_point;else if(0==a)this.inRange(l,0,127)?e=l:(this.inRange(l,194,223)?(a=1,h=128,s=l-192):this.inRange(l,224,239)?(a=2,h=2048,s=l-224):this.inRange(l,240,244)?(a=3,h=65536,s=l-240):this.decoderError(i),s*=Math.pow(64,a),e=null);else if(this.inRange(l,128,191))if(o+=1,s+=(l-128)*Math.pow(64,a-o),o!==a)e=null;else{var u=s,c=h;s=0,a=0,o=0,h=0,e=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,l)}else s=0,a=0,o=0,h=0,n--,e=this.decoderError(i,l);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},s.encoderError=function(e){t.$error(1026,e)},s.decoderError=function(e,i){return e&&t.$error(1027),i||65533},s.inRange=function(t,e,i){return t>=e&&i>=t},s.div=function(t,e){return Math.floor(t/e)},s.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i==n-1)e.push(65533);else{var s=t.charCodeAt(i+1);if(this.inRange(s,56320,57343)){var a=1023&r,o=1023&s;i+=1,e.push(65536+(a<<10)+o)}else e.push(65533)}else e.push(r);i+=1}return e},i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,i}();t.ByteArray=i,t.registerClass(i,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=__define,i=t;i.prototype;return e(t,"logLevel",void 0,function(t){}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,t.registerClass(e,"egret.Logger")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;e.prototype;return t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),n=i+1,r=t.sinInt(i);if(i==e)return r;var s=t.sinInt(n);return(e-i)*s+(n-e)*r},t.sinInt=function(t){return t%=360,0>t&&(t+=360),egret_sin_map[t]},t.cos=function(e){var i=Math.floor(e),n=i+1,r=t.cosInt(i);if(i==e)return r;var s=t.cosInt(n);return(e-i)*s+(n-e)*r},t.cosInt=function(t){return t%=360,0>t&&(t+=360),egret_cos_map[t]},t}();t.NumberUtils=e,t.registerClass(e,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;360>NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r});var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.lastTimeStamp=0,this.delay=t,this.repeatCount=0|+i}__extends(i,e);var n=__define,r=i,s=r.prototype;return n(s,"delay",function(){return this._delay
},function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),n(s,"currentCount",function(){return this._currentCount}),n(s,"running",function(){return this._running}),s.reset=function(){this.stop(),this._currentCount=0},s.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=t.getTimer(),t.sys.$ticker.$startTick(this.$update,this),this._running=!0)},s.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},s.$update=function(e){var i=e-this.lastTimeStamp;if(i>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,this.lastCount>0)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=e,this._currentCount++;var n=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER),n&&(this.stop(),t.TimerEvent.dispatchTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,t.registerClass(e,"egret.Timer")}(egret||(egret={}));var egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(n)}function i(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(n)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){function e(t,e,i){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];var s,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}}),s=t.__sets__;var o=s[i];if(o)return o.apply(e,n);var h=Object.getPrototypeOf(a);if(null!=h){for(;!h.hasOwnProperty(i);)if(h=Object.getPrototypeOf(h),null==h)return;o=Object.getOwnPropertyDescriptor(h,i).set,s[i]=o,o.apply(e,n)}}function i(t,e,i){var n,r=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}}),n=t.__gets__;var s=n[i];if(s)return s.call(e);var a=Object.getPrototypeOf(r);if(null!=a){for(;!a.hasOwnProperty(i);)if(a=Object.getPrototypeOf(a),null==a)return;return s=Object.getOwnPropertyDescriptor(a,i).get,n[i]=s,s.call(e)}}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var n=t.split("."),r=n.length;e=__global;for(var s=0;r>s;s++){var a=n[s];if(e=e[a],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e}(egret||(egret={}));var __global=__global||this,egret;!function(t){}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),r=n.indexOf("("),s=n.substring(9,r);return Object.defineProperty(i,"__class__",{value:s,enumerable:!1,writable:!0}),s}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),n=Object.getPrototypeOf(i);if(!n)return null;var r=t.getQualifiedClassName(n.constructor);return r?r:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.sys.$START_TIME}t.getTimer=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return i?!0:!1}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),n=i?i.__types__:null;return n?-1!==n.indexOf(e):!1}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={}));var egret;!function(t){function e(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;i.prototype;return e.compileProgram=function(i,n,r){var s=e.compileFragmentShader(i,r),a=e.compileVertexShader(i,n),o=i.createProgram();return i.attachShader(o,a),i.attachShader(o,s),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)||t.$warn(1020),o},e.compileFragmentShader=function(t,i){return e._compileShader(t,i,t.FRAGMENT_SHADER)},e.compileVertexShader=function(t,i){return e._compileShader(t,i,t.VERTEX_SHADER)},e._compileShader=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null},e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var t=document.createElement("canvas");e.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){e.canUseWebGL=!1}return e.canUseWebGL},e.deleteWebGLTexture=function(t){if(t){var e=t.webGLTexture;if(e)for(var i in e){var n=e[i],r=n.glContext;r.deleteTexture(n)}t.webGLTexture=null}},e}();t.WebGLUtils=e,t.registerClass(e,"egret.WebGLUtils")}(egret||(egret={}));

 //libs/modules/egret/egret.web.min.js
var egret;!function(e){var t;!function(t){var i="egret.BitmapData";e.registerClass(HTMLImageElement,i),e.registerClass(HTMLCanvasElement,i),e.registerClass(HTMLVideoElement,i)}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){function t(t){return t.hashCode=t.$hashCode=e.$hashCount++,t}e.$toBitmapData=t}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(){}var t=(__define,e);t.prototype;return e.call=function(e,t){},e.addCallback=function(e,t){},e}();t.WebExternalInterface=i,e.registerClass(i,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i;!function(i){function r(e){return window.localStorage.getItem(e)}function n(t,i){try{return window.localStorage.setItem(t,i),!0}catch(r){return e.$warn(1047,t,i),!1}}function a(e){window.localStorage.removeItem(e)}function s(){window.localStorage.clear()}t.getItem=r,t.setItem=n,t.removeItem=a,t.clear=s}(i=t.web||(t.web={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(){i.call(this),this.loaded=!1}__extends(r,i);var n=__define,a=r,s=a.prototype;return n(s,"length",function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")}),s.load=function(t){function i(){a(),h.indexOf("firefox")>=0&&(o.pause(),o.muted=!1),s.loaded=!0,s.dispatchEventWith(e.Event.COMPLETE)}function n(){a(),s.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function a(){o.removeEventListener("canplaythrough",i),o.removeEventListener("error",n)}var s=this;this.url=t;var o=new Audio(t);o.addEventListener("canplaythrough",i),o.addEventListener("error",n);var h=navigator.userAgent.toLowerCase();h.indexOf("firefox")>=0&&(o.autoplay=!0,o.muted=!0),o.load(),this.originAudio=o,r.$recycle(this.url,o)},s.play=function(i,n){i=+i||0,n=+n||0;var a=r.$pop(this.url);null==a&&(a=this.originAudio.cloneNode()),a.autoplay=!0;var s=new t.HtmlSoundChannel(a);return s.$url=this.url,s.$loops=n,s.$startTime=i,s.$play(),e.sys.$pushSoundChannel(s),s},s.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),r.$clear(this.url)},r.$clear=function(e){var t=r.audios[e];t&&(t.length=0)},r.$pop=function(e){var t=r.audios[e];return t&&t.length>0?t.pop():null},r.$recycle=function(e,t){var i=r.audios[e];null==r.audios[e]&&(i=r.audios[e]=[]),i.push(t)},r.MUSIC="music",r.EFFECT="effect",r.audios={},r}(e.EventDispatcher);t.HtmlSound=i,e.registerClass(i,"egret.web.HtmlSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(t){var r=this;i.call(this),this.$startTime=0,this.audio=null,this.isStopped=!1,this.canPlay=function(){r.audio.removeEventListener("canplay",r.canPlay);try{r.audio.currentTime=r.$startTime}catch(e){}finally{r.audio.play()}},this.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(e.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},t.addEventListener("ended",this.onPlayEnd),this.audio=t}__extends(r,i);var n=__define,a=r,s=a.prototype;return s.$play=function(){if(this.isStopped)return void e.$error(1036);try{this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()},s.stop=function(){if(this.audio){this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0;var i=this.audio;i.pause(),i.removeEventListener("ended",this.onPlayEnd),this.audio=null,t.HtmlSound.$recycle(this.$url,i)}},n(s,"volume",function(){return this.audio?this.audio.volume:1},function(t){return this.isStopped?void e.$error(1036):void(this.audio&&(this.audio.volume=t))}),n(s,"position",function(){return this.audio?this.audio.currentTime:0}),r}(e.EventDispatcher);t.HtmlSoundChannel=i,e.registerClass(i,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(){i.call(this),this.loaded=!1}__extends(r,i);var n=__define,a=r,s=a.prototype;return s.load=function(i){var r=this;this.url=i,QZAppExternal.preloadSound(function(t){0==t.code?(r.loaded=!0,r.dispatchEventWith(e.Event.COMPLETE)):r.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},{bid:-1,url:t.Html5Capatibility._QQRootPath+i,refresh:1})},n(s,"length",function(){throw new Error("qq sound not supported!")}),s.play=function(i,r){i=+i||0,r=+r||0;var n=new t.QQSoundChannel;return n.$url=this.url,n.$loops=r,n.$type=this.type,n.$startTime=i,n.$play(),e.sys.$pushSoundChannel(n),n},s.close=function(){},r.MUSIC="music",r.EFFECT="effect",r}(e.EventDispatcher);t.QQSound=i,e.registerClass(i,"egret.web.QQSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){var i=this;t.call(this),this.$startTime=0,this.isStopped=!1,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},this._startTime=0}__extends(i,t);var r=__define,n=i,a=n.prototype;return a.$play=function(){if(this.isStopped)return void e.$error(1036);var t=this;this._startTime=Date.now();var i=0;i=t.$loops>0?t.$loops-1:-1,this.$type==e.Sound.EFFECT?QZAppExternal.playLocalSound(function(e){},{bid:-1,url:t.$url,loop:i}):QZAppExternal.playLocalBackSound(function(e){},{bid:-1,url:t.$url,loop:i})},a.stop=function(){this.$type==e.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound(),this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},r(a,"volume",function(){return 1},function(t){return this.isStopped?void e.$error(1036):void 0}),r(a,"position",function(){return(Date.now()-this._startTime)/1e3}),i}(e.EventDispatcher);t.QQSoundChannel=i,e.registerClass(i,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(){}var t=(__define,e);t.prototype;return e.decodeAudios=function(){if(!(e.decodeArr.length<=0||e.isDecoding)){e.isDecoding=!0;var t=e.decodeArr.shift();e.ctx.decodeAudioData(t.buffer,function(i){t.self.audioBuffer=i,t.success&&t.success(),e.isDecoding=!1,e.decodeAudios()},function(){alert("sound decode error: "+t.url+"\nsee http://edn.egret.com/cn/docs/page/156"),t.fail&&t.fail(),e.isDecoding=!1,e.decodeAudios()})}},e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,e.ctx=e.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,e.decodeArr=[],e.isDecoding=!1,e}();t.WebAudioDecode=i,e.registerClass(i,"egret.web.WebAudioDecode");var r=function(r){function n(){r.call(this),this.loaded=!1}__extends(n,r);var a=__define,s=n,o=s.prototype;return a(o,"length",function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")}),o.load=function(t){function r(){a.loaded=!0,a.dispatchEventWith(e.Event.COMPLETE)}function n(){a.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}var a=this;this.url=t;var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){i.decodeArr.push({buffer:s.response,success:r,fail:n,self:a,url:a.url}),i.decodeAudios()},s.send()},o.play=function(i,r){i=+i||0,r=+r||0;var n=new t.WebAudioSoundChannel;return n.$url=this.url,n.$loops=r,n.$audioBuffer=this.audioBuffer,n.$startTime=i,n.$play(),e.sys.$pushSoundChannel(n),n},o.close=function(){},n.MUSIC="music",n.EFFECT="effect",n}(e.EventDispatcher);t.WebAudioSound=r,e.registerClass(r,"egret.web.WebAudioSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(){var r=this;i.call(this),this.$startTime=0,this.bufferSource=null,this.context=t.WebAudioDecode.ctx,this.isStopped=!1,this._currentTime=0,this._volume=1,this.onPlayEnd=function(){return 1==r.$loops?(r.stop(),void r.dispatchEventWith(e.Event.SOUND_COMPLETE)):(r.$loops>0&&r.$loops--,void r.$play())},this._startTime=0,this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__extends(r,i);var n=__define,a=r,s=a.prototype;return s.$play=function(){if(this.isStopped)return void e.$error(1036);this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var t=this.context,i=this.gain,r=t.createBufferSource();this.bufferSource=r,r.buffer=this.$audioBuffer,r.connect(i),i.connect(t.destination),r.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,r.start(0,this.$startTime),this._currentTime=0},s.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||e.sys.$popSoundChannel(this),this.isStopped=!0},n(s,"volume",function(){return this._volume},function(t){return this.isStopped?void e.$error(1036):(this._volume=t,void(this.gain.gain.value=t))}),n(s,"position",function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0}),r}(e.EventDispatcher);t.WebAudioSoundChannel=i,e.registerClass(i,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(i,r){var n=this;void 0===r&&(r=!0),t.call(this),this.loaded=!1,this.closed=!1,this.heightSet=0/0,this.widthSet=0/0,this.isPlayed=!1,this.screenChanged=function(t){var i=!!n.video.webkitDisplayingFullscreen;i||(n.checkFullScreen(!1),e.Capabilities.isMobile||(n._fullscreen=i))},this._fullscreen=!0,this.onVideoLoaded=function(){n.video.removeEventListener("canplay",n.onVideoLoaded);var t=n.video;n.loaded=!0,n.posterData&&(n.posterData.width=n.getPlayWidth(),n.posterData.height=n.getPlayHeight()),t.width=t.videoWidth,t.height=t.videoHeight,n.$invalidateContentBounds(),window.setTimeout(function(){n.dispatchEventWith(e.Event.COMPLETE)},200)},this.$renderNode=new e.sys.BitmapNode,this.src=i,this.once(e.Event.ADDED_TO_STAGE,this.loadPoster,this),i&&this.load()}__extends(i,t);var r=__define,n=i,a=n.prototype;return a.load=function(t,i){var r=this;if(void 0===i&&(i=!0),t=t||this.src,this.src=t,!this.video||this.video.src!=t){if(!this.video||e.Capabilities.isMobile){var n=document.createElement("video");this.video=n,n.controls=null}else n=this.video;n.src=t,n.setAttribute("autoplay","autoplay"),n.setAttribute("webkit-playsinline","true"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return r.onVideoError()}),n.addEventListener("ended",function(){return r.onVideoEnded()}),n.load(),n.play(),n.style.position="absolute",n.style.top="0px",n.style.zIndex="-88888",n.style.left="0px",n.height=1,n.width=1,window.setTimeout(function(){return n.pause()},170)}},a.play=function(t,i){var r=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(e.Event.COMPLETE,function(e){return r.play(t,i)},this);this.isPlayed=!0;var n=this.video;void 0!=t&&(n.currentTime=+t||0),n.loop=!!i,e.Capabilities.isMobile?n.style.zIndex="-88888":n.style.zIndex="9999",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.height=n.videoHeight,n.width=n.videoWidth,"Windows PC"!=e.Capabilities.os&&"Mac OS"!=e.Capabilities.os&&window.setTimeout(function(){n.width=0},1e3),this.checkFullScreen(this._fullscreen)},a.checkFullScreen=function(t){var i=this.video;if(t)null==i.parentElement&&(i.removeAttribute("webkit-playsinline"),document.body.appendChild(i)),e.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=i.parentElement&&i.parentElement.removeChild(i),i.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),e.startTick(this.markDirty,this),e.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();i.play()},a.goFullscreen=function(){var t,i=this.video;return t=e.web.getPrefixStyleName("requestFullscreen",i),i[t]||(t=e.web.getPrefixStyleName("requestFullScreen",i),i[t])?(i.removeAttribute("webkit-playsinline"),i[t](),this.setFullScreenMonitor(!0),!0):!0},a.setFullScreenMonitor=function(e){var t=this.video;e?(t.addEventListener("mozfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenchange",this.screenChanged),t.addEventListener("mozfullscreenerror",this.screenError),t.addEventListener("webkitfullscreenerror",this.screenError)):(t.removeEventListener("mozfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenchange",this.screenChanged),t.removeEventListener("mozfullscreenerror",this.screenError),t.removeEventListener("webkitfullscreenerror",this.screenError))},a.screenError=function(){e.$error(3014)},a.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},a.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.$invalidateContentBounds(),this.dispatchEventWith(e.Event.ENDED)},a.onVideoError=function(){this.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},a.close=function(){var e=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return e.onVideoError()}),this.video.removeEventListener("ended",function(){return e.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},a.pause=function(){this.video&&this.video.pause(),e.stopTick(this.markDirty,this),this.$invalidate()},r(a,"volume",function(){return this.video?this.video.volume:1},function(e){this.video&&(this.video.volume=e)}),r(a,"position",function(){return this.video?this.video.currentTime:0},function(e){this.video&&(this.video.currentTime=e)}),r(a,"fullscreen",function(){return this._fullscreen},function(t){e.Capabilities.isMobile||(this._fullscreen=!!t,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))}),r(a,"bitmapData",function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=e.$toBitmapData(this.video)),this._bitmapData):null}),a.loadPoster=function(){var t=this,i=this.poster;if(i){var r=new e.ImageLoader;r.once(e.Event.COMPLETE,function(e){r.data;t.posterData=r.data,t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight(),t.$invalidateContentBounds()},this),r.load(i)}},a.$measureContentBounds=function(e){var t=this.bitmapData,i=this.posterData;t?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):i?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):e.setEmpty()},a.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:0/0:this.widthSet},a.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:0/0:this.heightSet},a.$render=function(){var t=this.$renderNode,i=this.bitmapData,r=this.posterData,n=this.getPlayWidth(),a=this.getPlayHeight();this.isPlayed&&!e.Capabilities.isMobile||!r?this.isPlayed&&i&&(t.image=i,t.drawImage(0,0,i.width,i.height,0,0,n,a)):(t.image=r,t.drawImage(0,0,r.width,r.height,0,0,n,a))},a.markDirty=function(){return this.$invalidate(),!0},a.$setHeight=function(e){return this.heightSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setHeight.call(this,e)},a.$setWidth=function(e){return this.widthSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),t.prototype.$setWidth.call(this,e)},r(a,"paused",function(){return this.video?this.video.paused:!0}),r(a,"length",function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")}),i}(e.DisplayObject);t.WebVideo=i,e.registerClass(i,"egret.web.WebVideo",["egret.Video"]),e.Video=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){t.call(this),this._url="",this._method=""}__extends(i,t);var r=__define,n=i,a=n.prototype;return r(a,"response",function(){if(!this._xhr)return null;if(void 0!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if("arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)){var e=window;return e.convertResponseBodyToText(this._xhr.responseBody)}return"document"==this._responseType?this._xhr.responseXML:null}),r(a,"responseType",function(){return this._responseType},function(e){this._responseType=e}),r(a,"withCredentials",function(){return this._withCredentials},function(e){this._withCredentials=e}),a.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},a.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},a.send=function(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},a.abort=function(){this._xhr&&this._xhr.abort()},a.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e?e:""},a.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},a.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t?t:""},a.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var i=t.status>=400||0==t.status,r=(this._url,this);window.setTimeout(function(){i?r.dispatchEventWith(e.IOErrorEvent.IO_ERROR):r.dispatchEventWith(e.Event.COMPLETE)},0)}},a.updateProgress=function(t){t.lengthComputable&&e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t.loaded,t.total)},i}(e.EventDispatcher);t.WebHttpRequest=i,e.registerClass(i,"egret.web.WebHttpRequest",["egret.HttpRequest"]),e.HttpRequest=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=window.URL||window.webkitURL,r=function(r){function n(){r.apply(this,arguments),this.data=null,this._crossOrigin=null,this._hasCrossOriginSet=!1,this.currentImage=null,this.request=null}__extends(n,r);var a=__define,s=n,o=s.prototype;return a(o,"crossOrigin",function(){return this._crossOrigin},function(e){this._hasCrossOriginSet=!0,this._crossOrigin=e}),o.load=function(i){if(t.Html5Capatibility._canUseBlob&&0!=i.indexOf("wxLocalResource:")&&0!=i.indexOf("data:")&&0!=i.indexOf("http:")&&0!=i.indexOf("https:")){var r=this.request;r||(r=this.request=new e.web.WebHttpRequest,r.addEventListener(e.Event.COMPLETE,this.onBlobLoaded,this),r.addEventListener(e.IOErrorEvent.IO_ERROR,this.onBlobError,this),r.responseType="blob"),r.open(i),r.send()}else this.loadImage(i)},o.onBlobLoaded=function(e){var t=this.request.response;this.loadImage(i.createObjectURL(t))},o.onBlobError=function(e){this.dispatchIOError(this.currentURL)},o.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this._hasCrossOriginSet?this._crossOrigin&&(t.crossOrigin=this._crossOrigin):n.crossOrigin&&(t.crossOrigin=n.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},o.onImageComplete=function(t){var i=this.getImage(t);if(i){this.data=e.$toBitmapData(i);var r=this;window.setTimeout(function(){r.dispatchEventWith(e.Event.COMPLETE)},0)}},o.onLoadError=function(e){var t=this.getImage(e);t&&this.dispatchIOError(t.src)},o.dispatchIOError=function(t){var i=this;window.setTimeout(function(){i.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},0)},o.getImage=function(t){var r=t.target,n=r.src;if(0==n.indexOf("blob:"))try{i.revokeObjectURL(r.src)}catch(a){e.$warn(1037)}return r.onerror=null,r.onload=null,this.currentImage!==r?null:(this.currentImage=null,r)},n.crossOrigin=null,n}(e.EventDispatcher);t.WebImageLoader=r,e.registerClass(r,"egret.web.WebImageLoader",["egret.ImageLoader"]),e.ImageLoader=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(){i.call(this),this._isNeedShow=!1,this.inputElement=null,this.inputDiv=null,this._gscaleX=0,this._gscaleY=0,this._isNeesHide=!1,this.textValue="",this.colorValue=16777215,this._styleInfoes={}}__extends(r,i);var n=(__define,r),a=n.prototype;return a.$setTextField=function(e){return this.$textfield=e,!0},a.$addToStage=function(){this.htmlInput=e.web.$getTextAdapter(this.$textfield)},a._initElement=function(){var t=this.$textfield.localToGlobal(0,0),i=t.x,r=t.y,n=this.htmlInput.$scaleX,a=this.htmlInput.$scaleY;this.inputDiv.style.left=i*n+"px",this.inputDiv.style.top=r*a+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=r*a+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*a+"px"):(this.inputDiv.style.top=r*a+"px",this.inputElement.style.top="0px");for(var s=this.$textfield,o=1,h=1,l=0;s.parent;)o*=s.scaleX,h*=s.scaleY,l+=s.rotation,s=s.parent;var u=e.web.getPrefixStyleName("transform");this.inputDiv.style[u]="rotate("+l+"deg)",this._gscaleX=n*o,this._gscaleY=a*h},a.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},a.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},a.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},a.$hide=function(){this._isNeesHide=!0,this.htmlInput&&e.web.Html5Capatibility._System_OS==e.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},a.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},a.$setText=function(e){return this.textValue=e,this.resetText(),!0},a.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},a.$setColor=function(e){return this.colorValue=e,this.resetColor(),!0},a.resetColor=function(){this.inputElement&&this.setElementStyle("color",e.toColorString(this.colorValue))},a.$onBlur=function(){t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE&&e.Event.dispatchEvent(this,"updateText",!1)},a._onInput=function(){var i=this;if(t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE){var r=this.$textfield.$TextField;null==r[35]&&null==r[36]?(i.textValue=i.inputElement.value,e.Event.dispatchEvent(i,"updateText",!1)):window.setTimeout(function(){i.inputElement&&i.inputElement.selectionStart&&i.inputElement.selectionEnd&&i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,e.Event.dispatchEvent(i,"updateText",!1))},0)}else window.setTimeout(function(){i.inputElement&&i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,e.Event.dispatchEvent(i,"updateText",!1))},0)},a.setAreaHeight=function(){var t=this.$textfield;if(t.multiline){var i=e.TextFieldUtils.$getTextHeight(t);if(t.height<=t.size)this.setElementStyle("height",t.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.size*this._gscaleY+"px");else if(t.height<i)this.setElementStyle("height",t.height*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px");else{this.setElementStyle("height",(i+t.lineSpacing)*this._gscaleY+"px");var r=(t.height-i)*this._gscaleY,n=e.TextFieldUtils.$getValign(t),a=r*n,s=r-a;this.setElementStyle("padding",a+"px 0px "+s+"px 0px"),this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px")}}},a._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new e.Event("focus")))},a._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new e.Event("blur"))},a.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},a.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},a.$resetStageText=function(){if(this.inputElement){var t=this.$textfield;if(this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",e.toColorString(t.textColor)),t.stage){var i=t.localToGlobal(0,0).x;i=Math.min(t.width,t.stage.stageWidth-i)}else i=t.width;if(this.setElementStyle("width",i*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size){this.setElementStyle("height",t.size*this._gscaleY+"px");var r=t.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+r+"px 0px")}else{this.setElementStyle("height",t.size*this._gscaleY+"px");var n=(t.height-t.size)*this._gscaleY,a=e.TextFieldUtils.$getValign(t),s=n*a,r=n-s;r<t.size/2*this._gscaleY&&(r=t.size/2*this._gscaleY),this.setElementStyle("padding",s+"px 0px "+r+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=i*this._gscaleX+"px"}},r}(e.EventDispatcher);t.HTML5StageText=i,e.registerClass(i,"egret.web.HTML5StageText",["egret.StageText"]),e.StageText=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function t(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}var i=(__define,t),r=i.prototype;return r.isInputOn=function(){return null!=this._stageText},r.isCurrentStageText=function(e){return this._stageText==e},r.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},r.$updateSize=function(){if(this.canvas){var t=this.canvas.width,i=this.canvas.height,r=this.canvas.style.width.split("px")[0],n=this.canvas.style.height.split("px")[0];this.$scaleX=r/t,this.$scaleY=n/i,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var a=e.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[a]=this.canvas.style[a],this.StageDelegateDiv.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},r._initStageDelegateDiv=function(t,i){this.canvas=i;var r,n=this;r||(r=document.createElement("div"),this.StageDelegateDiv=r,r.id="StageDelegateDiv",t.appendChild(r),n.initValue(r),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",r.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(e){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(e),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},r.initInputElement=function(e){var t,i=this;e?(t=document.createElement("textarea"),t.style.resize="none",i._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),i._simpleElement=t,t.id="egretInput"),t.type="text",i._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",i.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){i._stageText&&i._stageText._onInput()}},r.show=function(){var t=this,i=t._inputElement;e.$callAsync(function(){i.style.opacity=1},t)},r.disconnectStageText=function(e){(null==this._stageText||this._stageText==e)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},r.clearInputElement=function(){var e=this;if(e._inputElement){e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0;var t;t=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,t.style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px"}e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},r.getInputElement=function(e){var t=this;t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._stageText.$textfield.multiline?t._inputElement=t._multiElement:t._inputElement=t._simpleElement;var i;return i=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,i.style.display="none",t._inputElement},t}();t.HTMLInput=i,e.registerClass(i,"egret.web.HTMLInput")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e){var t=e.stage?e.stage.$hashCode:0,i=r[t],s=n[t],o=a[t];return s&&o&&(delete n[t],delete a[t]),i}function i(e,t,i,s){e._initStageDelegateDiv(i,s),r[t.$hashCode]=e,n[t.$hashCode]=s,a[t.$hashCode]=i}var r={},n={},a={};e.$getTextAdapter=t,e.$cacheTextAdapter=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e,t,i,s,o){n||r();var h="";o&&(h+="italic "),s&&(h+="bold "),h+=(i||12)+"px ",h+=t||"Arial";var l=0,u=a[h]||(a[h]={});n.font=h;for(var d=e.length,c=0;d>c;c++){var f=e.charCodeAt(c),p=u[f]||(u[f]=n.measureText(e.charAt(c)).width);l+=p}return l}function r(){n=e.sys.hitTestBuffer.context,n.textAlign="left",n.textBaseline="middle"}var n=null,a={};e.sys.measureText=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(t,i){var r=document.createElement("canvas");isNaN(t)||isNaN(i)||(r.width=t,r.height=i),e.$toBitmapData(r);var n=r.getContext("2d");if(void 0===n.imageSmoothingEnabled){for(var a=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],s=a.length-1;s>=0;s--){var o=a[s];if(void 0!==n[o])break}try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[o]},set:function(e){this[o]=e}})}catch(h){n.imageSmoothingEnabled=n[o]}}return r}var r,n=function(){function e(e,t){this.surface=i(e,t),this.context=this.surface.getContext("2d")}var t=__define,n=e,a=n.prototype;return t(a,"width",function(){return this.surface.width}),t(a,"height",function(){return this.surface.height}),a.resize=function(e,t,i){var r=this.surface;if(i){var n=!1;r.width<e&&(r.width=e,n=!0),r.height<t&&(r.height=t,n=!0),n||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)
}else r.width!=e&&(r.width=e),r.height!=t&&(r.height=t);this.clear()},a.resizeTo=function(e,t,n,a){r||(r=i());var s=(this.context,this.surface),o=r,h=o.getContext("2d");r=s,this.context=h,this.surface=o,o.width=Math.max(e,257),o.height=Math.max(t,257),h.setTransform(1,0,0,1,0,0),h.drawImage(s,n,a),s.height=1,s.width=1},a.setDirtyRegionPolicy=function(e){},a.beginClip=function(e,t,i){t=+t||0,i=+i||0;var r=this.context;r.save(),r.beginPath(),r.setTransform(1,0,0,1,t,i);for(var n=e.length,a=0;n>a;a++){var s=e[a];r.clearRect(s.minX,s.minY,s.width,s.height),r.rect(s.minX,s.minY,s.width,s.height)}r.clip()},a.endClip=function(){this.context.restore()},a.getPixel=function(e,t){return this.context.getImageData(e,t,1,1).data},a.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},a.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},a.destroy=function(){this.surface.width=this.surface.height=0},e}();t.CanvasRenderBuffer=n,e.registerClass(n,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(i,r){var n=this;t.call(this),this.onTouchBegin=function(e){var t=n.getLocation(e);n.touch.onTouchBegin(t.x,t.y,e.identifier)},this.onTouchMove=function(e){var t=n.getLocation(e);n.touch.onTouchMove(t.x,t.y,e.identifier)},this.onTouchEnd=function(e){var t=n.getLocation(e);n.touch.onTouchEnd(t.x,t.y,e.identifier)},this.scaleX=1,this.scaleY=1,this.rotation=0,this.canvas=r,this.touch=new e.sys.TouchHandler(i),this.addListeners()}__extends(i,t);var r=(__define,i),n=r.prototype;return n.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){e.identifier=e.pointerId,t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){e.identifier=e.pointerId,t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){e.identifier=e.pointerId,t.onTouchEnd(e),t.prevent(e)},!1)):(e.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},n.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},n.addTouchListener=function(){var e=this;this.canvas.addEventListener("touchstart",function(t){for(var i=t.changedTouches.length,r=0;i>r;r++)e.onTouchBegin(t.changedTouches[r]);e.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var i=t.changedTouches.length,r=0;i>r;r++)e.onTouchMove(t.changedTouches[r]);e.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var i=t.changedTouches.length,r=0;i>r;r++)e.onTouchEnd(t.changedTouches[r]);e.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var i=t.changedTouches.length,r=0;i>r;r++)e.onTouchEnd(t.changedTouches[r]);e.prevent(t)},!1)},n.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},n.getLocation=function(t){t.identifier=+t.identifier||0;var i=document.documentElement,r=this.canvas.getBoundingClientRect(),n=r.left+window.pageXOffset-i.clientLeft,a=r.top+window.pageYOffset-i.clientTop,s=t.pageX-n,o=s,h=t.pageY-a,l=h;return 90==this.rotation?(o=h,l=r.width-s):-90==this.rotation&&(o=r.height-h,l=s),o/=this.scaleX,l/=this.scaleY,e.$TempPoint.setTo(Math.round(o),Math.round(l))},n.updateScaleMode=function(e,t,i){this.scaleX=e,this.scaleY=t,this.rotation=i},n.$updateMaxTouches=function(){this.touch.$initMaxTouches()},i}(e.HashObject);t.WebTouchHandler=i,e.registerClass(i,"egret.web.WebTouchHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(e){t.call(this),this.isActivate=!0,this.stage=e,this.registerListener()}__extends(i,t);var r=(__define,i),n=r.prototype;return n.registerListener=function(){var t=this,i=function(){t.isActivate&&(t.isActivate=!1,t.stage.dispatchEvent(new e.Event(e.Event.DEACTIVATE)))},r=function(){t.isActivate||(t.isActivate=!0,t.stage.dispatchEvent(new e.Event(e.Event.ACTIVATE)))},n=function(){document[a]?i():r()};window.addEventListener("focus",r,!1),window.addEventListener("blur",i,!1);var a,s;"undefined"!=typeof document.hidden?(a="hidden",s="visibilitychange"):"undefined"!=typeof document.mozHidden?(a="mozHidden",s="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(a="msHidden",s="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(a="webkitHidden",s="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(a="oHidden",s="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",r,!1),window.addEventListener("pagehide",i,!1)),a&&s&&document.addEventListener(s,n,!1);var o=navigator.userAgent,h=/micromessenger/gi.test(o),l=/mqq/gi.test(o),u=/mobile.*qq/gi.test(o);if((u||h)&&(l=!1),l){var d=window.browser||{};d.execWebFn=d.execWebFn||{},d.execWebFn.postX5GamePlayerMessage=function(e){var t=e.type;"app_enter_background"==t?i():"app_enter_foreground"==t&&r()},window.browser=d}},i}(e.HashObject);t.WebHideHandler=i,e.registerClass(i,"egret.web.WebHideHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e,t){var i="";if(null!=t)i=r(e,t);else{if(null==o){var n=document.createElement("div").style;o=r("transform",n)}i=o}return""==i?e:i+e.charAt(0).toUpperCase()+e.substring(1,e.length)}function r(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var i=["webkit","ms","Moz","O"],r=0;r<i.length;r++){var n=i[r]+e;if(n in t)return i[r]}return""}var n=function(){function e(){}var t=(__define,e);t.prototype;return e.QQ_AUDIO=1,e.WEB_AUDIO=2,e.HTML5_AUDIO=3,e}();t.AudioType=n,e.registerClass(n,"egret.web.AudioType");var a=function(){function e(){}var t=(__define,e);t.prototype;return e.WPHONE=1,e.IOS=2,e.ADNROID=3,e}();t.SystemOSType=a,e.registerClass(a,"egret.web.SystemOSType");var s=function(t){function i(){t.call(this)}__extends(i,t);var r=(__define,i);r.prototype;return i.$init=function(){var t=navigator.userAgent.toLowerCase();i.ua=t,e.Capabilities.$isMobile=-1!=t.indexOf("mobile")||-1!=t.indexOf("android"),i._canUseBlob=!1;var r,s=i._audioType;if(1==s||2==s||3==s?(r=!1,i.setAudioType(s)):(r=!0,i.setAudioType(n.HTML5_AUDIO)),t.indexOf("windows phone")>=0)i._System_OS=a.WPHONE,e.Capabilities.$os="Windows Phone";else if(t.indexOf("android")>=0){if(i._System_OS=a.ADNROID,e.Capabilities.$os="Android",i._System_OS=a.ADNROID,window.hasOwnProperty("QZAppExternal")&&t.indexOf("qzone")>=0){i.setAudioType(n.QQ_AUDIO);var o=document.getElementsByTagName("base");if(o&&o.length>0)i._QQRootPath=o[0].baseURI;else{var h=window.location.href.indexOf("?");-1==h&&(h=window.location.href.length);var l=window.location.href.substring(0,h);l=l.substring(0,l.lastIndexOf("/")),i._QQRootPath=l+"/"}}}else t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0?(e.Capabilities.$os="iOS",i._System_OS=a.IOS,i.getIOSVersion()>=7&&(i._canUseBlob=!0,i.setAudioType(n.WEB_AUDIO))):-1!=t.indexOf("windows nt")?e.Capabilities.$os="Windows PC":-1!=t.indexOf("mac os")&&(e.Capabilities.$os="Mac OS");var u=window.URL||window.webkitURL;u||(i._canUseBlob=!1);var d=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;d||i._audioType!=n.WEB_AUDIO||i.setAudioType(n.HTML5_AUDIO),e.Sound=i._AudioClass},i.setAudioType=function(t){switch(i._audioType=t,t){case n.QQ_AUDIO:i._AudioClass=e.web.QQSound;break;case n.WEB_AUDIO:i._AudioClass=e.web.WebAudioSound;break;case n.HTML5_AUDIO:i._AudioClass=e.web.HtmlSound}},i.getIOSVersion=function(){var e=i.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(e.match(/\d(_\d)*/)[0])||0},i.checkHtml5Support=function(){var t=(navigator.language||navigator.browserLanguage).toLowerCase(),i=t.split("-");i.length>1&&(i[1]=i[1].toUpperCase()),e.Capabilities.$language=i.join("-")},i._canUseBlob=!1,i._audioType=0,i._QQRootPath="",i._System_OS=0,i.ua="",i}(e.HashObject);t.Html5Capatibility=s,e.registerClass(s,"egret.web.Html5Capatibility");var o=null;t.getPrefixStyleName=i,t.getPrefix=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(){if(o)for(var e=document.querySelectorAll(".egret-player"),t=e.length,i=0;t>i;i++){var r=e[i],n=r["egret-player"];n.updateScreenSize()}}function r(i){if(!o){o=!0,i||(i={}),t.Html5Capatibility._audioType=i.audioType,t.Html5Capatibility.$init(),n(i.renderMode);var r=e.sys.$ticker;a(r),i.screenAdapter?e.sys.screenAdapter=i.screenAdapter:e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.DefaultScreenAdapter),e.sys.hitTestBuffer=new t.CanvasRenderBuffer(3,3);for(var s=document.querySelectorAll(".egret-player"),h=s.length,l=0;h>l;l++){var u=s[l],d=new t.WebPlayer(u,i);u["egret-player"]=d}}}function n(i){"webgl"==i&&e.WebGLUtils.checkCanUseWebGL()?(e.sys.RenderBuffer=t.WebGLRenderBuffer,e.sys.systemRenderer=new t.WebGLRenderer,e.sys.canvasRenderer=new e.CanvasRenderer,e.Capabilities.$renderMode="webgl"):(e.sys.RenderBuffer=t.CanvasRenderBuffer,e.sys.systemRenderer=new e.CanvasRenderer,e.sys.canvasRenderer=e.sys.systemRenderer,e.Capabilities.$renderMode="canvas")}function a(e){function t(){e.update(),i.call(window,t)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;i||(i=function(e){return window.setTimeout(e,1e3/60)}),i.call(window,t)}function s(){h=0/0,e.updateAllScreens()}var o=!1;window.isNaN=function(e){return e=+e,e!==e},e.runEgret=r,e.updateAllScreens=i;var h=0/0;window.addEventListener("resize",function(){isNaN(h)&&(h=window.setTimeout(s,300))})}(t=e.web||(e.web={}))}(egret||(egret={}));var language,egret;!function(e){var t;!function(t){var i=function(){function t(){}var i=(__define,t);i.prototype;return t.detect=function(){var i=e.Capabilities,r=navigator.userAgent.toLowerCase();i.$isMobile=-1!=r.indexOf("mobile")||-1!=r.indexOf("android"),i.$isMobile?r.indexOf("windows")<0&&(-1!=r.indexOf("iphone")||-1!=r.indexOf("ipad")||-1!=r.indexOf("ipod"))?i.$os="iOS":-1!=r.indexOf("android")&&-1!=r.indexOf("linux")?i.$os="Android":-1!=r.indexOf("windows")&&(i.$os="Windows Phone"):-1!=r.indexOf("windows nt")?i.$os="Windows PC":-1!=r.indexOf("mac os")&&(i.$os="Mac OS");var n=(navigator.language||navigator.browserLanguage).toLowerCase(),a=n.split("-");a.length>1&&(a[1]=a[1].toUpperCase()),i.$language=a.join("-"),t.injectUIntFixOnIE9()},t.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var e="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n</script>\r\n<!-- convertResponseBodyToText -->\r\n<script>\r\nvar convertResponseBodyToText = function (binary) {\r\n   var byteMapping = {};\r\n   for ( var i = 0; i < 256; i++ ) {\r\n       for ( var j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   var rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   var lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n</script>\r\n";document.write(e)}},t}();t.WebCapability=i,e.registerClass(i,"egret.web.WebCapability"),i.detect()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(i,r,n,a,s){if(t.call(this),this.showPanle=!0,this.fpsHeight=0,this.WIDTH=101,this.HEIGHT=20,this.bgCanvasColor="#18304b",this.fpsFrontColor="#18fefe",this.WIDTH_COST=33,this.cost1Color="#18fefe",this.cost2Color="#ffff00",this.cost3Color="#ff0000",this.arrFps=[],this.arrCost=[],this.arrLog=[],r||n){"canvas"==e.Capabilities.renderMode?this.renderMode="Canvas":this.renderMode="WebGL",this.panelX=void 0===s.x?0:parseInt(s.x),this.panelY=void 0===s.y?0:parseInt(s.y),this.fontColor=void 0===s.textColor?"#ffffff":s.textColor.replace("0x","#"),this.fontSize=void 0===s.size?12:parseInt(s.size),e.Capabilities.isMobile&&(this.fontSize-=2);var o=document.createElement("div");o.style.position="absolute",o.style.background="rgba(0,0,0,"+s.bgAlpha+")",o.style.left=this.panelX+"px",o.style.top=this.panelY+"px",o.style.pointerEvents="none",document.body.appendChild(o);var h=document.createElement("div");h.style.color=this.fontColor,h.style.fontSize=this.fontSize+"px",h.style.lineHeight=this.fontSize+"px",h.style.margin="4px 4px 4px 4px",this.container=h,o.appendChild(h),r&&this.addFps(),n&&this.addLog()}}__extends(i,t);var r=(__define,i),n=r.prototype;return n.addFps=function(){var e=document.createElement("div");e.style.display="inline-block",this.containerFps=e,this.container.appendChild(e);var t=document.createElement("div");t.style.paddingBottom="2px",this.fps=t,this.containerFps.appendChild(t),t.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var i=document.createElement("canvas");this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT,this.canvasFps=i;var r=i.getContext("2d");this.contextFps=r,r.fillStyle=this.bgCanvasColor,r.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var a=document.createElement("div");a.style["float"]="left",a.innerHTML="Draw<br/>Dirty<br/>Cost",n.appendChild(a);var s=document.createElement("div");s.style.paddingLeft=a.offsetWidth+20+"px",n.appendChild(s);var o=document.createElement("div");this.divDraw=o,o.innerHTML="0<br/>0<br/>",s.appendChild(o);var h=document.createElement("div");this.divCost=h,h.innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost2Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',s.appendChild(h);var i=document.createElement("canvas");this.canvasCost=i,this.containerFps.appendChild(i),i.width=this.WIDTH,i.height=this.HEIGHT;var r=i.getContext("2d");this.contextCost=r,r.fillStyle=this.bgCanvasColor,r.fillRect(0,0,this.WIDTH,this.HEIGHT),r.fillStyle="#000000",r.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),r.fillRect(2*this.WIDTH_COST+1,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},n.addLog=function(){var e=document.createElement("div");e.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",e.style.wordWrap="break-word",this.log=e,this.container.appendChild(e)},n.update=function(e,t){if(void 0===t&&(t=!1),t)i=this.arrFps[this.arrFps.length-1],r=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1],a=this.arrCost[this.arrCost.length-1][2];else{var i=e.fps,r=e.costTicker,n=e.costDirty,a=e.costRender;this.lastNumDraw=e.draw,this.lastNumDirty=e.dirty,this.arrFps.push(i),this.arrCost.push([r,n,a])}var s=0,o=this.arrFps.length;o>101&&(o=101,this.arrFps.shift());for(var h=this.arrFps[0],l=this.arrFps[0],u=0;o>u;u++){var d=this.arrFps[u];s+=d,h>d?h=d:d>l&&(l=d)}var c=this.WIDTH,f=this.HEIGHT,p=this.contextFps;p.drawImage(this.canvasFps,1,0,c-1,f,0,0,c-1,f),p.fillStyle=this.bgCanvasColor,p.fillRect(c-1,0,1,f);var v=Math.floor(i/60*20);1>v&&(v=1),p.fillStyle=this.fpsFrontColor,p.fillRect(c-1,20-v,1,v);var g=this.WIDTH_COST,p=this.contextCost;p.drawImage(this.canvasCost,1,0,g-1,f,0,0,g-1,f),p.drawImage(this.canvasCost,g+2,0,g-1,f,g+1,0,g-1,f),p.drawImage(this.canvasCost,2*g+3,0,g-1,f,2*g+2,0,g-1,f);var m=Math.floor(r/2);1>m?m=1:m>20&&(m=20);var x=Math.floor(n/2);1>x?x=1:x>20&&(x=20);var w=Math.floor(a/2);1>w?w=1:w>20&&(w=20),p.fillStyle=this.bgCanvasColor,p.fillRect(g-1,0,1,f),p.fillRect(2*g,0,1,f),p.fillRect(3*g+1,0,1,f),p.fillStyle=this.cost1Color,p.fillRect(g-1,20-m,1,m),p.fillStyle=this.cost2Color,p.fillRect(2*g,20-x,1,x),p.fillStyle=this.cost3Color,p.fillRect(3*g+1,20-w,1,w);var b=Math.floor(s/o),y=i+" FPS "+this.renderMode;this.showPanle&&(y+="<br/>min"+h+" max"+l+" avg"+b,this.divDraw.innerHTML=this.lastNumDraw+"<br/>"+this.lastNumDirty+"%<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+r+'<font/> <font  style="color:#ffff00">'+n+'<font/> <font  style="color:#ff0000">'+a+"<font/>"),this.fps.innerHTML=y},n.updateInfo=function(e){for(this.arrLog.push(e),this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},i}(e.DisplayObject);t.WebFps=i,e.registerClass(i,"egret.web.WebFps",["egret.FPSDisplay"]),e.FPSDisplay=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var i=t.split("&"),r=i.length,n=0;r>n;n++){var a=i[n],s=a.split("=");if(s[0]==e)return s[1]}}return""}t.getOption=i,e.getOption=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function r(e,t){i.call(this),this.init(e,t),this.initOrientation()}__extends(r,i);var n=(__define,r),a=n.prototype;return a.init=function(i,r){var n=this.readOption(i,r),a=new e.Stage;a.$screen=this,a.$scaleMode=n.scaleMode,a.$orientation=n.orientation,a.$maxTouches=n.maxTouches,a.frameRate=n.frameRate,a.textureScaleFactor=n.textureScaleFactor;var s=new e.sys.RenderBuffer,o=s.surface;this.attachCanvas(i,o);var h=new t.WebTouchHandler(a,o),l=new e.sys.Player(s,a,n.entryClassName),u=new e.web.WebHideHandler(a),d=new t.HTMLInput;l.showPaintRect(n.showPaintRect),(n.showFPS||n.showLog)&&l.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles),this.playerOption=n,this.container=i,this.canvas=o,this.stage=a,this.player=l,this.webTouchHandler=h,this.webInput=d,this.webHide=u,e.web.$cacheTextAdapter(d,a,i,o),this.updateScreenSize(),this.updateMaxTouches(),l.start()},a.initOrientation=function(){var t=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){e.StageOrientationEvent.dispatchStageOrientationEvent(t.stage,e.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},a.readOption=function(t,i){var r={};r.entryClassName=t.getAttribute("data-entry-class"),r.scaleMode=t.getAttribute("data-scale-mode")||e.StageScaleMode.NO_SCALE,r.frameRate=+t.getAttribute("data-frame-rate")||30,r.contentWidth=+t.getAttribute("data-content-width")||480,r.contentHeight=+t.getAttribute("data-content-height")||800,r.orientation=t.getAttribute("data-orientation")||e.OrientationMode.AUTO,r.maxTouches=+t.getAttribute("data-multi-fingered")||2,r.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1,"webgl"==i.renderMode?r.showPaintRect=!1:r.showPaintRect="true"==t.getAttribute("data-show-paint-rect"),r.showFPS="true"==t.getAttribute("data-show-fps");for(var n=t.getAttribute("data-show-fps-style")||"",a=n.split(","),s={},o=0;o<a.length;o++){var h=a[o].split(":");s[h[0]]=h[1]}return r.fpsStyles=s,r.showLog="true"==t.getAttribute("data-show-log"),r.logFilter=t.getAttribute("data-log-filter"),r},a.attachCanvas=function(e,t){var i=t.style;i.cursor="inherit",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",e.appendChild(t),i=e.style,i.overflow="hidden",i.position="relative",i.webkitTransform="translateZ(0)"},a.updateScreenSize=function(){var t=this.canvas;if(!t.userTyping){var i=this.playerOption,r=this.container.getBoundingClientRect(),n=!1,a=this.stage.$orientation;a!=e.OrientationMode.AUTO&&(n=a!=e.OrientationMode.PORTRAIT&&r.height>r.width||a==e.OrientationMode.PORTRAIT&&r.width>r.height);var s=n?r.height:r.width,o=n?r.width:r.height;e.Capabilities.$boundingClientWidth=s,e.Capabilities.$boundingClientHeight=o;var h=e.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,s,o,i.contentWidth,i.contentHeight),l=h.stageWidth,u=h.stageHeight,d=h.displayWidth,c=h.displayHeight;t.width!==l&&(t.width=l),t.height!==u&&(t.height=u),t.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",t.style.width=d+"px",t.style.height=c+"px";var f=0;n?a==e.OrientationMode.LANDSCAPE?(f=90,t.style.top=(r.height-d)/2+"px",t.style.left=(r.width+c)/2+"px"):(f=-90,t.style.top=(r.height+d)/2+"px",t.style.left=(r.width-c)/2+"px"):(t.style.top=(r.height-c)/2+"px",t.style.left=(r.width-d)/2+"px");var p="rotate("+f+"deg)";t.style[e.web.getPrefixStyleName("transform")]=p;var v=d/l,g=c/u;this.webTouchHandler.updateScaleMode(v,g,f),this.webInput.$updateSize(),this.player.updateStageSize(l,u)}},a.setContentSize=function(e,t){var i=this.playerOption;i.contentWidth=e,i.contentHeight=t,this.updateScreenSize()},a.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},r}(e.HashObject);t.WebPlayer=i,e.registerClass(i,"egret.web.WebPlayer",["egret.sys.Screen"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(t,i){s||(s=document.createElement("canvas"),o=s.getContext("2d"));var r=t.$getTextureWidth(),n=t.$getTextureHeight();null==i&&(i=e.$TempRectangle,i.x=0,i.y=0,i.width=r,i.height=n),i.x=Math.min(i.x,r-1),i.y=Math.min(i.y,n-1),i.width=Math.min(i.width,r-i.x),i.height=Math.min(i.height,n-i.y);var a=i.width,h=i.height,l=s;l.style.width=a+"px",l.style.height=h+"px",s.width=a,s.height=h;var u=t,d=Math.round(u._offsetX),c=Math.round(u._offsetY),f=u._bitmapWidth,p=u._bitmapHeight;return o.drawImage(u._bitmapData,u._bitmapX+i.x/e.$TextureScaleFactor,u._bitmapY+i.y/e.$TextureScaleFactor,f*i.width/r,p*i.height/n,d,c,i.width,i.height),l}function r(t,r){try{var n=i(this,r),a=n.toDataURL(t);return a}catch(s){e.$error(1033)}return null}function n(e,t,i){var n=r.call(this,e,i);if(null!=n){var a=n.replace(/^data:image[^;]*/,"data:image/octet-stream"),s=document.createElement("a");s.download=t,s.href=a;var o=document.createEvent("HTMLEvents");o.initEvent("click",!1,!1),s.dispatchEvent(o)}}function a(t,i){var r=e.sys.hitTestBuffer;r.resize(3,3);var n=r.context;n.translate(1-t,1-i);var a=this._bitmapWidth,s=this._bitmapHeight,o=e.$TextureScaleFactor;n.drawImage(this._bitmapData,this._bitmapX,this._bitmapY,a,this._bitmapHeight,this._offsetX,this._offsetY,a*o,s*o);try{var h=r.getPixel(1,1)}catch(l){throw console.log(this),new Error(e.sys.tr(1039))}return h}var s,o;e.Texture.prototype.toDataURL=r,e.Texture.prototype.saveToFile=n,e.Texture.prototype.getPixel32=a;var h=e.Texture.prototype.dispose;e.Texture.prototype.dispose=function(){e.WebGLUtils.deleteWebGLTexture(this._bitmapData),h.call(this)}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e){for(var t=o.parseFromString(e,"text/xml"),i=t.childNodes.length,n=0;i>n;n++){var a=t.childNodes[n];if(1==a.nodeType)return r(a,null)}return null}function r(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var i=new a(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),n=e.attributes,o=i.attributes,h=n.length,l=0;h>l;l++){var u=n[l],d=u.name;0!=d.indexOf("xmlns:")&&(o[d]=u.value,i["$"+d]=u.value)}var c=e.childNodes;h=c.length;var f=i.children;for(l=0;h>l;l++){var p=c[l],v=p.nodeType,g=null;if(1==v)g=r(p,i);else if(3==v){var m=p.textContent.trim();m&&(g=new s(m,i))}g&&f.push(g)}return i}var n=function(){function e(e,t){this.nodeType=e,this.parent=t}var t=(__define,e);t.prototype;return e}();t.XMLNode=n,e.registerClass(n,"egret.web.XMLNode");var a=function(e){function t(t,i,r,n,a){e.call(this,1,i),this.attributes={},this.children=[],this.localName=t,this.prefix=r,this.namespace=n,this.name=a}__extends(t,e);var i=(__define,t);i.prototype;return t}(n);t.XML=a,e.registerClass(a,"egret.web.XML");var s=function(e){function t(t,i){e.call(this,3,i),this.text=t}__extends(t,e);var i=(__define,t);i.prototype;return t}(n);t.XMLText=s,e.registerClass(s,"egret.web.XMLText");var o=new DOMParser;e.XML={parse:i}}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){var i=this;t.apply(this,arguments),this.onChange=function(t){var r=new e.OrientationEvent(e.Event.CHANGE);r.beta=t.beta,r.gamma=t.gamma,r.alpha=t.alpha,i.dispatchEvent(r)}}__extends(i,t);var r=(__define,i),n=r.prototype;return n.start=function(){window.addEventListener("deviceorientation",this.onChange)},n.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},i}(e.EventDispatcher);t.WebDeviceOrientation=i,e.registerClass(i,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(t=e.web||(e.web={}))}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation;var egret;!function(e){var t;!function(t){var i=function(t){function i(i){var r=this;t.call(this),this.onUpdate=function(t){var i=new e.GeolocationEvent(e.Event.CHANGE),n=t.coords;i.altitude=n.altitude,i.heading=n.heading,i.accuracy=n.accuracy,i.latitude=n.latitude,i.longitude=n.longitude,i.speed=n.speed,i.altitudeAccuracy=n.altitudeAccuracy,r.dispatchEvent(i)},this.onError=function(t){var i=e.GeolocationEvent.UNAVAILABLE;t.code==t.PERMISSION_DENIED&&(i=e.GeolocationEvent.PERMISSION_DENIED);var n=new e.GeolocationEvent(e.IOErrorEvent.IO_ERROR);n.errorType=i,n.errorMessage=t.message,r.dispatchEvent(n)},this.geolocation=navigator.geolocation}__extends(i,t);var r=(__define,i),n=r.prototype;return n.start=function(){var t=this.geolocation;t?this.watchId=t.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:e.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},n.stop=function(){var e=this.geolocation;e.clearWatch(this.watchId)},i}(e.EventDispatcher);t.WebGeolocation=i,e.registerClass(i,"egret.web.WebGeolocation",["egret.Geolocation"]),e.Geolocation=e.web.WebGeolocation}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){var i=this;t.apply(this,arguments),this.onChange=function(t){var r=new e.MotionEvent(e.Event.CHANGE),n={x:t.acceleration.x,y:t.acceleration.y,z:t.acceleration.z},a={x:t.accelerationIncludingGravity.x,y:t.accelerationIncludingGravity.y,z:t.accelerationIncludingGravity.z},s={alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma};r.acceleration=n,r.accelerationIncludingGravity=a,r.rotationRate=s,i.dispatchEvent(r)}}__extends(i,t);var r=(__define,i),n=r.prototype;return n.start=function(){window.addEventListener("devicemotion",this.onChange)},n.stop=function(){window.removeEventListener("devicemotion",this.onChange)},i}(e.EventDispatcher);t.WebMotion=i,e.registerClass(i,"egret.web.WebMotion",["egret.Motion"]),e.Motion=e.web.WebMotion}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function t(e){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.fragmentSrc="",this.gl=null,this.program=null,this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0}},this.gl=e}var i=(__define,t),r=i.prototype;return r.init=function(){var t=this.gl,i=e.WebGLUtils.compileProgram(t,this.defaultVertexSrc,this.fragmentSrc);t.useProgram(i),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(i,r);this.initUniforms(),this.program=i},r.initUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var i in this.uniforms){e=this.uniforms[i],e.dirty=!0;var r=e.type;"mat2"===r||"mat3"===r||"mat4"===r?(e.glMatrix=!0,e.glValueLength=1,"mat2"===r?e.glFunc=t.uniformMatrix2fv:"mat3"===r?e.glFunc=t.uniformMatrix3fv:"mat4"===r&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+r],"2f"===r||"2i"===r?e.glValueLength=2:"3f"===r||"3i"===r?e.glValueLength=3:"4f"===r||"4i"===r?e.glValueLength=4:e.glValueLength=1)}}},r.syncUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var i in this.uniforms)e=this.uniforms[i],e.dirty&&(1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength&&e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w),e.dirty=!1)}},r.setProjection=function(e,t){var i=this.uniforms.projectionVector;(i.value.x!=e||i.value.y!=t)&&(i.value.x=e,i.value.y=t,i.dirty=!0)},r.setAttribPointer=function(e){var t=this.gl;t.vertexAttribPointer(this.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.colorAttribute,1,t.FLOAT,!1,e,16)},t}();t.EgretShader=i,e.registerClass(i,"egret.web.EgretShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(e){function t(){e.apply(this,arguments),this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\n}"}__extends(t,e);var i=(__define,t);i.prototype;return t}(t.EgretShader);t.TextureShader=i,e.registerClass(i,"egret.web.TextureShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(e){function t(){e.apply(this,arguments),this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void) {\ngl_FragColor = vColor;\n}"}__extends(t,e);var i=(__define,t);i.prototype;return t}(t.EgretShader);t.PrimitiveShader=i,e.registerClass(i,"egret.web.PrimitiveShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(e){function t(){e.apply(this,arguments),this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform vec2 uTextureSize;void main(){const int sampleRadius = 5;const int samples = sampleRadius * 2 + 1;vec2 blurUv = blur / uTextureSize;vec4 color = vec4(0, 0, 0, 0);vec2 uv = vec2(0.0, 0.0);blurUv /= float(sampleRadius);for (int i = -sampleRadius; i <= sampleRadius; i++) {uv.x = vTextureCoord.x + float(i) * blurUv.x;uv.y = vTextureCoord.y + float(i) * blurUv.y;color += texture2D(uSampler, uv);}color /= float(samples);gl_FragColor = color;}",this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},blur:{type:"2f",value:{x:2,y:2},dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}}}__extends(t,e);var i=(__define,t),r=i.prototype;return r.setBlur=function(e,t){var i=this.uniforms.blur;(i.value.x!=e||i.value.y!=t)&&(i.value.x=e,i.value.y=t,i.dirty=!0)},r.setTextureSize=function(e,t){var i=this.uniforms.uTextureSize;(e!=i.value.x||t!=i.value.y)&&(i.value.x=e,i.value.y=t,i.dirty=!0)},t}(t.TextureShader);t.BlurShader=i,e.registerClass(i,"egret.web.BlurShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(e){function t(){e.apply(this,arguments),this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nif(texColor.a > 0.) {texColor = vec4(texColor.rgb / texColor.a, texColor.a);\n}vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\ngl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\n}",this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],dirty:!0},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0},dirty:!0}}
}__extends(t,e);var i=(__define,t),r=i.prototype;return r.setMatrix=function(e){var t=this.uniforms.matrix;(t.value[0]!=e[0]||t.value[0]!=e[0]||t.value[1]!=e[1]||t.value[2]!=e[2]||t.value[3]!=e[3]||t.value[4]!=e[5]||t.value[5]!=e[6]||t.value[6]!=e[7]||t.value[7]!=e[8]||t.value[8]!=e[10]||t.value[9]!=e[11]||t.value[10]!=e[12]||t.value[11]!=e[13]||t.value[12]!=e[15]||t.value[13]!=e[16]||t.value[14]!=e[17]||t.value[15]!=e[18])&&(t.value[0]=e[0],t.value[1]=e[1],t.value[2]=e[2],t.value[3]=e[3],t.value[4]=e[5],t.value[5]=e[6],t.value[6]=e[7],t.value[7]=e[8],t.value[8]=e[10],t.value[9]=e[11],t.value[10]=e[12],t.value[11]=e[13],t.value[12]=e[15],t.value[13]=e[16],t.value[14]=e[17],t.value[15]=e[18],t.dirty=!0);var i=this.uniforms.colorAdd;(i.value.x!=e[4]/255||i.value.y!=e[9]/255||i.value.z!=e[14]/255||i.value.w!=e[19]/255)&&(i.value.x=e[4]/255,i.value.y=e[9]/255,i.value.z=e[14]/255,i.value.w=e[19]/255,i.dirty=!0)},t}(t.TextureShader);t.ColorTransformShader=i,e.registerClass(i,"egret.web.ColorTransformShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(e){function t(){e.apply(this,arguments),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float distance;","uniform float angle;","uniform vec4 color;","uniform float alpha;","uniform float blurX;","uniform float blurY;","uniform float strength;","uniform float inner;","uniform float knockout;","uniform float hideObject;","uniform vec2 uTextureSize;vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);","float random(vec3 scale, float seed)","{","return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","const float linearSamplingTimes = 7.0;","const float circleSamplingTimes = 12.0;","vec4 ownColor = texture2D(uSampler, vTextureCoord);","vec4 curColor;","float totalAlpha = 0.0;","float maxTotalAlpha = 0.0;","float curDistanceX = 0.0;","float curDistanceY = 0.0;","float offsetX = distance * cos(angle) * px.x;","float offsetY = distance * sin(angle) * px.y;","const float PI = 3.14159265358979323846264;","float cosAngle;","float sinAngle;","float offset = PI * 2.0 / circleSamplingTimes * random(vec3(12.9898, 78.233, 151.7182), 0.0);","float stepX = blurX * px.x / linearSamplingTimes;","float stepY = blurY * px.y / linearSamplingTimes;","for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {","cosAngle = cos(a + offset);","sinAngle = sin(a + offset);","for (float i = 1.0; i <= linearSamplingTimes; i++) {","curDistanceX = i * stepX * cosAngle;","curDistanceY = i * stepY * sinAngle;","curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));","totalAlpha += (linearSamplingTimes - i) * curColor.a;","maxTotalAlpha += (linearSamplingTimes - i);","}","}","ownColor.a = max(ownColor.a, 0.0001);","ownColor.rgb = ownColor.rgb / ownColor.a;","float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);","float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;","ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);","vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));","vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));","float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);","gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);","}"].join("\n"),this.uniforms={projectionVector:{type:"2f",value:{x:0,y:0},dirty:!0},distance:{type:"1f",value:15,dirty:!0},angle:{type:"1f",value:1,dirty:!0},color:{type:"4f",value:{x:1,y:0,z:0,w:0},dirty:!0},alpha:{type:"1f",value:1,dirty:!0},blurX:{type:"1f",value:1,dirty:!0},blurY:{type:"1f",value:1,dirty:!0},strength:{type:"1f",value:1,dirty:!0},inner:{type:"1f",value:1,dirty:!0},knockout:{type:"1f",value:1,dirty:!0},hideObject:{type:"1f",value:0,dirty:!0},uTextureSize:{type:"2f",value:{x:100,y:100},dirty:!0}}}__extends(t,e);var i=(__define,t),r=i.prototype;return r.setDistance=function(e){var t=this.uniforms.distance;t.value!=e&&(t.value=e,t.dirty=!0)},r.setAngle=function(e){var t=this.uniforms.angle;t.value!=e&&(t.value=e,t.dirty=!0)},r.setColor=function(e,t,i){var r=this.uniforms.color;(r.value.x!=e||r.value.y!=t||r.value.z!=i)&&(r.value.x=e,r.value.y=t,r.value.z=i,r.dirty=!0)},r.setAlpha=function(e){var t=this.uniforms.alpha;t.value!=e&&(t.value=e,t.dirty=!0)},r.setBlurX=function(e){var t=this.uniforms.blurX;t.value!=e&&(t.value=e,t.dirty=!0)},r.setBlurY=function(e){var t=this.uniforms.blurY;t.value!=e&&(t.value=e,t.dirty=!0)},r.setStrength=function(e){var t=this.uniforms.strength;t.value!=e&&(t.value=e,t.dirty=!0)},r.setInner=function(e){var t=this.uniforms.inner;t.value!=e&&(t.value=e,t.dirty=!0)},r.setKnockout=function(e){var t=this.uniforms.knockout;t.value!=e&&(t.value=e,t.dirty=!0)},r.setHideObject=function(e){var t=this.uniforms.hideObject;t.value!=e&&(t.value=e,t.dirty=!0)},r.setTextureSize=function(e,t){var i=this.uniforms.uTextureSize;(e!=i.value.x||t!=i.value.y)&&(i.value.x=e,i.value.y=t,i.dirty=!0)},t}(t.TextureShader);t.GlowShader=i,e.registerClass(i,"egret.web.GlowShader")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(e){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.currentShader=null,this.defaultShader=null,this.primitiveShader=null,this.colorTransformShader=null,this.blurShader=null,this.glowShader=null;for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)}var i=(__define,e),r=i.prototype;return r.setContext=function(e){this.gl=e,this.primitiveShader=new t.PrimitiveShader(e),this.defaultShader=new t.TextureShader(e),this.colorTransformShader=new t.ColorTransformShader(e),this.glowShader=new t.GlowShader(e),this.blurShader=new t.BlurShader(e),this.primitiveShader.init(),this.defaultShader.init(),this.colorTransformShader.init(),this.blurShader.init(),this.glowShader.init()},r.activateShader=function(e,t){this.currentShader!=e&&(this.gl.useProgram(e.program),this.setAttribs(e.attributes),e.setAttribPointer(t),this.currentShader=e)},r.setAttribs=function(e){var t,i;for(i=this.tempAttribState.length,t=0;i>t;t++)this.tempAttribState[t]=!1;for(i=e.length,t=0;i>t;t++){var r=e[t];this.tempAttribState[r]=!0}var n=this.gl;for(i=this.attribState.length,t=0;i>t;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},e}();t.WebGLShaderManager=i,e.registerClass(i,"egret.web.WebGLShaderManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(){this.drawData=[],this.drawDataLen=0}var t=(__define,e),i=t.prototype;return i.pushDrawRect=function(){if(0==this.drawDataLen||1!=this.drawData[this.drawDataLen-1].type){var e=this.drawData[this.drawDataLen]||{};e.type=1,e.count=0,this.drawData[this.drawDataLen]=e,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=2},i.pushDrawTexture=function(e,t,i,r,n){if(void 0===t&&(t=2),i){var a=this.drawData[this.drawDataLen]||{};a.type=0,a.texture=e,a.filter=i,a.count=t,a.textureWidth=r,a.textureHeight=n,this.drawData[this.drawDataLen]=a,this.drawDataLen++}else{if(0==this.drawDataLen||0!=this.drawData[this.drawDataLen-1].type||e!=this.drawData[this.drawDataLen-1].texture||this.drawData[this.drawDataLen-1].filter){var a=this.drawData[this.drawDataLen]||{};a.type=0,a.texture=e,a.count=0,this.drawData[this.drawDataLen]=a,this.drawDataLen++}this.drawData[this.drawDataLen-1].count+=t}},i.pushPushMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=2,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},i.pushPopMask=function(e){void 0===e&&(e=1);var t=this.drawData[this.drawDataLen]||{};t.type=3,t.count=2*e,this.drawData[this.drawDataLen]=t,this.drawDataLen++},i.pushSetBlend=function(e){for(var t=this.drawDataLen,i=!1,r=t-1;r>=0;r--){var n=this.drawData[r];if(n){if((0==n.type||1==n.type)&&(i=!0),!i&&4==n.type){this.drawData.splice(r,1),this.drawDataLen--;continue}if(4==n.type){if(n.value==e)return;break}}}var a=this.drawData[this.drawDataLen]||{};a.type=4,a.value=e,this.drawData[this.drawDataLen]=a,this.drawDataLen++},i.pushResize=function(e,t,i){var r=this.drawData[this.drawDataLen]||{};r.type=5,r.buffer=e,r.width=t,r.height=i,this.drawData[this.drawDataLen]=r,this.drawDataLen++},i.pushClearColor=function(){var e=this.drawData[this.drawDataLen]||{};e.type=6,this.drawData[this.drawDataLen]=e,this.drawDataLen++},i.pushActivateBuffer=function(e){for(var t=this.drawDataLen,i=!1,r=t-1;r>=0;r--){var n=this.drawData[r];!n||(4!=n.type&&7!=n.type&&(i=!0),i||7!=n.type)||(this.drawData.splice(r,1),this.drawDataLen--)}var a=this.drawData[this.drawDataLen]||{};a.type=7,a.buffer=e,a.width=e.rootRenderTarget.width,a.height=e.rootRenderTarget.height,this.drawData[this.drawDataLen]=a,this.drawDataLen++},i.clear=function(){for(var e=0;e<this.drawDataLen;e++){var t=this.drawData[e];t.type=0,t.count=0,t.texture=null,t.filter=null,t.uv=null,t.value="",t.buffer=null,t.width=0,t.height=0}this.drawDataLen=0},e}();t.WebGLDrawCmdManager=i,e.registerClass(i,"egret.web.WebGLDrawCmdManager")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(){this.size=2e3,this.vertexMaxSize=4*this.size,this.indicesMaxSize=6*this.size,this.vertSize=5,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1;var e=this.vertexMaxSize*this.vertSize,t=this.indicesMaxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(t),this.indicesForMesh=new Uint16Array(t);for(var i=0,r=0;t>i;i+=6,r+=4)this.indices[i+0]=r+0,this.indices[i+1]=r+1,this.indices[i+2]=r+2,this.indices[i+3]=r+0,this.indices[i+4]=r+2,this.indices[i+5]=r+3}var t=(__define,e),i=t.prototype;return i.reachMaxSize=function(e,t){return void 0===e&&(e=4),void 0===t&&(t=6),this.vertexIndex>this.vertexMaxSize-e||this.indexIndex>this.indicesMaxSize-t},i.getVertices=function(){var e=this.vertices.subarray(0,this.vertexIndex*this.vertSize);return e},i.getIndices=function(){return this.indices},i.getMeshIndices=function(){return this.indicesForMesh},i.changeToMeshIndices=function(){if(!this.hasMesh){for(var e=0,t=this.indexIndex;t>e;++e)this.indicesForMesh[e]=this.indices[e];this.hasMesh=!0}},i.isMesh=function(){return this.hasMesh},i.cacheArrays=function(e,t,i,r,n,a,s,o,h,l,u,d,c,f,p){var v=e,g=v.a,m=v.b,x=v.c,w=v.d,b=v.tx,y=v.ty;(0!=s||0!=o)&&v.append(1,0,0,1,s,o),(n/h!=1||a/l!=1)&&v.append(h/n,0,0,l/a,0,0);var E=v.a,T=v.b,S=v.c,C=v.d,_=v.tx,R=v.ty;if(v.a=g,v.b=m,v.c=x,v.d=w,v.tx=b,v.ty=y,f){var L=this.vertices,D=this.vertexIndex*this.vertSize,A=0,M=0,$=0,I=0,B=0,O=0,F=0;for(A=0,$=c.length;$>A;A+=2)M=5*A/2,O=f[A],F=f[A+1],I=c[A],B=c[A+1],L[D+M+0]=E*O+S*F+_,L[D+M+1]=T*O+C*F+R,L[D+M+2]=(i+I*n)/u,L[D+M+3]=(r+B*a)/d,L[D+M+4]=t;if(this.hasMesh)for(var A=0,$=p.length;$>A;++A)this.indicesForMesh[this.indexIndex+A]=p[A]+this.vertexIndex;this.vertexIndex+=c.length/2,this.indexIndex+=p.length}else{var P=u,W=d,H=n,G=a;i/=P,r/=W,n/=P,a/=W;var L=this.vertices,D=this.vertexIndex*this.vertSize;if(L[D++]=_,L[D++]=R,L[D++]=i,L[D++]=r,L[D++]=t,L[D++]=E*H+_,L[D++]=T*H+R,L[D++]=n+i,L[D++]=r,L[D++]=t,L[D++]=E*H+S*G+_,L[D++]=C*G+T*H+R,L[D++]=n+i,L[D++]=a+r,L[D++]=t,L[D++]=S*G+_,L[D++]=C*G+R,L[D++]=i,L[D++]=a+r,L[D++]=t,this.hasMesh){var k=this.indicesForMesh;k[this.indexIndex+0]=0+this.vertexIndex,k[this.indexIndex+1]=1+this.vertexIndex,k[this.indexIndex+2]=2+this.vertexIndex,k[this.indexIndex+3]=0+this.vertexIndex,k[this.indexIndex+4]=2+this.vertexIndex,k[this.indexIndex+5]=3+this.vertexIndex}this.vertexIndex+=4,this.indexIndex+=6}},i.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},e}();t.WebGLVertexArrayObject=i,e.registerClass(i,"egret.web.WebGLVertexArrayObject")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function e(e,t,i){this.clearColor=[0,0,0,0],this.useFrameBuffer=!0,this.gl=e,this.width=t||1,this.height=i||1,this.texture=this.createTexture(),this.frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer)}var t=(__define,e),i=t.prototype;return i.resize=function(e,t){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t),this.width=e,this.height=t},i.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer())},i.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},i.createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},i.clear=function(e){var t=this.gl;e&&this.activate(),t.colorMask(!0,!0,!0,!0),t.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),t.clear(t.COLOR_BUFFER_BIT)},e}();t.WebGLRenderTarget=i,e.registerClass(i,"egret.web.WebGLRenderTarget")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(t,i){var r=document.createElement("canvas");return isNaN(t)||isNaN(i)||(r.width=t,r.height=i),e.$toBitmapData(r),r}var r=function(){function r(e,r){this.glID=null,this.projectionX=0/0,this.projectionY=0/0,this.shaderManager=null,this.contextLost=!1,this.vertSize=5,this.blurFilter=null,this.surface=i(e,r),this.initWebGL(),this.$bufferStack=[];var n=this.context;this.vertexBuffer=n.createBuffer(),this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new t.WebGLDrawCmdManager,this.vao=new t.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over")}var n=(__define,r),a=n.prototype;return r.getInstance=function(e,t){return this.instance?this.instance:(this.instance=new r(e,t),this.instance)},a.pushBuffer=function(e){this.$bufferStack.push(e),e!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(e)),this.currentBuffer=e},a.popBuffer=function(){if(!(this.$bufferStack.length<=1)){var e=this.$bufferStack.pop(),t=this.$bufferStack[this.$bufferStack.length-1];e!=t&&this.drawCmdManager.pushActivateBuffer(t),this.currentBuffer=t}},a.activateBuffer=function(e){e.rootRenderTarget.activate(),this.bindIndices||(this.uploadIndicesArray(this.vao.getIndices()),this.bindIndices=!0),e.restoreStencil(),this.onResize(e.width,e.height)},a.uploadVerticesArray=function(e){var t=this.context;t.bufferData(t.ARRAY_BUFFER,e,t.STREAM_DRAW)},a.uploadIndicesArray=function(e){var t=this.context;t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)},a.destroy=function(){this.surface.width=this.surface.height=0},a.onResize=function(e,t){var e=e||this.surface.width,t=t||this.surface.height;this.projectionX=e/2,this.projectionY=-t/2,this.context&&this.context.viewport(0,0,e,t)},a.resize=function(e,t,i){var r=this.surface;i?(r.width<e&&(r.width=e),r.height<t&&(r.height=t)):(r.width!=e&&(r.width=e),r.height!=t&&(r.height=t)),this.onResize()},a.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext(),this.shaderManager=new t.WebGLShaderManager(this.context)},a.handleContextLost=function(){this.contextLost=!0},a.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},a.getWebGLContext=function(){for(var t,i={stencil:!0},r=["webgl","experimental-webgl"],n=0;n<r.length;n++){try{t=this.surface.getContext(r[n],i)}catch(a){}if(t)break}t||e.$error(1021),this.setContext(t)},a.setContext=function(e){this.context=e,e.id=r.glContextId++,this.glID=e.id,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0),e.activeTexture(e.TEXTURE0)},a.enableStencilTest=function(){var e=this.context;e.enable(e.STENCIL_TEST)},a.disableStencilTest=function(){var e=this.context;e.disable(e.STENCIL_TEST)},a.getPixels=function(e,t,i,r,n){var a=this.context;a.readPixels(e,t,i,r,a.RGBA,a.UNSIGNED_BYTE,n)},a.createTexture=function(e){var t=this.context,i=t.createTexture();return i?(i.glContext=t,t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i):void(this.contextLost=!0)},a.updateTexture=function(e,t){var i=this.context;i.bindTexture(i.TEXTURE_2D,e),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)},a.getWebGLTexture=function(e){var t=e;if(t.webGLTexture||(t.webGLTexture={}),!t.webGLTexture[this.glID]){var i=this.createTexture(t);t.webGLTexture[this.glID]=i}return t.webGLTexture[this.glID]},a.clearRect=function(e,t,i,r){0!=e||0!=t||i!=this.surface.width||r!=this.surface.height?(this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,i,r),this.setGlobalCompositeOperation("source-over")):this.clear()},a.setGlobalCompositeOperation=function(e){this.drawCmdManager.pushSetBlend(e)},a.drawImage=function(e,t,i,r,n,a,s,o,h,l,u){var d=this.currentBuffer;if(!this.contextLost&&e&&d){var c;e.texture?(c=e.texture,d.saveTransform(),d.transform(1,0,0,-1,0,h+2*s)):c=this.getWebGLTexture(e),c&&(this.drawTexture(c,t,i,r,n,a,s,o,h,l,u),e.texture&&d.restoreTransform())}},a.drawMesh=function(e,t,i,r,n,a,s,o,h,l,u,d,c,f,p){if(!this.contextLost&&e){var v=this.getWebGLTexture(e);v&&this.drawTexture(v,t,i,r,n,a,s,o,h,l,u,d,c,f,p)}},a.drawTexture=function(e,t,i,r,n,a,s,o,h,l,u,d,c,f,p){var v=this.currentBuffer;if(!this.contextLost&&e&&v){c&&f?this.vao.reachMaxSize(c.length/2,f.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),d&&this.vao.changeToMeshIndices();var g=v.globalMatrix,m=v.globalAlpha,x=f?f.length/3:2;this.drawCmdManager.pushDrawTexture(e,x,this.$filter),this.vao.cacheArrays(g,m,t,i,r,n,a,s,o,h,l,u,d,c,f)}},a.drawRect=function(e,t,i,r){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,i,r,e,t,i,r,i,r))},a.pushMask=function(e){var t=this.currentBuffer;if(!this.contextLost&&t){t.$stencilList.push(e),this.vao.reachMaxSize()&&this.$drawWebGL();var i=e.length;if(i){this.drawCmdManager.pushPushMask(i);for(var r=0;i>r;r++){var n=e[r];this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPushMask(),this.vao.cacheArrays(t.globalMatrix,t.globalAlpha,0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height)}},a.popMask=function(){var e=this.currentBuffer;if(!this.contextLost&&e){var t=e.$stencilList.pop();this.vao.reachMaxSize()&&this.$drawWebGL();var i=t.length;if(i){this.drawCmdManager.pushPopMask(i);for(var r=0;i>r;r++){var n=t[r];this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height)}}else this.drawCmdManager.pushPopMask(),this.vao.cacheArrays(e.globalMatrix,e.globalAlpha,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height)}},a.clear=function(){this.drawCmdManager.pushClearColor()},a.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var e=this.drawCmdManager.drawDataLen,t=0,i=0;e>i;i++){var r=this.drawCmdManager.drawData[i];t=this.drawData(r,t),7==r.type&&(this.activatedBuffer=r.buffer),(0==r.type||1==r.type||2==r.type||3==r.type)&&this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},a.drawData=function(e,t){if(e){switch(e.type){case 0:var i,r=e.filter;r?"colorTransform"==r.type?(i=this.shaderManager.colorTransformShader,i.setMatrix(r.$matrix)):"blur"==r.type?(i=this.shaderManager.blurShader,i.setBlur(r.$blurX,r.$blurY),i.setTextureSize(e.textureWidth,e.textureHeight)):"glow"==r.type&&(i=this.shaderManager.glowShader,i.setDistance(r.$distance||0),i.setAngle(r.$angle?r.$angle/180*Math.PI:0),i.setColor(r.$red/255,r.$green/255,r.$blue/255),i.setAlpha(r.$alpha),i.setBlurX(r.$blurX),i.setBlurY(r.$blurY),i.setStrength(r.$strength),i.setInner(r.$inner?1:0),i.setKnockout(r.$knockout?0:1),i.setHideObject(r.$hideObject?1:0),i.setTextureSize(e.textureWidth,e.textureHeight)):i=this.shaderManager.defaultShader,i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),t+=this.drawTextureElements(e,t);break;case 1:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),t+=this.drawRectElements(e,t);break;case 2:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),t+=this.drawPushMaskElements(e,t);break;case 3:var i=this.shaderManager.primitiveShader;i.setProjection(this.projectionX,this.projectionY),this.shaderManager.activateShader(i,4*this.vertSize),i.syncUniforms(),t+=this.drawPopMaskElements(e,t);break;case 4:this.setBlendMode(e.value);break;case 5:e.buffer.rootRenderTarget.resize(e.width,e.height),this.onResize(e.width,e.height);break;case 6:if(this.activatedBuffer){var n=this.activatedBuffer.rootRenderTarget;(0!=n.width||0!=n.height)&&n.clear()}break;case 7:this.activateBuffer(e.buffer)}return t}},a.drawTextureElements=function(e,t){var i=this.context;i.bindTexture(i.TEXTURE_2D,e.texture);var r=3*e.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),r},a.drawRectElements=function(e,t){var i=this.context,r=3*e.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),r},a.drawPushMaskElements=function(e,t){var i=this.context,r=3*e.count,n=this.activatedBuffer;if(n){0==n.stencilHandleCount&&(n.enableStencil(),i.clear(i.STENCIL_BUFFER_BIT));var a=n.stencilHandleCount;n.stencilHandleCount++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,a,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR),i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),i.stencilFunc(i.EQUAL,a+1,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return r},a.drawPopMaskElements=function(e,t){var i=this.context,r=3*e.count,n=this.activatedBuffer;if(n)if(n.stencilHandleCount--,0==n.stencilHandleCount)n.disableStencil();else{var a=n.stencilHandleCount;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,a+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR),i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),i.stencilFunc(i.EQUAL,a,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}return r},a.setBlendMode=function(e){var t=this.context,i=r.blendModesForGL[e];i&&t.blendFunc(i[0],i[1])},a.drawTargetWidthFilters=function(e,i){var r,n=i,a=e.length;if(a>1)for(var s=0;a-1>s;s++){var o=e[s],h=i.rootRenderTarget.width,l=i.rootRenderTarget.height;r=t.WebGLRenderBuffer.create(h,l),r.setTransform(1,0,0,1,0,0),r.globalAlpha=1,this.drawToRenderTarget(o,i,r),i!=n&&t.WebGLRenderBuffer.release(i),i=r}var o=e[a-1];this.drawToRenderTarget(o,i,this.currentBuffer),i!=n&&t.WebGLRenderBuffer.release(i)},a.drawToRenderTarget=function(i,r,n){if(!this.contextLost){this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(n);var a,s=r,o=r.rootRenderTarget.width,h=r.rootRenderTarget.height;"blur"==i.type&&(this.blurFilter||(this.blurFilter=new e.BlurFilter(2,2)),0!=i.blurX&&0!=i.blurY?(this.blurFilter.blurX=i.blurX,this.blurFilter.blurY=0,a=t.WebGLRenderBuffer.create(o,h),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this.drawToRenderTarget(this.blurFilter,r,a),r!=s&&t.WebGLRenderBuffer.release(r),r=a,this.blurFilter.blurX=0,this.blurFilter.blurY=i.blurY):(this.blurFilter.blurX=i.blurX,this.blurFilter.blurY=i.blurY),i=this.blurFilter),n.saveTransform(),n.transform(1,0,0,-1,0,h),this.vao.cacheArrays(n.globalMatrix,n.globalAlpha,0,0,o,h,0,0,o,h,o,h),n.restoreTransform();var l;l="blur"==i.type?{type:"blur",$blurX:i.$blurX,$blurY:i.$blurY}:i,this.drawCmdManager.pushDrawTexture(r.rootRenderTarget.texture,2,l,o,h),r!=s&&t.WebGLRenderBuffer.release(r),this.popBuffer()}},r.initBlendMode=function(){r.blendModesForGL={},r.blendModesForGL["source-over"]=[1,771],r.blendModesForGL.lighter=[770,1],r.blendModesForGL["lighter-in"]=[770,771],r.blendModesForGL["destination-out"]=[0,771],r.blendModesForGL["destination-in"]=[0,770]},r.glContextId=0,r.blendModesForGL=null,r}();t.WebGLRenderContext=r,e.registerClass(r,"egret.web.WebGLRenderContext"),r.initBlendMode()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function i(i,r){if(this.globalAlpha=1,this.stencilState=!1,this.$stencilList=[],this.stencilHandleCount=0,this.dirtyRegionPolicy=!0,this._dirtyRegionPolicy=!0,this.$drawCalls=0,this.$computeDrawCall=!1,this.globalMatrix=new e.Matrix,this.savedGlobalMatrix=new e.Matrix,this.context=t.WebGLRenderContext.getInstance(i,r),this.rootRenderTarget=new t.WebGLRenderTarget(this.context.context,3,3),i&&r&&this.resize(i,r),this.root=0==this.context.$bufferStack.length,this.root)this.context.pushBuffer(this),this.surface=this.context.surface;else{var n=this.context.activatedBuffer;n&&n.rootRenderTarget.activate(),this.surface=this.rootRenderTarget}}var n=__define,a=i,s=a.prototype;return s.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},s.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},s.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n(s,"width",function(){return this.rootRenderTarget.width}),n(s,"height",function(){return this.rootRenderTarget.height}),s.resize=function(e,t,i){this.context.pushBuffer(this),e=e||1,t=t||1,(e!=this.rootRenderTarget.width||t!=this.rootRenderTarget.height)&&(this.context.drawCmdManager.pushResize(this,e,t),this.rootRenderTarget.width=e,this.rootRenderTarget.height=t),this.root&&this.context.resize(e,t,i),this.context.clear(),this.context.popBuffer()},s.resizeTo=function(e,t,r,n){this.context.pushBuffer(this);var a=this.rootRenderTarget.width,s=this.rootRenderTarget.height,o=i.create(a,s);this.context.pushBuffer(o),this.context.drawImage(this.rootRenderTarget,0,0,a,s,0,0,a,s,a,s),this.context.popBuffer(),this.resize(e,t),this.setTransform(1,0,0,1,0,0),this.context.drawImage(o.rootRenderTarget,0,0,a,s,r,n,a,s,a,s),i.release(o),this.context.popBuffer()},s.setDirtyRegionPolicy=function(e){this.dirtyRegionPolicy="on"==e},s.beginClip=function(e,t,i){this.context.pushBuffer(this),this.root&&(this._dirtyRegionPolicy?(this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate()):(this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.clear())),t=+t||0,i=+i||0,this.setTransform(1,0,0,1,t,i);var r=e.length;if(1==r&&0==e[0].minX&&0==e[0].minY&&e[0].width==this.rootRenderTarget.width&&e[0].height==this.rootRenderTarget.height)return this.maskPushed=!1,this.rootRenderTarget.useFrameBuffer&&this.context.clear(),void this.context.popBuffer();for(var n=0;r>n;n++){var a=e[n];this.context.clearRect(a.minX,a.minY,a.width,a.height)}r>0?(this.context.pushMask(e),this.maskPushed=!0,this.offsetX=t,this.offsetY=i):this.maskPushed=!1,this.context.popBuffer()},s.endClip=function(){this.maskPushed&&(this.context.pushBuffer(this),this.setTransform(1,0,0,1,this.offsetX,this.offsetY),this.context.popMask(),this.context.popBuffer())},s.getPixel=function(e,t){var i=new Uint8Array(4),r=this.rootRenderTarget.useFrameBuffer;return this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(e,t,1,1,i),this.rootRenderTarget.useFrameBuffer=r,this.rootRenderTarget.activate(),i},s.toDataURL=function(e,t){return this.context.surface.toDataURL(e,t)},s.destroy=function(){this.context.destroy()},s.onRenderFinish=function(){this.$drawCalls=0,this.root&&(!this._dirtyRegionPolicy&&this.dirtyRegionPolicy&&this.drawSurfaceToFrameBuffer(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,!0),this._dirtyRegionPolicy&&this.drawFrameBufferToSurface(0,0,this.rootRenderTarget.width,this.rootRenderTarget.height,0,0,this.rootRenderTarget.width,this.rootRenderTarget.height),this._dirtyRegionPolicy=this.dirtyRegionPolicy)},s.drawFrameBufferToSurface=function(e,t,i,r,n,a,s,o,h){void 0===h&&(h=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),h&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,e,t,i,r,n,a,s,o,i,r),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil()},s.drawSurfaceToFrameBuffer=function(e,t,i,r,n,a,s,o,h){void 0===h&&(h=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),h&&this.context.clear(),this.context.drawImage(this.context.surface,e,t,i,r,n,a,s,o,i,r),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil()},s.clear=function(){this.context.clear()},s.setTransform=function(e,t,i,r,n,a){var s=this.globalMatrix;s.a=e,s.b=t,s.c=i,s.d=r,s.tx=n,s.ty=a},s.transform=function(e,t,i,r,n,a){var s=this.globalMatrix,o=s.a,h=s.b,l=s.c,u=s.d;(1!=e||0!=t||0!=i||1!=r)&&(s.a=e*o+t*l,s.b=e*h+t*u,s.c=i*o+r*l,s.d=i*h+r*u),s.tx=n*o+a*l+s.tx,s.ty=n*h+a*u+s.ty},s.translate=function(e,t){var i=this.globalMatrix;i.tx+=e,i.ty+=t},s.saveTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},s.restoreTransform=function(){var e=this.globalMatrix,t=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},i.create=function(e,t){var n=r.pop();return n?n.resize(e,t):(n=new i(e,t),n.$computeDrawCall=!1),n},i.release=function(e){r.push(e)},i}();t.WebGLRenderBuffer=i,e.registerClass(i,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var r=[]}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=["source-over","lighter","destination-out"],r="source-over",n=[],a=function(){function a(){this.nestLevel=0
}var s=(__define,a),o=s.prototype;return o.render=function(e,t,i,r,a){this.nestLevel++;var s=t,o=s.context,h=a?e:null;o.pushBuffer(s),this.drawDisplayObject(e,s,r,i,null,null,h),o.$drawWebGL();var l=s.$drawCalls;if(s.onRenderFinish(),o.popBuffer(),this.nestLevel--,0===this.nestLevel){n.length>6&&(n.length=6);for(var u=n.length,d=0;u>d;d++)n[d].resize(0,0)}return l},o.drawDisplayObject=function(t,i,r,n,a,s,o){var h,l=0;if(a&&!o?(a.isDirty&&(l+=a.drawToSurface()),h=a.$renderNode):h=t.$getRenderNode(),h){if(r){var u=h.renderRegion;if(s&&!s.intersects(u))h.needRedraw=!1;else if(!h.needRedraw)for(var d=r.length,c=0;d>c;c++)if(u.intersects(r[c])){h.needRedraw=!0;break}}else h.needRedraw=!0;if(h.needRedraw){l++;var f,p;o?(f=t.$getConcatenatedAlphaAt(o,t.$getConcatenatedAlpha()),p=e.Matrix.create().copyFrom(t.$getConcatenatedMatrix()),t.$getConcatenatedMatrixAt(o,p),n.$preMultiplyInto(p,p),i.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),e.Matrix.release(p)):(f=h.renderAlpha,p=h.renderMatrix,i.setTransform(p.a,p.b,p.c,p.d,p.tx+n.tx,p.ty+n.ty)),i.globalAlpha=f,this.renderNode(h,i),h.needRedraw=!1}}if(a&&!o)return l;var v=t.$children;if(v)for(var g=v.length,m=0;g>m;m++){var x=v[m];if(!(!x.$visible||x.$alpha<=0||x.$maskedObject)){var w=x.$getFilters();w&&w.length>0?l+=this.drawWithFilter(x,i,r,n,s,o):0!==x.$blendMode||x.$mask&&(x.$mask.$parentDisplayList||o)?l+=this.drawWithClip(x,i,r,n,s,o):x.$scrollRect||x.$maskRect?l+=this.drawWithScrollRect(x,i,r,n,s,o):x.isFPS?(i.context.$drawWebGL(),i.$computeDrawCall=!1,this.drawDisplayObject(x,i,r,n,x.$displayList,s,o),i.context.$drawWebGL(),i.$computeDrawCall=!0):l+=this.drawDisplayObject(x,i,r,n,x.$displayList,s,o)}}return l},o.drawWithFilter=function(t,a,s,o,h,l){var u=0,d=t.$getFilters(),c=0!==t.$blendMode;if(c){var f=i[t.$blendMode];f||(f=r)}if(1==d.length&&"colorTransform"==d[0].type&&!t.$children)return c&&a.context.setGlobalCompositeOperation(f),a.context.$filter=d[0],u+=this.drawDisplayObject(t,a,s,o,t.$displayList,h,l),a.context.$filter=null,c&&a.context.setGlobalCompositeOperation(r),u;var p=e.Matrix.create();p.copyFrom(t.$getConcatenatedMatrix());var v;v=e.sys.Region.create();var g=t.$getOriginalBounds();v.updateRegion(g,p);var m=this.createRenderBuffer(v.width,v.height);m.context.pushBuffer(m),m.setTransform(1,0,0,1,-v.minX,-v.minY);var x=e.Matrix.create().setTo(1,0,0,1,-v.minX,-v.minY);return u+=this.drawDisplayObject(t,m,s,x,t.$displayList,v,l),e.Matrix.release(x),m.context.popBuffer(),u>0&&(c&&a.context.setGlobalCompositeOperation(f),u++,a.globalAlpha=1,a.setTransform(1,0,0,1,v.minX+o.tx,v.minY+o.ty),a.context.drawTargetWidthFilters(d,m),c&&a.context.setGlobalCompositeOperation(r)),n.push(m),e.sys.Region.release(v),e.Matrix.release(p),u},o.drawWithClip=function(t,a,s,o,h,l){var u=0,d=0!==t.$blendMode;if(d){var c=i[t.$blendMode];c||(c=r)}var f=t.$scrollRect?t.$scrollRect:t.$maskRect,p=t.$mask,p=t.$mask;if(p){var v=p.$getRenderNode();if(v){var g=v.renderMatrix;if(0==g.a&&0==g.b||0==g.c&&0==g.d)return u}}var m,x=e.Matrix.create();if(x.copyFrom(t.$getConcatenatedMatrix()),t.$parentDisplayList){var w,b=t.$parentDisplayList.root;b!==t.$stage&&t.$getConcatenatedMatrixAt(b,x)}if(p){var y=p.$getOriginalBounds();m=e.sys.Region.create();var E=e.Matrix.create();E.copyFrom(p.$getConcatenatedMatrix()),w&&w.$preMultiplyInto(E,E),m.updateRegion(y,E),e.Matrix.release(E)}var T;if(f&&(T=e.sys.Region.create(),T.updateRegion(f,x)),T&&m?(T.intersect(m),e.sys.Region.release(m)):!T&&m&&(T=m),T){if(T.isEmpty()||h&&!h.intersects(T))return e.sys.Region.release(T),e.Matrix.release(x),u}else T=e.sys.Region.create(),y=t.$getOriginalBounds(),T.updateRegion(y,x);var S=!1;if(s){for(var C=s.length,_=0;C>_;_++)if(T.intersects(s[_])){S=!0;break}}else S=!0;if(!S)return e.sys.Region.release(T),e.Matrix.release(x),u;if(p||t.$children&&0!=t.$children.length){var R=this.createRenderBuffer(T.width,T.height);R.context.pushBuffer(R),R.setTransform(1,0,0,1,-T.minX,-T.minY);var L=e.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);if(u+=this.drawDisplayObject(t,R,s,L,t.$displayList,T,l),p){var D=this.createRenderBuffer(T.width,T.height);D.context.pushBuffer(D),D.setTransform(1,0,0,1,-T.minX,-T.minY),L=e.Matrix.create().setTo(1,0,0,1,-T.minX,-T.minY);var A=this.drawDisplayObject(p,D,s,L,p.$displayList,T,l);if(D.context.popBuffer(),A>0){u+=A,R.context.setGlobalCompositeOperation("destination-in"),R.setTransform(1,0,0,-1,0,D.height),R.globalAlpha=1;var M=D.rootRenderTarget.width,$=D.rootRenderTarget.height;R.context.drawTexture(D.rootRenderTarget.texture,0,0,M,$,0,0,M,$,M,$),R.context.setGlobalCompositeOperation("source-over")}n.push(D)}if(e.Matrix.release(L),R.context.setGlobalCompositeOperation(r),R.context.popBuffer(),u>0){if(u++,d&&a.context.setGlobalCompositeOperation(c),f){var E=x;R.setTransform(E.a,E.b,E.c,E.d,E.tx-T.minX,E.ty-T.minY),R.context.pushMask(f)}a.globalAlpha=1,a.setTransform(1,0,0,-1,T.minX+o.tx,T.minY+o.ty+R.height);var I=R.rootRenderTarget.width,B=R.rootRenderTarget.height;a.context.drawTexture(R.rootRenderTarget.texture,0,0,I,B,0,0,I,B,I,B),f&&R.context.popMask(),d&&a.context.setGlobalCompositeOperation(r)}return n.push(R),e.sys.Region.release(T),e.Matrix.release(x),u}if(f){var E=x;a.setTransform(E.a,E.b,E.c,E.d,E.tx-T.minX,E.ty-T.minY),a.context.pushMask(f)}var L=e.Matrix.create().setTo(1,0,0,1,0,0);if(d&&a.context.setGlobalCompositeOperation(c),f){var E=x;a.setTransform(E.a,E.b,E.c,E.d,E.tx-T.minX,E.ty-T.minY),a.context.pushMask(f)}return u+=this.drawDisplayObject(t,a,s,L,t.$displayList,T,null),e.Matrix.release(L),f&&a.context.popMask(),d&&a.context.setGlobalCompositeOperation(r),f&&a.context.popMask(),e.sys.Region.release(T),e.Matrix.release(x),u},o.drawWithScrollRect=function(t,i,r,n,a,s){var o=0,h=t.$scrollRect?t.$scrollRect:t.$maskRect;if(0==h.width||0==h.height)return o;var l=e.Matrix.create();if(l.copyFrom(t.$getConcatenatedMatrix()),s)t.$getConcatenatedMatrixAt(s,l);else if(t.$parentDisplayList){var u=t.$parentDisplayList.root;u!==t.$stage&&t.$getConcatenatedMatrixAt(u,l)}var d=e.sys.Region.create();if(h.isEmpty()||d.updateRegion(h,l),d.isEmpty()||a&&!a.intersects(d))return e.sys.Region.release(d),e.Matrix.release(l),o;var c=!1;if(r){for(var f=r.length,p=0;f>p;p++)if(d.intersects(r[p])){c=!0;break}}else c=!0;return c?(i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.context.pushMask(h),o+=this.drawDisplayObject(t,i,r,n,t.$displayList,d,s),i.setTransform(l.a,l.b,l.c,l.d,l.tx+n.tx,l.ty+n.ty),i.context.popMask(),e.sys.Region.release(d),e.Matrix.release(l),o):(e.sys.Region.release(d),e.Matrix.release(l),o)},o.drawNodeToBuffer=function(e,t,i,r){var n=t;n.context.pushBuffer(n),n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(e,t,r),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},o.renderNode=function(e,t,i){switch(e.type){case 1:this.renderBitmap(e,t);break;case 2:this.renderText(e,t);break;case 3:this.renderGraphics(e,t,i);break;case 4:this.renderGroup(e,t);break;case 6:t.globalAlpha=e.drawData[0];break;case 7:this.renderMesh(e,t)}},o.renderBitmap=function(e,t){var n=e.image,a=e.drawData,s=a.length,o=0,h=e.matrix,l=e.blendMode;for(h&&(t.saveTransform(),t.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),l&&t.context.setGlobalCompositeOperation(i[l]);s>o;)t.context.drawImage(n,a[o++],a[o++],a[o++],a[o++],a[o++],a[o++],a[o++],a[o++],e.imageWidth,e.imageHeight);l&&t.context.setGlobalCompositeOperation(r),h&&t.restoreTransform()},o.renderMesh=function(e,t){var i=e.image,r=e.drawData,n=r.length,a=0,s=e.matrix;for(s&&(t.saveTransform(),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty));n>a;)t.context.drawMesh(i,r[a++],r[a++],r[a++],r[a++],r[a++],r[a++],r[a++],r[a++],e.imageWidth,e.imageHeight,e.uvs,e.vertices,e.indices,e.bounds);s&&t.restoreTransform()},o.renderText=function(i,r){var n=i.width-i.x,a=i.height-i.y;if(0!=i.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?i.dirtyRender&&this.canvasRenderBuffer.resize(n,a):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(n,a)),this.canvasRenderBuffer.context)){if((i.x||i.y)&&(i.dirtyRender&&this.canvasRenderBuffer.context.translate(-i.x,-i.y),r.transform(1,0,0,1,i.x,i.y)),i.dirtyRender){var s=this.canvasRenderBuffer.surface;this.canvasRenderer.renderText(i,this.canvasRenderBuffer.context);var o=i.$texture;o?r.context.updateTexture(o,s):(o=r.context.createTexture(s),i.$texture=o),i.$textureWidth=s.width,i.$textureHeight=s.height}var h=i.$textureWidth,l=i.$textureHeight;r.context.drawTexture(i.$texture,0,0,h,l,0,0,h,l,h,l),(i.x||i.y)&&(i.dirtyRender&&this.canvasRenderBuffer.context.translate(i.x,i.y),r.transform(1,0,0,1,-i.x,-i.y)),i.dirtyRender=!1}},o.renderGraphics=function(i,r,n){var a=i.width,s=i.height;if(!(0>=a||0>=s)&&a&&s&&0!=i.drawData.length&&(this.canvasRenderBuffer&&this.canvasRenderBuffer.context?(i.dirtyRender||n)&&this.canvasRenderBuffer.resize(a,s):(this.canvasRenderer=new e.CanvasRenderer,this.canvasRenderBuffer=new t.CanvasRenderBuffer(a,s)),this.canvasRenderBuffer.context)){(i.x||i.y)&&((i.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(-i.x,-i.y),r.transform(1,0,0,1,i.x,i.y));var o=this.canvasRenderBuffer.surface;if(n){this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context,!0),e.WebGLUtils.deleteWebGLTexture(o);var h=r.context.getWebGLTexture(o);r.context.drawTexture(h,0,0,a,s,0,0,a,s,o.width,o.height)}else{if(i.dirtyRender){this.canvasRenderer.renderGraphics(i,this.canvasRenderBuffer.context);var h=i.$texture;h?r.context.updateTexture(h,o):(h=r.context.createTexture(o),i.$texture=h),i.$textureWidth=o.width,i.$textureHeight=o.height}var l=i.$textureWidth,u=i.$textureHeight;r.context.drawTexture(i.$texture,0,0,l,u,0,0,l,u,l,u)}(i.x||i.y)&&((i.dirtyRender||n)&&this.canvasRenderBuffer.context.translate(i.x,i.y),r.transform(1,0,0,1,-i.x,-i.y)),n||(i.dirtyRender=!1)}},o.renderGroup=function(e,t){for(var i=e.drawData,r=i.length,n=0;r>n;n++){var a=i[n];this.renderNode(a,t)}},o.createRenderBuffer=function(e,i){var r=n.pop();return r?r.resize(e,i):(r=new t.WebGLRenderBuffer(e,i),r.$computeDrawCall=!1),r},a}();t.WebGLRenderer=a,e.registerClass(a,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(t=e.web||(e.web={}))}(egret||(egret={}));

 //libs/modules/eui/eui.min.js
var eui;!function(t){function e(e){for(var i=e[0],n=i instanceof t.Watcher?i.getValue():i,s=e.length,r=1;s>r;r++){var a=e[r];a instanceof t.Watcher&&(a=a.getValue()),n+=a}return n}var i=function(){function i(){}var n=(__define,i);n.prototype;return i.bindProperty=function(e,i,n,s){var r=t.Watcher.watch(e,i,null,null);if(r){var a=function(t){n[s]=t};r.setHandler(a,null),a(r.getValue())}return r},i.bindHandler=function(e,i,n,s){var r=t.Watcher.watch(e,i,n,s);return r&&n.call(s,r.getValue()),r},i.$bindProperties=function(n,s,r,a,o){if(1==s.length)return i.bindProperty(n,s[0].split("."),a,o);for(var h=function(){a[o]=e(s)},l=r.length,u=0;l>u;u++){var d=r[u],c=s[d].split("."),p=t.Watcher.watch(n,c,null,null);p&&(s[d]=p,p.setHandler(h,null))}return h(),p},i}();t.Binding=i,egret.registerClass(i,"eui.Binding")}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=Object.getOwnPropertyDescriptor(t,i);if(n)return n;var s=Object.getPrototypeOf(t);return s?e(s,i):null}function i(t,e){for(var i=t[n],s=i.length,r=0;s>r;r+=2){var a=i[r],o=i[r+1];a.call(o,e)}}var n="__listeners__",s="__bindables__",r=0,a=function(){function a(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}var o=(__define,a),h=o.prototype;return a.watch=function(t,e,i,n){if(e.length>0){var s=e.shift(),r=a.watch(null,e,i,n),o=new a(s,i,n,r);return o.reset(t),o}return null},a.checkBindable=function(a,o){var h=a[s];if(h&&-1!=h.indexOf(o))return!0;var l=egret.is(a,"egret.IEventDispatcher");l||a[n]||(a[n]=[]);var u=e(a,o);if(u&&u.set&&u.get){var d=u.set;u.set=function(e){this[o]!=e&&(d.call(this,e),l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,o):i(this,o))}}else{if(u&&(u.get||u.set))return!1;r++;var c="_"+r+o;a[c]=u?u.value:null,u={enumerable:!0,configurable:!0},u.get=function(){return this[c]},u.set=function(e){this[c]!=e&&(this[c]=e,l?t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,o):i(this,o))}}Object.defineProperty(a,o,u),t.registerBindable(a,o)},h.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},h.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},h.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},h.reset=function(e){var i=this.host;if(i)if(egret.is(i,"egret.IEventDispatcher"))i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var s=i[n],r=s.indexOf(this);s.splice(r-1,2)}if(this.host=e,e)if(a.checkBindable(e,this.property),egret.is(e,"egret.IEventDispatcher"))e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100);else{var s=e[n];s.push(this.onPropertyChange),s.push(this)}this.next&&this.next.reset(this.getHostPropertyValue())},h.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},h.wrapHandler=function(t){this.onPropertyChange(t.property)},h.onPropertyChange=function(t){if(t==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},a}();t.Watcher=a,egret.registerClass(a,"eui.Watcher")}(eui||(eui={}));var eui;!function(t){function e(t,e,i,n){var s=t.prototype;s.__meta__=s.__meta__||{},s.__meta__[e]=i,n&&(s.__defaultProperty__=e)}t.registerProperty=e}(eui||(eui={}));var eui;!function(t){function e(t,e){if(t.hasOwnProperty(i))t[i].push(e);else{var n=[e];t[i]&&(n=t[i].concat(n)),t[i]=n}}var i="__bindables__";t.registerBindable=e}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t){e.call(this),t?this._source=t:this._source=[]}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"source",function(){return this._source},function(e){e||(e=[]),this._source=e,this.dispatchCoEvent(t.CollectionEventKind.RESET)}),r.refresh=function(){this.dispatchCoEvent(t.CollectionEventKind.REFRESH)},n(r,"length",function(){return this._source.length}),r.addItem=function(e){this._source.push(e),this.dispatchCoEvent(t.CollectionEventKind.ADD,this._source.length-1,-1,[e])},r.addItemAt=function(e,i){0>i||i>this._source.length,this._source.splice(i,0,e),this.dispatchCoEvent(t.CollectionEventKind.ADD,i,-1,[e])},r.getItemAt=function(t){return this._source[t]},r.getItemIndex=function(t){for(var e=this._source.length,i=0;e>i;i++)if(this._source[i]===t)return i;return-1},r.itemUpdated=function(e){var i=this.getItemIndex(e);-1!=i&&this.dispatchCoEvent(t.CollectionEventKind.UPDATE,i,-1,[e])},r.removeAll=function(){var e=this._source.concat();this._source.length=0,this.dispatchCoEvent(t.CollectionEventKind.REMOVE,0,-1,e)},r.removeItemAt=function(e){if(!(0>e||e>=this._source.length)){var i=this._source.splice(e,1)[0];return this.dispatchCoEvent(t.CollectionEventKind.REMOVE,e,-1,[i]),i}},r.replaceItemAt=function(e,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,e)[0];return this.dispatchCoEvent(t.CollectionEventKind.REPLACE,i,-1,[e],[n]),n}},r.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;i>n;n++)this.removeItemAt(e);for(n=0;e>n;n++)n>=i?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},r.dispatchCoEvent=function(e,i,n,s,r){t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,e,i,n,s,r)},i}(egret.EventDispatcher);t.ArrayCollection=e,egret.registerClass(e,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),t.registerProperty(e,"source","Array",!0)}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.targetLevel=Number.POSITIVE_INFINITY,this.invalidatePropertiesFlag=!1,this.invalidateClientPropertiesFlag=!1,this.invalidatePropertiesQueue=new i,this.invalidateSizeFlag=!1,this.invalidateClientSizeFlag=!1,this.invalidateSizeQueue=new i,this.invalidateDisplayListFlag=!1,this.invalidateDisplayListQueue=new i,this.eventDisplay=new egret.Bitmap,this.listenersAttached=!1}__extends(e,t);var n=(__define,e),s=n.prototype;return s.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},s.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},s.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},s.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},s.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},s.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},s.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},s.doPhasedInstantiationCallBack=function(t){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},s.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},s.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var s=this.invalidatePropertiesQueue,r=this.invalidateSizeQueue,a=this.invalidateDisplayListQueue;!i;){for(i=!0,e=s.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=s.removeSmallestChild(t);for(s.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=r.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=s.removeSmallestChild(t))){s.insert(e),i=!1;break}e=r.removeLargestChild(t)}for(r.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=a.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=s.removeSmallestChild(t))){s.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=r.removeLargestChild(t))){r.insert(e),i=!1;break}e=a.removeSmallestChild(t)}a.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(egret.EventDispatcher);t.Validator=e,egret.registerClass(e,"eui.sys.Validator");var i=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}var e=(__define,t),i=e.prototype;return i.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new n),i.insert(t)},i.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},i.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},i.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,s=i;n>=s;){var r=this.depthBins[n];if(r&&r.length>0){if(n===i){if(r.map[e])return r.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=r.items,o=r.length,h=0;o>h;h++){var l=a[h];if(t.contains(l))return r.remove(l),l}}n--}else if(n==this.maxDepth&&this.maxDepth--,n--,s>n)break}return null},i.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,s=t.$hashCode;n>=i;){var r=this.depthBins[i];if(r&&r.length>0){if(i===e){if(r.map[s])return r.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=r.items,o=r.length,h=0;o>h;h++){var l=a[h];if(t.contains(l))return r.remove(l),l}}i++}else if(i==this.minDepth&&this.minDepth++,i++,i>n)break}return null},i.isEmpty=function(){return this.minDepth>this.maxDepth},t}();egret.registerClass(i,"DepthQueue");var n=function(){function t(){this.map={},this.items=[],this.length=0}var e=(__define,t),i=e.prototype;return i.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},i.pop=function(){var t=this.items.pop();return t&&(this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1),t},i.remove=function(t){var e=this.items.indexOf(t);e>=0&&(this.items.splice(e,1),this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1)},t}();egret.registerClass(n,"DepthBin")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e;!function(e){function i(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}function n(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),s=i.lastIndexOf("}");return i=i.substring(n+1,s),""==i.trim()}function s(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var s=t.prototype,r=e.prototype,a=Object.keys(r),o=a.length,h=0;o>h;h++){var l=a[h];if("__meta__"!=l&&(!s.hasOwnProperty(l)||n(s,l))){var u=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(s,l,u)}}}function r(e,i,n){s(e,h);var r=e.prototype;r.$super=i.prototype,t.registerProperty(e,"left","any"),t.registerProperty(e,"right","any"),t.registerProperty(e,"top","any"),t.registerProperty(e,"bottom","any"),t.registerProperty(e,"horizontalCenter","any"),t.registerProperty(e,"verticalCenter","any"),n&&(r.$childAdded=function(t,e){this.invalidateSize(),this.invalidateDisplayList()},r.$childRemoved=function(t,e){this.invalidateSize(),this.invalidateDisplayList()})}var a="eui.UIComponent",o=new e.Validator,h=function(n){function s(){n.call(this),this.initializeUIValues()}__extends(s,n);var r=__define,h=s,l=h.prototype;return l.initializeUIValues=function(){this.$UIComponent={0:0/0,1:0/0,2:0/0,3:0/0,4:0/0,5:0/0,6:0/0,7:0/0,8:0/0,9:0/0,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:0/0,19:0/0,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},l.createChildren=function(){},l.childrenCreated=function(){},l.commitProperties=function(){var e=this.$UIComponent;(e[22]!=e[10]||e[23]!=e[11])&&(this.dispatchEventWith(egret.Event.RESIZE),e[22]=e[10],e[23]=e[11]),(e[20]!=this.$getX()||e[21]!=this.$getY())&&(t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE),e[20]=this.$getX(),e[21]=this.$getY())},l.measure=function(){},l.updateDisplayList=function(t,e){},r(l,"includeInLayout",function(){return this.$includeInLayout},function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)}),l.$onAddToStage=function(e,i){this.$super.$onAddToStage.call(this,e,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CREATION_COMPLETE))},l.checkInvalidateFlag=function(t){var e=this.$UIComponent;e[24]&&o.invalidateProperties(this),e[25]&&o.invalidateSize(this),e[26]&&o.invalidateDisplayList(this)},r(l,"left",function(){return this.$UIComponent[0]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())}),r(l,"right",function(){return this.$UIComponent[1]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())}),r(l,"top",function(){return this.$UIComponent[2]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())}),r(l,"bottom",function(){return this.$UIComponent[3]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())}),r(l,"horizontalCenter",function(){return this.$UIComponent[4]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())}),r(l,"verticalCenter",function(){return this.$UIComponent[5]},function(t){t=t&&"number"!=typeof t?t.toString().trim():+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())}),r(l,"percentWidth",function(){return this.$UIComponent[6]},function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())}),r(l,"percentHeight",function(){return this.$UIComponent[7]},function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())}),r(l,"explicitWidth",function(){return this.$UIComponent[8]}),r(l,"explicitHeight",function(){return this.$UIComponent[9]}),l.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},l.$setWidth=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[10]===t&&e[8]===t?!1:(e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},l.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},l.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},l.$setHeight=function(t){t=+t;var e=this.$UIComponent;return 0>t||e[11]===t&&e[9]===t?!1:(e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},r(l,"minWidth",function(){return this.$UIComponent[12]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())}),r(l,"maxWidth",function(){return this.$UIComponent[13]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())}),r(l,"minHeight",function(){return this.$UIComponent[14]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())}),r(l,"maxHeight",function(){return this.$UIComponent[15]},function(t){t=+t||0;var e=this.$UIComponent;0>t||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())}),l.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},l.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},l.$invalidateMatrix=function(){this.$super.$invalidateMatrix.call(this),this.invalidateParentLayout()},l.$setMatrix=function(t,e){return void 0===e&&(e=!0),this.$super.$setMatrix.call(this,t,e),this.invalidateParentLayout(),!0},l.$setAnchorOffsetX=function(t){return this.$super.$setAnchorOffsetX.call(this,t),this.invalidateParentLayout(),!0},l.$setAnchorOffsetY=function(t){return this.$super.$setAnchorOffsetY.call(this,t),this.invalidateParentLayout(),!0},l.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},l.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},l.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&o.invalidateProperties(this))},l.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},l.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&o.invalidateSize(this))},l.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;i>n;n++){var s=e[n];egret.is(s,a)&&s.validateSize(!0)}}var r=this.$UIComponent;if(r[25]){var o=this.measureSizes();o&&(this.invalidateDisplayList(),this.invalidateParentLayout()),r[25]=!1}},l.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==e[18]||n!==e[19])&&(e[18]=i,e[19]=n,t=!0),t},l.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&o.invalidateDisplayList(this))},l.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},l.updateFinalSize=function(){var t=0,e=0,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},l.validateNow=function(){this.$stage&&o.validateClient(this)},l.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&egret.is(t,a)&&(t.invalidateSize(),t.invalidateDisplayList())},l.setLayoutBoundsSize=function(t,n){if(n=+n,t=+t,!(0>n||0>t)){var s,r,a=this.$UIComponent,o=a[13],h=a[15],l=Math.min(a[12],o),u=Math.min(a[14],h);isNaN(t)?(a[27]=!1,s=this.getPreferredUWidth()):(a[27]=!0,s=Math.max(l,Math.min(o,t))),isNaN(n)?(a[28]=!1,r=this.getPreferredUHeight()):(a[28]=!0,r=Math.max(u,Math.min(h,n)));var d=this.getAnchorMatrix();if(i(d))return void this.setActualSize(s,r);var c=e.MatrixUtil.fitBounds(t,n,d,a[8],a[9],this.getPreferredUWidth(),this.getPreferredUHeight(),l,u,o,h);c||(c=egret.Point.create(l,u)),this.setActualSize(c.x,c.y),egret.Point.release(c)}},l.setLayoutBoundsPosition=function(e,n){var s=this.$getMatrix();if(!i(s)||0!=this.anchorOffsetX||0!=this.anchorOffsetY){var r=egret.$TempRectangle;this.getLayoutBounds(r),e+=this.$getX()-r.x,n+=this.$getY()-r.y}var a=this.$super.$setX.call(this,e);(this.$super.$setY.call(this,n)||a)&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.MOVE)},l.getLayoutBounds=function(t){var e,i=this.$UIComponent;e=i[27]?i[10]:isNaN(i[8])?i[16]:i[8];var n;n=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.applyMatrix(t,e,n)},l.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},l.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},l.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},l.applyMatrix=function(t,e,n){var t=t.setTo(0,0,e,n),s=this.getAnchorMatrix();i(s)?(t.x+=s.tx,t.y+=s.ty):s.$transformBounds(t)},l.getAnchorMatrix=function(){var t=this.$getMatrix(),e=this.anchorOffsetX,i=this.anchorOffsetY;if(0!=e||0!=i){var n=egret.$TempMatrix;return t.$preMultiplyInto(n.setTo(1,0,0,1,-e,-i),n),n}return t},s}(egret.DisplayObject);e.UIComponentImpl=h,egret.registerClass(h,"eui.sys.UIComponentImpl",["eui.UIComponent"]),e.mixin=s,e.implementUIComponent=r}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){i.call(this),this.$createChildrenCalled=!1,this.$fontChanged=!1,this._widthConstraint=0/0,this.initializeUIValues(),this.text=t}__extends(n,i);var s=(__define,n),r=s.prototype;return r.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},r.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),s=e.prototype.$setWidth.call(this,t);return n&&s},r.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),s=e.prototype.$setHeight.call(this,t);return n&&s},r.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},r.$setFont=function(t){this.$BitmapText;return this.$font==t?!1:(this.$font=t,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$BitmapText[6]=!0,!0)},r.$parseFont=function(){if(this.$fontChanged=!1,this.$font&&"string"==typeof this.$font){var e=this.$stage.getImplementation("eui.IAssetAdapter");e||(e=new t.DefaultAssetAdapter),e.getAsset(this.$font,this.$onFontChanged,this)}else this.$setFontData(this.$font)},r.$onFontChanged=function(t,e){e===this.$font&&this.$setFontData(t)},r.$setFontData=function(t){return t==this.$BitmapText[5]?!1:(this.$BitmapText[5]=t,this.$invalidateContentBounds(),!0)},r.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},r.childrenCreated=function(){},r.commitProperties=function(){},r.measure=function(){var t=this.$UIComponent,e=this.$BitmapText,n=e[0],s=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(s=t[13]):s=t[8]:(s=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,s),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},r.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},r.invalidateParentLayout=function(){},r.setMeasuredSize=function(t,e){},r.invalidateProperties=function(){},r.validateProperties=function(){},r.invalidateSize=function(){},r.validateSize=function(t){},r.invalidateDisplayList=function(){},r.validateDisplayList=function(){},r.validateNow=function(){},r.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},r.setLayoutBoundsPosition=function(t,e){},r.getLayoutBounds=function(t){},r.getPreferredBounds=function(t){},n}(egret.BitmapText);t.BitmapLabel=i,egret.registerClass(i,"eui.BitmapLabel",["eui.UIComponent","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.BitmapText),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.initializeUIValues(),this.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},this.$touchEnabled=!0}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"hostComponentKey",function(){return this.$Component[0]},function(t){this.$Component[0]=t}),n(r,"skinName",function(){return this.$Component[1]},function(t){var e=this.$Component;if(e[5]=!0,e[1]!=t){if(t)e[1]=t;else if(this.$stage){var i=this.$stage.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(e[1]=n)}}this.$parseSkinName()}}),r.$parseSkinName=function(){var t,e=this.skinName;if(e)if(e.prototype)t=new e;else if("string"==typeof e){var i,n=e.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(i=egret.getDefinitionByName(e),!i&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(e,this.onExmlLoaded,this,!0);i&&(t=new i)}else t=e;this.setSkin(t)},r.onExmlLoaded=function(t,e){if(this.skinName==e){var i=new t;this.setSkin(i)}},n(r,"skin",function(){return this.$Component[8]}),r.setSkin=function(e){!e||e instanceof t.Skin||(e=null);var i=this.$Component,n=i[8];if(n){for(var s=n.skinParts,r=s.length,a=0;r>a;a++){var o=s[a];this[o]&&this.setSkinPart(o,null)}var h=n.$elementsContent;if(h){r=h.length;for(var a=0;r>a;a++){var l=h[a];l.$parent==this&&this.removeChild(l)}}n.hostComponent=null}if(i[8]=e,e){for(var s=e.skinParts,r=s.length,a=0;r>a;a++){var o=s[a],u=e[o];u&&this.setSkinPart(o,u)}if(h=e.$elementsContent)for(a=h.length-1;a>=0;a--)this.addChildAt(h[a],0);e.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},r.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),this[t]=e,e&&this.partAdded(t,e)},r.partAdded=function(t,e){},r.partRemoved=function(t,e){},r.$setTouchChildren=function(t){t=!!t;var i=this.$Component;return i[6]=t,i[3]?(i[6]=t,e.prototype.$setTouchChildren.call(this,t)):!0},r.$setTouchEnabled=function(t){t=!!t;var i=this.$Component;return i[7]=t,i[3]?e.prototype.$setTouchEnabled.call(this,t):!0},n(r,"enabled",function(){return this.$Component[3]},function(t){t=!!t,this.$setEnabled(t)}),r.$setEnabled=function(t){var e=this.$Component;return t===e[3]?!1:(e[3]=t,t?(this.$touchEnabled=e[7],this.$touchChildren=e[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},n(r,"currentState",function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())}),r.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},r.getCurrentState=function(){return""},r.createChildren=function(){var t=this.$Component;if(!t[1]){var e=this.$stage.getImplementation("eui.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},r.childrenCreated=function(){},r.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$Component;e[4]&&(e[4]=!1,e[8]&&(e[8].currentState=this.currentState))},r.measure=function(){t.sys.measure(this);var e=this.$Component[8];if(e){var i=this.$UIComponent;isNaN(e.width)?(i[16]<e.minWidth&&(i[16]=e.minWidth),i[16]>e.maxWidth&&(i[16]=e.maxWidth)):i[16]=e.width,isNaN(e.height)?(i[17]<e.minHeight&&(i[17]=e.minHeight),i[17]>e.maxHeight&&(i[17]=e.maxHeight)):i[17]=e.height}},r.updateDisplayList=function(e,i){t.sys.updateDisplayList(this,e,i)},r.invalidateParentLayout=function(){},r.setMeasuredSize=function(t,e){},r.invalidateProperties=function(){},r.validateProperties=function(){},r.invalidateSize=function(){},r.validateSize=function(t){},r.invalidateDisplayList=function(){},r.validateDisplayList=function(){},r.validateNow=function(){},r.setLayoutBoundsSize=function(t,e){},r.setLayoutBoundsPosition=function(t,e){},r.getLayoutBounds=function(t){},r.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Component=e,egret.registerClass(e,"eui.Component",["eui.UIComponent"]),t.registerProperty(e,"skinName","Class"),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0)}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this),this.labelDisplay=null,this._label="",this.iconDisplay=null,this._icon=null,this.touchCaptured=!1,this.touchChildren=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(e,t);var i=__define,n=e,s=n.prototype;return i(s,"label",function(){return this._label},function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)}),i(s,"icon",function(){return this._icon},function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)}),s.onTouchCancle=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},s.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},s.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},s.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},s.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},s.buttonReleased=function(){},e}(t.Component);t.Button=e,egret.registerClass(e,"eui.Button")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.apply(this,arguments),this.$selected=!1,this.$autoSelected=!0}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"selected",function(){return this.$selected},function(t){this.$setSelected(t)}),r.$setSelected=function(e){return e=!!e,e===this.$selected?!1:(this.$selected=e,this.invalidateState(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},r.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);if(this.$selected){var i=t+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==t?"disabled":"down"}return t},r.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},i}(t.Button);t.ToggleButton=e,egret.registerClass(e,"eui.ToggleButton"),t.registerBindable(e.prototype,"selected")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);i.prototype;return e}(t.ToggleButton);t.CheckBox=e,egret.registerClass(e,"eui.CheckBox")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=[]),e.call(this),this.name=t,this.overrides=i}__extends(i,e);var n=(__define,i),s=n.prototype;return s.initialize=function(e,i){for(var n=this.overrides,s=n.length,r=0;s>r;r++){var a=n[r];if(a instanceof t.AddItems){var o=e[a.target];o&&o instanceof t.Image&&!o.$parent&&(i.addChild(o),i.removeChild(o))}}},i}(egret.HashObject);t.State=e,egret.registerClass(e,"eui.State")}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e=function(){function t(){}var e=__define,i=t,n=i.prototype;return e(n,"states",function(){return this.$stateValues.states
},function(t){t||(t=[]);var e=this.$stateValues;e.states=t;for(var i={},n=t.length,s=0;n>s;s++){var r=t[s];i[r.name]=r}e.statesMap=i,e.parent&&this.commitCurrentState()}),e(n,"currentState",function(){return this.$stateValues.currentState},function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()}),n.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){var e=t.statesMap[t.currentState];if(!e){if(!(t.states.length>0))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var i=t.parent,n=t.statesMap[t.oldState];if(n)for(var s=n.overrides,r=s.length,a=0;r>a;a++)s[a].remove(this,i);if(t.oldState=t.currentState,n=t.statesMap[t.currentState])for(s=n.overrides,r=s.length,a=0;r>a;a++)s[a].apply(this,i)}}},n.hasState=function(t){return!!this.$stateValues.statesMap[t]},n.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;i>n;n++)e[n].initialize(this,t)},t}();t.StateClient=e,egret.registerClass(e,"eui.sys.StateClient");var i=function(){function t(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}var e=(__define,t);e.prototype;return t}();t.StateValues=i,egret.registerClass(i,"eui.sys.StateValues")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.$layout=null,this.$stateValues=new t.sys.StateValues,this.initializeUIValues(),this.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},this.$stateValues.parent=this}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])}),n(r,"layout",function(){return this.$layout},function(t){this.$setLayout(t)}),r.$setLayout=function(t){return this.$layout==t?!1:(this.$layout&&(this.$layout.target=null),this.$layout=t,t&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},n(r,"contentWidth",function(){return this.$Group[0]}),n(r,"contentHeight",function(){return this.$Group[1]}),r.setContentSize=function(e,i){e=Math.ceil(+e||0),i=Math.ceil(+i||0);var n=this.$Group,s=n[0]!==e,r=n[1]!==i;(s||r)&&(n[0]=e,n[1]=i,s&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),r&&t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},n(r,"scrollEnabled",function(){return this.$Group[4]},function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())}),n(r,"scrollH",function(){return this.$Group[2]},function(e){e=+e||0;var i=this.$Group;e!==i[2]&&(i[2]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollH"))}),n(r,"scrollV",function(){return this.$Group[3]},function(e){e=+e||0;var i=this.$Group;e!=i[3]&&(i[3]=e,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"scrollV"))}),r.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},n(r,"numElements",function(){return this.$children.length}),r.getElementAt=function(t){return this.$children[t]},r.getVirtualElementAt=function(t){return this.getElementAt(t)},r.setVirtualElementIndicesInView=function(t,e){},n(r,"touchThrough",function(){return this.$Group[5]},function(t){this.$Group[5]=!!t}),r.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled)return null;var s=this.globalToLocal(t,i,egret.$TempPoint),r=this.$UIComponent,a=egret.$TempRectangle.setTo(0,0,r[10],r[11]),o=this.$scrollRect;return o&&(a.x=o.x,a.y=o.y),a.contains(s.x,s.y)?this:null},r.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},r.getCurrentState=function(){return""},r.createChildren=function(){this.$layout||this.$setLayout(new t.BasicLayout),this.initializeStates(this.$stage)},r.childrenCreated=function(){},r.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this);var e=this.$stateValues;e.stateIsDirty&&(e.stateIsDirty=!1,e.explicitState||(e.currentState=this.getCurrentState(),this.commitCurrentState()))},r.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},r.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},r.invalidateParentLayout=function(){},r.setMeasuredSize=function(t,e){},r.invalidateProperties=function(){},r.validateProperties=function(){},r.invalidateSize=function(){},r.validateSize=function(t){},r.invalidateDisplayList=function(){},r.validateDisplayList=function(){},r.validateNow=function(){},r.setLayoutBoundsSize=function(t,e){},r.setLayoutBoundsPosition=function(t,e){},r.getLayoutBounds=function(t){},r.getPreferredBounds=function(t){},i}(egret.DisplayObjectContainer);t.Group=e,egret.registerClass(e,"eui.Group",["eui.IViewport","eui.UIComponent"]),t.sys.implementUIComponent(e,egret.DisplayObjectContainer,!0),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.$dataProviderChanged=!1,this.$dataProvider=null,this.$indexToRenderer=[],this.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1}}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"useVirtualLayout",function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))}),r.$setLayout=function(t){if(t==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var i=e.prototype.$setLayout.call(this,t);if(t){var n=this.$DataGroup[9];n&&t.setTypicalSize(n.width,n.height),t.useVirtualLayout=this.$DataGroup[0],t.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return i},r.onUseVirtualLayoutChanged=function(t){var e=this.$DataGroup;e[1]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},r.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),s=n.length,r=0;s>r;r++){var a=+n[r];(t>a||a>e)&&this.freeRendererByIndex(a)}},r.getElementAt=function(t){return this.$indexToRenderer[t]},r.getVirtualElementAt=function(t){if(t=0|+t,0>t||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},r.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},r.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode],n=i.$hashCode;e[3][n]||(e[3][n]=[]),e[3][n].push(t),t.visible=!1},r.invalidateSize=function(){this.$DataGroup[4]||e.prototype.invalidateSize.call(this)},r.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,s=this.$DataGroup,r=s[3];return r[n]&&r[n].length>0?(e=r[n].pop(),e.visible=!0,this.invalidateDisplayList(),e):(s[4]=!0,this.createOneRenderer(i))},r.createOneRenderer=function(t){var e=new t,i=this.$DataGroup;return i[2][e.$hashCode]=t,egret.is(e,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(e,i[13]),this.addChild(e),e):null},r.setItemRenderSkinName=function(e,i){if(e&&e instanceof t.Component){var n=e;n.$Component[5]||(n.skinName=i,n.$Component[5]=!1)}},n(r,"dataProvider",function(){return this.$dataProvider},function(t){this.$setDataProvider(t)}),r.$setDataProvider=function(t){return this.$dataProvider==t?!1:(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},r.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},r.onCollectionChange=function(e){switch(e.kind){case t.CollectionEventKind.ADD:this.itemAddedHandler(e.items,e.location);break;case t.CollectionEventKind.REMOVE:this.itemRemovedHandler(e.items,e.location);break;case t.CollectionEventKind.UPDATE:case t.CollectionEventKind.REPLACE:this.itemUpdatedHandler(e.items[0],e.location);break;case t.CollectionEventKind.RESET:case t.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),s=n.length,r=s-1;r>=0;r--){var a=+n[r];this.freeRendererByIndex(a)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},r.itemAddedHandler=function(t,e){for(var i=t.length,n=0;i>n;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},r.itemRemovedHandler=function(t,e){for(var i=t.length,n=i-1;n>=0;n--)this.itemRemoved(t[n],e+n);this.resetRenderersIndices()},r.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)return void this.$indexToRenderer.splice(e,0,null);var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}},r.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},r.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;i>n;n++){var s=+e[n];this.resetRendererItemIndex(s)}else{var r=t.length;for(s=0;r>s;s++)this.resetRendererItemIndex(s)}},r.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},r.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},n(r,"itemRenderer",function(){return this.$DataGroup[6]},function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),n(r,"itemRendererSkinName",function(){return this.$DataGroup[13]},function(t){var e=this.$DataGroup;e[13]!=t&&(e[13]=t,this.$UIComponent[29]&&(e[14]=!0,this.invalidateProperties()))}),n(r,"itemRendererFunction",function(){return this.$DataGroup[7]},function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),r.itemToRendererClass=function(e){var i,n=this.$DataGroup;return n[7]&&(i=n[7](e)),i||(i=n[6]),i||(i=t.ItemRenderer),i.$hashCode||(i.$hashCode=egret.$hashCount++),i},r.createChildren=function(){if(!this.$layout){var i=new t.VerticalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},r.commitProperties=function(){var i=this.$DataGroup;if((i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(t.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),e.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),i[14]){i[14]=!1;for(var n=i[13],s=this.$indexToRenderer,r=Object.keys(s),a=r.length,o=0;a>o;o++){var h=r[o];this.setItemRenderSkinName(s[h],n)}for(var l=i[3],r=Object.keys(l),a=r.length,o=0;a>o;o++)for(var u=r[o],d=l[u],a=d.length,o=0;a>o;o++)this.setItemRenderSkinName(d[o],n)}},r.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),e.prototype.measure.call(this)},r.updateDisplayList=function(t,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),e.prototype.updateDisplayList.call(this,t,i);var s=this.$DataGroup;if(n){var r=s[9];if(r){var a=this.$indexToRenderer[0];if(a){var o=egret.$TempRectangle;a.getPreferredBounds(o),(o.width!=r.width||o.height!=r.height)&&(s[9]=null)}}}},r.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},r.measureRendererSize=function(){var t=this.$DataGroup;if(!t[12])return void this.setTypicalLayoutRect(null);var e=this.createVirtualRenderer(t[12]);if(!e)return void this.setTypicalLayoutRect(null);this.updateRenderer(e,0,t[12]),e.validateNow();var i=egret.$TempRectangle;e.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1},r.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},r.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=Object.keys(t),i=e.length,n=0;i>n;n++){var s=e[n],r=t[s];r&&(this.rendererRemoved(r,r.itemIndex,r.data),this.removeChild(r))}this.$indexToRenderer=[];var a=this.$DataGroup;if(a[10]){for(var o=a[3],e=Object.keys(o),i=e.length,n=0;i>n;n++)for(var h=e[n],l=o[h],i=l.length,n=0;i>n;n++)r=l[n],this.rendererRemoved(r,r.itemIndex,r.data),this.removeChild(r);a[3]={},a[2]={},a[10]=!1}},r.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;e>i;i++){var n=this.$dataProvider.getItemAt(i),s=this.itemToRendererClass(n),r=this.createOneRenderer(s);r&&(this.$indexToRenderer[t]=r,this.updateRenderer(r,t,n),this.rendererAdded(r,t,n),t++)}},r.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.data=i,n[11]=!1,t},n(r,"numElements",function(){return this.$dataProvider?this.$dataProvider.length:0}),r.rendererAdded=function(t,e,i){},r.rendererRemoved=function(t,e,i){},i}(t.Group);t.DataGroup=e,egret.registerClass(e,"eui.DataGroup"),t.registerProperty(e,"itemRenderer","Class"),t.registerProperty(e,"itemRendererSkinName","Class"),t.registerProperty(e,"dataProvider","eui.ICollection",!0)}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(){i.call(this),this._widthConstraint=0/0,this.$isShowPrompt=!1,this.$promptColor=6710886,this.$isFocusIn=!1,this.initializeUIValues(),this.type=egret.TextFieldType.INPUT,this.$EditableText={0:null,1:16777215,2:!1}}__extends(n,i);var s=__define,r=n,a=r.prototype;return a.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},a.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),s=e.prototype.$setWidth.call(this,t);return n&&s},a.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),s=e.prototype.$setHeight.call(this,t);return n&&s},a.$getText=function(){var t=i.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},a.$setText=function(e){var n=this.$EditableText[0];(n!=e||null==n)&&(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1]),this.$isFocusIn||(""==e||null==e)&&(e=n,this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor));var s=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),s},a.$onAddToStage=function(e,i){t.sys.UIComponentImpl.prototype.$onAddToStage.call(this,e,i),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},a.$onRemoveFromStage=function(){t.sys.UIComponentImpl.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},s(a,"prompt",function(){return this.$EditableText[0]},function(t){var e=this.$EditableText,i=e[0];if(i!=t){e[0]=t;var n=this.text;n&&n!=i||this.showPromptText()}}),s(a,"promptColor",function(){return this.$promptColor},function(t){if(t=0|+t,this.$promptColor!=t){this.$promptColor=t;var e=this.text;e&&e!=this.$EditableText[0]||this.showPromptText()}}),a.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},a.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var t=this.$EditableText,e=this.text;e&&e!=t[0]||(this.textColor=t[1],this.text="")},a.showPromptText=function(){var t=this.$EditableText;this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1),this.text=t[0]},a.$setTextColor=function(t){return t=0|+t,this.$EditableText[1]=t,this.$isShowPrompt||i.prototype.$setTextColor.call(this,t),!0},a.$setDisplayAsPassword=function(t){return this.$EditableText[2]=t,this.$isShowPrompt||i.prototype.$setDisplayAsPassword.call(this,t),!0},a.createChildren=function(){this.onfocusOut()},a.childrenCreated=function(){},a.commitProperties=function(){},a.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3],s=0/0;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(s=t[13]):s=t[8]:(s=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,s),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},a.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},a.invalidateParentLayout=function(){},a.setMeasuredSize=function(t,e){},a.invalidateProperties=function(){},a.validateProperties=function(){},a.invalidateSize=function(){},a.validateSize=function(t){},a.invalidateDisplayList=function(){},a.validateDisplayList=function(){},a.validateNow=function(){},a.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&(this._widthConstraint=t,this.invalidateSize())}},a.setLayoutBoundsPosition=function(t,e){},a.getLayoutBounds=function(t){},a.getPreferredBounds=function(t){},n}(egret.TextField);t.EditableText=i,egret.registerClass(i,"eui.EditableText",["eui.UIComponent","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.thumb=null,this.$viewport=null,this.autoVisibility=!0}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"viewport",function(){return this.$viewport},function(e){if(e!=this.$viewport){var i=this.$viewport;i&&(i.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.$viewport=e,e&&(e.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}}),r.onViewportResize=function(t){this.invalidateDisplayList()},r.onPropertyChanged=function(t){},i}(t.Component);t.ScrollBarBase=e,egret.registerClass(e,"eui.ScrollBarBase")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,s=this.$viewport;if(n&&s){var r=egret.$TempRectangle;n.getPreferredBounds(r);var a=r.width,o=r.y,h=s.scrollH,l=s.contentWidth,u=s.width;if(0>=h){var d=a*(1- -h/(.5*u));d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(d,0/0),n.setLayoutBoundsPosition(0,o)}else if(h>=l-u)d=a*(1-(h-l+u)/(.5*u)),d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(d,0/0),n.setLayoutBoundsPosition(e-d,o);else{var c=(e-a)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(c,o)}}},n.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.HScrollBar=e,egret.registerClass(e,"eui.HScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1}}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"maximum",function(){return this.$Range[0]},function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),n(r,"minimum",function(){return this.$Range[2]},function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),n(r,"value",function(){var t=this.$Range;return t[6]?t[5]:t[4]},function(t){t=+t||0,this.$setValue(t)}),r.$setValue=function(t){if(t===this.value)return!1;var e=this.$Range;return e[5]=t,e[6]=!0,this.invalidateProperties(),!0},n(r,"snapInterval",function(){return this.$Range[7]},function(t){var e=this.$Range;e[9]=!0,t=+t||0,t!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())}),r.commitProperties=function(){e.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var i=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(i,t[7]))}},r.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},r.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],s=1;if(t-=i[2],e!=Math.round(e)){var r=(1+e).toString().split(".");s=Math.pow(10,r[1].length),n*=s,t=Math.round(t*s),e=Math.round(e*s)}var a=Math.max(0,Math.floor(t/e)*e),o=Math.min(n,Math.floor((t+e)/e)*e),h=t-a>=(o-a)/2?o:a;return h/s+i[2]},r.setValue=function(e){var i=this.$Range;i[4]!==e&&(i[0]>i[2]?i[4]=Math.min(i[0],Math.max(i[2],e)):i[4]=e,i[6]=!1,this.invalidateDisplayList(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"value"))},r.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i),this.updateSkinDisplayList()},r.updateSkinDisplayList=function(){},i}(t.Component);t.Range=e,egret.registerClass(e,"eui.Range"),t.registerBindable(e.prototype,"value")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.trackHighlight=null,this.thumb=null,this.track=null,this.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},this.maximum=10,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"slideDuration",function(){return this.$SliderBase[6]},function(t){this.$SliderBase[6]=+t||0}),r.pointToValue=function(t,e){return this.minimum},n(r,"liveDragging",function(){return this.$SliderBase[9]},function(t){this.$SliderBase[9]=!!t}),n(r,"pendingValue",function(){return this.$SliderBase[7]},function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())}),r.setValue=function(t){this.$SliderBase[7]=t,e.prototype.setValue.call(this,t)},r.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},r.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},r.onTrackOrThumbResize=function(t){this.updateSkinDisplayList()},r.onThumbTouchBegin=function(e){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var s=this.thumb.globalToLocal(e.stageX,e.stageY,egret.$TempPoint);i[0]=s.x,i[1]=s.y,t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START)},r.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],egret.$TempPoint),s=this.pointToValue(n.x-e[0],n.y-e[1]);s=this.nearestValidValue(s,this.snapInterval),this.updateWhenTouchMove(s),t.updateAfterEvent()}},r.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=t)},r.onStageTouchEnd=function(e){var i=e.$currentTarget;i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.dispatchEventWith(egret.Event.CHANGE))},r.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},r.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},r.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},r.animationEndHandler=function(e){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},r.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},r.onTrackTouchBegin=function(e){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,s=e.$stageX-i/2,r=e.$stageY-n/2,a=this.track.globalToLocal(s,r,egret.$TempPoint),o=this.$Range,h=this.pointToValue(a.x,a.y);h=this.nearestValidValue(h,o[7]);var l=this.$SliderBase;if(h!=l[7])if(0!=l[6]){l[5]||(l[5]=new t.sys.Animation(this.$animationUpdateHandler,this),l[5].endFunction=this.animationEndHandler);var u=l[5];u.isPlaying&&this.stopAnimation(),l[8]=h,u.duration=l[6]*(Math.abs(l[7]-l[8])/(o[0]-o[2])),u.from=l[7],u.to=l[8],t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),u.play()}else this.setValue(h),this.dispatchEventWith(egret.Event.CHANGE)},i}(t.Range);t.SliderBase=e,egret.registerClass(e,"eui.SliderBase")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],s=this.getThumbRange();return i[2]+(0!=s?t/s*n:0)},n.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},n.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?(this.pendingValue-t[2])/i*e:0,s=this.track.localToGlobal(n,0,egret.$TempPoint),r=s.x,a=s.y,o=this.thumb.$parent.globalToLocal(r,a,egret.$TempPoint).x,h=egret.$TempRectangle;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(Math.round(o),h.y),this.trackHighlight&&this.trackHighlight.$parent){var l=this.trackHighlight.$parent.globalToLocal(r,a,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(l),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,egret.registerClass(e,"eui.HSlider")}(eui||(eui={}));var eui;!function(t){var e=[],i={},n={},s=function(){function t(){}var s=(__define,t),r=s.prototype;return r.getAsset=function(t,s,r){var a=i[t];if(a)return void a.push([s,r]);var o=e.pop();o||(o=new egret.ImageLoader),i[t]=[[s,r]],n[o.$hashCode]=t,o.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),o.load(t)},r.onLoadFinish=function(t){var s=t.currentTarget;s.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),s.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var r;t.$type==egret.Event.COMPLETE&&(r=new egret.Texture,r._setBitmapData(s.data),s.data=null),e.push(s);var a=n[s.$hashCode];delete n[s.$hashCode];var o=i[a];delete i[a];for(var h=o.length,l=0;h>l;l++){var u=o[l];u[0].call(u[1],r,a)}},t}();t.DefaultAssetAdapter=s,egret.registerClass(s,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={}));var eui;!function(t){var e=new t.DefaultAssetAdapter,i=function(i){function n(t){i.call(this),this.sourceChanged=!1,this._source=null,this.initializeUIValues(),t&&(this.source=t)}__extends(n,i);var s=__define,r=n,a=r.prototype;return s(a,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds(),this.invalidateDisplayList()}),s(a,"fillMode",function(){return this.$fillMode},function(t){t!=this.$fillMode&&(this.$fillMode=t,this.invalidateDisplayList())}),a.$setFillMode=function(t){var e=i.prototype.$setFillMode.call(this,t);return this.invalidateDisplayList(),e},s(a,"source",function(){return this._source},function(t){t!=this._source&&(this._source=t,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))}),a.$setBitmapData=function(t){if(t==this.$Bitmap[0])return!1;var e=i.prototype.$setBitmapData.call(this,t);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),e},a.parseSource=function(){this.sourceChanged=!1;var t=this._source;if(t&&"string"==typeof t){var i=this.$stage.getImplementation("eui.IAssetAdapter");i||(i=e),i.getAsset(this._source,this.contentChanged,this)}else this.$setBitmapData(t)},a.contentChanged=function(t,e){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setBitmapData(t),t&&this.dispatchEventWith(egret.Event.COMPLETE))},a.$measureContentBounds=function(t){var e=(this.$Bitmap,this.$Bitmap[0]);if(e){var i=this.$UIComponent,n=i[10],s=i[11];if(isNaN(n)||isNaN(s))return void t.setEmpty();"clip"==this.$fillMode&&(n>e.$getTextureWidth()&&(n=e.$getTextureWidth()),s>e.$getTextureHeight()&&(s=e.$getTextureHeight())),t.setTo(0,0,n,s)}else t.setEmpty()},a.$render=function(){var t=this.$Bitmap[0];if(t){var e=this.$UIComponent,i=e[10],n=e[11];if(0!==i&&0!==n){var s=this.$Bitmap;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],i,n,s[13],s[14],this.scale9Grid,this.$fillMode,s[10])
}}},a.createChildren=function(){this.sourceChanged&&this.parseSource()},a.childrenCreated=function(){},a.commitProperties=function(){t.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},a.measure=function(){var t=this.$Bitmap[0];t?this.setMeasuredSize(t.$getTextureWidth(),t.$getTextureHeight()):this.setMeasuredSize(0,0)},a.updateDisplayList=function(t,e){this.$invalidateContentBounds()},a.invalidateParentLayout=function(){},a.setMeasuredSize=function(t,e){},a.invalidateProperties=function(){},a.validateProperties=function(){},a.invalidateSize=function(){},a.validateSize=function(t){},a.invalidateDisplayList=function(){},a.validateDisplayList=function(){},a.validateNow=function(){},a.setLayoutBoundsSize=function(t,e){},a.setLayoutBoundsPosition=function(t,e){},a.getLayoutBounds=function(t){},a.getPreferredBounds=function(t){},n}(egret.Bitmap);t.Image=i,egret.registerClass(i,"eui.Image",["eui.UIComponent"]),t.sys.implementUIComponent(i,egret.Bitmap),t.registerProperty(i,"scale9Grid","egret.Rectangle")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this._data=null,this._selected=!1,this.itemIndex=-1,this.touchCaptured=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"data",function(){return this._data},function(e){this._data=e,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()}),r.dataChanged=function(){},n(r,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.invalidateState())}),r.onTouchCancle=function(t){this.touchCaptured=!1;var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},r.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},r.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},r.getCurrentState=function(){var t="up";if(this.touchCaptured&&(t="down"),this._selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},i}(t.Component);t.ItemRenderer=e,egret.registerClass(e,"eui.ItemRenderer",["eui.IItemRenderer","eui.UIComponent"]),t.registerBindable(e.prototype,"data")}(eui||(eui={}));var eui;!function(t){var e=t.sys.UIComponentImpl,i=function(i){function n(t){i.call(this),this._widthConstraint=0/0,this.availableWidth=0/0,this.initializeUIValues(),this.text=t}__extends(n,i);var s=(__define,n),r=s.prototype;return r.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},r.$setWidth=function(t){var n=i.prototype.$setWidth.call(this,t),s=e.prototype.$setWidth.call(this,t);return n&&s},r.$setHeight=function(t){var n=i.prototype.$setHeight.call(this,t),s=e.prototype.$setHeight.call(this,t);return n&&s},r.$setText=function(e){var n=i.prototype.$setText.call(this,e);return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"text"),n},r.createChildren=function(){},r.childrenCreated=function(){},r.commitProperties=function(){},r.measure=function(){var t=this.$UIComponent,e=this.$TextField,n=e[3];isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(this.availableWidth=t[13]):this.availableWidth=t[8]:(this.availableWidth=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,this.availableWidth),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},r.updateDisplayList=function(t,e){i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,e)},r.invalidateParentLayout=function(){},r.setMeasuredSize=function(t,e){},r.invalidateProperties=function(){},r.validateProperties=function(){},r.invalidateSize=function(){},r.validateSize=function(t){},r.invalidateDisplayList=function(){},r.validateDisplayList=function(){},r.validateNow=function(){},r.setLayoutBoundsSize=function(t,i){if(e.prototype.setLayoutBoundsSize.call(this,t,i),this._widthConstraint=t,!isNaN(t)&&t!==this._widthConstraint&&0!=t){var n=this.$UIComponent;isNaN(n[9])&&t!=n[16]&&this.invalidateSize()}},r.setLayoutBoundsPosition=function(t,e){},r.getLayoutBounds=function(t){},r.getPreferredBounds=function(t){},n}(egret.TextField);t.Label=i,egret.registerClass(i,"eui.Label",["eui.UIComponent","eui.IDisplayText"]),t.sys.implementUIComponent(i,egret.TextField),t.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1}}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"requireSelection",function(){return this.$ListBase[0]},function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t,t&&(e[1]=!0,this.invalidateProperties()))}),n(r,"selectedIndex",function(){return this.$getSelectedIndex()},function(t){t=0|+t,this.setSelectedIndex(t,!1)}),r.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=i.NO_PROPOSED_SELECTION?t[2]:t[3]},r.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},n(r,"selectedItem",function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();if(e!=i.NO_SELECTION&&null!=this.$dataProvider)return this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},function(t){this.setSelectedItem(t,!1)}),r.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},r.commitProperties=function(){var n=this.$dataProviderChanged;e.prototype.commitProperties.call(this);var s=this.$ListBase,r=this.$getSelectedIndex(),a=this.$dataProvider;n&&(r>=0&&a&&r<a.length?this.itemSelected(r,!0):this.requireSelection?s[2]=0:this.setSelectedIndex(-1,!1)),s[1]&&(s[1]=!1,s[0]&&r==i.NO_SELECTION&&a&&a.length>0&&(s[2]=0)),void 0!==s[5]&&(a?s[2]=a.getItemIndex(s[5]):s[2]=i.NO_SELECTION,s[5]=void 0);var o=!1;s[2]!=i.NO_PROPOSED_SELECTION&&(o=this.commitSelection()),s[6]&&(s[6]=!1,o||t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},r.updateRenderer=function(t,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),e.prototype.updateRenderer.call(this,t,i,n)},r.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},r.$isItemIndexSelected=function(t){return t==this.selectedIndex},r.commitSelection=function(e){void 0===e&&(e=!0);var n=this.$dataProvider,s=this.$ListBase,r=n?n.length-1:-1,a=s[3],o=s[2];if(o<i.NO_SELECTION&&(o=i.NO_SELECTION),o>r&&(o=r),s[0]&&o==i.NO_SELECTION&&n&&n.length>0)return s[2]=i.NO_PROPOSED_SELECTION,s[4]=!1,!1;if(s[4]){var h=this.dispatchEventWith(egret.Event.CHANGING,!1,!0);if(!h)return this.itemSelected(s[2],!1),s[2]=i.NO_PROPOSED_SELECTION,s[4]=!1,!1}return s[3]=o,s[2]=i.NO_PROPOSED_SELECTION,a!=i.NO_SELECTION&&this.itemSelected(a,!1),s[3]!=i.NO_SELECTION&&this.itemSelected(s[3],!0),e&&(s[4]&&(this.dispatchEventWith(egret.Event.CHANGE),s[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},r.adjustSelection=function(t,e){void 0===e&&(e=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=t:n[3]=t,n[6]=!0,this.invalidateProperties()},r.itemAdded=function(t,n){e.prototype.itemAdded.call(this,t,n);var s=this.$getSelectedIndex();s==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):s>=n&&this.adjustSelection(s+1,!0)},r.itemRemoved=function(t,n){if(e.prototype.itemRemoved.call(this,t,n),this.selectedIndex!=i.NO_SELECTION){var s=this.$getSelectedIndex();n==s?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):s>n&&this.adjustSelection(s-1,!1)}},r.onCollectionChange=function(n){e.prototype.onCollectionChange.call(this,n),n.kind==t.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==t.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},r.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},r.rendererAdded=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},r.rendererRemoved=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},r.onRendererTouchBegin=function(t){var e=this.$ListBase;t.$isDefaultPrevented||(e[8]=!1,e[7]=t.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))},r.onRendererTouchCancle=function(t){var e=this.$ListBase;e[7]=null,e[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},r.onRendererTouchEnd=function(e){var i=this.$ListBase,n=e.$currentTarget,s=i[7];n==s&&(i[8]||(this.setSelectedIndex(n.itemIndex,!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)),i[8]=!1)},r.stage_touchEndHandler=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i.NO_SELECTION=-1,i.NO_PROPOSED_SELECTION=-2,i}(t.DataGroup);t.ListBase=e,egret.registerClass(e,"eui.ListBase"),t.registerBindable(e.prototype,"selectedIndex"),t.registerBindable(e.prototype,"selectedItem")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){var t=this;e.apply(this,arguments),this.allowMultipleSelection=!1,this._selectedIndices=[],this.isValidIndex=function(e,i,n){return t.$dataProvider&&e>=0&&e<t.$dataProvider.length&&e%1==0}}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"selectedIndices",function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},function(t){this.setSelectedIndices(t,!1)}),n(r,"selectedIndex",function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},function(t){this.setSelectedIndex(t)}),n(r,"selectedItems",function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;i>n;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},function(t){var e=[];if(t)for(var i=t.length,n=0;i>n;n++){var s=this.$dataProvider.getItemIndex(t[n]);if(-1!=s&&e.splice(0,0,s),-1==s){e=[];break}}this.setSelectedIndices(e,!1)}),r.setSelectedIndices=function(t,e){var i=this.$ListBase;e&&(i[4]=i[4]||e),t?this._proposedSelectedIndices=t:this._proposedSelectedIndices=[],this.invalidateProperties()},r.commitProperties=function(){e.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},r.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,s=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var r=[];r.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=r}this._proposedSelectedIndices.length>0?n[2]=this._proposedSelectedIndices[0]:n[2]=-1}var a=e.prototype.commitSelection.call(this,!1);if(!a)return this._proposedSelectedIndices=null,!1;var o=this.$getSelectedIndex();return o>t.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(o)&&this._proposedSelectedIndices.push(o):this._proposedSelectedIndices=[o]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(s)&&this.itemSelected(s,!0),this.commitMultipleSelection()),i&&a&&(n[4]&&(this.dispatchEventWith(egret.Event.CHANGE),n[4]=!1),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),a},r.commitMultipleSelection=function(){var t,e,i=[],n=[],s=this._selectedIndices,r=this._proposedSelectedIndices;if(s.length>0&&r.length>0){for(e=r.length,t=0;e>t;t++)-1==s.indexOf(r[t])&&n.push(r[t]);for(e=s.length,t=0;e>t;t++)-1==r.indexOf(s[t])&&i.push(s[t])}else s.length>0?i=s:r.length>0&&(n=r);if(this._selectedIndices=r,i.length>0)for(e=i.length,t=0;e>t;t++)this.itemSelected(i[t],!1);if(n.length>0)for(e=n.length,t=0;e>t;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},r.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):e.prototype.$isItemIndexSelected.call(this,t)},r.dataProviderRefreshed=function(){this.allowMultipleSelection||e.prototype.dataProviderRefreshed.call(this)},r.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==t)return this.$ListBase[0]?(e.splice(0,0,i[0]),e):e;for(var s=!1,r=0;n>r;r++)i[r]==t?s=!0:i[r]!=t&&e.splice(0,0,i[r]);return s||e.splice(0,0,t),e}return e.splice(0,0,t),e},r.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget,s=this.$ListBase[7];if(n!=s)return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),t.ItemTapEvent.dispatchItemTapEvent(this,t.ItemTapEvent.ITEM_TAP,n)}else e.prototype.onRendererTouchEnd.call(this,i)},i}(t.ListBase);t.List=e,egret.registerClass(e,"eui.List")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.closeButton=null,this.moveArea=null,this.titleDisplay=null,this._title="",this.offsetPointX=0,this.offsetPointY=0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onWindowTouchBegin,this,!1,100)}__extends(i,e);var n=__define,s=i,r=s.prototype;return r.onWindowTouchBegin=function(t){this.$parent.addChild(this)},n(r,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;e>i;i++)this.addChild(t[i])}),n(r,"title",function(){return this._title},function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)}),r.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},r.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},r.onCloseButtonClick=function(e){t.UIEvent.dispatchUIEvent(this,t.UIEvent.CLOSING,!0,!0)&&this.close()},r.close=function(){this.$parent&&this.$parent.removeChild(this)},r.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},r.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},r.onTouchEnd=function(t){this.$stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(t.Component);t.Panel=e,egret.registerClass(e,"eui.Panel"),t.registerProperty(e,"elementsContent","Array",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.thumb=null,this.labelDisplay=null,this._labelFunction=null,this._slideDuration=500,this._direction=t.Direction.LTR,this.slideToValue=0,this.animationValue=0,this.thumbInitX=0,this.thumbInitY=0,this.animation=new t.sys.Animation(this.animationUpdateHandler,this)}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"labelFunction",function(){return this._labelFunction},function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())}),r.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},n(r,"slideDuration",function(){return this._slideDuration},function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))}),n(r,"direction",function(){return this._direction},function(t){this._direction!=t&&(this.thumb&&(this.thumb.x=this.thumbInitX),this.thumb&&(this.thumb.y=this.thumbInitY),this._direction=t,this.invalidateDisplayList())}),r.$setValue=function(t){if(this.value===t)return!1;var i=this.$Range,n=e.prototype.$setValue.call(this,t);if(this._slideDuration>0&&this.$stage){this.validateProperties();var s=this.animation;if(s.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),s.stop()),this.slideToValue=this.nearestValidValue(t,i[7]),this.slideToValue===this.animationValue)return n;var r=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));s.duration=r===1/0?0:r,s.from=this.animationValue,s.to=this.slideToValue,s.play()}else this.animationValue=this.value;return n},r.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},r.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),i===this.thumb&&(this.thumb.x&&(this.thumbInitX=this.thumb.x),this.thumb.y&&(this.thumbInitY=this.thumb.y),this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this))},r.partRemoved=function(t,i){e.prototype.partRemoved.call(this,t,i),i===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},r.onThumbResize=function(t){this.updateSkinDisplayList()},r.updateSkinDisplayList=function(){var e=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var s=n.width,r=n.height,a=Math.round(e/i*s);(0>a||a===1/0)&&(a=0);var o=Math.round(e/i*r);(0>o||o===1/0)&&(o=0);var h=n.$scrollRect;h||(h=egret.$TempRectangle),h.setTo(0,0,s,r);var l=n.x-h.x,u=n.y-h.y;switch(this._direction){case t.Direction.LTR:h.width=a,n.x=l;break;case t.Direction.RTL:h.width=a,h.x=s-a,n.x=h.x;break;case t.Direction.TTB:h.height=o,n.y=u;break;case t.Direction.BTT:h.height=o,h.y=r-o,n.y=h.y}n.scrollRect=h}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(e,i))},i}(t.Range);t.ProgressBar=e,egret.registerClass(e,"eui.ProgressBar")}(eui||(eui={}));var eui;!function(t){var e={},i=function(i){function n(){i.call(this),this.$indexNumber=0,this.$radioButtonGroup=null,this._group=null,this.groupChanged=!1,this._groupName="radioGroup",this._value=null,this.groupName="radioGroup"}__extends(n,i);var s=__define,r=n,a=r.prototype;return s(a,"enabled",function(){return this.$Component[3]?!this.$radioButtonGroup||this.$radioButtonGroup.$enabled:!1},function(t){this.$setEnabled(t)}),s(a,"group",function(){if(!this._group&&this._groupName){var i=e[this._groupName];i||(i=new t.RadioButtonGroup,i.$name=this._groupName,e[this._groupName]=i),this._group=i}return this._group},function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),s(a,"groupName",function(){return this._groupName},function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),a.$setSelected=function(t){var e=i.prototype.$setSelected.call(this,t);return this.invalidateDisplayList(),e},s(a,"value",function(){return this._value},function(e){this._value!=e&&(this._value=e,this.$selected&&this.group&&t.PropertyEvent.dispatchPropertyEvent(this.group,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))}),a.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},a.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},a.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},a.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},n}(t.ToggleButton);t.RadioButton=i,egret.registerClass(i,"eui.RadioButton")}(eui||(eui={}));var eui;!function(t){function e(t,i){var n=t.parent,s=i.parent;if(!n||!s)return 0;var r=t.$nestLevel,a=i.$nestLevel,o=0,h=0;return n==s&&(o=n.getChildIndex(t),h=s.getChildIndex(i)),r>a||o>h?1:a>r||h>o?-1:t==i?0:e(n,s)}var i=0,n=function(n){function s(){n.call(this),this.$name=null,this.radioButtons=[],this.$enabled=!0,this._selectedValue=null,this._selection=null,this.$name="_radioButtonGroup"+i++}__extends(s,n);var r=__define,a=s,o=a.prototype;return o.getRadioButtonAt=function(t){return this.radioButtons[t]},r(o,"enabled",function(){return this.$enabled},function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;i>n;n++)e[n].invalidateState()}}),r(o,"numRadioButtons",function(){return this.radioButtons.length}),r(o,"selectedValue",function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},function(e){if(this._selectedValue=e,null==e)return void this.$setSelection(null,!1);for(var i=this.numRadioButtons,n=0;i>n;n++){var s=this.radioButtons[n];if(s.value==e||s.label==e){this.changeSelection(n,!1),this._selectedValue=null,t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}}),r(o,"selection",function(){return this._selection},function(t){this._selection!=t&&this.$setSelection(t,!1)}),o.$addInstance=function(t){t.addEventListener(egret.Event.REMOVED,this.removedHandler,this);var i=this.radioButtons;i.push(t),i.sort(e);for(var n=i.length,s=0;n>s;s++)i[s].$indexNumber=s;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},o.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,s=n.length,r=0;s>r;r++){var a=n[r];i?a.$indexNumber=a.$indexNumber-1:a==t&&(e&&t.addEventListener(egret.Event.ADDED,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(r,1),i=!0,r--,s--)}},o.$setSelection=function(e,i){if(this._selection==e)return!1;if(e){for(var n=this.numRadioButtons,s=0;n>s;s++)if(e==this.getRadioButtonAt(s)){this.changeSelection(s,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.dispatchEventWith(egret.Event.CHANGE));return t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},o.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.dispatchEventWith(egret.Event.CHANGE))},o.addedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.ADDED,this.addedHandler,this),this.$addInstance(e))},o.removedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.REMOVED,this.removedHandler,this),this.$removeInstance(e,!0))},s}(egret.EventDispatcher);t.RadioButtonGroup=n,egret.registerClass(n,"eui.RadioButtonGroup"),t.registerBindable(n.prototype,"selectedValue")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){t.call(this),this.$fillColor=0,this.$fillAlpha=1,this.$strokeColor=4473924,this.$strokeAlpha=1,this.$strokeWeight=0,this.$ellipseWidth=0,this.$ellipseHeight=0,this.touchChildren=!1,this.$graphics=new egret.Graphics,this.$graphics.$setTarget(this),this.width=e,this.height=i,this.fillColor=n}__extends(e,t);var i=__define,n=e,s=n.prototype;return i(s,"graphics",function(){return this.$graphics}),s.$measureContentBounds=function(t){this.$graphics&&t.setTo(0,0,this.width,this.height)},i(s,"fillColor",function(){return this.$fillColor},function(t){void 0!=t&&this.$fillColor!=t&&(this.$fillColor=t,this.invalidateDisplayList())}),i(s,"fillAlpha",function(){return this.$fillAlpha},function(t){this.$fillAlpha!=t&&(this.$fillAlpha=t,this.invalidateDisplayList())}),i(s,"strokeColor",function(){return this.$strokeColor},function(t){this.$strokeColor!=t&&(this.$strokeColor=t,this.invalidateDisplayList())}),i(s,"strokeAlpha",function(){return this.$strokeAlpha},function(t){this.$strokeAlpha!=t&&(this.$strokeAlpha=t,this.invalidateDisplayList())}),i(s,"strokeWeight",function(){return this.$strokeWeight},function(t){this.$strokeWeight!=t&&(this.$strokeWeight=t,this.invalidateDisplayList())}),i(s,"ellipseWidth",function(){return this.$ellipseWidth},function(t){this.$ellipseWidth!=t&&(this.$ellipseWidth=t,this.invalidateDisplayList())}),i(s,"ellipseHeight",function(){return this.$ellipseHeight},function(t){this.$ellipseHeight!=t&&(this.$ellipseHeight=t,this.invalidateDisplayList())}),s.updateDisplayList=function(t,e){var i=this.graphics;i.clear(),this.$strokeWeight>0&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill(),this.$invalidateContentBounds()},e}(t.Component);t.Rect=e,egret.registerClass(e,"eui.Rect")}(eui||(eui={}));var eui;!function(t){var e,i=function(i){function n(){i.call(this),this.$bounces=!0,this.horizontalScrollBar=null,this.verticalScrollBar=null;var e=new t.sys.TouchScroll(this.horizontalUpdateHandler,this.horizontalEndHandler,this),n=new t.sys.TouchScroll(this.verticalUpdateHandler,this.verticalEndHanlder,this);this.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:e,9:n,10:null,11:!1,12:!1}}__extends(n,i);var s=__define,r=n,a=r.prototype;return s(a,"bounces",function(){return this.$bounces},function(t){this.$bounces=!!t;var e=this.$Scroller[8];e&&(e.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)}),s(a,"throwSpeed",function(){return this.$Scroller[8].$scrollFactor},function(t){t=+t,0>t&&(t=0),this.$Scroller[8].$scrollFactor=t,this.$Scroller[9].$scrollFactor=t}),a.$getThrowInfo=function(i,n){return e?(e.currentPos=i,e.toPos=n):e=new t.ScrollerThrowEvent(t.ScrollerThrowEvent.THROW,!1,!1,i,n),e},s(a,"scrollPolicyV",function(){return this.$Scroller[0]},function(t){var e=this.$Scroller;e[0]!=t&&(e[0]=t,this.checkScrollPolicy())}),s(a,"scrollPolicyH",function(){return this.$Scroller[1]},function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())}),a.stopAnimation=function(){var e=this.$Scroller,i=e[9],n=e[8];i.animation.isPlaying?t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END):n.animation.isPlaying&&t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END),i.stop(),n.stop();var s=this.verticalScrollBar,r=this.horizontalScrollBar;s&&s.autoVisibility&&(s.visible=!1),r&&r.autoVisibility&&(r.visible=!1)},s(a,"viewport",function(){return this.$Scroller[10]},function(t){var e=this.$Scroller;t!=e[10]&&(this.uninstallViewport(),e[10]=t,e[11]=!1,this.installViewport())}),a.installViewport=function(){var t=this.viewport;t&&(this.addChildAt(t,0),t.scrollEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},a.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(t))},a.onViewPortRemove=function(t){t.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},a.setSkin=function(t){i.prototype.setSkin.call(this,t);var e=this.viewport;e&&this.addChildAt(e,0)},a.onTouchBeginCapture=function(t){this.$Scroller[12]=!1;var e=this.checkScrollPolicy();e&&this.onTouchBegin(t)},a.onTouchEndCapture=function(t){this.$Scroller[12]&&(t.stopPropagation(),this.onTouchEnd(t))},a.onTouchTapCapture=function(t){this.$Scroller[12]&&t.stopPropagation()},a.checkScrollPolicy=function(){var t=this.$Scroller,e=t[10];if(!e)return!1;var i,n=e.$UIComponent;switch(t[1]){case"auto":i=e.contentWidth>n[10]||0!==e.scrollH?!0:!1;break;case"on":i=!0;break;case"off":i=!1}t[6]=i;var s;switch(t[0]){case"auto":s=e.contentHeight>n[11]||0!==e.scrollV?!0:!1;break;case"on":s=!0;break;case"off":s=!1}return t[7]=s,i||s},a.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=t.target;var e=this.$Scroller;this.stopAnimation(),e[3]=t.$stageX,e[4]=t.$stageY,e[6]&&e[8].start(t.$stageX),e[7]&&e[9].start(t.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)}},a.onTouchMove=function(e){if(!e.isDefaultPrevented()){var i=this.$Scroller;if(!i[5]){if(Math.abs(i[3]-e.$stageX)<n.scrollThreshold)var s=!1;else s=!0;if(Math.abs(i[4]-e.$stageY)<n.scrollThreshold)var r=!1;else r=!0;if(!s&&!r)return;if(!r&&s&&"off"==i[1])return;if(!s&&r&&"off"==i[0])return;i[12]=!0,i[5]=!0,this.dispatchCancelEvent(e);var a=this.horizontalScrollBar,o=this.verticalScrollBar;a&&a.autoVisibility&&i[6]&&(a.visible=!0),o&&o.autoVisibility&&i[7]&&(o.visible=!0),i[2]&&i[2].reset(),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}e.preventDefault();var h=i[10],l=h.$UIComponent;i[6]&&i[8].update(e.$stageX,h.contentWidth-l[10],h.scrollH),i[7]&&i[9].update(e.$stageY,h.contentHeight-l[11],h.scrollV)
}},a.onTouchCancel=function(t){this.$Scroller[5]||this.onRemoveListeners()},a.dispatchCancelEvent=function(t){var e=this.$Scroller[10];if(e){for(var i=new egret.TouchEvent(egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable),n=this.downTarget,s=this.$getPropagationList(n),r=s.length,a=.5*s.length,o=-1,h=0;r>h;h++)if(s[h]===e){o=h;break}s.splice(0,o+1),a-=o+1,this.$dispatchPropagationEvent(i,s,a),egret.Event.release(i)}},a.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1,this.onRemoveListeners();var i=e[10],n=i.$UIComponent;e[8].isStarted()&&e[8].finish(i.scrollH,i.contentWidth-n[10]),e[9].isStarted()&&e[9].finish(i.scrollV,i.contentHeight-n[11])},a.onRemoveListeners=function(){var t=this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,!0),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},a.horizontalUpdateHandler=function(t){this.dispatchEventWith(egret.Event.CHANGE),this.$Scroller[10].scrollH=t},a.verticalUpdateHandler=function(t){this.dispatchEventWith(egret.Event.CHANGE),this.$Scroller[10].scrollV=t},a.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},a.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},a.onChangeEnd=function(){var e=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(e[2]||(e[2]=new egret.Timer(200,1),e[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),e[2].reset(),e[2].start()),t.UIEvent.dispatchUIEvent(this,t.UIEvent.CHANGE_END)},a.onAutoHideTimer=function(t){var e=this.horizontalScrollBar,i=this.verticalScrollBar;e&&e.autoVisibility&&(e.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},a.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e);var n=this.viewport;n&&(n.setLayoutBoundsSize(t,e),n.setLayoutBoundsPosition(0,0))},a.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):e==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},n.scrollThreshold=5,n}(t.Component);t.Scroller=i,egret.registerClass(i,"eui.Scroller"),t.registerProperty(i,"viewport","eui.IViewport",!0)}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.apply(this,arguments),this.maxWidth=1e5,this.minWidth=0,this.maxHeight=1e5,this.minHeight=0,this.width=0/0,this.height=0/0,this.$elementsContent=[],this._hostComponent=null,this.$stateValues=new t.sys.StateValues}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"elementsContent",void 0,function(t){this.$elementsContent=t}),n(r,"hostComponent",function(){return this._hostComponent},function(e){if(this._hostComponent!=e){this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=e;var i=this.$stateValues;i.parent=e,e&&(this.commitCurrentState(),this.$stateValues.intialized||(e.$stage?this.initializeStates(e.$stage):e.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"hostComponent")}}),r.onAddedToStage=function(t){this.initializeStates(this._hostComponent.$stage)},i}(egret.EventDispatcher);t.Skin=e,egret.registerClass(e,"eui.Skin"),t.sys.mixin(e,t.sys.StateClient),t.registerProperty(e,"elementsContent","Array",!0),t.registerProperty(e,"states","State[]"),t.registerBindable(e.prototype,"hostComponent")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this.indexBeingUpdated=!1,this.requireSelection=!0,this.useVirtualLayout=!1}__extends(i,e);var n=(__define,i),s=n.prototype;return s.createChildren=function(){if(!this.$layout){var i=new t.HorizontalLayout;i.gap=0,i.horizontalAlign=t.JustifyAlign.JUSTIFY,i.verticalAlign=t.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}e.prototype.createChildren.call(this)},s.$setDataProvider=function(i){var n=this.$dataProvider;return n&&n instanceof t.ViewStack&&(n.removeEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof t.ViewStack&&(i.addEventListener(t.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),e.prototype.$setDataProvider.call(this,i)},s.onIndexChanged=function(t){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},s.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(t.ListBase);t.TabBar=e,egret.registerClass(e,"eui.TabBar")}(eui||(eui={}));var eui;!function(t){var e=egret.FocusEvent,i=function(i){function n(){i.call(this),this.isFocus=!1,this.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT}}__extends(n,i);var s=__define,r=n,a=r.prototype;return s(a,"prompt",function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},function(t){this.$TextInput[0]=t,this.promptDisplay&&(this.promptDisplay.text=t),this.invalidateProperties(),this.invalidateState()}),s(a,"displayAsPassword",function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var t=this.$TextInput[1];return t?t:!1},function(t){this.$TextInput[1]=t,this.textDisplay&&(this.textDisplay.displayAsPassword=t),this.invalidateProperties()}),s(a,"inputType",function(){return console.log("get inputType"),this.textDisplay?this.textDisplay.inputType:this.$TextInput[8]},function(t){console.log("set inputType"),this.$TextInput[8]=t,this.textDisplay&&(this.textDisplay.inputType=t),this.invalidateProperties()}),s(a,"textColor",function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},function(t){this.$TextInput[2]=t,this.textDisplay&&(this.textDisplay.textColor=t),this.invalidateProperties()}),s(a,"maxChars",function(){if(this.textDisplay)return this.textDisplay.maxChars;var t=this.$TextInput[3];return t?t:0},function(t){this.$TextInput[3]=t,this.textDisplay&&(this.textDisplay.maxChars=t),this.invalidateProperties()}),s(a,"maxWidth",function(){if(this.textDisplay)return this.textDisplay.maxWidth;var t=this.$TextInput[4];return t?t:1e5},function(t){this.$TextInput[4]=t,this.textDisplay&&(this.textDisplay.maxWidth=t),this.invalidateProperties()}),s(a,"maxHeight",function(){this.textDisplay;var t=this.$TextInput[5];return t?t:1e5},function(t){this.$TextInput[5]=t,this.textDisplay&&(this.textDisplay.maxHeight=t),this.invalidateProperties()}),s(a,"text",function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},function(t){this.$TextInput[6]=t,this.textDisplay&&(this.textDisplay.text=t),this.invalidateProperties(),this.invalidateState()}),s(a,"restrict",function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},function(t){this.$TextInput[7]=t,this.textDisplay&&(this.textDisplay.restrict=t),this.invalidateProperties()}),a.focusInHandler=function(t){this.isFocus=!0,this.invalidateState()},a.focusOutHandler=function(t){this.isFocus=!1,this.invalidateState()},a.getCurrentState=function(){var t=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&t.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&t.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},a.partAdded=function(n,s){i.prototype.partAdded.call(this,n,s);var r=this.$TextInput;s==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.addEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):s==this.promptDisplay&&r[0]&&(this.promptDisplay.text=r[0])},a.partRemoved=function(n,s){i.prototype.partRemoved.call(this,n,s),s==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof t.EditableText&&(this.textDisplay.removeEventListener(e.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(e.FOCUS_OUT,this.focusOutHandler,this))):s==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)},a.textDisplayAdded=function(){var t=this.$TextInput;t[1]&&(this.textDisplay.displayAsPassword=t[1]),t[2]&&(this.textDisplay.textColor=t[2]),t[3]&&(this.textDisplay.maxChars=t[3]),t[4]&&(this.textDisplay.maxWidth=t[4]),t[5]&&(this.textDisplay.maxHeight=t[5]),t[6]&&(this.textDisplay.text=t[6]),t[7]&&(this.textDisplay.restrict=t[7]),t[8]&&(this.textDisplay.inputType=t[8])},a.textDisplayRemoved=function(){var t=this.$TextInput;t[1]=this.textDisplay.displayAsPassword,t[2]=this.textDisplay.textColor,t[3]=this.textDisplay.maxChars,t[4]=this.textDisplay.maxWidth,t[5]=this.textDisplay.maxHeight,t[6]=this.textDisplay.text,t[7]=this.textDisplay.restrict,t[8]=this.textDisplay.inputType},n}(t.Component);t.TextInput=i,egret.registerClass(i,"eui.TextInput")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);i.prototype;return e}(t.ToggleButton);t.ToggleSwitch=e,egret.registerClass(e,"eui.ToggleSwitch")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},n.onRemoveFromStage=function(t){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},n.onResize=function(t){var e=this.$stage;this.$setWidth(e.$stageWidth),this.$setHeight(e.$stageHeight)},e}(t.Group);t.UILayer=e,egret.registerClass(e,"eui.UILayer")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i);var n=this.thumb,s=this.$viewport;if(n&&s){var r=egret.$TempRectangle;n.getPreferredBounds(r);var a=r.height,o=r.x,h=s.scrollV,l=s.contentHeight,u=s.height;if(0>=h){var d=a*(1- -h/(.5*u));d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(0/0,d),n.setLayoutBoundsPosition(o,0)}else if(h>=l-u)d=a*(1-(h-l+u)/(.5*u)),d=Math.max(5,Math.round(d)),n.setLayoutBoundsSize(0/0,d),n.setLayoutBoundsPosition(o,i-d);else{var c=(i-a)*h/(l-u);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(o,c)}}},n.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},e}(t.ScrollBarBase);t.VScrollBar=e,egret.registerClass(e,"eui.VScrollBar")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],s=this.getThumbRange();return i[2]+(0!=s?(s-e)/s*n:0)},n.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},n.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=i>0?e-(this.pendingValue-t[2])/i*e:0,s=this.track.localToGlobal(0,n,egret.$TempPoint),r=s.x,a=s.y,o=this.thumb.$parent.globalToLocal(r,a,egret.$TempPoint).y,h=egret.$TempRectangle,l=h.height;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(h.x,Math.round(o)),this.trackHighlight){var u=this.trackHighlight.$parent.globalToLocal(r,a,egret.$TempPoint).y;this.trackHighlight.y=Math.round(u+l),this.trackHighlight.height=Math.round(e-u)}}},e}(t.SliderBase);t.VSlider=e,egret.registerClass(e,"eui.VSlider")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this),this._selectedChild=null,this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION,this._selectedIndex=-1}__extends(i,e);var n=__define,s=i,r=s.prototype;return n(r,"layout",function(){return this.$layout}),n(r,"selectedChild",function(){var t=this.selectedIndex;return t>=0&&t<this.numChildren?this.getChildAt(t):null},function(t){var e=this.getChildIndex(t);e>=0&&e<this.numChildren&&this.setSelectedIndex(e)}),n(r,"selectedIndex",function(){return this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},function(t){t=0|+t,this.setSelectedIndex(t)}),r.setSelectedIndex=function(e){e!=this.selectedIndex&&(this.proposedSelectedIndex=e,this.invalidateProperties(),t.PropertyEvent.dispatchPropertyEvent(this,t.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},r.$childAdded=function(i,n){e.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var s=this.selectedIndex;-1==s?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(s+1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.ADD,n,-1,[i.name])},r.$childRemoved=function(i,n){e.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var s=this.selectedIndex;n==s?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):s>n&&this.setSelectedIndex(s-1),t.CollectionEvent.dispatchCollectionEvent(this,t.CollectionEvent.COLLECTION_CHANGE,t.CollectionEventKind.REMOVE,n,-1,[i.name])},r.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=t.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=t.ListBase.NO_PROPOSED_SELECTION)},r.commitSelection=function(t){t>=0&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},r.showOrHide=function(t,e){egret.is(t,"eui.UIComponent")&&(t.includeInLayout=e),t.visible=e},n(r,"length",function(){return this.$children.length}),r.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},r.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;i>n;n++)if(e[n].name==t)return n;return-1},i}(t.Group);t.ViewStack=e,egret.registerClass(e,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),t.registerBindable(e.prototype,"selectedIndex")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}var i=function(){function t(t,i){this.easerFunction=e,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=i}var i=(__define,t),n=i.prototype;return n.play=function(){this.stop(),this.start()},n.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},n.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},n.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var s=e>=i;return s&&this.stop(),s&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=i,egret.registerClass(i,"eui.sys.Animation")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,n){function s(t){var i=t.target;e.call(n,i.response)}function r(t){i.call(n)}var a=new egret.HttpRequest;a.addEventListener(egret.Event.COMPLETE,s,n),a.addEventListener(egret.IOErrorEvent.IO_ERROR,r,n),a.responseType=egret.HttpResponseType.TEXT,a.open(t),a.send()},t}();t.DefaultThemeAdapter=e,egret.registerClass(e,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){var e=t-1;return e*e*e+1}var i=4,n=[1,1.33,1.66,2],s=2.33,r=.02,a=.998,o=.95,h=Math.log(a),l=function(){function l(i,n,s){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=s,this.animation=new t.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=e}var u=(__define,l),d=u.prototype;return d.isPlaying=function(){return this.animation.isPlaying},d.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},d.isStarted=function(){return this.started},d.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},d.update=function(t,e,i){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,s=n+i;this.offsetPoint=t,0>s&&(this.$bounces?s-=.5*n:s=0),s>e&&(this.$bounces?s-=.5*n:s=e),this.currentScrollPos=s,this.updateFunction.call(this.target,s)},d.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*s,l=this.previousVelocity,u=l.length,d=s,c=0;u>c;c++){var p=n[c];i+=l[0]*p,d+=p}var v=i/d,f=Math.abs(v),g=0,m=0;if(f>r)if(m=t+(v-r)/h*2*this.$scrollFactor,0>m||m>e)for(m=t;Math.abs(v)>r;)m-=v,v*=0>m||m>e?a*o:a,g++;else g=Math.log(r/f)/h;else m=t;if(this.target.$getThrowInfo){var y=this.target.$getThrowInfo(t,m);m=y.toPos}g>0?(this.$bounces||(0>m?m=0:m>e&&(m=e)),this.throwTo(m,g)):this.finishScrolling()},d.onTick=function(t){var e=t-this.previousTime;if(e>10){var n=this.previousVelocity;n.length>=i&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,n.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0},d.finishScrolling=function(t){var e=this.currentScrollPos,i=this.maxScrollPos,n=e;0>e&&(n=0),e>i&&(n=i),this.throwTo(n,300)},d.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i==t)return void this.endFunction.call(this.target);var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()},d.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},l}();t.TouchScroll=l,egret.registerClass(l,"eui.sys.TouchScroll")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.LTR="ltr",t.RTL="rtl",t.TTB="ttb",t.BTT="btt",t}();t.Direction=e,egret.registerClass(e,"eui.Direction")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,egret.registerClass(e,"eui.ScrollPolicy")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(t,i){e.call(this),this.delayList=[],this.skinMap={},this.initialized=!t,i&&(this.$stage=i,EXML.$stage=i,i.registerImplementation("eui.Theme",this)),this.$configURL=t,this.load(t)}__extends(i,e);var n=(__define,i),s=n.prototype;return s.load=function(e){var i=this.$stage?this.$stage.getImplementation("eui.IThemeAdapter"):null;i||(i=new t.DefaultThemeAdapter),i.getTheme(e,this.onConfigLoaded,this.onConfigLoaded,this)},s.onConfigLoaded=function(t){if(t)var e,e=JSON.parse(t);if(e&&e.skins)for(var i=this.skinMap,n=e.skins,s=Object.keys(n),r=s.length,a=0;r>a;a++){var o=s[a];i[o]||this.mapSkin(o,n[o])}e.exmls&&0!=e.exmls.length?e.exmls[0].gjs?(e.exmls.forEach(function(t){return EXML.$parseURLContentAsJs(t.path,t.gjs,t.className)}),this.onLoaded()):e.exmls[0].content?(e.exmls.forEach(function(t){return EXML.$parseURLContent(t.path,t.content)}),this.onLoaded()):EXML.$loadAll(e.exmls,this.onLoaded,this,!0):this.onLoaded()},s.onLoaded=function(t,e){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},s.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;e>i;i++){var n=t[i];if(!n.$Component[5]){var s=this.getSkinName(n);s&&(n.$Component[1]=s,n.$parseSkinName())}}t.length=0},s.getSkinName=function(t){if(!this.initialized)return-1==this.delayList.indexOf(t)&&this.delayList.push(t),"";var e=this.skinMap,i=e[t.hostComponentKey];return i||(i=this.findSkinName(t)),i},s.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},s.mapSkin=function(t,e){this.skinMap[t]=e},i}(egret.EventDispatcher);t.Theme=e,egret.registerClass(e,"eui.Theme")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,s,r,a,o,h){t.call(this,e,i,n),this.$initTo(s,r,a,o,h)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.$initTo=function(t,e,i,n,s){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=s||[]},n.clean=function(){t.prototype.clean.call(this),this.items=this.oldItems=null},e.dispatchCollectionEvent=function(t,i,n,s,r,a,o){if(!t.hasEventListener(i))return!0;var h=egret.Event.create(e,i);h.$initTo(n,s,r,a,o);var l=t.dispatchEvent(h);return egret.Event.release(h),l},e.COLLECTION_CHANGE="collectionChange",e}(egret.Event);t.CollectionEvent=e,egret.registerClass(e,"eui.CollectionEvent")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.ADD="add",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t}();t.CollectionEventKind=e,egret.registerClass(e,"eui.CollectionEventKind")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.item=null,this.itemRenderer=null,this.itemIndex=-1}__extends(e,t);var i=(__define,e),n=i.prototype;return n.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},e.dispatchItemTapEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var s=egret.Event.create(e,i);s.item=n.data,s.itemIndex=n.itemIndex,s.itemRenderer=n;var r=t.dispatchEvent(s);return egret.Event.release(s),r},e.ITEM_TAP="itemTap",e}(egret.Event);t.ItemTapEvent=e,egret.registerClass(e,"eui.ItemTapEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,s){t.call(this,e,i,n),this.property=s}__extends(e,t);var i=(__define,e);i.prototype;return e.dispatchPropertyEvent=function(t,i,n){if(!t.hasEventListener(i))return!0;var s=egret.Event.create(e,i);s.property=n;var r=t.dispatchEvent(s);return egret.Event.release(s),r},e.PROPERTY_CHANGE="propertyChange",e}(egret.Event);t.PropertyEvent=e,egret.registerClass(e,"eui.PropertyEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n,s,r){t.call(this,e,i,n),s=+s,r=+r,this.currentPos=s,this.toPos=r}__extends(e,t);var i=(__define,e);i.prototype;return e.THROW="throw",e}(egret.Event);t.ScrollerThrowEvent=e,egret.registerClass(e,"eui.ScrollerThrowEvent")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(e,i,n){t.call(this,e,i,n)}__extends(e,t);var i=(__define,e);i.prototype;return e.dispatchUIEvent=function(t,i,n,s){if(!t.hasEventListener(i))return!0;var r=egret.Event.create(e,i,n,s),a=t.dispatchEvent(r);return egret.Event.release(r),a},e.CREATION_COMPLETE="creationComplete",e.CHANGE_END="changeEnd",e.CHANGE_START="changeStart",e.CLOSING="closing",e.MOVE="move",e}(egret.Event);t.UIEvent=e,egret.registerClass(e,"eui.UIEvent")}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e="eui.State",i="eui.AddItems",n="eui.SetProperty",s="eui.SetStateProperty",r="eui.Binding.$bindProperties",a=function(){function t(){this.indent=0}var e=(__define,t),i=e.prototype;return i.toCode=function(){return""},i.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;t>i;i++)e+=" ";return e},t}();t.CodeBase=a,egret.registerClass(a,"eui.sys.CodeBase");var o=function(t){function e(){t.apply(this,arguments),this.className="",this.superClass="",this.innerClassBlock=[],this.variableBlock=[],this.functionBlock=[]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},n.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},n.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;i>n;n++){var s=e[n];if(s.name==t)return s}return null},n.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},n.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;i>n;n++){var s=e[n];if(s.name==t)return s}return null},n.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),s=e+"(function (";s+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var r=this.innerClassBlock,a=r.length,o=0;a>o;o++){var h=r[o];h.indent=t+1,s+=i+"var "+h.className+" = "+h.toCode()+"\n\n"}s+=i+"function "+this.className+"() {\n",this.superClass&&(s+=n+"_super.call(this);\n");var l=this.variableBlock;for(a=l.length,o=0;a>o;o++){var u=l[o];u.defaultValue&&(s+=n+u.toCode()+"\n")}if(this.constructCode){var d=this.constructCode.toCode().split("\n");for(a=d.length,o=0;a>o;o++){var c=d[o];s+=n+c+"\n"}}s+=i+"}\n",s+=i+"var _proto = "+this.className+".prototype;\n\n";var p=this.functionBlock;for(a=p.length,o=0;a>o;o++){var v=p[o];v.indent=t+1,s+=v.toCode()+"\n"}return s+=i+"return "+this.className+";\n"+e,s+=this.superClass?"})("+this.superClass+");":"})();"},e}(a);t.EXClass=o,egret.registerClass(o,"eui.sys.EXClass");var h=function(t){function e(){t.apply(this,arguments),this.lines=[]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},n.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},n.addReturn=function(t){this.addCodeLine("return "+t+";")},n.addEmptyLine=function(){this.addCodeLine("")},n.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},n.startElse=function(){this.addCodeLine("else"),this.startBlock()},n.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},n.startBlock=function(){this.addCodeLine("{"),this.indent++},n.endBlock=function(){this.indent--,this.addCodeLine("}")},n.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},n.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},n.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},n.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},n.concat=function(t){this.lines=this.lines.concat(t.lines)},n.toCode=function(){return this.lines.join("\n")},e}(a);t.EXCodeBlock=h,egret.registerClass(h,"eui.sys.EXCodeBlock");var l=function(t){function e(){t.apply(this,arguments),this.codeBlock=null,this.isGet=!1,this.name=""}__extends(e,t);var i=(__define,e),n=i.prototype;return n.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var s=this.codeBlock.toCode().split("\n"),r=s.length,a=0;r>a;a++){var o=s[a];n+=t+o+"\n"}return n+=this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":e+"};"},e}(a);t.EXFunction=l,egret.registerClass(l,"eui.sys.EXFunction");var u=function(t){function e(e,i){t.call(this),this.indent=2,this.name=e,this.defaultValue=i}__extends(e,t);var i=(__define,e),n=i.prototype;return n.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},e}(a);t.EXVariable=u,egret.registerClass(u,"eui.sys.EXVariable");var d=function(t){function i(e,i){t.call(this),this.name="",this.stateGroups=[],this.addItems=[],this.setProperty=[],this.name=e,i&&(this.stateGroups=i)}__extends(i,t);var n=(__define,i),s=n.prototype;return s.addOverride=function(t){t instanceof c?this.addItems.push(t):this.setProperty.push(t)},s.toCode=function(){for(var t=this.getIndent(1),i="new "+e+' ("'+this.name+'",\n'+t+"[\n",n=0,s=!0,r=this.addItems.concat(this.setProperty);n<r.length;){s?s=!1:i+=",\n";for(var a=r[n],o=a.toCode().split("\n"),h=o.length,l=0;h>l;l++){var u=o[l];o[l]=t+t+u}i+=o.join("\n"),n++}return i+="\n"+t+"])"},i}(a);t.EXState=d,egret.registerClass(d,"eui.sys.EXState");var c=function(t){function e(e,i,n,s){t.call(this),this.target=e,this.property=i,this.position=n,this.relativeTo=s}__extends(e,t);var n=(__define,e),s=n.prototype;return s.toCode=function(){var t="new "+i+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return t},e}(a);t.EXAddItems=c,egret.registerClass(c,"eui.sys.EXAddItems");var p=function(t){function e(e,i,n){t.call(this),this.target=e,this.name=i,this.value=n}__extends(e,t);var i=(__define,e),s=i.prototype;return s.toCode=function(){return"new "+n+'("'+this.target+'","'+this.name+'",'+this.value+")"},e}(a);t.EXSetProperty=p,egret.registerClass(p,"eui.sys.EXSetProperty");var v=function(t){function e(e,i,n,s){t.call(this),e=e?"this."+e:"this",this.target=e,this.property=i,this.templates=n,this.chainIndex=s}__extends(e,t);var i=(__define,e),n=i.prototype;return n.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return"new "+s+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(a);t.EXSetStateProperty=v,egret.registerClass(v,"eui.sys.EXSetStateProperty");var f=function(t){function e(e,i,n,s){t.call(this),this.target=e,this.property=i,this.templates=n,this.chainIndex=s}__extends(e,t);var i=(__define,e),n=i.prototype;return n.toCode=function(){var t=this.templates.join(","),e=this.chainIndex.join(",");return r+"(this, ["+t+"],["+e+"],"+this.target+',"'+this.property+'")'},e}(a);t.EXBinding=f,egret.registerClass(f,"eui.sys.EXBinding")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(eui){var sys;!function(sys){function getRepeatedIds(t){var e=[];return this.repeatedIdMap={},this.getIds(t,e),e}function getIds(t,e){if(t.namespace!=sys.NS_W&&t.attributes.id){var i=t.attributes.id;this.repeatedIdMap[i]?e.push(toXMLString(t)):this.repeatedIdMap[i]=!0}var n=t.children;if(n)for(var s=n.length,r=0;s>r;r++){var a=n[r];this.isInnerClass(a)||this.getIds(a,e)}}function toXMLString(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),s=n.length,r=0;s>r;r++){var a=n[r],o=i[a];("id"!=a||"__"!=o.substring(0,2))&&(e+=" "+a+'="'+o+'"')}return e+=0==t.children.length?"/>":">"}function checkDeclarations(t,e){if(t){var i=t.children;if(i)for(var n=i.length,s=0;n>s;s++){var r=i[s];1==r.nodeType&&(r.attributes.includeIn&&e.push(toXMLString(r)),r.attributes.excludeFrom&&e.push(toXMLString(r)),checkDeclarations(r,e))}}}function getPropertyStr(t){var e=toXMLString(t.parent),i=toXMLString(t).substring(5);return e+"\n        "+i}var exmlParserPool=[],parsedClasses={},innerClassCount=1,HOST_COMPONENT="hostComponent",SKIN_CLASS="eui.Skin",DECLARATIONS="Declarations",RECTANGLE="egret.Rectangle",TYPE_CLASS="Class",TYPE_ARRAY="Array",TYPE_STATE="State[]",SKIN_NAME="skinName",ELEMENTS_CONTENT="elementsContent",basicTypes=[TYPE_ARRAY,"boolean","string","number"],wingKeys=["id","locked","includeIn","excludeFrom"],htmlEntities=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],jsKeyWords=["null","NaN","undefined","true","false"],EXMLParser=function(){function EXMLParser(){this.delayAssignmentDic={}
}var d=__define,c=EXMLParser,p=c.prototype;return p.$parseCode=function(codeText,classStr){var className=classStr?classStr:"$exmlClass"+innerClassCount++,clazz=eval(codeText),hasClass=!0;if(hasClass&&clazz){egret.registerClass(clazz,className);for(var paths=className.split("."),length=paths.length,definition=__global,i=0;length-1>i;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length-1]]||(definition[paths[length-1]]=clazz)}return clazz},p.parse=function(text){var xmlData,xmlData=egret.XML.parse(text),hasClass=!1,className="";xmlData.attributes["class"]?(className=xmlData.attributes["class"],delete xmlData.attributes["class"],hasClass=!!className):className="$exmlClass"+innerClassCount++;var exClass=this.parseClass(xmlData,className),code=exClass.toCode(),clazz,clazz=eval(code);if(hasClass&&clazz){egret.registerClass(clazz,className);for(var paths=className.split("."),length=paths.length,definition=__global,i=0;length-1>i;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length-1]]||(definition[paths[length-1]]=clazz)}return clazz},p.parseClass=function(t,e){sys.exmlConfig||(sys.exmlConfig=new sys.EXMLConfig),this.currentXML=t,this.currentClassName=e,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new sys.EXClass,this.stateIds=[];var i=e.lastIndexOf(".");-1!=i?this.currentClass.className=e.substring(i+1):this.currentClass.className=e,this.startCompile();var n=this.currentClass;return this.currentClass=null,n},p.startCompile=function(){var t=this.getClassNameOfNode(this.currentXML);this.isSkinClass=t==SKIN_CLASS,this.currentClass.superClass=t,this.getStateNames();var e=this.currentXML.children;if(e)for(var i=e.length,n=0;i>n;n++){var s=e[n];if(1===s.nodeType&&s.namespace==sys.NS_W&&s.localName==DECLARATIONS){this.declarations=s;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},p.addIds=function(t){if(t)for(var e=t.length,i=0;e>i;i++){var n=t[i];if(1==n.nodeType&&n.namespace&&!this.isInnerClass(n))if(this.addIds(n.children),n.namespace!=sys.NS_W&&n.localName){if(this.isProperty(n)){var s=n.localName,r=s.indexOf("."),a=n.children;if(-1==r||!a||0==a.length)continue;var o=a[0];this.stateIds.push(o.attributes.id)}else if(1===n.nodeType){var h=n.attributes.id;h?(h.indexOf(" ")>-1&&egret.$warn(2022,h),-1==this.skinParts.indexOf(h)&&this.skinParts.push(h),this.createVarForNode(n),this.isStateNode(n)&&this.stateIds.push(h)):(this.createIdForNode(n),this.isStateNode(n)&&this.stateIds.push(n.attributes.id))}}else;}},p.isInnerClass=function(t){if(t.hasOwnProperty("isInnerClass"))return t.isInnerClass;var e="Skin"==t.localName&&t.namespace==sys.NS_S;if(!e)if(this.isProperty(t))e=!1;else{var i=t.parent;if(this.isProperty(i)){var n=i.localName,s=n.indexOf(".");if(-1!=s){n.substring(s+1);n=n.substring(0,s)}i=i.parent}else n=sys.exmlConfig.getDefaultPropById(i.localName,i.namespace);var r=sys.exmlConfig.getClassNameById(i.localName,i.namespace);e=sys.exmlConfig.getPropertyType(n,r)==TYPE_CLASS}return t.isInnerClass=e,e},p.containsState=function(t){var e=t.attributes;if(e.includeIn||e.excludeFrom)return!0;for(var i=Object.keys(e),n=i.length,s=0;n>s;s++){var r=i[s];if(-1!=r.indexOf("."))return!0}return!1},p.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},p.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},p.createVarForNode=function(t){var e=this.getClassNameOfNode(t);""!=e&&(this.currentClass.getVariableByName(t.attributes.id)||this.currentClass.addVariable(new sys.EXVariable(t.attributes.id)))},p.createFuncForNode=function(t){var e=t.localName,i=this.isBasicTypeData(e);if(i)return this.createBasicTypeForNode(t);var n=this.getClassNameOfNode(t),s=new sys.EXFunction,r="_i",a=t.attributes.id;s.name=a+r,this.currentClass.addFunction(s);var o=new sys.EXCodeBlock;s.codeBlock=o;var h="t";"Object"==e?o.addVar(h,"{}"):o.addVar(h,"new "+n+"()");var l=!!this.currentClass.getVariableByName(a);l&&o.addAssignment("this."+a,h),this.addAttributesToCodeBlock(o,h,t),this.initlizeChildNode(t,o,h);var u=this.delayAssignmentDic[a];if(u)for(var d=u.length,c=0;d>c;c++){var p=u[c];o.concat(p)}return o.addReturn(h),"this."+s.name+"()"},p.isBasicTypeData=function(t){return-1!=basicTypes.indexOf(t)},p.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),s=t.children,r="";if(s&&s.length>0){var a=s[0];3==a.nodeType&&(r=a.text.trim())}switch(e){case TYPE_ARRAY:var o=[];if(s)for(var h=s.length,l=0;h>l;l++){var u=s[l];1==u.nodeType&&o.push(this.createFuncForNode(u))}i="["+o.join(",")+"]";break;case"boolean":i="false"!=r&&r?"true":"false";break;case"number":i=r,-1!=i.indexOf("%")&&(i=i.substring(0,i.length-1));break;case"string":i=this.formatString(r)}return n&&(n.defaultValue=i),i},p.addAttributesToCodeBlock=function(t,e,i){var n,s,r=i.attributes,a=Object.keys(r);a.sort();for(var o=a.length,h=0;o>h;h++)if(n=a[h],this.isNormalKey(n)&&(s=r[n],n=this.formatKey(n,s),s=this.formatValue(n,s,i))){if(this.currentClass.getVariableByName(s)){var l="this.",u=r.id,d=l+u+" = t;";this.currentClass.getVariableByName(u)||this.createVarForNode(i),t.containsCodeLine(d)||t.addCodeLineAt(d,1);var c=new sys.EXCodeBlock;"this"==e?c.addAssignment(e,l+s,n):(c.startIf(l+u),c.addAssignment(l+u,l+s,n),c.endBlock()),this.delayAssignmentDic[s]||(this.delayAssignmentDic[s]=[]),this.delayAssignmentDic[s].push(c),s=l+s}t.addAssignment(e,s,n)}},p.initlizeChildNode=function(t,e,i){var n=t.children;if(n&&0!=n.length){for(var s=sys.exmlConfig.getClassNameById(t.localName,t.namespace),r=[],a=n.length,o=[],h=0;a>h;h++){var l=n[h];if(1==l.nodeType&&l.namespace!=sys.NS_W)if(this.isInnerClass(l)){if("Skin"==l.localName){var u=this.parseInnerClass(l),d=sys.exmlConfig.getPropertyType(SKIN_NAME,s);d?e.addAssignment(i,u,SKIN_NAME):egret.$error(2005,this.currentClassName,SKIN_NAME,getPropertyStr(l))}}else{var c=l.localName;if(this.isProperty(l)){if(!this.isNormalKey(c))continue;var d=sys.exmlConfig.getPropertyType(l.localName,s);if(!d)continue;if(!l.children||0==l.children.length)continue;var p;this.addChildrenToProp(l.children,d,c,e,i,p,o,t)}else r.push(l)}}if(0!=r.length){var p,v=sys.exmlConfig.getDefaultPropById(t.localName,t.namespace),f=sys.exmlConfig.getPropertyType(v,s);v&&f&&this.addChildrenToProp(r,f,v,e,i,p,o,t)}}},p.parseInnerClass=function(t){var e=exmlParserPool.pop();e||(e=new EXMLParser);var i=this.currentClass.className+"$"+t.localName+innerClassCount++,n=e.parseClass(t,i);return this.currentClass.addInnerClass(n),exmlParserPool.push(e),i},p.addChildrenToProp=function(t,e,i,n,s,r,a,o){var h="",l=t.length;if(l>1){if(e!=TYPE_ARRAY)return;for(var u=[],d=0;l>d;d++){var c=t[d];if(1==c.nodeType){h=this.createFuncForNode(c);var p=this.getClassNameOfNode(c);this.isStateNode(c)||u.push(h)}}h="["+u.join(",")+"]"}else{var v=t[0];if(e==TYPE_ARRAY)if(v.localName==TYPE_ARRAY){if(u=[],v.children)for(var f=v.children.length,g=0;f>g;g++)c=v.children[g],1==c.nodeType&&(h=this.createFuncForNode(c),p=this.getClassNameOfNode(c),this.isStateNode(c)||u.push(h));h="["+u.join(",")+"]"}else{h=this.createFuncForNode(v);var p=this.getClassNameOfNode(v);h=this.isStateNode(v)?"[]":"["+h+"]"}else if(1==v.nodeType)if(e==TYPE_CLASS){if(l>1)return;h=this.parseInnerClass(t[0])}else{this.getClassNameOfNode(v);h=this.createFuncForNode(v)}else h=this.formatValue(i,v.text,o)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==a.indexOf(i)&&a.push(i),n.addAssignment(s,h,i))},p.isProperty=function(t){if(t.hasOwnProperty("isProperty"))return t.isProperty;var e,i=t.localName;if(i&&1===t.nodeType&&t.parent&&!this.isBasicTypeData(i)){var n=t.parent,s=i.indexOf(".");-1!=s&&(i=i.substr(0,s));var r=sys.exmlConfig.getClassNameById(n.localName,n.namespace);e=!!sys.exmlConfig.getPropertyType(i,r)}else e=!1;return t.isProperty=e,e},p.isNormalKey=function(t){return t&&-1==t.indexOf(".")&&-1==wingKeys.indexOf(t)?!0:!1},p.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},p.formatValue=function(t,e,i){e||(e="");var n=e;e=e.trim();var s=this.getClassNameOfNode(i),r=sys.exmlConfig.getPropertyType(t,s),a=this.formatBinding(t,e,i);if(a){this.checkIdForState(i);var o="this";i!==this.currentXML&&(o+="."+i.attributes.id),this.bindings.push(new sys.EXBinding(o,t,a.templates,a.chainIndex)),e=""}else if(r==RECTANGLE){e="new "+RECTANGLE+"("+e+")"}else{switch(r){case TYPE_CLASS:t==SKIN_NAME&&(e=this.formatString(n));break;case"number":0==e.indexOf("#")?e="0x"+e.substring(1):-1!=e.indexOf("%")&&(e=parseFloat(e.substr(0,e.length-1)).toString());break;case"boolean":e="false"!=e&&e?"true":"false";break;case"string":case"any":e=this.formatString(n)}}return e},p.formatString=function(t){return t=this.unescapeHTMLEntity(t),t=t.split("\n").join("\\n"),t=t.split("\r").join("\\n"),t=t.split('"').join('\\"'),t='"'+t+'"'},p.formatBinding=function(t,e,i){if(!e)return null;if(e=e.trim(),"{"!=e.charAt(0)||"}"!=e.charAt(e.length-1))return null;e=e.substring(1,e.length-1).trim();for(var n=-1==e.indexOf("+")?[e]:this.parseTemplates(e),s=[],r=n.length,a=0;r>a;a++){var o=n[a].trim();if(o){var h=o.charAt(0);if(!("'"==h||'"'==h||h>="0"&&"9">=h||-1==o.indexOf(".")&&-1!=jsKeyWords.indexOf(o))){0==o.indexOf("this.")&&(o=o.substring(5));var l=o.split(".")[0];l!=HOST_COMPONENT&&-1==this.skinParts.indexOf(l)&&(o=HOST_COMPONENT+"."+o),n[a]='"'+o+'"',s.push(a)}}else n.splice(a,1),a--,r--}return{templates:n,chainIndex:s}},p.parseTemplates=function(t){if(-1==t.indexOf("'"))return t.split("+");var e="";for(t=t.split("\\'").join("0");t.length>0;){var i=t.indexOf("'");if(-1==i){e+=t;break}e+=t.substring(0,i+1),t=t.substring(i+1),i=t.indexOf("'"),-1==i&&(i=t.length-1);var n=t.substring(0,i+1);e+=n.split("+").join("1"),t=t.substring(i+1)}t=e.split("0").join("\\'");for(var s=t.split("+"),r=s.length,a=0;r>a;a++)s[a]=s[a].split("1").join("+");return s},p.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=htmlEntities.length,i=0;e>i;i++){var n=htmlEntities[i],s=n[0],r=n[1];t=t.split(r).join(s)}return t},p.createConstructFunc=function(){var t=new sys.EXCodeBlock;t.addEmptyLine();var e="this";if(this.addAttributesToCodeBlock(t,e,this.currentXML),this.declarations){var i=this.declarations.children;if(i&&i.length>0)for(var n=i.length,s=0;n>s;s++){var r=i[s];if(1==r.nodeType){var a=this.createFuncForNode(r);a&&t.addCodeLine(a+";")}}}this.initlizeChildNode(this.currentXML,t,e);var o,h=this.stateIds;if(h.length>0){n=h.length;for(var s=0;n>s;s++)o=h[s],t.addCodeLine("this."+o+"_i();");t.addEmptyLine()}var l=this.skinParts,u="[]";if(n=l.length,n>0){for(s=0;n>s;s++)l[s]='"'+l[s]+'"';u="["+l.join(",")+"]"}var d=new sys.EXFunction;d.name="skinParts",d.isGet=!0;var c=new sys.EXCodeBlock;c.addReturn(u),d.codeBlock=c,this.currentClass.addFunction(d),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var p,v=this.currentXML,f=(this.getClassNameOfNode(v),v.attributes),g=Object.keys(f),m=g.length,y=0;m>y;y++){var C=g[y],$=f[C],E=C.indexOf(".");if(-1!=E){var _=C.substring(0,E);_=this.formatKey(_,$);var T=this.formatValue(_,$,v);if(!T)continue;var x=C.substr(E+1);p=this.getStateByName(x,v);var I=p.length;if(I>0)for(s=0;I>s;s++){var S=p[s];S.addOverride(new sys.EXSetProperty("",_,T))}}}var L=this.stateCode;if(n=L.length,n>0){var P=" ";t.addCodeLine("this.states = [");var N=!0;for(s=0;n>s;s++){S=L[s],N?N=!1:t.addCodeLine(P+",");for(var A=S.toCode().split("\n"),b=0;b<A.length;){var R=A[b];R&&t.addCodeLine(P+R),b++}}t.addCodeLine("];")}var B=this.bindings;if(n=B.length,n>0)for(t.addEmptyLine(),s=0;n>s;s++){var D=B[s];t.addCodeLine(D.toCode())}this.currentClass.constructCode=t},p.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},p.getStateNames=function(){var t=this.currentXML,e=sys.exmlConfig.getClassNameById(t.localName,t.namespace),i=sys.exmlConfig.getPropertyType("states",e);if(i==TYPE_STATE){var n=t.attributes.states;n&&delete t.attributes.states;var s,r=this.stateNames,a=t.children;if(a)for(var o=a.length,h=0;o>h;h++){var l=a[h];if(1==l.nodeType&&"states"==l.localName){l.namespace=sys.NS_W,s=l.children;break}}if(s||n)if(n){var u=n.split(",");o=u.length;for(var h=0;o>h;h++){var d=u[h].trim();d&&(-1==r.indexOf(d)&&r.push(d),this.stateCode.push(new sys.EXState(d)))}}else for(o=s.length,h=0;o>h;h++){var c=s[h];if(1==c.nodeType){var p=[],v=c.attributes;if(v.stateGroups)for(var f=v.stateGroups.split(","),g=f.length,m=0;g>m;m++){var y=f[m].trim();y&&(-1==r.indexOf(y)&&r.push(y),p.push(y))}d=v.name,-1==r.indexOf(d)&&r.push(d),this.stateCode.push(new sys.EXState(d,p))}}}},p.createStates=function(t){var e=t.children;if(e)for(var i=e.length,n=0;i>n;n++){var s=e[n];if(1==s.nodeType&&!this.isInnerClass(s)&&(this.createStates(s),s.namespace!=sys.NS_W&&s.localName))if(this.isProperty(s)){var r=s.localName,a=r.indexOf("."),o=s.children;if(-1==a||!o||0==o.length)continue;var h=r.substring(a+1);r=r.substring(0,a);var l,u=this.getClassNameOfNode(t),d=(sys.exmlConfig.getPropertyType(r,u),o[0]);1==d.nodeType?(this.createFuncForNode(d),this.checkIdForState(d),l="this."+d.attributes.id):l=this.formatValue(r,d.text,t),g=this.getStateByName(h,s);var c=g.length;if(c>0)for(var p=0;c>p;p++)m=g[p],m.addOverride(new sys.EXSetProperty(t.attributes.id,r,l))}else if(this.containsState(s)){var v=s.attributes,f=v.id;this.getClassNameOfNode(s);this.checkIdForState(s);var h,g,m;if(this.isStateNode(s)){var y="",C=s.parent;C.localName==TYPE_ARRAY&&(C=C.parent),C&&C.parent&&this.isProperty(C)&&(C=C.parent),C&&C!=this.currentXML&&(y=C.attributes.id,this.checkIdForState(C));var $=this.findNearNodeId(s),E=[];if(v.includeIn)E=v.includeIn.split(",");else{for(var _=v.excludeFrom.split(","),T=_.length,p=0;T>p;p++){var x=_[p];this.getStateByName(x,s)}for(T=this.stateCode.length,p=0;T>p;p++)m=this.stateCode[p],-1==_.indexOf(m.name)&&E.push(m.name)}for(var I=E.length,S=0;I>S;S++)if(h=E[S],g=this.getStateByName(h,s),g.length>0)for(var c=g.length,p=0;c>p;p++)m=g[p],m.addOverride(new sys.EXAddItems(f,y,$.position,$.relativeTo))}for(var L=Object.keys(v),P=L.length,N=0;P>N;N++){x=L[N];var l=v[x],a=x.indexOf(".");if(-1!=a){var A=x.substring(0,a);A=this.formatKey(A,l);var b=this.formatBinding(A,l,s);if(!b){var l=this.formatValue(A,l,s);if(!l)continue}h=x.substr(a+1),g=this.getStateByName(h,s);var c=g.length;if(c>0)for(var p=0;c>p;p++)m=g[p],b?m.addOverride(new sys.EXSetStateProperty(f,A,b.templates,b.chainIndex)):m.addOverride(new sys.EXSetProperty(f,A,l))}}}}},p.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var s="this."+e+" = t;",r=n.codeBlock;r&&(r.containsCodeLine(s)||r.addCodeLineAt(s,1))}}},p.getStateByName=function(t,e){for(var i=[],n=this.stateCode,s=n.length,r=0;s>r;r++){var a=n[r];if(a.name==t)-1==i.indexOf(a)&&i.push(a);else if(a.stateGroups.length>0){for(var o=!1,h=a.stateGroups.length,l=0;h>l;l++){var u=a.stateGroups[l];if(u==t){o=!0;break}}o&&-1==i.indexOf(a)&&i.push(a)}}return i},p.findNearNodeId=function(t){for(var e,i,n,s=t.parent,r="",a=-1,o=!1,h=s.children,l=h.length,u=0;l>u;u++){var d=h[u];this.isProperty(d)||(d==t?(o=!0,a=u):!o||n||this.isStateNode(d)||(n=d),o||this.isStateNode(d)||(i=d))}return 0==a?(e=0,{position:e,relativeTo:r}):a==l-1?(e=1,{position:e,relativeTo:r}):n&&(e=2,r=n.attributes.id)?(this.checkIdForState(n),{position:e,relativeTo:r}):{position:1,relativeTo:r}},p.getClassNameOfNode=function(t){var e=sys.exmlConfig.getClassNameById(t.localName,t.namespace);return e},EXMLParser}();sys.EXMLParser=EXMLParser,egret.registerClass(EXMLParser,"eui.sys.EXMLParser")}(sys=eui.sys||(eui.sys={}))}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){var e=egret.getDefinitionByName(t);return e?e.prototype:null}function n(t){if(!t)return null;var e,e=new t;return e}t.NS_S="http://ns.egret.com/eui",t.NS_W="http://ns.egret.com/wing";var s=["Point","Matrix","Rectangle"],r=["Array","boolean","string","number"],a="eui.",o=0,h={},l=function(){function l(){}var u=(__define,l),d=u.prototype;return d.$describe=function(t){function i(){}if(!t)return null;var s=Object.getPrototypeOf(t);if(!s)return null;var a;if(s.hasOwnProperty("__hashCode__")&&(a=h[s.__hashCode__]))return a;var l=Object.getPrototypeOf(s);if(!l)return null;var u=n(l.constructor),d=this.$describe(u);d?(i.prototype=d,a=new i):a={};for(var c=Object.keys(s).concat(Object.keys(t)),p=c.length,v=t.__meta__,f=0;p>f;f++){var g=c[f];if("constructor"!=g&&"_"!=g.charAt(0)&&"$"!=g.charAt(0)){var m;if(v&&v[g])m=v[g];else if(e(t[g]))m="Array";else{if(m=typeof t[g],"function"==m)continue;-1==r.indexOf(m)&&(m="any")}a[g]=m}}return Object.getPrototypeOf(l)&&(s.__hashCode__=o++,h[s.__hashCode__]=a),a},d.getClassNameById=function(e,n){if(n==t.NS_S){if("Object"==e)return e;if(-1!=s.indexOf(e))return"egret."+e}var o="";return-1!=r.indexOf(e)?e:(n==t.NS_W||(o=n&&n!=t.NS_S?n.substring(0,n.length-1)+e:a+e),i(o)||(o=""),o)},d.getDefaultPropById=function(t,e){var n,s=this.getClassNameById(t,e),r=i(s);return r&&(n=r.__defaultProperty__),n?n:""},d.getPropertyType=function(t,e){if("Object"==e)return"any";var s="",r=i(e);if(r){if(!r.hasOwnProperty("__hashCode__")){var a=egret.getDefinitionByName(e),o=n(a);if(!o)return s;this.$describe(o)}var l=h[r.__hashCode__];l&&(s=l[t])}return s},l}();t.EXMLConfig=l,egret.registerClass(l,"eui.sys.EXMLConfig")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var EXML;!function(t){function e(t){return h.parse(t)}function i(t,e,i,n){if(void 0===n&&(n=!1),n&&t in u)return void(e&&e.call(i,u[t],t));var s=l[t];return s?void s.push([e,i]):(l[t]=[[e,i]],void o(t,a))}function n(t,e,i,n){if(void 0===n&&(n=!1),!t||0==t.length)return void(e&&e.call(i,[],t));var r=[];t.forEach(function(a){if(n&&a in u)return r[a]="",void r.push(a);var h=function(n,a){r[n]=a,r.push(n),r.length==t.length&&s(t,r,e,i)};o(a,h)})}function s(t,e,i,n){var s=[];t.forEach(function(t,i){if(t in u&&!e[t])return void(s[i]=u[t]);var n=e[t],r=a(t,n);s[i]=r}),i&&i.call(n,s,t)}function r(t,e,i){if(e)var n=h.$parseCode(e,i);if(t){u[t]=n;var s=l[t];delete l[t];for(var r=s?s.length:0,a=0;r>a;a++){var o=s[a];o[0]&&o[1]&&o[0].call(o[1],n,t)}}return n}function a(t,i){if(i)var n=e(i);if(t){u[t]=n;var s=l[t];delete l[t];for(var r=s?s.length:0,a=0;r>a;a++){var o=s[a];o[0]&&o[1]&&o[0].call(o[1],n,t)}}return n}function o(e,i){var n=e;-1==e.indexOf("://")&&(n=d+e);var s=function(t){t||(t=""),i(e,t)},r=t.$stage?t.$stage.getImplementation("eui.IThemeAdapter"):null;r||(r=new eui.DefaultThemeAdapter),r.getTheme(n,s,s,this)}var h=new eui.sys.EXMLParser,l={},u={},d="";Object.defineProperty(t,"prefixURL",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),t.parse=e,t.load=i,t.$loadAll=n,t.$parseURLContentAsJs=r,t.$parseURLContent=a}(EXML||(EXML={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var e=egret.$locale_strings.en_US;e[2001]="EXML parsing error {0}: EXML file can't be found ",e[2002]="EXML parsing error : invalid XML file:\n{0}",e[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",e[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",e[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",e[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",e[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",e[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",e[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",e[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",e[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",e[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",e[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",e[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",e[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",e[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",e[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",e[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",e[2019]="EXML parsing error {0}: the containers child item must be visible nodes: {1}",e[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",e[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[2022]="EXML parsing error: there can be no Spaces in the id `{0}`",e[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",e[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",e[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",e[2104]="EXML parsing warnning, Instantiate class {0} errorthe parameters of its constructor method must be empty.",e[2201]="BasicLayout doesn't support virtualization.",e[2202]="parse skinName errorthe parsing result of skinName must be a instance of eui.Skin.",e[2203]="Could not find the skin class '{0}'",e[2301]="parse source failedcould not find asset from URL{0} ."}(eui||(eui={}));var eui;!function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var e=egret.$locale_strings.zh_CN;e[2001]="EXML {0}: EXML",e[2002]="EXML: XML:\n{0}",e[2003]="EXML {0}: \n{1}",e[2004]="EXML {0}: id\n{1}",e[2005]="EXML {0}: '{1}':\n{2}",e[2006]="EXML {0}: :'{1}'\n{2}",e[2007]="EXML {0}:  UIComponent includeInexcludeFrom\n{1}",e[2008]="EXML {0}: '{1}':'{2}'\n{3}",e[2009]="EXML {0}: {}ID\n{1}",e[2010]="EXML {0}: :'{1}'ID: '{2}'\n{3}",e[2011]="EXML {0}: :'{1}'\n{2}",e[2012]="EXML {0}: \n{1}",e[2013]="EXML {0}: Array\n{1}",e[2014]="EXML {0}: \n{1}",e[2015]="EXML {0}: :{1}\n{2}",e[2016]="EXML {0}: 'scale9Grid':{1}",e[2017]="EXML {0}: :{1}",e[2018]="EXML {0}: 'skinName':{1}",e[2019]="EXML {0}: :{1}",e[2020]="EXML {0}: w:DeclarationsincludeInexcludeFrom\n{1}",e[2021]="{0}  : {1} : {2}",e[2022]="EXML: id `{0}` ",e[2101]="EXML: EXML class : {0} \n{1}",e[2102]="EXML {0}: \n{1}",e[2103]="EXML {0}: '{1}'\n{2}",e[2104]="EXML{0} EXMLEXML",e[2201]="BasicLayout ",e[2202]=" skinName  eui.Skin ",e[2203]=" '{0}'",e[2301]="URL{0} "}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.call(this),this.$target=null,this.$useVirtualLayout=!1,this.$typicalWidth=71,this.$typicalHeight=22}__extends(e,t);var i=__define,n=e,s=n.prototype;return i(s,"target",function(){return this.$target},function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())}),i(s,"useVirtualLayout",function(){return this.$useVirtualLayout},function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())}),s.setTypicalSize=function(t,e){t=+t||71,e=+e||22,(t!==this.$typicalWidth||e!==this.$typicalHeight)&&(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},s.scrollPositionChanged=function(){},s.clearVirtualLayoutCache=function(){},s.elementAdded=function(t){},s.elementRemoved=function(t){},s.getElementIndicesInView=function(){return null},s.measure=function(){},s.updateDisplayList=function(t,e){},e}(egret.EventDispatcher);t.LayoutBase=e,egret.registerClass(e,"eui.LayoutBase")}(eui||(eui={}));var eui;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var n=(__define,i),s=n.prototype;return s.measure=function(){e.prototype.measure.call(this),t.sys.measure(this.$target)},s.updateDisplayList=function(i,n){e.prototype.updateDisplayList.call(this,i,n);var s=this.$target,r=t.sys.updateDisplayList(s,i,n);s.setContentSize(Math.ceil(r.x),Math.ceil(r.y))},i}(t.LayoutBase);t.BasicLayout=e,egret.registerClass(e,"eui.BasicLayout")}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t,e){if(!t||"number"==typeof t)return t;var i=t,n=i.indexOf("%");if(-1==n)return+i;var s=+i.substring(0,n);return.01*s*e}function i(t){if(t){for(var e=0,i=0,n=egret.$TempRectangle,r=t.numChildren,a=0;r>a;a++){var o=t.getChildAt(a);if(egret.is(o,s)&&o.$includeInLayout){var h,l,u=o.$UIComponent,d=+u[4],c=+u[5],p=+u[0],v=+u[1],f=+u[2],g=+u[3];o.getPreferredBounds(n),isNaN(p)||isNaN(v)?isNaN(d)?isNaN(p)&&isNaN(v)?h=n.x:(h=isNaN(p)?0:p,h+=isNaN(v)?0:v):h=2*Math.abs(d):h=p+v,isNaN(f)||isNaN(g)?isNaN(c)?isNaN(f)&&isNaN(g)?l=n.y:(l=isNaN(f)?0:f,l+=isNaN(g)?0:g):l=2*Math.abs(c):l=f+g;var m=n.width,y=n.height;e=Math.ceil(Math.max(e,h+m)),i=Math.ceil(Math.max(i,l+y))}}t.setMeasuredSize(e,i)}}function n(t,i,n){if(t){for(var r=t.numChildren,a=0,o=0,h=egret.$TempRectangle,l=0;r>l;l++){var u=t.getChildAt(l);if(egret.is(u,s)&&u.$includeInLayout){var d=u.$UIComponent,c=e(d[4],.5*i),p=e(d[5],.5*n),v=e(d[0],i),f=e(d[1],i),g=e(d[2],n),m=e(d[3],n),y=d[6],C=d[7],$=0/0,E=0/0;isNaN(v)||isNaN(f)?isNaN(y)||($=Math.round(i*Math.min(.01*y,1))):$=i-f-v,isNaN(g)||isNaN(m)?isNaN(C)||(E=Math.round(n*Math.min(.01*C,1))):E=n-m-g,u.setLayoutBoundsSize($,E),u.getLayoutBounds(h);var _=h.width,T=h.height,x=0/0,I=0/0;x=isNaN(c)?isNaN(v)?isNaN(f)?h.x:i-_-f:v:Math.round((i-_)/2+c),I=isNaN(p)?isNaN(g)?isNaN(m)?h.y:n-T-m:g:Math.round((n-T)/2+p),u.setLayoutBoundsPosition(x,I),a=Math.max(a,x+_),o=Math.max(o,I+T)}}return egret.$TempPoint.setTo(a,o)}}var s="eui.UIComponent";t.measure=i,t.updateDisplayList=n}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,egret.registerClass(e,"eui.ColumnAlign")}(eui||(eui={}));var eui;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.$horizontalAlign="left",this.$verticalAlign="top",this.$gap=6,this.$paddingLeft=0,this.$paddingRight=0,this.$paddingTop=0,this.$paddingBottom=0,this.elementSizeTable=[],this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1,this.maxElementSize=0}__extends(e,t);var i=__define,n=e,s=n.prototype;return i(s,"horizontalAlign",function(){return this.$horizontalAlign},function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(s,"verticalAlign",function(){return this.$verticalAlign},function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(s,"gap",function(){return this.$gap},function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())}),i(s,"paddingLeft",function(){return this.$paddingLeft},function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())}),i(s,"paddingRight",function(){return this.$paddingRight},function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())}),i(s,"paddingTop",function(){return this.$paddingTop},function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())}),i(s,"paddingBottom",function(){return this.$paddingBottom},function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())}),s.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},s.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},s.measureReal=function(){},s.measureVirtual=function(){},s.updateDisplayList=function(t,e){var i=this.$target;if(i)return 0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e))},s.getStartPosition=function(t){return 0},s.getElementSize=function(t){return 0},s.getElementTotalSize=function(){return 0},s.elementRemoved=function(e){this.$useVirtualLayout&&(t.prototype.elementRemoved.call(this,e),this.elementSizeTable.splice(e,1))},s.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},s.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,s=this.getStartPosition(n),r=this.getElementSize(n);return t>=s&&t<s+r+this.$gap?n:e==i?-1:s>t?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},s.scrollPositionChanged=function(){if(t.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout){var e=this.getIndexInView();e&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())}},s.getIndexInView=function(){return!1},s.updateDisplayListVirtual=function(t,e){},s.updateDisplayListReal=function(t,e){},s.flexChildrenProportionally=function(t,e,i,n){var s,r=n.length;do{s=!0;var a=e-t*i/100;a>0?e-=a:a=0;for(var o=e/i,h=0;r>h;h++){var l=n[h],u=l.percent*o;if(u<l.min){var d=l.min;l.size=d,n[h]=n[--r],n[r]=l,i-=l.percent,a>=d?a-=d:(e-=d-a,a=0),s=!1;break}if(u>l.max){var c=l.max;l.size=c,n[h]=n[--r],n[r]=l,i-=l.percent,a>=c?a-=c:(e-=c-a,a=0),s=!1;break}l.size=u}}while(!s)},e}(t.LayoutBase);t.LinearLayoutBase=e,egret.registerClass(e,"eui.LinearLayoutBase")}(eui||(eui={}));var eui;!function(t){var e;!function(t){var e=function(){function t(){this.layoutElement=null,this.size=0,this.percent=0/0,this.min=0/0,this.max=0/0}var e=(__define,t);e.prototype;return t}();t.ChildInfo=e,egret.registerClass(e,"eui.sys.ChildInfo")}(e=t.sys||(t.sys={}))}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){i.apply(this,arguments)}__extends(n,i);var s=(__define,n),r=s.prototype;return r.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,s=0,r=0,a=egret.$TempRectangle,o=0;i>o;o++){var h=t.getElementAt(o);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(a),s+=a.width,r=Math.max(r,a.height)):n--}s+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(s+l,r+u)},r.measureVirtual=function(){for(var t=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),s=Math.max(this.maxElementSize,this.$typicalHeight),r=egret.$TempRectangle,a=this.endIndex,o=this.elementSizeTable,h=this.startIndex;a>h;h++){var l=t.getElementAt(h);
egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(r),n+=r.width,n-=isNaN(o[h])?i:o[h],s=Math.max(s,r.height))}var u=this.$paddingLeft+this.$paddingRight,d=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+u,s+d)},r.updateDisplayListReal=function(i,n){var s=this.$target,r=this.$paddingLeft,a=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-r-a),d=Math.max(0,n-o-h),c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY,p=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;p||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?v=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(v=1));var f,g,m,y=s.numElements,C=y,$=r,E=o,_=0,T=0,x=[],I=u,S=this.maxElementSize,L=egret.$TempRectangle;for(f=0;y>f;f++){var g=s.getElementAt(f);if(egret.is(g,e)&&g.$includeInLayout)if(g.getPreferredBounds(L),S=Math.max(S,L.height),c)_+=L.width;else{var P=g.$UIComponent;isNaN(P[6])?I-=L.width:(T+=P[6],m=new t.sys.ChildInfo,m.layoutElement=g,m.percent=P[6],m.min=P[12],m.max=P[13],x.push(m))}else C--}I-=l*(C-1),I=I>0?I:0;var N,A=u-_-l*(C-1),b=C,R={};if(c){if(0>A){for(N=I/C,f=0;y>f;f++)g=s.getElementAt(f),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(L),L.width<=N&&(I-=L.width,b--));I=I>0?I:0}}else if(T>0){this.flexChildrenProportionally(u,I,T,x);var B=0,D=x.length;for(f=0;D>f;f++){m=x[f];var M=Math.round(m.size+B);B+=m.size-M,R[m.layoutElement.$hashCode]=M,I-=M}I=I>0?I:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?$=r+.5*I:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&($=r+I);var O=r,w=o,V=0,H=0,z=Math.ceil(d);this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(z=Math.ceil(Math.max(d,S))),B=0;var U,k;for(f=0;y>f;f++){var G=0;if(g=s.getElementAt(f),egret.is(g,e)&&g.$includeInLayout){if(g.getPreferredBounds(L),U=0/0,c?(k=0/0,A>0?k=I*L.width/_:0>A&&L.width>N&&(k=I/b),isNaN(k)||(U=Math.round(k+B),B+=k-U)):U=R[g.$hashCode],p)E=o,g.setLayoutBoundsSize(U,z),g.getLayoutBounds(L);else{var F=0/0,P=g.$UIComponent;if(!isNaN(g.percentHeight)){var W=Math.min(100,P[7]);F=Math.round(d*W*.01)}g.setLayoutBoundsSize(U,F),g.getLayoutBounds(L),G=(d-L.height)*v,G=G>0?G:0,E=o+G}g.setLayoutBoundsPosition(Math.round($),Math.round(E)),V=Math.ceil(L.width),H=Math.ceil(L.height),O=Math.max(O,$+V),w=Math.max(w,E+H),$+=V+l}}this.maxElementSize=S,s.setContentSize(O+a,w+h)},r.updateDisplayListVirtual=function(i,n){var s=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var r,a=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=s.numElements;if(-1==this.startIndex||-1==this.endIndex)return r=this.getStartPosition(u)-l+a,void s.setContentSize(r,s.contentHeight);var d=this.endIndex;s.setVirtualElementIndicesInView(this.startIndex,d);var c=this.$verticalAlign==t.JustifyAlign.JUSTIFY||this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,p=this.$verticalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;c||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?v=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(v=1));var f,g=egret.$TempRectangle,m=Math.max(0,n-o-h),y=Math.ceil(m),C=this.$typicalHeight,$=this.$typicalWidth,E=this.maxElementSize,_=Math.max(C,this.maxElementSize);if(p){for(var T=this.startIndex;d>=T;T++)f=s.getVirtualElementAt(T),egret.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(g),E=Math.max(E,g.height));y=Math.ceil(Math.max(m,E))}for(var x,I=0,S=0,L=0,P=!1,N=this.elementSizeTable,A=this.startIndex;d>=A;A++){var b=0;f=s.getVirtualElementAt(A),egret.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(g),p||(E=Math.max(E,g.height)),c?(S=o,f.setLayoutBoundsSize(0/0,y),f.getLayoutBounds(g)):(f.getLayoutBounds(g),b=(m-g.height)*v,b=b>0?b:0,S=o+b),L=Math.max(L,g.height),P||(x=isNaN(N[A])?$:N[A],x!=g.width&&(P=!0)),N[A]=g.width,I=this.getStartPosition(A),f.setLayoutBoundsPosition(Math.round(I),Math.round(S)))}L+=o+h,r=this.getStartPosition(u)-l+a,this.maxElementSize=E,s.setContentSize(r,L),(P||_<this.maxElementSize)&&s.invalidateSize()},r.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,s=this.$gap,r=this.elementSizeTable,a=0;t>a;a++){var o=r[a];isNaN(o)&&(o=i),n+=o+s}return n},r.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},r.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,s=this.elementSizeTable,r=0;n>r;r++){var a=s[r];isNaN(a)&&(a=t),i+=a+e}return i-=e},r.elementAdded=function(t){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},r.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,s=t.scrollH;if(s>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var r=t.scrollH+e[10];if(r<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(s,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(r,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||o!=this.endIndex},n}(t.LinearLayoutBase);t.HorizontalLayout=i,egret.registerClass(i,"eui.HorizontalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.JustifyAlign=e,egret.registerClass(e,"eui.JustifyAlign")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,egret.registerClass(e,"eui.RowAlign")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){i.call(this),this.explicitHorizontalGap=0/0,this._horizontalGap=6,this.explicitVerticalGap=0/0,this._verticalGap=6,this._columnCount=-1,this._requestedColumnCount=0,this._rowCount=-1,this._requestedRowCount=0,this.explicitColumnWidth=0/0,this._columnWidth=0/0,this.explicitRowHeight=0/0,this._rowHeight=0/0,this._paddingLeft=0,this._paddingRight=0,this._paddingTop=0,this._paddingBottom=0,this._horizontalAlign=t.JustifyAlign.JUSTIFY,this._verticalAlign=t.JustifyAlign.JUSTIFY,this._columnAlign=t.ColumnAlign.LEFT,this._rowAlign=t.RowAlign.TOP,this._orientation=t.TileOrientation.ROWS,this.maxElementWidth=0,this.maxElementHeight=0,this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1}__extends(n,i);var s=__define,r=n,a=r.prototype;return s(a,"horizontalGap",function(){return this._horizontalGap},function(t){t=+t,t!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())}),s(a,"verticalGap",function(){return this._verticalGap},function(t){t=+t,t!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())}),s(a,"columnCount",function(){return this._columnCount}),s(a,"requestedColumnCount",function(){return this._requestedColumnCount},function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())}),s(a,"rowCount",function(){return this._rowCount}),s(a,"requestedRowCount",function(){return this._requestedRowCount},function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())}),s(a,"columnWidth",function(){return this._columnWidth},function(t){t=+t,t!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())}),s(a,"rowHeight",function(){return this._rowHeight},function(t){t=+t,t!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())}),s(a,"paddingLeft",function(){return this._paddingLeft},function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())}),s(a,"paddingRight",function(){return this._paddingRight},function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())}),s(a,"paddingTop",function(){return this._paddingTop},function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())}),s(a,"paddingBottom",function(){return this._paddingBottom},function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())}),s(a,"horizontalAlign",function(){return this._horizontalAlign},function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())}),s(a,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())}),s(a,"columnAlign",function(){return this._columnAlign},function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())}),s(a,"rowAlign",function(){return this._rowAlign},function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())}),s(a,"orientation",function(){return this._orientation},function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())}),a.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},a.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,s=this._rowHeight,r=0,a=0,o=t.$UIComponent;this.calculateRowAndColumn(o[8],o[9]);var h=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,l=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,u=isNaN(this._horizontalGap)?0:this._horizontalGap,d=isNaN(this._verticalGap)?0:this._verticalGap;h>0&&(r=h*(this._columnWidth+u)-u),l>0&&(a=l*(this._rowHeight+d)-d);var c=this._paddingLeft+this._paddingRight,p=this._paddingTop+this._paddingBottom;t.setMeasuredSize(r+c,a+p),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=s}},a.calculateRowAndColumn=function(i,n){var s=this.$target,r=isNaN(this._horizontalGap)?0:this._horizontalGap,a=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var o=s.numElements,h=o,l=0;h>l;l++){var u=s.getElementAt(l);!u||egret.is(u,e)&&u.$includeInLayout||o--}if(0==o)return void(this._rowCount=this._columnCount=0);(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var d=this._columnWidth+r;0>=d&&(d=1);var c=this._rowHeight+a;0>=c&&(c=1);var p=this._orientation==t.TileOrientation.COLUMNS,v=!isNaN(i),f=!isNaN(n),g=this._paddingLeft,m=this._paddingRight,y=this._paddingTop,C=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,o)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,o));else if(v||f)if(!v||f&&p){var $=Math.max(0,n-y-C);this._rowCount=Math.floor(($+a)/c),this._rowCount=Math.max(1,Math.min(this._rowCount,o))}else{var E=Math.max(0,i-g-m);this._columnCount=Math.floor((E+r)/d),this._columnCount=Math.max(1,Math.min(this._columnCount,o))}else{var _=Math.sqrt(o*d*c);p?this._rowCount=Math.max(1,Math.round(_/c)):this._columnCount=Math.max(1,Math.round(_/d))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(o/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(o/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==t.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(o/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(o/this._requestedRowCount)))},a.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},a.doUpdateMaxElementSize=function(t,i){var n=this.maxElementWidth,s=this.maxElementHeight,r=egret.$TempRectangle,a=this.$target;if(-1!=t&&-1!=i)for(var o=t;i>=o;o++){var h=a.getVirtualElementAt(o);egret.is(h,e)&&h.$includeInLayout&&(h.getPreferredBounds(r),n=Math.max(n,r.width),s=Math.max(s,r.height))}this.maxElementWidth=n,this.maxElementHeight=s},a.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},a.scrollPositionChanged=function(){if(this.$useVirtualLayout){var t=this.getIndexInView();t&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList())}},a.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var e=this.$target,i=e.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=e.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var s=this.startIndex,r=this.endIndex,a=this._paddingLeft,o=this._paddingTop,h=isNaN(this._horizontalGap)?0:this._horizontalGap,l=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==t.TileOrientation.COLUMNS){var u=this._columnWidth+h;if(0>=u)return this.startIndex=0,this.endIndex=i-1,!1;var d=e.scrollH,c=d+n[10],p=Math.floor((d-a)/u);0>p&&(p=0);var v=Math.ceil((c-a)/u);0>v&&(v=0),this.startIndex=Math.min(i-1,Math.max(0,p*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,v*this._rowCount-1))}else{var f=this._rowHeight+l;if(0>=f)return this.startIndex=0,this.endIndex=i-1,!1;var g=e.scrollV,m=g+n[11],y=Math.floor((g-o)/f);0>y&&(y=0);var C=Math.ceil((m-o)/f);0>C&&(C=0),this.startIndex=Math.min(i-1,Math.max(0,y*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,C*this._columnCount-1))}return this.startIndex!=s||this.endIndex!=r},a.updateDisplayList=function(n,s){if(i.prototype.updateDisplayList.call(this,n,s),this.$target){var r=this.$target,a=this._paddingLeft,o=this._paddingRight,h=this._paddingTop,l=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,s),0==this._rowCount||0==this._columnCount)return void r.setContentSize(a+o,h+l);this.adjustForJustify(n,s),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,s),this.adjustForJustify(n,s)),-1==this.startIndex||-1==this.endIndex)return void r.setContentSize(0,0);var u=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,u);for(var d,c,p,v,f,g=this._orientation==t.TileOrientation.COLUMNS,m=this.startIndex,y=isNaN(this._horizontalGap)?0:this._horizontalGap,C=isNaN(this._verticalGap)?0:this._verticalGap,$=this._rowCount,E=this._columnCount,_=this._columnWidth,T=this._rowHeight,x=this.startIndex;u>=x;x++)d=this.$useVirtualLayout?this.target.getVirtualElementAt(x):this.target.getElementAt(x),egret.is(d,e)&&d.$includeInLayout&&(g?(v=Math.ceil((m+1)/$)-1,f=Math.ceil((m+1)%$)-1,-1==f&&(f=$-1)):(v=Math.ceil((m+1)%E)-1,-1==v&&(v=E-1),f=Math.ceil((m+1)/E)-1),c=v*(_+y)+a,p=f*(T+C)+h,this.sizeAndPositionElement(d,c,p,_,T),m++);var I=a+o,S=h+l,L=(_+y)*E-y,P=(T+C)*$-C;r.setContentSize(L+I,P+S)}},a.sizeAndPositionElement=function(e,i,n,s,r){var a=0/0,o=0/0,h=e.$UIComponent;this._horizontalAlign==t.JustifyAlign.JUSTIFY?a=s:isNaN(h[6])||(a=s*h[6]*.01),this._verticalAlign==t.JustifyAlign.JUSTIFY?o=r:isNaN(h[7])||(o=r*h[7]*.01),e.setLayoutBoundsSize(Math.round(a),Math.round(o));var l=i,u=egret.$TempRectangle;switch(e.getLayoutBounds(u),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:l+=s-u.width;break;case egret.HorizontalAlign.CENTER:l=i+(s-u.width)/2}var d=n;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:d+=r-u.height;break;case egret.VerticalAlign.MIDDLE:d+=(r-u.height)/2}e.setLayoutBoundsPosition(Math.round(l),Math.round(d))},a.adjustForJustify=function(e,i){var n=this._paddingLeft,s=this._paddingRight,r=this._paddingTop,a=this._paddingBottom,o=Math.max(0,e-n-s),h=Math.max(0,i-r-a);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var l,u=h-this._rowHeight*this._rowCount,d=o-this._columnWidth*this._columnCount;u>0&&(this._rowAlign==t.RowAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._rowCount-1),this._verticalGap=u/l):this._rowAlign==t.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(u-(this._rowCount-1)*this._verticalGap)/this._rowCount)),d>0&&(this._columnAlign==t.ColumnAlign.JUSTIFY_USING_GAP?(l=Math.max(1,this._columnCount-1),this._horizontalGap=d/l):this._columnAlign==t.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(d-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(t.LayoutBase);t.TileLayout=i,egret.registerClass(i,"eui.TileLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,egret.registerClass(e,"eui.TileOrientation")}(eui||(eui={}));var eui;!function(t){var e="eui.UIComponent",i=function(i){function n(){i.apply(this,arguments)}__extends(n,i);var s=(__define,n),r=s.prototype;return r.measureReal=function(){for(var t=this.$target,i=t.numElements,n=i,s=0,r=0,a=egret.$TempRectangle,o=0;i>o;o++){var h=t.getElementAt(o);egret.is(h,e)&&h.$includeInLayout?(h.getPreferredBounds(a),r+=a.height,s=Math.max(s,a.width)):n--}r+=(n-1)*this.$gap;var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(s+l,r+u)},r.measureVirtual=function(){for(var t=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),s=Math.max(this.maxElementSize,this.$typicalWidth),r=egret.$TempRectangle,a=this.endIndex,o=this.elementSizeTable,h=this.startIndex;a>h;h++){var l=t.getElementAt(h);egret.is(l,e)&&l.$includeInLayout&&(l.getPreferredBounds(r),n+=r.height,n-=isNaN(o[h])?i:o[h],s=Math.max(s,r.width))}var u=this.$paddingLeft+this.$paddingRight,d=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(s+u,n+d)},r.updateDisplayListReal=function(i,n){var s=this.$target,r=this.$paddingLeft,a=this.$paddingRight,o=this.$paddingTop,h=this.$paddingBottom,l=this.$gap,u=Math.max(0,i-r-a),d=Math.max(0,n-o-h),c=this.$verticalAlign==t.JustifyAlign.JUSTIFY,p=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;p||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?v=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(v=1));var f,g,m,y=s.numElements,C=y,$=r,E=o,_=0,T=0,x=[],I=d,S=this.maxElementSize,L=egret.$TempRectangle;for(f=0;y>f;f++){var g=s.getElementAt(f);if(egret.is(g,e)&&g.$includeInLayout)if(g.getPreferredBounds(L),S=Math.max(S,L.width),c)_+=L.height;else{var P=g.$UIComponent;isNaN(P[7])?I-=L.height:(T+=P[7],m=new t.sys.ChildInfo,m.layoutElement=g,m.percent=P[7],m.min=P[14],m.max=P[15],x.push(m))}else C--}I-=l*(C-1),I=I>0?I:0;var N,A=d-_-l*(C-1),b=C,R={};if(c){if(0>A){for(N=I/C,f=0;y>f;f++)g=s.getElementAt(f),egret.is(g,e)&&g.$includeInLayout&&(g.getPreferredBounds(L),L.height<=N&&(I-=L.height,b--));I=I>0?I:0}}else if(T>0){this.flexChildrenProportionally(d,I,T,x);var B=0,D=x.length;for(f=0;D>f;f++){m=x[f];var M=Math.round(m.size+B);B+=m.size-M,R[m.layoutElement.$hashCode]=M,I-=M}I=I>0?I:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?E=o+.5*I:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(E=o+I);var O=r,w=o,V=0,H=0,z=Math.ceil(u);this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY&&(z=Math.ceil(Math.max(u,S))),B=0;var U,k;for(f=0;y>f;f++){var G=0;if(g=s.getElementAt(f),egret.is(g,e)&&g.$includeInLayout){if(g.getPreferredBounds(L),U=0/0,c?(k=0/0,A>0?k=I*L.height/_:0>A&&L.height>N&&(k=I/b),isNaN(k)||(U=Math.round(k+B),B+=k-U)):U=R[g.$hashCode],p)$=r,g.setLayoutBoundsSize(z,U),g.getLayoutBounds(L);else{var F=0/0,P=g.$UIComponent;if(!isNaN(P[6])){var W=Math.min(100,P[6]);F=Math.round(u*W*.01)}g.setLayoutBoundsSize(F,U),g.getLayoutBounds(L),G=(u-L.width)*v,G=G>0?G:0,$=r+G}g.setLayoutBoundsPosition(Math.round($),Math.round(E)),V=Math.ceil(L.width),H=Math.ceil(L.height),O=Math.max(O,$+V),w=Math.max(w,E+H),E+=H+l}}this.maxElementSize=S,s.setContentSize(O+a,w+h)},r.updateDisplayListVirtual=function(i,n){var s=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var r,a=this.$paddingBottom,o=this.$paddingLeft,h=this.$paddingRight,l=this.$gap,u=s.numElements;if(-1==this.startIndex||-1==this.endIndex)return r=this.getStartPosition(u)-l+a,void s.setContentSize(s.contentWidth,r);var d=this.endIndex;s.setVirtualElementIndicesInView(this.startIndex,d);var c=this.$horizontalAlign==t.JustifyAlign.JUSTIFY||this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,p=this.$horizontalAlign==t.JustifyAlign.CONTENT_JUSTIFY,v=0;c||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?v=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(v=1));var f,g=egret.$TempRectangle,m=Math.max(0,i-o-h),y=Math.ceil(m),C=this.$typicalHeight,$=this.$typicalWidth,E=this.maxElementSize,_=Math.max($,this.maxElementSize);if(p){for(var T=this.startIndex;d>=T;T++)f=s.getVirtualElementAt(T),egret.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(g),E=Math.max(E,g.width));y=Math.ceil(Math.max(m,E))}for(var x,I=0,S=0,L=0,P=!1,N=this.elementSizeTable,A=this.startIndex;d>=A;A++){var b=0;f=s.getVirtualElementAt(A),egret.is(f,e)&&f.$includeInLayout&&(f.getPreferredBounds(g),p||(E=Math.max(E,g.width)),c?(I=o,f.setLayoutBoundsSize(y,0/0),f.getLayoutBounds(g)):(f.getLayoutBounds(g),b=(m-g.width)*v,b=b>0?b:0,I=o+b),L=Math.max(L,g.width),P||(x=isNaN(N[A])?C:N[A],x!=g.height&&(P=!0)),N[A]=g.height,S=this.getStartPosition(A),f.setLayoutBoundsPosition(Math.round(I),Math.round(S)))}L+=o+h,r=this.getStartPosition(u)-l+a,this.maxElementSize=E,s.setContentSize(L,r),(P||_<this.maxElementSize)&&s.invalidateSize()},r.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,s=this.$gap,r=this.elementSizeTable,a=0;t>a;a++){var o=r[a];isNaN(o)&&(o=i),n+=o+s}return n},r.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},r.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,s=this.elementSizeTable,r=0;n>r;r++){var a=s[r];isNaN(a)&&(a=t),i+=a+e}return i-=e},r.elementAdded=function(t){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},r.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,s=t.scrollV;if(s>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var r=t.scrollV+e[11];if(r<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(s,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(r,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||o!=this.endIndex},n}(t.LinearLayoutBase);t.VerticalLayout=i,egret.registerClass(i,"eui.VerticalLayout")}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}var e=(__define,t),i=e.prototype;return i.apply=function(t,e){var i,n=t[this.relativeTo],s=t[this.target],r=this.propertyName?t[this.propertyName]:e;if(s&&r){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=r.getChildIndex(n);break;case 3:i=r.getChildIndex(n)+1}-1==i&&(i=r.numChildren),egret.is(r,"eui.Component")&&r.$Component[8].$elementsContent.push(s),r.addChildAt(s,i)}},i.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var s=i.$Component[8].$elementsContent,r=s.indexOf(n);r>-1&&s.splice(r,1)}},t}();t.AddItems=e,egret.registerClass(e,"eui.AddItems",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}var e=(__define,t),i=e.prototype;return i.apply=function(t,e){var i=this.target?t[this.target]:t;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},i.remove=function(t,e){var i=this.target?t[this.target]:t;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},i.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},i.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,egret.registerClass(e,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e=function(){function e(t,e,i,n,s){this.host=t,this.templates=e,this.chainIndex=i,this.target=n,this.prop=s}var i=(__define,e),n=i.prototype;return n.apply=function(e,i){if(this.target){var n=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),n&&(this.oldValue=n),t.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)}},n.remove=function(t,e){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},n.setPropertyValue=function(t,e,i,n){void 0===i||null===i?t[e]=i:"number"==typeof n?t[e]=+i:"boolean"==typeof n?t[e]=this.toBoolean(i):t[e]=i},n.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},e}();t.SetStateProperty=e,egret.registerClass(e,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(t){var e;!function(t){function e(t,e,i,n,r,a,o,h,l,u){var d;if(!isNaN(i)&&isNaN(n)){if(d=s(t,e,i,a,i,h,i,u))return d}else if(isNaN(i)&&!isNaN(n)&&(d=s(t,e,r,n,o,n,l,n)))return d;return d=s(t,e,r,a,o,h,l,u)}function i(t,e,i,s,r,a,o,h,l,u){var d;if(!isNaN(i)&&isNaN(s)){if(d=n(t,e,i,a,i,h,i,u))return d}else if(isNaN(i)&&!isNaN(s)&&(d=n(t,e,r,s,o,s,l,s)))return d;return d=n(t,e,r,a,o,h,l,u)}function n(t,e,i,n,s,a,h,l){var u=e.b,d=e.d;if(u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),0==u&&0==d)return null;if(0==u&&0==d)return null;if(0==u)return egret.Point.create(i,t/Math.abs(d));if(0==d)return egret.Point.create(t/Math.abs(u),n);var c,p,v,f=u*d>=0?d:-d;if(0!=f&&i>0){var g=1/f;i=Math.max(s,Math.min(h,i)),p=i,v=(t-u*p)*g,v>=a&&l>=v&&u*p+f*v>=0&&(c=egret.Point.create(p,v)),v=(-t-u*p)*g,v>=a&&l>=v&&0>u*p+f*v&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(egret.Point.release(c),c=egret.Point.create(p,v))}if(0!=u&&n>0){var m=1/u;n=Math.max(a,Math.min(l,n)),v=n,p=(t-f*v)*m,p>=s&&h>=p&&u*p+f*v>=0&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(c=egret.Point.create(p,v)),p=(-t-f*v)*m,p>=s&&h>=p&&0>u*p+f*v&&(!c||o(c.x,c.y,e).width>o(p,v,e).width)&&(egret.Point.release(c),c=egret.Point.create(p,v))}if(c)return c;var y=e.a,C=e.c,$=y*C>=0?C:-C;return r(u,f,t,s,a,h,l,y,$)}function s(t,e,i,n,s,a,h,l){var u=e.a,d=e.c;if(u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),0==u&&0==d)return null;if(0==u)return egret.Point.create(i,t/Math.abs(d));if(0==d)return egret.Point.create(t/Math.abs(u),n);var c,p,v,f=u*d>=0?d:-d;if(0!=f&&i>0){var g=1/f;i=Math.max(s,Math.min(h,i)),p=i,v=(t-u*p)*g,v>=a&&l>=v&&u*p+f*v>=0&&(c=egret.Point.create(p,v)),v=(-t-u*p)*g,v>=a&&l>=v&&0>u*p+f*v&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(egret.Point.release(c),c=egret.Point.create(p,v))}if(0!=u&&n>0){var m=1/u;n=Math.max(a,Math.min(l,n)),v=n,p=(t-f*v)*m,p>=s&&h>=p&&u*p+f*v>=0&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(egret.Point.release(c),c=egret.Point.create(p,v)),p=(-t-f*v)*m,p>=s&&h>=p&&0>u*p+f*v&&(!c||o(c.x,c.y,e).height>o(p,v,e).height)&&(egret.Point.release(c),c=egret.Point.create(p,v))}if(c)return c;var y=e.b,C=e.d,$=y*C>=0?C:-C;return r(u,f,t,s,a,h,l,y,$)}function r(t,e,i,n,s,r,a,o,h){if(0==t||0==e)return null;var l,u,d=(i-n*t)/e,c=(i-r*t)/e,p=Math.max(s,Math.min(d,c)),v=Math.min(a,Math.max(d,c)),f=o*e-t*h;return v>=p?(u=Math.abs(f)<1e-9?i/(t+e):o*i/f,u=Math.max(p,Math.min(u,v)),l=(i-e*u)/t,egret.Point.create(l,u)):(d=-(n*t+i)/e,c=-(r*t+i)/e,p=Math.max(s,Math.min(d,c)),v=Math.min(a,Math.max(d,c)),v>=p?(u=Math.abs(f)<1e-9?-i/(t+e):-o*i/f,u=Math.max(p,Math.min(u,v)),l=(-i-e*u)/t,egret.Point.create(l,u)):null)}function a(t,e,i,n,s,a,o){var l=i.a,u=i.b,d=i.c,c=i.d;if(l>-1e-9&&1e-9>l&&(l=0),u>-1e-9&&1e-9>u&&(u=0),d>-1e-9&&1e-9>d&&(d=0),c>-1e-9&&1e-9>c&&(c=0),0==u&&0==d)return 0==l||0==c?null:egret.Point.create(t/Math.abs(l),e/Math.abs(c));if(0==l&&0==c)return 0==u||0==d?null:egret.Point.create(e/Math.abs(u),t/Math.abs(d));var p=l*d>=0?d:-d,v=u*c>=0?c:-c,f=l*v-u*p;if(Math.abs(f)<1e-9)return 0==p||0==l||l==-p?null:Math.abs(l*e-u*t)>1e-9?null:r(l,p,t,n,n,a,o,u,v);var g=1/f;t*=g,e*=g;var m;return m=h(l,p,u,v,t,e),m&&n<=m.x&&m.x<=a&&s<=m.y&&m.y<=o&&l*m.x+p*m.x>=0&&u*m.x+v*m.y>=0?m:(m=h(l,p,u,v,t,-e),m&&n<=m.x&&m.x<=a&&s<=m.y&&m.y<=o&&l*m.x+p*m.x>=0&&u*m.x+v*m.y<0?m:(m=h(l,p,u,v,-t,e),m&&n<=m.x&&m.x<=a&&s<=m.y&&m.y<=o&&l*m.x+p*m.x<0&&u*m.x+v*m.y>=0?m:(m=h(l,p,u,v,-t,-e),m&&n<=m.x&&m.x<=a&&s<=m.y&&m.y<=o&&l*m.x+p*m.x<0&&u*m.x+v*m.y<0?m:(egret.Point.release(m),null))))}function o(t,e,i){var n=egret.$TempRectangle.setTo(0,0,t,e);return i.$transformBounds(n),n}function h(t,e,i,n,s,r){return egret.Point.create(n*s-e*r,t*r-i*s)}var l=.1,u=.1,d=function(){function t(){}var n=(__define,t);n.prototype;return t.fitBounds=function(t,n,s,r,h,d,c,p,v,f,g){if(isNaN(t)&&isNaN(n))return egret.Point.create(d,c);var m,y=u>p?0:p-u,C=u>v?0:v-u,$=f+u,E=g+u;if(isNaN(t)||isNaN(n))return isNaN(t)?i(n,s,r,h,d,c,y,C,$,E):e(t,s,r,h,d,c,y,C,$,E);if(m=a(t,n,s,y,C,$,E),!m){var _;if(_=e(t,s,r,h,d,c,y,C,$,E)){var T=o(_.x,_.y,s).height;T-l>n&&(egret.Point.release(_),_=null)}var x;if(x=i(n,s,r,h,d,c,y,C,$,E)){var I=o(x.x,x.y,s).width;I-l>t&&(egret.Point.release(x),x=null)}m=_&&x?_.x*_.y>x.x*x.y?_:x:_?_:x,egret.Point.release(_),egret.Point.release(x)}return m},t}();t.MatrixUtil=d,egret.registerClass(d,"eui.sys.MatrixUtil")}(e=t.sys||(t.sys={}))}(eui||(eui={}));

 //libs/modules/res/res.min.js
var RES;!function(e){var t=function(){function e(e,t,r){this.groupName="",this.data=null,this._loaded=!1,this.name=e,this.url=t,this.type=r}var t=__define,r=e,i=r.prototype;return t(i,"loaded",function(){return this.data?this.data.loaded:this._loaded},function(e){this.data&&(this.data.loaded=e),this._loaded=e}),i.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},e.TYPE_XML="xml",e.TYPE_IMAGE="image",e.TYPE_BIN="bin",e.TYPE_TEXT="text",e.TYPE_JSON="json",e.TYPE_SHEET="sheet",e.TYPE_FONT="font",e.TYPE_SOUND="sound",e}();e.ResourceItem=t,egret.registerClass(t,"RES.ResourceItem")}(RES||(RES={}));var RES;!function(e){var t=function(){function t(){this.keyMap={},this.groupDic={},e.configInstance=this}var r=(__define,t),i=r.prototype;return i.getGroupByName=function(e){var t=new Array;if(!this.groupDic[e])return t;for(var r=this.groupDic[e],i=r.length,n=0;i>n;n++){var s=r[n];t.push(this.parseResourceItem(s))}return t},i.getRawGroupByName=function(e){return this.groupDic[e]?this.groupDic[e]:[]},i.createGroup=function(e,t,r){if(void 0===r&&(r=!1),!r&&this.groupDic[e]||!t||0==t.length)return!1;for(var i=this.groupDic,n=[],s=t.length,a=0;s>a;a++){var o=t[a],u=i[o];if(u)for(var l=u.length,c=0;l>c;c++){var h=u[c];-1==n.indexOf(h)&&n.push(h)}else h=this.keyMap[o],h?-1==n.indexOf(h)&&n.push(h):egret.$warn(3200,o)}return 0==n.length?!1:(this.groupDic[e]=n,!0)},i.parseConfig=function(e,t){if(e){var r=e.resources;if(r)for(var i=r.length,n=0;i>n;n++){var s=r[n],a=s.url;a&&-1==a.indexOf("://")&&(s.url=t+a),this.addItemToKeyMap(s)}var o=e.groups;if(o)for(i=o.length,n=0;i>n;n++){for(var u=o[n],l=[],c=u.keys.split(","),h=c.length,f=0;h>f;f++){var d=c[f].trim();s=this.keyMap[d],s&&-1==l.indexOf(s)&&l.push(s)}this.groupDic[u.name]=l}}},i.addSubkey=function(e,t){var r=this.keyMap[t];r&&!this.keyMap[e]&&(this.keyMap[e]=r)},i.addItemToKeyMap=function(e){if(this.keyMap[e.name]||(this.keyMap[e.name]=e),e.hasOwnProperty("subkeys")){var t=e.subkeys.split(",");e.subkeys=t;for(var r=t.length,i=0;r>i;i++){var n=t[i];null==this.keyMap[n]&&(this.keyMap[n]=e)}}},i.getName=function(e){var t=this.keyMap[e];return t?t.name:""},i.getType=function(e){var t=this.keyMap[e];return t?t.type:""},i.getRawResourceItem=function(e){return this.keyMap[e]},i.getResourceItem=function(e){var t=this.keyMap[e];return t?this.parseResourceItem(t):null},i.parseResourceItem=function(t){var r=new e.ResourceItem(t.name,t.url,t.type);return r.data=t,r},t}();e.ResourceConfig=t,egret.registerClass(t,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.thread=2,this.loadingCount=0,this.callBack=null,this.resInstance=null,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.failedList=new Array,this.priorityQueue={},this.lazyLoadList=new Array,this.analyzerDic={},this.queueIndex=0}__extends(r,t);var i=(__define,r),n=i.prototype;return n.isGroupInLoading=function(e){return void 0!==this.itemListDic[e]},n.loadGroup=function(t,r,i){if(void 0===i&&(i=0),!this.itemListDic[r]&&r){if(!t||0==t.length){egret.$warn(3201,r);var n=new e.ResourceEvent(e.ResourceEvent.GROUP_LOAD_ERROR);return n.groupName=r,void this.dispatchEvent(n)}this.priorityQueue[i]?this.priorityQueue[i].push(r):this.priorityQueue[i]=[r],this.itemListDic[r]=t;for(var s=t.length,a=0;s>a;a++){var o=t[a];o.groupName=r}this.groupTotalDic[r]=t.length,this.numLoadedDic[r]=0,this.next()}},n.loadItem=function(e){this.lazyLoadList.push(e),e.groupName="",this.next()},n.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var t=this.resInstance.$getAnalyzerByType(e.type);t.loadFile(e,this.onItemComplete,this)}}},n.getOneResourceItem=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.priorityQueue)e=Math.max(e,t);var r=this.priorityQueue[e];if(!r||0==r.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var i,n=r.length,s=0;n>s&&(this.queueIndex>=n&&(this.queueIndex=0),i=this.itemListDic[r[this.queueIndex]],!(i.length>0));s++)this.queueIndex++;return 0==i.length?null:i.shift()},n.onItemComplete=function(t){this.loadingCount--;var r=t.groupName;if(!t.loaded){var i=this.retryTimesDic[t.name]||1;if(!(i>this.maxRetryTimes))return this.retryTimesDic[t.name]=i+1,this.failedList.push(t),void this.next();delete this.retryTimesDic[t.name],e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.ITEM_LOAD_ERROR,r,t)}if(r){this.numLoadedDic[r]++;var n=this.numLoadedDic[r],s=this.groupTotalDic[r];if(t.loaded||(this.groupErrorDic[r]=!0),e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.GROUP_PROGRESS,r,t,n,s),n==s){var a=this.groupErrorDic[r];this.removeGroupName(r),delete this.groupTotalDic[r],delete this.numLoadedDic[r],delete this.itemListDic[r],delete this.groupErrorDic[r],a?e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_LOAD_ERROR,r):e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,r)}}else this.callBack.call(this.resInstance,t);this.next()},n.removeGroupName=function(e){for(var t in this.priorityQueue){for(var r=this.priorityQueue[t],i=r.length,n=0,s=!1,i=r.length,a=0;i>a;a++){var o=r[a];if(o==e){r.splice(n,1),s=!0;break}n++}if(s){0==r.length&&delete this.priorityQueue[t];break}}},r}(egret.EventDispatcher);e.ResourceLoader=t,egret.registerClass(t,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(t,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1),e.call(this,t,r,i),this.itemsLoaded=0,this.itemsTotal=0,this.groupName="",this.resItem=null}__extends(t,e);var r=(__define,t);r.prototype;return t.dispatchResourceEvent=function(e,r,i,n,s,a){void 0===i&&(i=""),void 0===n&&(n=null),void 0===s&&(s=0),void 0===a&&(a=0);var o=egret.Event.create(t,r);o.groupName=i,o.resItem=n,o.itemsLoaded=s,o.itemsTotal=a;var u=e.dispatchEvent(o);return egret.Event.release(o),u},t.ITEM_LOAD_ERROR="itemLoadError",t.CONFIG_COMPLETE="configComplete",t.CONFIG_LOAD_ERROR="configLoadError",t.GROUP_PROGRESS="groupProgress",t.GROUP_COMPLETE="groupComplete",t.GROUP_LOAD_ERROR="groupLoadError",t}(egret.Event);e.ResourceEvent=t,egret.registerClass(t,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.resourceConfig=null,this.resourceConfig=e.configInstance}__extends(r,t);var i=(__define,r),n=i.prototype;return n.addSubkey=function(e,t){this.resourceConfig.addSubkey(e,t)},n.loadFile=function(e,t,r){},n.getRes=function(e){},n.destroyRes=function(e){return!1},r.getStringPrefix=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(0,t):""},r.getStringTail=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(t+1):""},r}(egret.HashObject);e.AnalyzerBase=t,egret.registerClass(t,"RES.AnalyzerBase")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,this.recycler=[]}__extends(r,t);var i=(__define,r),n=i.prototype;return n.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getRequest();this.resItemDic[n.hashCode]={item:t,func:r,thisObject:i},n.open(e.$getVirtualUrl(t.url)),n.send()},n.getRequest=function(){var e=this.recycler.pop();return e||(e=new egret.HttpRequest,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e.responseType=this._dataFormat,e},n.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;i.loaded=e.type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t.response),this.recycler.push(t),n.call(r.thisObject,i)},n.analyzeData=function(e,t){var r=e.name;this.fileDic[r]||""!=t&&!t||(this.fileDic[r]=t)},n.getRes=function(e){return this.fileDic[e]},n.hasRes=function(e){var t=this.getRes(e);return null!=t},n.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},n.onResourceDestroy=function(e){},r}(e.AnalyzerBase);e.BinAnalyzer=t,egret.registerClass(t,"RES.BinAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.fileDic={},this.resItemDic=[],this.recycler=[]}__extends(r,t);var i=(__define,r),n=i.prototype;return n.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getLoader();this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url))},n.getLoader=function(){var e=this.recycler.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},n.onLoadFinish=function(e){var t=e.$target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;if(i.loaded=e.$type==egret.Event.COMPLETE,i.loaded){var s=new egret.Texture;s._setBitmapData(t.data),this.analyzeData(i,s)}this.recycler.push(t),n.call(r.thisObject,i)},n.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){this.fileDic[r]=t;var i=e.data;if(i&&i.scale9grid){var n=i.scale9grid,s=n.split(",");t.scale9Grid=new egret.Rectangle(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3]))}}},n.getRes=function(e){return this.fileDic[e]},n.hasRes=function(e){var t=this.getRes(e);return null!=t},n.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},n.onResourceDestroy=function(e){e.dispose()},r}(e.AnalyzerBase);e.ImageAnalyzer=t,egret.registerClass(t,"RES.ImageAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);var r=(__define,t);r.prototype;return t}(e.BinAnalyzer);e.TextAnalyzer=t,egret.registerClass(t,"RES.TextAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);var r=(__define,t),i=r.prototype;return i.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t;this.fileDic[r]=JSON.parse(i)}catch(n){egret.$warn(1017,e.url,t)}},t}(e.BinAnalyzer);e.JsonAnalyzer=t,egret.registerClass(t,"RES.JsonAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.sheetMap={},this.textureMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(r,t);var i=(__define,r),n=i.prototype;return n.getRes=function(t){var r=this.fileDic[t];if(r||(r=this.textureMap[t]),!r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.fileDic[i]){var n=e.AnalyzerBase.getStringTail(t);r=r.getTexture(n)}}return r},n.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var s=this.analyzeConfig(i,t.response);if(s)return this.loadImage(s,r),void this.recycler.push(t)}else{var a=new egret.Texture;a._setBitmapData(t.data),this.analyzeBitmap(i,a)}t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},n.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var s=t;r=JSON.parse(s)}catch(a){egret.$warn(1017,e.url,t)}return r&&(this.sheetMap[i]=r,n=this.getRelativePath(e.url,r.file)),n},n.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,s=this.parseSpriteSheet(t,i,n);this.fileDic[r]=s}},n.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.match(/#.*|\?.*/),i="";r&&(i=r[0]);var n=e.lastIndexOf("/");return e=-1!=n?e.substring(0,n+1)+t:t,e+i},n.parseSpriteSheet=function(e,t,r){var i=t.frames;if(!i)return null;var n=new egret.SpriteSheet(e),s=this.textureMap;for(var a in i){var o=i[a],e=n.createTexture(a,o.x,o.y,o.w,o.h,o.offX,o.offY,o.sourceW,o.sourceH);if(o.scale9grid){var u=o.scale9grid,l=u.split(",");e.scale9Grid=new egret.Rectangle(parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),parseInt(l[3]))}null==s[a]&&(s[a]=e,r&&this.addSubkey(a,r))}return n},n.destroyRes=function(e){var t=this.fileDic[e];if(t){delete this.fileDic[e];var r;for(var i in t._textureMap)null==r&&(r=t._textureMap[i],this.onResourceDestroy(r),r=null),delete this.textureMap[i];return!0}return!1},n.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},n.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},n.onResourceDestroy=function(e){e&&e.dispose()},r}(e.BinAnalyzer);e.SheetAnalyzer=t,egret.registerClass(t,"RES.SheetAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var r=(__define,t),i=r.prototype;return i.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var s=t;r=JSON.parse(s)}catch(a){}return r?n=this.getRelativePath(e.url,r.file):(r=t,n=this.getTexturePath(e.url,r)),this.sheetMap[i]=r,n},i.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=new egret.BitmapFont(t,i);this.fileDic[r]=n}},i.getTexturePath=function(e,t){var r="",i=t.split("\n"),n=i[2],s=n.indexOf('file="');-1!=s&&(n=n.substring(s+6),s=n.indexOf('"'),r=n.substring(0,s)),e=e.split("\\").join("/");var s=e.lastIndexOf("/");return e=-1!=s?e.substring(0,s+1)+r:r},i.onResourceDestroy=function(e){e&&e.dispose()},t}(e.SheetAnalyzer);e.FontAnalyzer=t,egret.registerClass(t,"RES.FontAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.soundDic={},this.resItemDic=[]}__extends(r,t);var i=(__define,r),n=i.prototype;return n.loadFile=function(t,r,i){if(this.soundDic[t.name])return void r.call(i,t);var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url)),t.data&&(n.type=t.data.soundType)},n.onLoadFinish=function(e){var t=e.$target;t.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;i.loaded=e.$type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t),n.call(r.thisObject,i)},n.analyzeData=function(e,t){var r=e.name;!this.soundDic[r]&&t&&(this.soundDic[r]=t)},n.getRes=function(e){return this.soundDic[e]},n.hasRes=function(e){return!!this.getRes(e)},n.destroyRes=function(e){return this.soundDic[e]?(delete this.soundDic[e],!0):!1},r}(e.AnalyzerBase);e.SoundAnalyzer=t,egret.registerClass(t,"RES.SoundAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);var r=(__define,t),i=r.prototype;return i.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t,n=egret.XML.parse(i);this.fileDic[r]=n}catch(s){}},t}(e.BinAnalyzer);e.XMLAnalyzer=t,egret.registerClass(t,"RES.XMLAnalyzer")}(RES||(RES={}));var RES;!function(e){}(RES||(RES={}));var RES;!function(e){var t;!function(t){var r=function(e){function t(){e.call(this),this._versionInfo={}}__extends(t,e);var r=(__define,t),i=r.prototype;return i.fetchVersion=function(e){e.onSuccess(null)},i.getChangeList=function(){return[]},i.getVirtualUrl=function(e){return e},t}(egret.EventDispatcher);t.Html5VersionController=r,egret.registerClass(r,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(e.VersionController=r)}(t=e.web||(e.web={}))}(RES||(RES={}));var RES;!function(e){var t;!function(t){var r=function(){function e(){this._versionInfo={},this._versionPath="",this._localFileArr=[]}var t=(__define,e),r=t.prototype;return r.fetchVersion=function(e){var t=this;if(t._versionPath="all.manifest",t._versionInfo=t.getLocalData(t._versionPath),null==t._versionInfo)return void egret.callLater(function(){e.onFail(1,null)},t);var r=0,i=function(i){if(i)for(var n=0;n<i.length;n++)i[n]&&""!=i[n]&&t._localFileArr.push("resource/"+i[n]);r++,2==r&&e.onSuccess(null)};t.getList(i,"assets","resource"),t.getList(i,"update","resource")},r.getList=function(e,t,r){void 0===r&&(r="");var i=egret.PromiseObject.create();i.onSuccessFunc=function(t){e(t)},i.onErrorFunc=function(){console.error("list files error")},"assets"==t?egret_native.Game.listResource(r,i):egret_native.Game.listUpdate(r,i)},r.getChangeList=function(){var e=[],t=this._localFileArr;for(var r in this._versionInfo)t.indexOf(this.getVirtualUrl(r))<0&&e.push({url:this.getVirtualUrl(r),size:this._versionInfo[r].s});return e},r.getVirtualUrl=function(e){return this._versionInfo&&this._versionInfo[e]?"resource/"+this._versionInfo[e].v.substring(0,2)+"/"+this._versionInfo[e].v+"_"+this._versionInfo[e].s+"."+e.substring(e.lastIndexOf(".")+1):e},r.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var t=egret_native.readUpdateFileSync(e);if(null!=t)return JSON.parse(t);if(t=egret_native.readResourceFileSync(e),null!=t)return JSON.parse(t)}return null},e}();t.NativeVersionController=r,egret.registerClass(r,"RES.native.NativeVersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=r)}(t=e["native"]||(e["native"]={}))}(RES||(RES={}));var RES;!function(e){function t(e,t){_.registerAnalyzer(e,t)}function r(e){_.$registerVersionController(e)}function i(){return _.vcs}function n(e,t,r){void 0===t&&(t=""),void 0===r&&(r="json"),_.loadConfig(e,t,r)}function s(e,t){void 0===t&&(t=0),_.loadGroup(e,t)}function a(e){return _.isGroupLoaded(e)}function o(e){return _.getGroupByName(e)}function u(e,t,r){return void 0===r&&(r=!1),_.createGroup(e,t,r)}function l(e){return _.hasRes(e)}function c(e,t){void 0===t&&(t=""),_.parseConfig(e,t)}function h(e){return _.getRes(e)}function f(e,t,r){_.getResAsync(e,t,r)}function d(e,t,r,i){void 0===i&&(i=""),_.getResByUrl(e,t,r,i)}function g(e,t){return _.destroyRes(e,t)}function p(e){_.setMaxLoadingThread(e)}function v(e){_.setMaxRetryTimes(e)}function y(e,t,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=0),_.addEventListener(e,t,r,i,n)}function R(e,t,r,i){void 0===i&&(i=!1),_.removeEventListener(e,t,r,i)}function E(e){return _.vcs?_.vcs.getVirtualUrl(e):e}e.registerAnalyzer=t,e.registerVersionController=r,e.getVersionController=i,e.loadConfig=n,e.loadGroup=s,e.isGroupLoaded=a,e.getGroupByName=o,e.createGroup=u,e.hasRes=l,e.parseConfig=c,e.getRes=h,e.getResAsync=f,e.getResByUrl=d,e.destroyRes=g,e.setMaxLoadingThread=p,e.setMaxRetryTimes=v,e.addEventListener=y,e.removeEventListener=R,e.$getVirtualUrl=E;var m=function(t){function r(){t.call(this),this.analyzerDic={},this.analyzerClassMap={},this.configItemList=[],this.callLaterFlag=!1,this.configComplete=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this._loadedUrlTypes={},this.init()}__extends(r,t);var i=(__define,r),n=i.prototype;return n.$getAnalyzerByType=function(e){var t=this.analyzerDic[e];if(!t){var r=this.analyzerClassMap[e];if(!r)return null;t=this.analyzerDic[e]=new r}return t},n.registerAnalyzer=function(e,t){this.analyzerClassMap[e]=t},n.$registerVersionController=function(e){this.vcs=e},n.init=function(){this.vcs=new e.VersionController;var t=this.analyzerClassMap;t[e.ResourceItem.TYPE_BIN]=e.BinAnalyzer,t[e.ResourceItem.TYPE_IMAGE]=e.ImageAnalyzer,t[e.ResourceItem.TYPE_TEXT]=e.TextAnalyzer,t[e.ResourceItem.TYPE_JSON]=e.JsonAnalyzer,t[e.ResourceItem.TYPE_SHEET]=e.SheetAnalyzer,t[e.ResourceItem.TYPE_FONT]=e.FontAnalyzer,t[e.ResourceItem.TYPE_SOUND]=e.SoundAnalyzer,t[e.ResourceItem.TYPE_XML]=e.XMLAnalyzer,this.resConfig=new e.ResourceConfig,this.resLoader=new e.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(e.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(e.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},n.loadConfig=function(e,t,r){void 0===r&&(r="json");var i={url:e,resourceRoot:t,type:r};this.configItemList.push(i),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},n.startLoadConfig=function(){var t=this;this.callLaterFlag=!1;var i=this.configItemList;this.configItemList=[],this.loadingConfigList=i;for(var n=i.length,s=[],a=0;n>a;a++){var o=i[a],u=new e.ResourceItem(o.url,o.url,o.type);s.push(u)}var l={onSuccess:function(e){t.resLoader.loadGroup(s,r.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(r,i){e.ResourceEvent.dispatchResourceEvent(t,e.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(l):this.resLoader.loadGroup(s,r.GROUP_CONFIG,Number.MAX_VALUE)},n.isGroupLoaded=function(e){return-1!=this.loadedGroups.indexOf(e)},n.getGroupByName=function(e){return this.resConfig.getGroupByName(e)},n.loadGroup=function(t,r){if(void 0===r&&(r=0),-1!=this.loadedGroups.indexOf(t))return void e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,t);if(!this.resLoader.isGroupInLoading(t))if(this.configComplete){var i=this.resConfig.getGroupByName(t);this.resLoader.loadGroup(i,t,r)}else this.groupNameList.push({name:t,priority:r})},n.createGroup=function(e,t,r){if(void 0===r&&(r=!1),r){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1)}return this.resConfig.createGroup(e,t,r)},n.onGroupComp=function(t){if(t.groupName==r.GROUP_CONFIG){for(var i=this.loadingConfigList.length,n=0;i>n;n++){var s=this.loadingConfigList[n],a=this.$getAnalyzerByType(s.type),o=a.getRes(s.url);a.destroyRes(s.url),this.resConfig.parseConfig(o,s.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(t.groupName),this.dispatchEvent(t)},n.loadDelayGroups=function(){var e=this.groupNameList;this.groupNameList=[];for(var t=e.length,r=0;t>r;r++){var i=e[r];this.loadGroup(i.name,i.priority)}},n.onGroupError=function(t){t.groupName==r.GROUP_CONFIG?(this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(t)},n.hasRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.resConfig.getType(i),""==r)return!1}return!0},n.parseConfig=function(e,t){this.resConfig.parseConfig(e,t),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},n.getRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.resConfig.getType(i),""==r)return null}var n=this.$getAnalyzerByType(r);return n.getRes(t)},n.getResAsync=function(t,r,i){var n=this.resConfig.getType(t),s=this.resConfig.getName(t);if(""==n&&(s=e.AnalyzerBase.getStringPrefix(t),n=this.resConfig.getType(s),""==n))return void egret.$callAsync(r,i);var a=this.$getAnalyzerByType(n),o=a.getRes(t);if(o)return void egret.$callAsync(r,i,o,t);var u={key:t,compFunc:r,thisObject:i};if(this.asyncDic[s])this.asyncDic[s].push(u);else{this.asyncDic[s]=[u];var l=this.resConfig.getResourceItem(s);this.resLoader.loadItem(l)}},n.getResByUrl=function(t,r,i,n){if(void 0===n&&(n=""),!t)return void egret.$callAsync(r,i);n||(n=this.getTypeByUrl(t)),null!=this._loadedUrlTypes[t]&&this._loadedUrlTypes[t]!=n&&egret.$warn(3202),this._loadedUrlTypes[t]=n;var s=this.$getAnalyzerByType(n),a=t,o=s.getRes(a);if(o)return void egret.$callAsync(r,i,o,t);var u={key:a,compFunc:r,thisObject:i};if(this.asyncDic[a])this.asyncDic[a].push(u);else{this.asyncDic[a]=[u];var l=new e.ResourceItem(a,t,n);this.resLoader.loadItem(l)}},n.getTypeByUrl=function(t){var r=t.substr(t.lastIndexOf(".")+1);r&&(r=r.toLowerCase());var i;switch(r){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:i=r;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":i=e.ResourceItem.TYPE_IMAGE;break;case"fnt":i=e.ResourceItem.TYPE_FONT;break;case"txt":i=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":i=e.ResourceItem.TYPE_SOUND;break;default:i=e.ResourceItem.TYPE_BIN}return i},n.onResourceItemComp=function(e){var t=this.asyncDic[e.name];delete this.asyncDic[e.name];for(var r=this.$getAnalyzerByType(e.type),i=t.length,n=0;i>n;n++){var s=t[n],a=r.getRes(s.key);s.compFunc.call(s.thisObject,a,s.key)}},n.destroyRes=function(e,t){void 0===t&&(t=!0);var r=this.resConfig.getRawGroupByName(e);if(r&&r.length>0){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1);for(var n=r.length,s=0;n>s;s++){var a=r[s];if(!t&&this.isResInLoadedGroup(a.name));else{a.loaded=!1;var o=this.$getAnalyzerByType(a.type);o.destroyRes(a.name),this.removeLoadedGroupsByItemName(a.name)}}return!0}var u=this.resConfig.getType(e);if(""==u){if(u=this._loadedUrlTypes[e],null==u||""==u)return!1;delete this._loadedUrlTypes[e];var o=this.$getAnalyzerByType(u);return o.destroyRes(e),!0}a=this.resConfig.getRawResourceItem(e),a.loaded=!1,o=this.$getAnalyzerByType(u);var l=o.destroyRes(e);return this.removeLoadedGroupsByItemName(a.name),l},n.removeLoadedGroupsByItemName=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),s=n.length,a=0;s>a;a++){var o=n[a];if(o.name==e){t.splice(i,1),i--,r=t.length;break}}},n.isResInLoadedGroup=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),s=n.length,a=0;s>a;a++){var o=n[a];if(o.name==e)return!0}return!1},n.setMaxLoadingThread=function(e){1>e&&(e=1),this.resLoader.thread=e},n.setMaxRetryTimes=function(e){e=Math.max(e,0),this.resLoader.maxRetryTimes=e},r.GROUP_CONFIG="RES__CONFIG",r}(egret.EventDispatcher);egret.registerClass(m,"Resource");var _=new m}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){t.call(this),this.sheetMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(r,t);var i=(__define,r),n=i.prototype;return n.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var s=this.analyzeConfig(i,t.response);if(s)return this.loadImage(s,r),void this.recycler.push(t)}else this.analyzeBitmap(i,t.data);t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},n.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var s=t;r=JSON.parse(s)}catch(a){egret.$warn(1017,e.url,t)}if(r)if(this.sheetMap[i]=r,r.file)n=this.getRelativePath(e.url,r.file);else{var o=e.url.split("?"),u=o[0].split("/");u[u.length-1]=u[u.length-1].split(".")[0]+".png",n="";for(var l=0;l<u.length;l++)n+=u[l]+(l<u.length-1?"/":"");2==o.length&&(n+=o[2])}return n},n.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,s=this.parseAnimation(t,i,n);this.fileDic[r]=s}},n.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.lastIndexOf("/");return e=-1!=r?e.substring(0,r+1)+t:t},n.parseAnimation=function(e,t,r){for(var i,n=Object.keys(t.mc),s=t.mc[n[0]].frames,a=s.length,o=[],u=0;a>u;u++){i=t.res[s[u].res];var l=new egret.Texture;l._bitmapData=e,l.$initData(i.x,i.y,i.w,i.h,s[u].x,s[u].y,s[u].sourceW,s[u].sourceH,e.width,e.height)}return o},n.destroyRes=function(e){var t=this.fileDic[e];return t?(delete this.fileDic[e],!0):!1},n.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},n.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r}(e.BinAnalyzer);e.AnimationAnalyzer=t,egret.registerClass(t,"RES.AnimationAnalyzer")}(RES||(RES={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.en_US=e.$locale_strings.en_US||{};var t=e.$locale_strings.en_US;t[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",t[3201]='RES loaded non-existed or empty resource group:"{0}"',t[3202]="Do not use the different types of ways to load the same material!",t[3203]="Can't find the analyzer of the specified file type:{0} Please register the specified analyzer in the initialization of the project first,then start the resource loading process"}(egret||(egret={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.zh_CN=e.$locale_strings.zh_CN||{};var t=e.$locale_strings.zh_CN;t[3200]="RES.createGroup(): {0}",t[3201]='RES:"{0}"',t[3202]="",t[3203]=":{0} "}(egret||(egret={}));

 //libs/modules/tween/tween.min.js
var egret;!function(t){var n=function(){function n(){t.$error(1014)}var e=(__define,n);e.prototype;return n.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(n){return 0==t?n:0>t?n*(n*-t+1+t):n*((2-n)*t+(1-t))}},n.getPowIn=function(t){return function(n){return Math.pow(n,t)}},n.getPowOut=function(t){return function(n){return 1-Math.pow(1-n,t)}},n.getPowInOut=function(t){return function(n){return(n*=2)<1?.5*Math.pow(n,t):1-.5*Math.abs(Math.pow(2-n,t))}},n.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},n.sineOut=function(t){return Math.sin(t*Math.PI/2)},n.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},n.getBackIn=function(t){return function(n){return n*n*((t+1)*n-t)}},n.getBackOut=function(t){return function(n){return--n*n*((t+1)*n+t)+1}},n.getBackInOut=function(t){return t*=1.525,function(n){return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)}},n.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},n.circOut=function(t){return Math.sqrt(1- --t*t)},n.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},n.bounceIn=function(t){return 1-n.bounceOut(1-t)},n.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},n.bounceInOut=function(t){return.5>t?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5},n.getElasticIn=function(t,n){var e=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=n/e*Math.asin(1/t);return-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*e/n))}},n.getElasticOut=function(t,n){var e=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=n/e*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*e/n)+1}},n.getElasticInOut=function(t,n){var e=2*Math.PI;return function(i){var s=n/e*Math.asin(1/t);return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*e/n)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*e/n)*.5+1}},n.quadIn=n.getPowIn(2),n.quadOut=n.getPowOut(2),n.quadInOut=n.getPowInOut(2),n.cubicIn=n.getPowIn(3),n.cubicOut=n.getPowOut(3),n.cubicInOut=n.getPowInOut(3),n.quartIn=n.getPowIn(4),n.quartOut=n.getPowOut(4),n.quartInOut=n.getPowInOut(4),n.quintIn=n.getPowIn(5),n.quintOut=n.getPowOut(5),n.quintInOut=n.getPowInOut(5),n.backIn=n.getBackIn(1.7),n.backOut=n.getBackOut(1.7),n.backInOut=n.getBackInOut(1.7),n.elasticIn=n.getElasticIn(1,.3),n.elasticOut=n.getElasticOut(1,.3),n.elasticInOut=n.getElasticInOut(1,.3*1.5),n}();t.Ease=n,t.registerClass(n,"egret.Ease")}(egret||(egret={}));var egret;!function(t){var n=function(n){function e(t,e,i){n.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,e,i)}__extends(e,n);var i=(__define,e),s=i.prototype;return e.get=function(t,n,i,s){return void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=!1),s&&e.removeTweens(t),new e(t,n,i)},e.removeTweens=function(t){if(t.tween_count){for(var n=e._tweens,i=n.length-1;i>=0;i--)n[i]._target==t&&(n[i].paused=!0,n.splice(i,1));t.tween_count=0}},e.pauseTweens=function(n){if(n.tween_count)for(var e=t.Tween._tweens,i=e.length-1;i>=0;i--)e[i]._target==n&&(e[i].paused=!0)},e.resumeTweens=function(n){if(n.tween_count)for(var e=t.Tween._tweens,i=e.length-1;i>=0;i--)e[i]._target==n&&(e[i].paused=!1)},e.tick=function(t,n){void 0===n&&(n=!1);var i=t-e._lastTime;e._lastTime=t;for(var s=e._tweens.concat(),u=s.length-1;u>=0;u--){var r=s[u];n&&!r.ignoreGlobalPause||r.paused||r.tick(r._useTicks?1:i)}return!1},e._register=function(n,i){var s=n._target,u=e._tweens;if(i)s&&(s.tween_count=s.tween_count>0?s.tween_count+1:1),u.push(n),e._inited||(e._lastTime=t.getTimer(),t.sys.$ticker.$startTick(e.tick,null),e._inited=!0);else{s&&s.tween_count--;for(var r=u.length;r--;)if(u[r]==n)return void u.splice(r,1)}},e.removeAllTweens=function(){for(var t=e._tweens,n=0,i=t.length;i>n;n++){var s=t[n];s.paused=!0,s._target.tweenjs_count=0}t.length=0},s.initialize=function(t,n,i){this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,n.onChange&&this.addEventListener("change",n.onChange,n.onChangeObj),n.override&&e.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this.paused=!0:e._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,e.NONE)},s.setPosition=function(t,n){void 0===n&&(n=1),0>t&&(t=0);var e=t,i=!1;if(e>=this.duration&&(this.loop?e%=this.duration:(e=this.duration,i=!0)),e==this._prevPos)return i;var s=this._prevPos;if(this.position=this._prevPos=e,this._prevPosition=t,this._target)if(i)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var u=0,r=this._steps.length;r>u&&!(this._steps[u].t>e);u++);var o=this._steps[u-1];this._updateTargetProps(o,(this._stepPosition=e-o.t)/o.d)}return i&&this.setPaused(!0),0!=n&&this._actions.length>0&&(this._useTicks?this._runActions(e,e):1==n&&s>e?(s!=this.duration&&this._runActions(s,this.duration),this._runActions(0,e,!0)):this._runActions(s,e)),this.dispatchEventWith("change"),i},s._runActions=function(t,n,e){void 0===e&&(e=!1);var i=t,s=n,u=-1,r=this._actions.length,o=1;for(t>n&&(i=n,s=t,u=r,r=o=-1);(u+=o)!=r;){var a=this._actions[u],h=a.t;(h==s||h>i&&s>h||e&&h==t)&&a.f.apply(a.o,a.p)}},s._updateTargetProps=function(t,n){var i,s,u,r,o,a;if(t||1!=n){if(this.passive=!!t.v,this.passive)return;t.e&&(n=t.e(n,0,1,1)),i=t.p0,s=t.p1}else this.passive=!1,i=s=this._curQueueProps;for(var h in this._initQueueProps){null==(r=i[h])&&(i[h]=r=this._initQueueProps[h]),null==(o=s[h])&&(s[h]=o=r),u=r==o||0==n||1==n||"number"!=typeof r?1==n?o:r:r+(o-r)*n;var c=!1;if(a=e._plugins[h])for(var p=0,_=a.length;_>p;p++){var l=a[p].tween(this,h,u,i,s,n,!!t&&i==s,!t);l==e.IGNORE?c=!0:u=l}c||(this._target[h]=u)}},s.setPaused=function(t){return this.paused=t,e._register(this,!t),this},s._cloneProps=function(t){var n={};for(var e in t)n[e]=t[e];return n},s._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},s._appendQueueProps=function(t){var n,i,s,u,r;for(var o in t)if(void 0===this._initQueueProps[o]){if(i=this._target[o],n=e._plugins[o])for(s=0,u=n.length;u>s;s++)i=n[s].init(this,o,i);this._initQueueProps[o]=this._curQueueProps[o]=void 0===i?null:i}else i=this._curQueueProps[o];for(var o in t){if(i=this._curQueueProps[o],n=e._plugins[o])for(r=r||{},s=0,u=n.length;u>s;s++)n[s].step&&n[s].step(this,o,i,t[o],r);this._curQueueProps[o]=t[o]}return r&&this._appendQueueProps(r),this._curQueueProps},s._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},s._set=function(t,n){for(var e in t)n[e]=t[e]},s.wait=function(t,n){if(null==t||0>=t)return this;var e=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:e,p1:e,v:n})},s.to=function(t,n,e){return void 0===e&&(e=void 0),(isNaN(n)||0>n)&&(n=0),this._addStep({d:n||0,p0:this._cloneProps(this._curQueueProps),e:e,p1:this._cloneProps(this._appendQueueProps(t))})},s.call=function(t,n,e){return void 0===n&&(n=void 0),void 0===e&&(e=void 0),this._addAction({f:t,p:e?e:[],o:n?n:this._target})},s.set=function(t,n){return void 0===n&&(n=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,n?n:this._target]})},s.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},s.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},s.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},e.NONE=0,e.LOOP=1,e.REVERSE=2,e._tweens=[],e.IGNORE={},e._plugins={},e._inited=!1,e._lastTime=0,e}(t.EventDispatcher);t.Tween=n,t.registerClass(n,"egret.Tween")}(egret||(egret={}));

 //libs/modules/game/game.min.js
var egret;!function(t){var e=function(t){function e(e,i,r){t.call(this),this._name=e,this._frame=0|i,r&&(this._end=0|r)}__extends(e,t);var i=__define,r=e,s=r.prototype;return i(s,"name",function(){return this._name}),i(s,"frame",function(){return this._frame}),i(s,"end",function(){return this._end}),s.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,t.registerClass(e,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this),this.$bitmapData=null,this.offsetPoint=t.Point.create(0,0),this.$movieClipData=null,this.frames=null,this.$totalFrames=0,this.frameLabels=null,this.$frameLabelStart=0,this.$frameLabelEnd=0,this.frameEvents=null,this.frameIntervalTime=0,this.$eventPool=null,this.$isPlaying=!1,this.isStopped=!0,this.playTimes=0,this.$currentFrameNum=0,this.$nextFrameNum=0,this.displayedKeyFrameNum=0,this.passedTime=0,this.lastTime=0,this.$smoothing=t.Bitmap.defaultSmoothing,this.$renderNode=new t.sys.BitmapNode,this.setMovieClipData(i)}__extends(i,e);var r=__define,s=i,n=s.prototype;return r(n,"smoothing",function(){return this.$smoothing},function(t){t=!!t,t!=this.$smoothing&&(this.$smoothing=t,this.$invalidate())}),n.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.frameIntervalTime=1e3/t.frameRate,this._initFrame())},n.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},n._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},n.$render=function(){var e=this.$bitmapData;if(e){var i=Math.round(this.offsetPoint.x),r=Math.round(this.offsetPoint.y),s=e._bitmapWidth,n=e._bitmapHeight,o=e.$getTextureWidth(),a=e.$getTextureHeight(),h=Math.round(e.$getScaleBitmapWidth()),l=Math.round(e.$getScaleBitmapHeight()),c=e._sourceWidth,u=e._sourceHeight;t.sys.BitmapNode.$updateTextureData(this.$renderNode,e._bitmapData,e._bitmapX,e._bitmapY,s,n,i,r,o,a,h,l,c,u,null,t.BitmapFillMode.SCALE,this.$smoothing)}},n.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var i=this.offsetPoint.x,r=this.offsetPoint.y,s=e.$getTextureWidth(),n=e.$getTextureHeight();t.setTo(i,r,s,n)}else t.setEmpty()},n.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},n.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},n.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var i=this.frameLabels;if(i)for(var r=null,s=0;s<i.length;s++)if(r=i[s],e?r.name.toLowerCase()==t:r.name==t)return r;return null},n.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var i=null,r=0;r<e.length;r++)if(i=e[r],t==i.name){this.$frameLabelStart=i.frame,this.$frameLabelEnd=i.end;break}},n.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var i=null,r=0;r<e.length;r++)if(i=e[r],i.frame==t)return i;return null},n.getFrameLabelForFrame=function(t){var e=null,i=null,r=this.frameLabels;if(r)for(var s=0;s<r.length;s++){if(i=r[s],i.frame>t)return e;e=i}return e},n.play=function(t){void 0===t&&(t=0),this.$isPlaying=!0,this.setPlayTimes(t),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},n.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},n.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},n.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},n.gotoAndPlay=function(e,i){void 0===i&&(i=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(i),this.gotoFrame(e)},n.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},n.gotoFrame=function(e){var i;"string"==typeof e?i=this.getFrameLabelByName(e).frame:(i=parseInt(e+"",10),i!=e&&t.$error(1022,"Frame Label Not Found")),1>i?i=1:i>this.$totalFrames&&(i=this.$totalFrames),i!=this.$nextFrameNum&&(this.$nextFrameNum=i,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},n.advanceTime=function(e){var i=this,r=e-i.lastTime;i.lastTime=e;var s=i.frameIntervalTime,n=i.passedTime+r;i.passedTime=n%s;var o=n/s;if(1>o)return!1;for(var a;o>=1;){if(o--,i.$nextFrameNum++,a=this.frameEvents[i.$nextFrameNum],a&&""!=a&&t.MovieClipEvent.dispatchMovieClipEvent(i,t.MovieClipEvent.FRAME_LABEL,a),i.$nextFrameNum>i.$totalFrames||i.$frameLabelStart>0&&i.$nextFrameNum>i.$frameLabelEnd)if(-1==i.playTimes)i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1;else{if(i.playTimes--,!(i.playTimes>0)){i.$nextFrameNum=i.$totalFrames,i.$eventPool.push(t.Event.COMPLETE),i.stop();break}i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1}i.$currentFrameNum==i.$frameLabelEnd&&(i.$nextFrameNum=i.$frameLabelStart),i.advanceFrame()}return i.constructFrame(),i.handlePendingEvent(),!1},n.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum},n.constructFrame=function(){var t=this.$currentFrameNum;this.displayedKeyFrameNum!=t&&(this.$bitmapData=this.$movieClipData.getTextureByFrame(t),this.$movieClipData.$getOffsetByFrame(t,this.offsetPoint),this.$invalidateContentBounds(),this.displayedKeyFrameNum=t)},n.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,i=e.length,r=!1,s=!1,n=0;i>n;n++){var o=e.pop();o==t.Event.LOOP_COMPLETE?s=!0:o==t.Event.COMPLETE?r=!0:this.dispatchEventWith(o)}s&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),r&&this.dispatchEventWith(t.Event.COMPLETE)}},r(n,"totalFrames",function(){return this.$totalFrames}),r(n,"currentFrame",function(){return this.$currentFrameNum}),r(n,"currentFrameLabel",function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name}),r(n,"currentLabel",function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null}),r(n,"frameRate",function(){return this.$movieClipData.frameRate},function(t){t!=this.$movieClipData.frameRate&&(this.$movieClipData.frameRate=t,this.frameIntervalTime=1e3/this.$movieClipData.frameRate)}),r(n,"isPlaying",function(){return this.$isPlaying}),r(n,"movieClipData",function(){return this.$movieClipData},function(t){this.setMovieClipData(t)}),n.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},n.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},n.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?(this.playTimes=0,t.sys.$ticker.$stopTick(this.advanceTime,this)):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.sys.$ticker.$startTick(this.advanceTime,this)))},i}(t.DisplayObject);t.MovieClip=e,t.registerClass(e,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$mcData=null,this.numFrames=1,this.frames=[],this.labels=null,this.events=[],this.frameRate=0,this.textureData=null,this.spriteSheet=null}__extends(i,e);var r=__define,s=i,n=s.prototype;return n.$init=function(t,e,i){this.textureData=e,this.spriteSheet=i,this.setMCData(t)},n.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},n.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var i=this.getTextureByResName(e.res);return i}return null},n.$getOffsetByFrame=function(t,e){var i=this.getKeyFrameData(t);i.res&&e.setTo(0|i.x,0|i.y)},n.getTextureByResName=function(t){var e=this.spriteSheet.getTexture(t);if(!e){var i=this.textureData[t];e=this.spriteSheet.createTexture(t,i.x,i.y,i.w,i.h)}return e},n.$isDataValid=function(){return this.frames.length>0},n.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},n.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},n.fillFramesData=function(t){for(var e,i=this.frames,r=t?t.length:0,s=0;r>s;s++){var n=t[s];if(i.push(n),n.duration){var o=parseInt(n.duration);if(o>1){e=i.length;for(var a=1;o>a;a++)i.push({frame:e})}}}this.numFrames=i.length},n.fillFrameLabelsData=function(e){if(e){var i=e.length;if(i>0){this.labels=[];for(var r=0;i>r;r++){var s=e[r];this.labels.push(new t.FrameLabel(s.name,s.frame,s.end))}}}},n.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var i=0;e>i;i++){var r=t[i];this.events[r.frame]=r.name}}}},r(n,"mcData",function(){return this.$mcData},function(t){this.setMCData(t)}),n.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},i}(t.HashObject);t.MovieClipData=e,t.registerClass(e,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i){e.call(this),this.enableCache=!0,this.$mcDataCache={},this.$mcDataSet=t,this.setTexture(i)}__extends(i,e);var r=__define,s=i,n=s.prototype;return n.clearCache=function(){this.$mcDataCache={}},n.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var i=this.findFromCache(e,this.$mcDataCache);return i||(i=new t.MovieClipData,this.fillData(e,i,this.$mcDataCache)),i},n.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},n.fillData=function(t,e,i){if(this.$mcDataSet){var r=this.$mcDataSet.mc[t];r&&(e.$init(r,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(i[t]=e))}},r(n,"mcDataSet",function(){return this.$mcDataSet},function(t){this.$mcDataSet=t}),r(n,"texture",void 0,function(t){this.setTexture(t)}),r(n,"spriteSheet",function(){return this.$spriteSheet}),n.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},i}(t.EventDispatcher);t.MovieClipDataFactory=e,t.registerClass(e,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,r,s){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===s&&(s=null),e.call(this,t,i,r),this.frameLabel=null,this.frameLabel=s}__extends(i,e);var r=(__define,i);r.prototype;return i.dispatchMovieClipEvent=function(e,r,s){void 0===s&&(s=null);var n=t.Event.create(i,r);n.frameLabel=s;var o=e.dispatchEvent(n);return t.Event.release(n),o},i.FRAME_LABEL="frame_label",i}(t.Event);t.MovieClipEvent=e,t.registerClass(e,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}var i=(__define,e);i.prototype;return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),e}();t.ScrollEase=e,t.registerClass(e,"egret.ScrollEase");var i=function(e){function i(t,i,r){e.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,i,r)}__extends(i,e);var r=(__define,i),s=r.prototype;return i.get=function(t,e,r,s){return void 0===e&&(e=null),void 0===r&&(r=null),void 0===s&&(s=!1),s&&i.removeTweens(t),new i(t,e,r)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,r=e.length-1;r>=0;r--)e[r]._target==t&&(e[r].paused=!0,e.splice(r,1));t.tween_count=0}},i.tick=function(t,e){void 0===e&&(e=!1);var r=t-i._lastTime;i._lastTime=t;for(var s=i._tweens.concat(),n=s.length-1;n>=0;n--){var o=s[n];e&&!o.ignoreGlobalPause||o.paused||o.tick(o._useTicks?1:r)}return!1},i._register=function(e,r){var s=e._target,n=i._tweens;if(r)s&&(s.tween_count=s.tween_count>0?s.tween_count+1:1),n.push(e),i._inited||(i._lastTime=t.getTimer(),t.sys.$ticker.$startTick(i.tick,null),i._inited=!0);else{s&&s.tween_count--;for(var o=n.length;o--;)if(n[o]==e)return void n.splice(o,1)}},s.initialize=function(t,e,r){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},s.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,r=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,r=!0)),i==this._prevPos)return r;var s=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var n=0,o=this._steps.length;o>n&&!(this._steps[n].t>i);n++);var a=this._steps[n-1];this._updateTargetProps(a,(this._stepPosition=i-a.t)/a.d)}return r&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&s>i?(s!=this.duration&&this._runActions(s,this.duration),this._runActions(0,i,!0)):this._runActions(s,i)),this.dispatchEventWith("change"),r},s._runActions=function(t,e,i){void 0===i&&(i=!1);var r=t,s=e,n=-1,o=this._actions.length,a=1;for(t>e&&(r=e,s=t,n=o,o=a=-1);(n+=a)!=o;){var h=this._actions[n],l=h.t;(l==s||l>r&&s>l||i&&l==t)&&h.f.apply(h.o,h.p)}},s._updateTargetProps=function(t,e){var r,s,n,o,a,h;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),r=t.p0,s=t.p1}else this.passive=!1,r=s=this._curQueueProps;for(var l in this._initQueueProps){null==(o=r[l])&&(r[l]=o=this._initQueueProps[l]),null==(a=s[l])&&(s[l]=a=o),n=o==a||0==e||1==e||"number"!=typeof o?1==e?a:o:o+(a-o)*e;var c=!1;if(h=i._plugins[l])for(var u=0,_=h.length;_>u;u++){var p=h[u].tween(this,l,n,r,s,e,!!t&&r==s,!t);p==i.IGNORE?c=!0:n=p}c||(this._target[l]=n)}},s.setPaused=function(t){return this.paused=t,i._register(this,!t),this},s._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},s._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},s._appendQueueProps=function(t){var e,r,s,n,o;for(var a in t)if(void 0===this._initQueueProps[a]){if(r=this._target[a],e=i._plugins[a])for(s=0,n=e.length;n>s;s++)r=e[s].init(this,a,r);this._initQueueProps[a]=this._curQueueProps[a]=void 0===r?null:r}else r=this._curQueueProps[a];for(var a in t){if(r=this._curQueueProps[a],e=i._plugins[a])for(o=o||{},s=0,n=e.length;n>s;s++)e[s].step&&e[s].step(this,a,r,t[a],o);this._curQueueProps[a]=t[a]}return o&&this._appendQueueProps(o),this._curQueueProps},s._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},s.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},s.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i?i:[],o:e?e:this._target})},s.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.ScrollTween=i,t.registerClass(i,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.scrollBeginThreshold=10,this.scrollSpeed=1,this._content=null,this.delayTouchBeginEvent=null,this.touchBeginTimer=null,this.touchEnabled=!0,this._ScrV_Props_=new t.ScrollViewProperties,i&&this.setContent(i)}__extends(i,e);var r=__define,s=i,n=s.prototype;return r(n,"bounces",function(){return this._ScrV_Props_._bounces},function(t){this._ScrV_Props_._bounces=!!t}),n.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},n.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},r(n,"verticalScrollPolicy",function(){return this._ScrV_Props_._verticalScrollPolicy},function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)}),r(n,"horizontalScrollPolicy",function(){return this._ScrV_Props_._horizontalScrollPolicy},function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)}),r(n,"scrollLeft",function(){return this._ScrV_Props_._scrollLeft},function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())}),r(n,"scrollTop",function(){return this._ScrV_Props_._scrollTop},function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())}),n.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),(!i||0!=t||0!=e)&&(i||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var r=this._ScrV_Props_._scrollTop,s=this._ScrV_Props_._scrollLeft;if(i){var n=this.getMaxScrollLeft(),o=this.getMaxScrollTop();(0>=r||r>=o)&&(t/=2),(0>=s||s>=n)&&(e/=2);var a=r+t,h=s+e,l=this._ScrV_Props_._bounces;l||((0>=a||a>=o)&&(a=Math.max(0,Math.min(a,o))),(0>=h||h>=n)&&(h=Math.max(0,Math.min(h,n)))),this._ScrV_Props_._scrollTop=a,this._ScrV_Props_._scrollLeft=h}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},n._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,r=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,r>i?r-i/2:i/2)}if(e){var s=this.width,n=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-s)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,n>s?n-s/2:s/2)}},n.$setWidth=function(t){if(this.$getExplicitWidth()==t)return!1;var i=e.prototype.$setWidth.call(this,t);return this._updateContentPosition(),i},n.$setHeight=function(t){if(this.$getExplicitHeight()==t)return!1;e.prototype.$setHeight.call(this,t);return this._updateContentPosition(),!0},n._updateContentPosition=function(){var e=this.height,i=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},n._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var i=this._ScrV_Props_._verticalScrollPolicy,r=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=r,e||r},n.__checkScrollPolicy=function(t,e,i){return"on"==t?!0:"off"==t?!1:e>i},n._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},n._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},n._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var i=this._checkScrollPolicy();i&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},n._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var r=e.target;r!=this;){if("_checkScrollPolicy"in r&&(i=r._checkScrollPolicy()))return;r=r.parent}e.stopPropagation();var s=this.cloneTouchEvent(e);this.delayTouchBeginEvent=s,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},n._onTouchEndCapture=function(e){var i=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var r=this.cloneTouchEvent(e);t.callLater(function(){i.stage&&i.dispatchPropagationEvent(r)},this)}},n._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},n.dispatchPropagationEvent=function(e){for(var i=e.$target,r=this.$getPropagationList(i),s=r.length,n=.5*r.length,o=-1,a=0;s>a;a++)if(r[a]===this._content){o=a;break}r.splice(0,o+1),n-=o+1,this.$dispatchPropagationEvent(e,r,n),t.Event.release(e)},n._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y,r=Math.sqrt(e*e+i*i);if(r<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var s=this._getPointChange(t);this.setScrollPosition(s.y,s.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},n._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},n._onEnterFrame=function(e){var i=t.getTimer();i-this._ScrV_Props_._lastTouchTime>100&&i-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},n._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},n._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},n._calcVelocitys=function(e){var i=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=i);var r=this._getPointChange(e),s=i-this._ScrV_Props_._lastTouchTime;r.x/=s,r.y/=s,this._ScrV_Props_._velocitys.push(r),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},n._getContentWidth=function(){return this._content.$getExplicitWidth()||this._content.width},n._getContentHeight=function(){return this._content.$getExplicitHeight()||this._content.height},n.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},n.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},n._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,r=0;r<this._ScrV_Props_._velocitys.length;r++){var s=this._ScrV_Props_._velocitys[r],n=i.weight[r];t.x+=s.x*n,t.y+=s.y*n,e+=n}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var o=t.x/e*this.scrollSpeed,a=t.y/e*this.scrollSpeed,h=Math.abs(o),l=Math.abs(a),c=this.getMaxScrollLeft(),u=this.getMaxScrollTop(),_=h>.02?this.getAnimationDatas(o,this._ScrV_Props_._scrollLeft,c):{position:this._ScrV_Props_._scrollLeft,duration:1},p=l>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollTop,u):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(_.position,_.duration),this.setScrollTop(p.position,p.duration)}},n.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},n._onScrollStarted=function(){},n._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},n.setScrollTop=function(e,i){void 0===i&&(i=0);var r=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return void(this.scrollTop=r);0==this._ScrV_Props_._bounces&&(e=r);var s=t.ScrollTween.get(this).to({scrollTop:e},i,t.ScrollEase.quartOut);r!=e&&s.to({scrollTop:r},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=s,s.call(this.onTweenFinished,this,[s]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},n.setScrollLeft=function(e,i){void 0===i&&(i=0);var r=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return void(this.scrollLeft=r);0==this._ScrV_Props_._bounces&&(e=r);var s=t.ScrollTween.get(this).to({scrollLeft:e},i,t.ScrollEase.quartOut);r!=e&&s.to({scrollLeft:r},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=s,s.call(this.onTweenFinished,this,[s]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},n.getAnimationDatas=function(t,e,i){var r=Math.abs(t),s=.95,n=0,o=.998,a=.02,h=e+500*t;if(0>h||h>i)for(h=e;Math.abs(t)!=1/0&&Math.abs(t)>a;)h+=t,t*=0>h||h>i?o*s:o,n++;else n=500*-Math.log(a/r);var l={position:Math.min(i+50,Math.max(h,-50)),duration:n};return l},n.cloneTouchEvent=function(e){var i=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i.$stageX=e.stageX,i.$stageY=e.stageY,i.touchDown=e.touchDown,i.$isDefaultPrevented=!1,i.$target=e.target,i},n.throwNotSupportedError=function(){t.$error(1023)},n.addChild=function(t){return this.throwNotSupportedError(),null},n.addChildAt=function(t,e){return this.throwNotSupportedError(),null},n.removeChild=function(t){return this.throwNotSupportedError(),null},n.removeChildAt=function(t){return this.throwNotSupportedError(),null},n.setChildIndex=function(t,e){this.throwNotSupportedError()},n.swapChildren=function(t,e){this.throwNotSupportedError()},n.swapChildrenAt=function(t,e){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,t.registerClass(e,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}var i=(__define,e);i.prototype;return e}();t.ScrollViewProperties=e,t.registerClass(e,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){function e(e){var i=e.url;return-1==i.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(i=i+"?"+e.data.toString()),i}t.$getUrl=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.dataFormat=t.URLLoaderDataFormat.TEXT,this.data=null,this._request=null,this._status=-1,i&&this.load(i)}__extends(i,e);var r=(__define,i),s=r.prototype;return s.load=function(e){this._request=e,this.data=null,t.NetContext.getNetContext().proceed(this)},s.__recycle=function(){this._request=null,this.data=null},i}(t.EventDispatcher);t.URLLoader=e,t.registerClass(e,"egret.URLLoader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,t.registerClass(e,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.data=null,this.method=t.URLRequestMethod.GET,this.url="",this.requestHeaders=[],this.url=i}__extends(i,e);var r=(__define,i);r.prototype;return i}(t.HashObject);t.URLRequest=e,t.registerClass(e,"egret.URLRequest")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.name="",this.value="",this.name=t,this.value=e}var e=(__define,t);e.prototype;return t}();t.URLRequestHeader=e,t.registerClass(e,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,t.registerClass(e,"egret.URLRequestMethod")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.variables=null,null!==e&&this.decode(e)}__extends(e,t);var i=(__define,e),r=i.prototype;return r.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);){var r=decodeURIComponent(e[1]),s=decodeURIComponent(e[2]);if(r in this.variables!=0){var n=this.variables[r];n instanceof Array?n.push(s):this.variables[r]=[n,s]}else this.variables[r]=s}},r.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var i in t)e.push(this.encodeValue(i,t[i]));return e.join("&")},r.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},r.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},e}(t.HashObject);t.URLVariables=e,t.registerClass(e,"egret.URLVariables")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this._timeScale=1,this._paused=!1,this._callIndex=-1,this._lastTime=0,this.callBackList=[],null!=i.instance,t.sys.$ticker.$startTick(this.update,this),this._lastTime=t.getTimer()}__extends(i,e);var r=(__define,i),s=r.prototype;return s.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var i=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var r=this._callList[this._callIndex];r.listener.call(r.thisObject,i)}return this._callIndex=-1,this._callList=null,!1},s.register=function(t,e,i){void 0===i&&(i=0),this.$insertEventBin(this.callBackList,"",t,e,!1,i,!1)},s.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},s.setTimeScale=function(t){this._timeScale=t},s.getTimeScale=function(){return this._timeScale},s.pause=function(){this._paused=!0},s.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(t.EventDispatcher);t.Ticker=e,t.registerClass(e,"egret.Ticker")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);var r=__define,s=i,n=s.prototype;return r(n,"stage",function(){return t.sys.$TempStage}),r(i,"runtimeType",function(){return t.$warn(1041),i._runtimeType
}),n.run=function(){},r(i,"instance",function(){return null==i._instance&&(i._instance=new i),i._instance}),i.deviceType=null,i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i.RUNTIME_HTML5="runtimeHtml5",i.RUNTIME_NATIVE="runtimeNative",i}(t.EventDispatcher);t.MainContext=e,t.registerClass(e,"egret.MainContext")}(egret||(egret={}));var testDeviceType1=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType1=function(){return this.navigator?!0:!1};egret.MainContext.deviceType=testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext._runtimeType=testRuntimeType1()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType1,delete testRuntimeType1;var egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=300),e.call(this),this.objectPool=[],this._length=0,1>t&&(t=1),this.autoDisposeTime=t,this.frameCount=0}__extends(i,e);var r=__define,s=i,n=s.prototype;return i.$init=function(){t.sys.$ticker.$startTick(i.onUpdate,i)},i.onUpdate=function(t){for(var e=i._callBackList,r=e.length-1;r>=0;r--)e[r].$checkFrame();return!1},n.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},r(n,"length",function(){return this._length}),n.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,i._callBackList.push(this)))},n.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},n.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=i._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},i._callBackList=[],i}(t.HashObject);t.Recycler=e,t.registerClass(e,"egret.Recycler"),e.$init()}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],c=3;c<arguments.length;c++)l[c-3]=arguments[c];var u={listener:e,thisObject:i,delay:h,originDelay:h,params:l};return o++,1==o&&(a=t.getTimer(),t.sys.$ticker.$startTick(r,null)),n++,s[n]=u,n}function i(e){s[e]&&(o--,delete s[e],0==o&&t.sys.$ticker.$stopTick(r,null))}function r(t){var e=t-a;a=t;for(var i in s){var r=s[i];r.delay-=e,r.delay<=0&&(r.delay=r.originDelay,r.listener.apply(r.thisObject,r.params))}return!1}var s={},n=0,o=0,a=0;t.setInterval=e,t.clearInterval=i}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],c=3;c<arguments.length;c++)l[c-3]=arguments[c];var u={listener:e,thisObject:i,delay:h,params:l};return o++,1==o&&t.sys.$ticker&&(a=t.getTimer(),t.sys.$ticker.$startTick(r,null)),n++,s[n]=u,n}function i(e){s[e]&&(o--,delete s[e],0==o&&t.sys.$ticker&&t.sys.$ticker.$stopTick(r,null))}function r(t){var e=t-a;a=t;for(var r in s){var n=r,o=s[n];o.delay-=e,o.delay<=0&&(o.listener.apply(o.thisObject,o.params),i(n))}return!1}var s={},n=0,o=0,a=0;t.setTimeout=e,t.clearTimeout=i}(egret||(egret={}));

 //libs/modules/game/game.web.min.js
var egret;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this)}__extends(n,t);var r=(__define,n),a=r.prototype;return a.proceed=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(){switch(o(),t.dataFormat){case e.URLLoaderDataFormat.VARIABLES:t.data=new e.URLVariables(d.response);break;default:t.data=d.response}window.setTimeout(function(){e.Event.dispatchEvent(t,e.Event.COMPLETE)},0)}function o(){d.removeEventListener(e.Event.COMPLETE,a,i),d.removeEventListener(e.IOErrorEvent.IO_ERROR,r,i),d.removeEventListener(e.ProgressEvent.PROGRESS,n,i)}var i=this;if(t.dataFormat==e.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(t);if(t.dataFormat==e.URLLoaderDataFormat.SOUND)return void this.loadSound(t);var s=t._request,E=i.getVirtualUrl(e.$getUrl(s)),d=new e.HttpRequest;if(d.addEventListener(e.Event.COMPLETE,a,this),d.addEventListener(e.IOErrorEvent.IO_ERROR,r,this),d.addEventListener(e.ProgressEvent.PROGRESS,n,this),d.open(E,s.method),d.responseType=this.getResponseType(t.dataFormat),s.method!=e.URLRequestMethod.GET&&s.data)if(s.data instanceof e.URLVariables){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var v=s.data;d.send(v.toString())}else d.setRequestHeader("Content-Type","multipart/form-data"),d.send(s.data);else d.send()},a.getResponseType=function(t){switch(t){case e.URLLoaderDataFormat.TEXT:case e.URLLoaderDataFormat.VARIABLES:return e.URLLoaderDataFormat.TEXT;case e.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return t}},a.loadSound=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(n){o(),t.data=E,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},0)}function o(){E.removeEventListener(e.Event.COMPLETE,a,i),E.removeEventListener(e.IOErrorEvent.IO_ERROR,r,i),E.removeEventListener(e.ProgressEvent.PROGRESS,n,i)}var i=this,s=this.getVirtualUrl(t._request.url),E=new e.Sound;E.addEventListener(e.Event.COMPLETE,a,i),E.addEventListener(e.IOErrorEvent.IO_ERROR,r,i),E.addEventListener(e.ProgressEvent.PROGRESS,n,i),E.load(s)},a.loadTexture=function(t){function n(e){t.dispatchEvent(e)}function r(e){o(),t.dispatchEvent(e)}function a(n){o();var r=E.data;r.setAttribute("bitmapSrc",s);var a=new e.Texture;a._setBitmapData(r),t.data=a,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},i)}function o(){E.removeEventListener(e.Event.COMPLETE,a,i),E.removeEventListener(e.IOErrorEvent.IO_ERROR,r,i),E.removeEventListener(e.ProgressEvent.PROGRESS,n,i)}var i=this,s=this.getVirtualUrl(t._request.url),E=new e.ImageLoader;E.addEventListener(e.Event.COMPLETE,a,i),E.addEventListener(e.IOErrorEvent.IO_ERROR,r,i),E.addEventListener(e.ProgressEvent.PROGRESS,n,i),E.load(s)},a.getChangeList=function(){return[]},a.getVirtualUrl=function(e){return e},n.getNetContext=function(){return null==n._instance&&(n._instance=new n),n._instance},n}(e.HashObject);t.HTML5NetContext=n,e.registerClass(n,"egret.web.HTML5NetContext",["egret.NetContext"]),e.NetContext=n}(t=e.web||(e.web={}))}(egret||(egret={}));

 //libs/modules/socket/socket.min.js
var egret;!function(t){}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(i,o){void 0===i&&(i=""),void 0===o&&(o=0),e.call(this),this._writeMessage="",this._readMessage="",this._connected=!1,this.connectCount=0,this._isReadySend=!1,this._bytesWrite=!1,this._type=n.TYPE_STRING,this._connected=!1,this._writeMessage="",this._readMessage="",this.socket=new t.ISocket,this.socket.addCallBacks(this.onConnect,this.onClose,this.onSocketData,this.onError,this)}__extends(n,e);var i=__define,o=n,s=o.prototype;return s.connect=function(t,e){this.connectCount++,this.socket.connect(t,e)},s.connectByUrl=function(t){this.connectCount++,this.socket.connectByUrl(t)},s.close=function(){this.socket.close()},s.onConnect=function(){this.connectCount--,0==this.connectCount&&(this._connected=!0,this.dispatchEventWith(t.Event.CONNECT))},s.onClose=function(){this.connectCount--,this._connected=!1,this.dispatchEventWith(t.Event.CLOSE)},s.onError=function(){this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},s.onSocketData=function(e){"string"==typeof e?this._readMessage+=e:this._readByte._writeUint8Array(new Uint8Array(e)),t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.SOCKET_DATA)},s.flush=function(){return this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),void(this._isReadySend=!1)):void t.$warn(3101)},s.writeUTF=function(e){return this._connected?(this._type==n.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(e)):this._writeMessage+=e,void this.flush()):void t.$warn(3101)},s.readUTF=function(){var t;return this._type==n.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},s.writeBytes=function(e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(e,n,i),void this.flush()):void t.$warn(3102):void t.$warn(3101)},s.readBytes=function(e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(e,n,i),void this._readByte.clear()):void t.$warn(3102)},i(s,"connected",function(){return this._connected}),i(s,"type",function(){return this._type},function(e){this._type=e,e!=n.TYPE_BINARY||this._writeByte||(this._readByte=new t.ByteArray,this._writeByte=new t.ByteArray)}),n.TYPE_STRING="webSocketTypeString",n.TYPE_BINARY="webSocketTypeBinary",n}(t.EventDispatcher);t.WebSocket=e,t.registerClass(e,"egret.WebSocket")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(){function t(){this.host="",this.port=0}var e=(__define,t),n=e.prototype;return n.addCallBacks=function(t,e,n,i,o){this.onConnect=t,this.onClose=e,this.onSocketData=n,this.onError=i,this.thisObject=o},n.connect=function(t,e){this.host=t,this.port=e;var n="ws://"+this.host+":"+this.port;this.socket=new __global.egret_native.WebSocket(n),this._bindEvent()},n.connectByUrl=function(t){this.socket=new __global.egret_native.WebSocket(t),this._bindEvent()},n._bindEvent=function(){var t=this,e=this.socket;e.onOpen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onClose=function(){t.onClose&&t.onClose.call(t.thisObject)},e.onError=function(e){t.onError&&t.onError.call(t.thisObject)},e.onMessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e)}},n.send=function(t){this.socket.send(t)},n.close=function(){this.socket.close()},t}();e.NativeSocket=n,t.registerClass(n,"egret.native.NativeSocket",["egret.ISocket"]),t.Capabilities.runtimeType==t.RuntimeType.NATIVE&&(t.ISocket=n)}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(){function e(){this.host="",this.port=0,window.WebSocket||t.$error(3100)}var n=(__define,e),i=n.prototype;return i.addCallBacks=function(t,e,n,i,o){this.onConnect=t,this.onClose=e,this.onSocketData=n,this.onError=i,this.thisObject=o},i.connect=function(t,e){this.host=t,this.port=e;var n="ws://"+this.host+":"+this.port;this.socket=new window.WebSocket(n),this.socket.binaryType="arraybuffer",this._bindEvent()},i.connectByUrl=function(t){this.socket=new window.WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},i._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},i.send=function(t){this.socket.send(t)},i.close=function(){this.socket.close()},e}();e.HTML5WebSocket=n,t.registerClass(n,"egret.web.HTML5WebSocket",["egret.ISocket"]),t.Capabilities.runtimeType==t.RuntimeType.WEB&&(t.ISocket=n)}(e=t.web||(t.web={}))}(egret||(egret={}));

 //libs/modules/dragonBones/dragonBones.min.js
var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},dragonBones;!function(t){var e=function(){function t(){this.hashCode=t._hashCode++}return t._returnObject=function(e){var i=e.constructor,n=String(i),a=null==t._maxCountMap[n]?t._defaultMaxCount:t._maxCountMap[n],r=t._poolsMap[n]=t._poolsMap[n]||[];if(r.length<a){if(!(r.indexOf(e)<0))throw new Error;r.push(e)}},t.toString=function(){throw new Error},t.setMaxCount=function(e,i){if((i<0||i!=i)&&(i=0),e){var n=String(e);t._maxCountMap[n]=i;var a=t._poolsMap[n];a&&a.length>i&&(a.length=i)}else{t._defaultMaxCount=i;for(var n in t._poolsMap)if(null!=t._maxCountMap[n]){var a=t._poolsMap[n];a.length>i&&(a.length=i)}}},t.clearPool=function(e){if(void 0===e&&(e=null),e){var i=t._poolsMap[String(e)];i&&i.length&&(i.length=0)}else for(var n in t._poolsMap){var i=t._poolsMap[n];i.length=0}},t.borrowObject=function(e){var i=t._poolsMap[String(e)];if(i&&i.length)return i.pop();var n=new e;return n._onClear(),n},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=5e3,t._maxCountMap={},t._poolsMap={},t}();t.BaseObject=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(){}return t.hasArmature=function(e){return t._armatures.indexOf(e)>=0},t.addArmature=function(e){e&&t._armatures.indexOf(e)<0&&t._armatures.push(e)},t.removeArmature=function(e){if(e){var i=t._armatures.indexOf(e);i>=0&&t._armatures.splice(i,1)}},t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.ANGLE_TO_RADIAN=Math.PI/180,t.RADIAN_TO_ANGLE=180/Math.PI,t.SECOND_TO_MILLISECOND=1e3,t.NO_TWEEN=100,t.VERSION="4.7.2",t.DEBUG=!1,t.DEBUG_DRAW=!1,t._armatures=[],t}();t.DragonBones=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.type=null,this.name=null,this.data=null,this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.userData=null},Object.defineProperty(e.prototype,"animationName",{get:function(){return this.animationState.name},enumerable:!0,configurable:!0}),e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e._soundEventManager=null,e}(t.BaseObject);t.EventObject=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();t.Point=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();t.Rectangle=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(t,e,i,n,a,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=1),void 0===r&&(r=1),this.x=t,this.y=e,this.skewX=i,this.skewY=n,this.scaleX=a,this.scaleY=r}return t.normalizeRadian=function(t){return t=(t+Math.PI)%(2*Math.PI),t+=t>0?-Math.PI:Math.PI},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skewX/Math.PI+" skewY:"+180*this.skewY/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skewX=t.skewX,this.skewY=t.skewY,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.clone=function(){var e=new t;return e.copyFrom(this),e},t.prototype.identity=function(){return this.x=this.y=this.skewX=this.skewY=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skewX+=t.skewX,this.skewY+=t.skewY,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(e){return this.x-=e.x,this.y-=e.y,this.skewX=t.normalizeRadian(this.skewX-e.skewX),this.skewY=t.normalizeRadian(this.skewY-e.skewY),this.scaleX/=e.scaleX,this.scaleY/=e.scaleY,this},t.prototype.fromMatrix=function(t){var e=.25*Math.PI,i=this.scaleX,n=this.scaleY;return this.x=t.tx,this.y=t.ty,this.skewX=Math.atan(-t.c/t.d),this.skewY=Math.atan(t.b/t.a),this.skewX!=this.skewX&&(this.skewX=0),this.skewY!=this.skewY&&(this.skewY=0),this.scaleY=this.skewX>-e&&this.skewX<e?t.d/Math.cos(this.skewX):-t.c/Math.sin(this.skewX),this.scaleX=this.skewY>-e&&this.skewY<e?t.a/Math.cos(this.skewY):t.b/Math.sin(this.skewY),i>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.skewY=this.skewY-Math.PI),n>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,this.skewX=this.skewX-Math.PI),this},t.prototype.toMatrix=function(t){return t.a=this.scaleX*Math.cos(this.skewY),t.b=this.scaleX*Math.sin(this.skewY),t.c=-this.scaleY*Math.sin(this.skewX),t.d=this.scaleY*Math.cos(this.skewX),t.tx=this.x,t.ty=this.y,this},Object.defineProperty(t.prototype,"rotation",{get:function(){return this.skewY},set:function(t){var e=t-this.skewY;this.skewX+=e,this.skewY+=e},enumerable:!0,configurable:!0}),t}();t.Transform=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(t,e,i,n,a,r,s,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===a&&(a=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=i,this.blueMultiplier=n,this.alphaOffset=a,this.redOffset=r,this.greenOffset=s,this.blueOffset=o}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.redOffset=t.redOffset,this.greenOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();t.ColorTransform=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function t(t,e,i,n,a,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===a&&(a=0),void 0===r&&(r=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=a,this.ty=r}return t.prototype.copyFrom=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.identity=function(){this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0},t.prototype.concat=function(t){var e=this.a,i=this.b,n=this.c,a=this.d,r=this.tx,s=this.ty,o=t.a,l=t.b,h=t.c,_=t.d,u=t.tx,f=t.ty;this.a=e*o+i*h,this.b=e*l+i*_,this.c=n*o+a*h,this.d=n*l+a*_,this.tx=o*r+h*s+u,this.ty=_*s+l*r+f},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,a=this.tx,r=this.ty,s=t*n-e*i;this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*r-n*a)/s,this.ty=-(t*r-e*a)/s},t.prototype.transformPoint=function(t,e,i,n){void 0===n&&(n=!1),i.x=this.a*t+this.c*e,i.y=this.b*t+this.d*e,n||(i.x+=this.tx,i.y+=this.ty)},t}();t.Matrix=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this),this.armatures={},this._armatureNames=[]}return __extends(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){this.autoSearch=!1,this.frameRate=0,this.name=null,this.userData=null;for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];this._armatureNames.length&&(this._armatureNames.length=0)},e.prototype.getArmature=function(t){return this.armatures[t]},e.prototype.addArmature=function(t){if(!t||!t.name||this.armatures[t.name])throw new Error;this.armatures[t.name]=t,this._armatureNames.push(t.name),t.parent=this},Object.defineProperty(e.prototype,"armatureNames",{get:function(){return this._armatureNames},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.returnToPool()},e}(t.BaseObject);t.DragonBonesData=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){this.type=0,this.data=null,this.bone=null,this.slot=null},e}(t.BaseObject);t.ActionData=e;var i=function(t){function e(){t.call(this)}return __extends(e,t),e.toString=function(){return"[class dragonBones.EventData]"},e.prototype._onClear=function(){this.type=0,this.name=null,this.data=null,this.bone=null,this.slot=null},e}(t.BaseObject);t.EventData=i;var n=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._onClear=function(){this.position=0,this.duration=0,this.prev=null,this.next=null},e}(t.BaseObject);t.FrameData=n;var a=function(t){function e(){t.call(this)}return __extends(e,t),e.samplingCurve=function(t,e){if(0==t.length||0==e)return null;var i=e+2,n=1/i,a=new Array(2*(i-1));t.unshift(0,0),t.push(1,1);for(var r=0,s=0;s<i-1;++s){for(var o=n*(s+1);t[r+6]<o;)r+=6;var l=t[r],h=t[r+6],_=(o-l)/(h-l),u=1-_,f=u*u,m=_*_,c=u*f,p=3*_*f,d=3*u*m,g=_*m;a[2*s]=c*l+p*t[r+2]+d*t[r+4]+g*h,a[2*s+1]=c*t[r+1]+p*t[r+3]+d*t[r+5]+g*t[r+7]}return a},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.tweenEasing=0,this.curve=null},e}(n);t.TweenFrameData=a;var r=function(t){function e(){t.call(this),this.actions=[],this.events=[]}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationFrameData]"},e.prototype._onClear=function(){if(t.prototype._onClear.call(this),this.actions.length){for(var e=0,i=this.actions.length;e<i;++e)this.actions[e].returnToPool();this.actions.length=0}if(this.events.length){for(var e=0,i=this.events.length;e<i;++e)this.events[e].returnToPool();this.events.length=0}},e}(n);t.AnimationFrameData=r;var s=function(e){function i(){e.call(this),this.transform=new t.Transform}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneFrameData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.tweenScale=!1,this.tweenRotate=0,this.transform.identity()},i}(a);t.BoneFrameData=s;var o=function(e){function i(){e.call(this)}return __extends(i,e),i.generateColor=function(){return new t.ColorTransform},i.toString=function(){return"[class dragonBones.SlotFrameData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.displayIndex=0,this.zOrder=0,this.color=null},i.DEFAULT_COLOR=new t.ColorTransform,i}(a);t.SlotFrameData=o;var l=function(t){function e(){t.call(this),this.tweens=[],this.keys=[]}return __extends(e,t),e.toString=function(){return"[class dragonBones.ExtensionFrameData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0,this.tweens.length&&(this.tweens.length=0),this.keys.length&&(this.keys.length=0)},e}(a);t.ExtensionFrameData=l}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this),this.frames=[]}return __extends(e,t),e.prototype._onClear=function(){if(this.scale=1,this.offset=0,this.frames.length){for(var t=null,e=0,i=this.frames.length;e<i;++e){var n=this.frames[e];t&&n!=t&&t.returnToPool(),t=n}this.frames.length=0}},e}(t.BaseObject);t.TimelineData=e;var i=function(e){function i(){e.call(this),this.bone=null,this.originTransform=new t.Transform,this.cachedFrames=[]}return __extends(i,e),i.cacheFrame=function(e,i,n){var a=e[i]=new t.Matrix;return a.copyFrom(n),a},i.toString=function(){return"[class dragonBones.BoneTimelineData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.bone=null,this.originTransform.identity(),this.cachedFrames.length&&(this.cachedFrames.length=0)},i.prototype.cacheFrames=function(t){this.cachedFrames.length=0,this.cachedFrames.length=t},i}(e);t.BoneTimelineData=i;var n=function(e){function i(){e.call(this),this.slot=null,this.cachedFrames=[]}return __extends(i,e),i.cacheFrame=function(e,i,n){var a=e[i]=new t.Matrix;return a.copyFrom(n),a},i.toString=function(){return"[class dragonBones.SlotTimelineData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.slot=null,this.cachedFrames.length&&(this.cachedFrames.length=0)},i.prototype.cacheFrames=function(t){this.cachedFrames.length=0,this.cachedFrames.length=t},i}(e);t.SlotTimelineData=n;var a=function(t){function e(){t.call(this),this.displayIndex=0,this.skin=null,this.slot=null}return __extends(e,t),e.toString=function(){return"[class dragonBones.FFDTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.displayIndex=0,this.skin=null,this.slot=null},e}(e);t.FFDTimelineData=a}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this.aabb=new t.Rectangle,this.bones={},this.slots={},this.skins={},this.animations={},this.actions=[],this._sortedBones=[],this._sortedSlots=[],this._bonesChildren={}}return __extends(i,e),i._onSortSlots=function(t,e){return t.zOrder>e.zOrder?1:-1},i.toString=function(){return"[class dragonBones.ArmatureData]"},i.prototype._onClear=function(){this.frameRate=0,this.cacheFrameRate=0,this.type=0,this.name=null,this.parent=null,this.userData=null,this.aabb.clear();for(var t in this.bones)this.bones[t].returnToPool(),delete this.bones[t];for(var t in this.slots)this.slots[t].returnToPool(),delete this.slots[t];for(var t in this.skins)this.skins[t].returnToPool(),delete this.skins[t];for(var t in this.animations)this.animations[t].returnToPool(),delete this.animations[t];if(this.actions.length){for(var t=0,e=this.actions.length;t<e;++t)this.actions[t].returnToPool();this.actions.length=0}this._boneDirty=!1,this._slotDirty=!1,this._defaultSkin=null,this._defaultAnimation=null,this._sortedBones.length&&(this._sortedBones.length=0),this._sortedSlots.length&&(this._sortedSlots.length=0);for(var t in this._bonesChildren)delete this._bonesChildren[t]},i.prototype._sortBones=function(){var t=this._sortedBones.length;if(t){var e=this._sortedBones.concat(),i=0,n=0;for(this._sortedBones.length=0;n<t;){var a=e[i++];i>=t&&(i=0),this._sortedBones.indexOf(a)>=0||a.parent&&this._sortedBones.indexOf(a.parent)<0||a.ik&&this._sortedBones.indexOf(a.ik)<0||(a.ik&&a.chain>0&&a.chainIndex==a.chain?this._sortedBones.splice(this._sortedBones.indexOf(a.parent)+1,0,a):this._sortedBones.push(a),n++)}}},i.prototype._sortSlots=function(){this._sortedSlots.sort(i._onSortSlots)},i.prototype.cacheFrames=function(t){if(this.cacheFrameRate!=t){this.cacheFrameRate=t;var e=this.cacheFrameRate/this.frameRate;for(var i in this.animations)this.animations[i].cacheFrames(e)}},i.prototype.addBone=function(t,e){if(!t||!t.name||this.bones[t.name])throw new Error;if(e){var i=this.getBone(e);i?t.parent=i:(this._bonesChildren[e]=this._bonesChildren[e]||[]).push(t)}var n=this._bonesChildren[t.name];if(n){for(var a=0,r=n.length;a<r;++a)n[a].parent=t;delete this._bonesChildren[t.name]}this.bones[t.name]=t,this._sortedBones.push(t),this._boneDirty=!0},i.prototype.addSlot=function(t){if(!t||!t.name||this.slots[t.name])throw new Error;this.slots[t.name]=t,this._sortedSlots.push(t),this._slotDirty=!0},i.prototype.addSkin=function(t){if(!t||!t.name||this.skins[t.name])throw new Error;this.skins[t.name]=t,this._defaultSkin||(this._defaultSkin=t)},i.prototype.addAnimation=function(t){if(!t||!t.name||this.animations[t.name])throw new Error;this.animations[t.name]=t,this._defaultAnimation||(this._defaultAnimation=t)},i.prototype.getBone=function(t){return this.bones[t]},i.prototype.getSlot=function(t){return this.slots[t]},i.prototype.getSkin=function(t){return t?this.skins[t]:this._defaultSkin},i.prototype.getAnimation=function(t){return t?this.animations[t]:this._defaultAnimation},Object.defineProperty(i.prototype,"sortedBones",{get:function(){return this._boneDirty&&(this._boneDirty=!1,this._sortBones()),this._sortedBones},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortedSlots",{get:function(){return this._slotDirty&&(this._slotDirty=!1,this._sortSlots()),this._sortedSlots},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultSkin",{get:function(){return this._defaultSkin},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultAnimation",{get:function(){return this._defaultAnimation},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.ArmatureData=e;var i=function(e){function i(){e.call(this),this.transform=new t.Transform}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneData]"},i.prototype._onClear=function(){this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.bendPositive=!1,this.chain=0,this.chainIndex=0,this.weight=0,this.length=0,this.name=null,this.parent=null,this.ik=null,this.transform.identity()},i}(t.BaseObject);t.BoneData=i;var n=function(e){function i(){e.call(this),this.actions=[]}return __extends(i,e),i.generateColor=function(){return new t.ColorTransform},i.toString=function(){return"[class dragonBones.SlotData]"},i.prototype._onClear=function(){if(this.displayIndex=0,this.zOrder=0,this.blendMode=0,this.name=null,this.parent=null,this.color=null,this.actions.length){for(var t=0,e=this.actions.length;t<e;++t)this.actions[t].returnToPool();this.actions.length=0}},i.DEFAULT_COLOR=new t.ColorTransform,i}(t.BaseObject);t.SlotData=n;var a=function(t){function e(){t.call(this),this.name=null,this.slots={}}return __extends(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){this.name=null;for(var t in this.slots)this.slots[t].returnToPool(),delete this.slots[t]},e.prototype.addSlot=function(t){if(!t||!t.slot||this.slots[t.slot.name])throw new Error;this.slots[t.slot.name]=t},e.prototype.getSlot=function(t){return this.slots[t]},e}(t.BaseObject);t.SkinData=a;var r=function(t){function e(){t.call(this),this.displays=[]}return __extends(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayDataSet]"},e.prototype._onClear=function(){if(this.slot=null,this.displays.length){for(var t=0,e=this.displays.length;t<e;++t)this.displays[t].returnToPool();this.displays.length=0}},e}(t.BaseObject);t.SlotDisplayDataSet=r;var s=function(e){function i(){e.call(this),this.pivot=new t.Point,this.transform=new t.Transform}return __extends(i,e),i.toString=function(){return"[class dragonBones.DisplayData]"},i.prototype._onClear=function(){this.isRelativePivot=!1,this.type=0,this.name=null,this.texture=null,this.armature=null,this.mesh&&(this.mesh.returnToPool(),this.mesh=null),this.pivot.clear(),this.transform.identity()},i}(t.BaseObject);t.DisplayData=s;var o=function(e){function i(){e.call(this),this.slotPose=new t.Matrix,this.uvs=[],this.vertices=[],this.vertexIndices=[],this.boneIndices=[],this.weights=[],this.boneVertices=[],this.bones=[],this.inverseBindPose=[]}return __extends(i,e),i.toString=function(){return"[class dragonBones.MeshData]"},i.prototype._onClear=function(){this.skinned=!1,this.slotPose.identity(),this.uvs.length&&(this.uvs.length=0),this.vertices.length&&(this.vertices.length=0),this.vertexIndices.length&&(this.vertexIndices.length=0),this.boneIndices.length&&(this.boneIndices.length=0),this.weights.length&&(this.weights.length=0),this.boneVertices.length&&(this.boneVertices.length=0),this.bones.length&&(this.bones.length=0),this.inverseBindPose.length&&(this.inverseBindPose.length=0)},i}(t.BaseObject);t.MeshData=o}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this),this.boneTimelines={},this.slotTimelines={},this.ffdTimelines={},this.cachedFrames=[]}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.hasAsynchronyTimeline=!1,this.cacheTimeToFrameScale=0,this.position=0,this.duration=0,this.playTimes=0,this.fadeInTime=0,this.name=null,this.animation=null;for(var e in this.boneTimelines)this.boneTimelines[e].returnToPool(),delete this.boneTimelines[e];for(var e in this.slotTimelines)this.slotTimelines[e].returnToPool(),delete this.slotTimelines[e];for(var e in this.ffdTimelines){for(var i in this.ffdTimelines[e])for(var n in this.ffdTimelines[e][i])this.ffdTimelines[e][i][n].returnToPool();delete this.ffdTimelines[e]}this.cachedFrames.length&&(this.cachedFrames.length=0)},e.prototype.cacheFrames=function(t){if(!this.animation){var e=Math.max(Math.floor(this.frameCount*this.scale*t),1);this.cacheTimeToFrameScale=e/(this.duration+1e-6),this.cachedFrames.length=0,this.cachedFrames.length=e;for(var i in this.boneTimelines)this.boneTimelines[i].cacheFrames(e);for(var i in this.slotTimelines)this.slotTimelines[i].cacheFrames(e)}},e.prototype.addBoneTimeline=function(t){if(!t||!t.bone||this.boneTimelines[t.bone.name])throw new Error;this.boneTimelines[t.bone.name]=t},e.prototype.addSlotTimeline=function(t){if(!t||!t.slot||this.slotTimelines[t.slot.name])throw new Error;this.slotTimelines[t.slot.name]=t},e.prototype.addFFDTimeline=function(t){if(!(t&&t.skin&&t.slot))throw new Error;var e=this.ffdTimelines[t.skin.name]=this.ffdTimelines[t.skin.name]||{},i=e[t.slot.slot.name]=e[t.slot.slot.name]||{};if(i[t.displayIndex])throw new Error;i[t.displayIndex]=t},e.prototype.getBoneTimeline=function(t){return this.boneTimelines[t]},e.prototype.getSlotTimeline=function(t){return this.slotTimelines[t]},e.prototype.getFFDTimeline=function(t,e,i){var n=this.ffdTimelines[t];if(n){var a=n[e];if(a)return a[i]}return null},e}(t.TimelineData);t.AnimationData=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this._animations={},this._animationNames=[],this._animationStates=[]}return __extends(i,e),i._sortAnimationState=function(t,e){return t.layer>e.layer?1:-1},i.toString=function(){return"[class dragonBones.Animation]"},i.prototype._onClear=function(){this.timeScale=1,this._animationStateDirty=!1,this._timelineStateDirty=!1,this._armature=null,this._isPlaying=!1,this._time=0,this._lastAnimationState=null;for(var t in this._animations)delete this._animations[t];this._animationNames.length&&(this._animationNames.length=0);for(var t=0,e=this._animationStates.length;t<e;++t)this._animationStates[t].returnToPool();this._animationStates.length=0},i.prototype._fadeOut=function(t,e,i,n,a){var r=0,s=this._animationStates.length,o=null;switch(n){case 0:break;case 1:for(;r<s;++r)o=this._animationStates[r],o.layer==e&&o.fadeOut(t,a);break;case 2:for(;r<s;++r)o=this._animationStates[r],o.group==i&&o.fadeOut(t,a);break;case 4:for(;r<s;++r)o=this._animationStates[r],o.fadeOut(t,a);break;case 3:for(;r<s;++r)o=this._animationStates[r],o.layer==e&&o.group==i&&o.fadeOut(t,a)}},i.prototype._updateFFDTimelineStates=function(){for(var t=0,e=this._animationStates.length;t<e;++t)this._animationStates[t]._updateFFDTimelineStates()},i.prototype._advanceTime=function(t){var e=this;if(e._isPlaying){t<0&&(t=-t);var i=e._animationStates.length;if(1==i){var n=e._animationStates[0];n._isFadeOutComplete?(n.returnToPool(),e._animationStates.length=0,e._animationStateDirty=!0,e._lastAnimationState=null):(e._timelineStateDirty&&n._updateTimelineStates(),n._advanceTime(t,1,0))}else if(i>1)for(var a=e._animationStates[0]._layer,r=1,s=0,o=1,l=0,h=0;l<i;++l){var n=e._animationStates[l];n._isFadeOutComplete?(h++,n.returnToPool(),e._animationStateDirty=!0,e._lastAnimationState==n&&(l-h>=0?e._lastAnimationState=e._animationStates[l-h]:e._lastAnimationState=null)):(h>0&&(e._animationStates[l-h]=n),a!=n._layer&&(a=n._layer,s>=r?r=0:r-=s,s=0),e._timelineStateDirty&&n._updateTimelineStates(),n._advanceTime(t,r,o),0!=n._weightResult&&(s+=n._weightResult,o++)),l==i-1&&h>0&&(e._animationStates.length-=h)}e._timelineStateDirty=!1}},i.prototype.reset=function(){this._isPlaying=!1,this._lastAnimationState=null;for(var t=0,e=this._animationStates.length;t<e;++t)this._animationStates[t].returnToPool();this._animationStates.length=0},i.prototype.stop=function(t){if(void 0===t&&(t=null),t){var e=this.getState(t);e&&e.stop()}else this._isPlaying=!1},i.prototype.play=function(t,e){void 0===t&&(t=null),void 0===e&&(e=-1);var i=null;if(t)i=this.fadeIn(t,0,e,0,null,4);else if(this._lastAnimationState)this._isPlaying?i=this.fadeIn(this._lastAnimationState.name,0,e,0,null,4):this._isPlaying=!0;else{var n=this._armature.armatureData.defaultAnimation;n&&(i=this.fadeIn(n.name,0,e,0,null,4))}return i},i.prototype.fadeIn=function(e,n,a,r,s,o,l,h,_,u){void 0===n&&(n=-1),void 0===a&&(a=-1),void 0===r&&(r=0),void 0===s&&(s=null),void 0===o&&(o=3),void 0===l&&(l=!1),void 0===h&&(h=!0),void 0===_&&(_=!0),void 0===u&&(u=!0);var f=this._animations[e];if(!f)return this._time=0,console.warn("No animation."," Armature: "+this._armature.name," Animation: "+e),null;this._isPlaying=!0,(n!=n||n<0)&&(n=this._lastAnimationState?f.fadeInTime:0),a<0&&(a=f.playTimes),this._fadeOut(n,r,s,o,_),this._lastAnimationState=t.BaseObject.borrowObject(t.AnimationState),this._lastAnimationState._layer=r,this._lastAnimationState._group=s,this._lastAnimationState.additiveBlending=l,this._lastAnimationState.displayControl=h,this._lastAnimationState._fadeIn(this._armature,f.animation||f,e,a,f.position,f.duration,this._time,1/f.scale,n,u),this._animationStates.push(this._lastAnimationState),this._animationStateDirty=!0,this._time=0,this._animationStates.length>1&&this._animationStates.sort(i._sortAnimationState);for(var m=this._armature.getSlots(),c=0,p=m.length;c<p;++c){var d=m[c];if(d.inheritAnimation){var g=d.childArmature;g&&g.animation.hasAnimation(e)&&!g.animation.getState(e)&&g.animation.fadeIn(e)}}return this._armature.advanceTime(0),this._lastAnimationState},i.prototype.gotoAndPlayByTime=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._time=e,this.fadeIn(t,0,i,0,null,4)},i.prototype.gotoAndPlayByFrame=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var n=this._animations[t];return n&&(this._time=n.duration*e/n.frameCount),this.fadeIn(t,0,i,0,null,4)},i.prototype.gotoAndPlayByProgress=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var n=this._animations[t];return n&&(this._time=n.duration*Math.max(e,0)),this.fadeIn(t,0,i,0,null,4)},i.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByTime(t,e,1);return i&&(this._isPlaying=!1,i.stop()),i},i.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByFrame(t,e,1);return i&&(this._isPlaying=!1,i.stop()),i},i.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByProgress(t,e,1);return i&&(this._isPlaying=!1,i.stop()),i},i.prototype.getState=function(t){for(var e=0,i=this._animationStates.length;e<i;++e){var n=this._animationStates[e];if(n.name==t)return n}return null},i.prototype.hasAnimation=function(t){return null!=this._animations[t]},Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCompleted",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isCompleted)return!1;for(var t=0,e=this._animationStates.length;t<e;++t)if(!this._animationStates[t].isCompleted)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!=t){for(var e in this._animations)delete this._animations[e];if(this._animationNames.length=0,t)for(var e in t)this._animations[e]=t[e],this._animationNames.push(e)}},enumerable:!0,configurable:!0}),i.prototype.gotoAndPlay=function(t,e,i,n,a,r,s,o,l){void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===a&&(a=0),void 0===r&&(r=null),void 0===s&&(s=3),void 0===o&&(o=!0),void 0===l&&(l=!0);var h=this.fadeIn(t,e,n,a,r,s,!1,!0,o,l);return h&&i&&i>0&&(h.timeScale=h.totalTime/i),h},i.prototype.gotoAndStop=function(t,e){return void 0===e&&(e=0),this.gotoAndStopByTime(t,e)},Object.defineProperty(i.prototype,"animationList",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationDataList",{get:function(){for(var t=[],e=0,i=this._animationNames.length;e<i;++e)t.push(this._animations[this._animationNames[e]]);return t},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.Animation=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this._boneMask=[],this._boneTimelines=[],this._slotTimelines=[],this._ffdTimelines=[],this.autoTween=!1}return __extends(i,e),i.toString=function(){return"[class dragonBones.AnimationState]"},i.prototype._onClear=function(){this.displayControl=!0,this.additiveBlending=!1,this.playTimes=1,this.timeScale=1,this.weight=1,this.autoFadeOutTime=-1,this.fadeTotalTime=0,this._isFadeOutComplete=!1,this._layer=0,this._position=0,this._duration=0,this._weightResult=0,this._fadeProgress=0,this._group=null,this._timeline&&(this._timeline.returnToPool(),this._timeline=null),this._isPlaying=!0,this._isPausePlayhead=!1,this._isFadeOut=!1,this._currentPlayTimes=0,this._fadeTime=0,this._time=0,this._name=null,this._armature=null,this._animationData=null,this._boneMask.length&&(this._boneMask.length=0);for(var t=0,e=this._boneTimelines.length;t<e;++t)this._boneTimelines[t].returnToPool();for(var t=0,e=this._slotTimelines.length;t<e;++t)this._slotTimelines[t].returnToPool();for(var t=0,e=this._ffdTimelines.length;t<e;++t)this._ffdTimelines[t].returnToPool();this._boneTimelines.length=0,this._slotTimelines.length=0,this._ffdTimelines.length=0},i.prototype._advanceFadeTime=function(e){var i=this;e<0&&(e=-e),i._fadeTime+=e;var n=0;if(n=i._fadeTime>=i.fadeTotalTime?i._isFadeOut?0:1:i._fadeTime>0?i._isFadeOut?1-i._fadeTime/i.fadeTotalTime:i._fadeTime/i.fadeTotalTime:i._isFadeOut?1:0,i._fadeProgress!=n){i._fadeProgress=n;var a=i._armature._display;if(i._fadeTime<=e)if(i._isFadeOut){if(a.hasEvent(t.EventObject.FADE_OUT)){var r=t.BaseObject.borrowObject(t.EventObject);r.animationState=this,i._armature._bufferEvent(r,t.EventObject.FADE_OUT)}}else if(a.hasEvent(t.EventObject.FADE_IN)){var s=t.BaseObject.borrowObject(t.EventObject);s.animationState=this,i._armature._bufferEvent(s,t.EventObject.FADE_IN)}if(i._fadeTime>=i.fadeTotalTime)if(i._isFadeOut){if(i._isFadeOutComplete=!0,a.hasEvent(t.EventObject.FADE_OUT_COMPLETE)){var o=t.BaseObject.borrowObject(t.EventObject);o.animationState=this,i._armature._bufferEvent(o,t.EventObject.FADE_OUT_COMPLETE)}}else if(i._isPausePlayhead=!1,a.hasEvent(t.EventObject.FADE_IN_COMPLETE)){var l=t.BaseObject.borrowObject(t.EventObject);l.animationState=this,i._armature._bufferEvent(l,t.EventObject.FADE_IN_COMPLETE)}}},i.prototype._isDisabled=function(t){return!(this.displayControl&&(!t.displayController||t.displayController==this._name||t.displayController==this._group))},i.prototype._fadeIn=function(e,i,n,a,r,s,o,l,h,_){this._armature=e,this._animationData=i,this._name=n,this.playTimes=a,this.timeScale=l,this.fadeTotalTime=h,this._position=r,this._duration=s,this._time=o,this._isPausePlayhead=_,0==this.fadeTotalTime&&(this._fadeProgress=.999999),this._timeline=t.BaseObject.borrowObject(t.AnimationTimelineState),
this._timeline.fadeIn(this._armature,this,this._animationData,this._time),this._updateTimelineStates()},i.prototype._updateTimelineStates=function(){var e=this._time;this._animationData.hasAsynchronyTimeline||(e=this._timeline._currentTime);for(var i={},n={},a=0,r=this._boneTimelines.length;a<r;++a){var s=this._boneTimelines[a];i[s.bone.name]=s}for(var o=this._armature.getBones(),a=0,r=o.length;a<r;++a){var l=o[a],h=l.name,_=this._animationData.getBoneTimeline(h);if(_&&this.containsBoneMask(h)){var s=i[h];s?delete i[h]:(s=t.BaseObject.borrowObject(t.BoneTimelineState),s.bone=l,s.fadeIn(this._armature,this,_,e),this._boneTimelines.push(s))}}for(var a in i){var s=i[a];s.bone.invalidUpdate(),this._boneTimelines.splice(this._boneTimelines.indexOf(s),1),s.returnToPool()}for(var a=0,r=this._slotTimelines.length;a<r;++a){var u=this._slotTimelines[a];n[u.slot.name]=u}for(var f=this._armature.getSlots(),a=0,r=f.length;a<r;++a){var m=f[a],c=m.name,p=m.parent.name,d=this._animationData.getSlotTimeline(c);if(d&&this.containsBoneMask(p)&&!this._isFadeOut){var u=n[c];u?delete n[c]:(u=t.BaseObject.borrowObject(t.SlotTimelineState),u.slot=m,u.fadeIn(this._armature,this,d,e),this._slotTimelines.push(u))}}for(var a in n){var u=n[a];this._slotTimelines.splice(this._slotTimelines.indexOf(u),1),u.returnToPool()}this._updateFFDTimelineStates()},i.prototype._updateFFDTimelineStates=function(){var e=this._time;this._animationData.hasAsynchronyTimeline||(e=this._timeline._currentTime);for(var i={},n=0,a=this._ffdTimelines.length;n<a;++n){var r=this._ffdTimelines[n];i[r.slot.name]=r}for(var s=this._armature.getSlots(),n=0,a=s.length;n<a;++n){var o=s[n],l=o.name,h=o.parent.name;if(o._meshData){var _=this._animationData.getFFDTimeline(this._armature._skinData.name,l,o.displayIndex);if(_&&this.containsBoneMask(h)){var r=i[l];r?delete i[l]:(r=t.BaseObject.borrowObject(t.FFDTimelineState),r.slot=o,r.fadeIn(this._armature,this,_,e),this._ffdTimelines.push(r))}else{for(var u=0,f=o._ffdVertices.length;u<f;++u)o._ffdVertices[u]=0;o._ffdDirty=!0}}}for(var n in i){var r=i[n];r.slot._ffdDirty=!0,this._ffdTimelines.splice(this._ffdTimelines.indexOf(r),1),r.returnToPool()}},i.prototype._advanceTime=function(t,e,i){var n=this;if(0!=t&&n._advanceFadeTime(t),t*=n.timeScale,0!=t&&n._isPlaying&&!n._isPausePlayhead&&(n._time+=t),n._weightResult=n.weight*n._fadeProgress*e,0!=n._weightResult){var a=n._fadeProgress>=1&&0==i&&n._armature.cacheFrameRate>0,r=n._animationData.cacheTimeToFrameScale,s=!0,o=!0,l=a?Math.floor(n._time*r)/r:n._time;if(n._timeline.update(l),n._animationData.hasAsynchronyTimeline||(l=n._timeline._currentTime),a){var h=Math.floor(n._timeline._currentTime*r);if(n._armature._cacheFrameIndex==h)s=!1,o=!1;else{if(n._armature._cacheFrameIndex=h,n._armature._animation._animationStateDirty){n._armature._animation._animationStateDirty=!1;for(var _=0,u=n._boneTimelines.length;_<u;++_){var f=n._boneTimelines[_];f.bone._cacheFrames=f._timeline.cachedFrames}for(var _=0,u=n._slotTimelines.length;_<u;++_){var m=n._slotTimelines[_];m.slot._cacheFrames=m._timeline.cachedFrames}}n._animationData.cachedFrames[h]?o=!1:n._animationData.cachedFrames[h]=!0}}else n._armature._cacheFrameIndex=-1;if(s){if(o)for(var _=0,u=n._boneTimelines.length;_<u;++_)n._boneTimelines[_].update(l);for(var _=0,u=n._slotTimelines.length;_<u;++_)n._slotTimelines[_].update(l);for(var _=0,u=n._ffdTimelines.length;_<u;++_)n._ffdTimelines[_].update(l)}}n.autoFadeOutTime>=0&&n._fadeProgress>=1&&n._timeline._isCompleted&&n.fadeOut(n.autoFadeOutTime)},i.prototype.play=function(){this._isPlaying=!0},i.prototype.stop=function(){this._isPlaying=!1},i.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),(t<0||t!=t)&&(t=0),this._isPausePlayhead=e,this._isFadeOut){if(t>t-this._fadeTime)return}else{this._isFadeOut=!0,(0==t||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var i=0,n=this._boneTimelines.length;i<n;++i)this._boneTimelines[i].fadeOut();for(var i=0,n=this._slotTimelines.length;i<n;++i)this._slotTimelines[i].fadeOut()}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},i.prototype.containsBoneMask=function(t){return!this._boneMask.length||this._boneMask.indexOf(t)>=0},i.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._armature.getBone(t);if(i){if(this._boneMask.indexOf(t)<0&&this._animationData.getBoneTimeline(t)&&this._boneMask.push(t),e)for(var n=this._armature.getBones(),a=0,r=n.length;a<r;++a){var s=n[a],o=s.name;this._boneMask.indexOf(o)<0&&this._animationData.getBoneTimeline(o)&&i.contains(s)&&this._boneMask.push(o)}this._updateTimelineStates()}},i.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._boneMask.indexOf(t);if(i>=0&&this._boneMask.splice(i,1),e){var n=this._armature.getBone(t);if(n)for(var a=this._armature.getBones(),r=0,s=a.length;r<s;++r){var o=a[r],l=o.name,h=this._boneMask.indexOf(l);h>=0&&n.contains(o)&&this._boneMask.splice(h,1)}}this._updateTimelineStates()},i.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._updateTimelineStates()},Object.defineProperty(i.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCompleted",{get:function(){return this._timeline._isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._isPlaying&&!this._timeline._isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPlayTimes",{get:function(){return this._currentPlayTimes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentTime",{get:function(){return this._timeline._currentTime},set:function(t){if((t<0||t!=t)&&(t=0),this._time=t,this._timeline.setCurrentTime(this._time),0!=this._weightResult){var e=this._time;this._animationData.hasAsynchronyTimeline||(e=this._timeline._currentTime);for(var i=0,n=this._boneTimelines.length;i<n;++i)this._boneTimelines[i].setCurrentTime(e);for(var i=0,n=this._slotTimelines.length;i<n;++i)this._slotTimelines[i].setCurrentTime(e);for(var i=0,n=this._ffdTimelines.length;i<n;++i)this._ffdTimelines[i].setCurrentTime(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clip",{get:function(){return this._animationData},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.AnimationState=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype._onClear=function(){this._isCompleted=!1,this._currentPlayTimes=0,this._currentTime=0,this._timeline=null,this._isReverse=!1,this._hasAsynchronyTimeline=!1,this._frameRate=0,this._keyFrameCount=0,this._frameCount=0,this._position=0,this._duration=0,this._animationDutation=0,this._timeScale=1,this._timeOffset=0,this._currentFrame=null,this._armature=null,this._animationState=null},e.prototype._onFadeIn=function(){},e.prototype._onUpdateFrame=function(t){},e.prototype._onArriveAtFrame=function(t){},e.prototype._setCurrentTime=function(t){var e=this,i=0;if(e._hasAsynchronyTimeline){var n=e._animationState.playTimes,a=n*e._duration;t*=e._timeScale,0!=e._timeOffset&&(t+=e._timeOffset*e._animationDutation),n>0&&(t>=a||t<=-a)?(e._isCompleted=!0,i=n,t=t<0?0:e._duration):(e._isCompleted=!1,t<0?(i=Math.floor(-t/e._duration),t=e._duration- -t%e._duration):(i=Math.floor(t/e._duration),t%=e._duration),n>0&&i>n&&(i=n)),t+=e._position}else e._isCompleted=e._animationState._timeline._isCompleted,i=e._animationState._timeline._currentPlayTimes;return e._currentTime!=t&&(1==e._keyFrameCount&&t>e._position&&this!=e._animationState._timeline&&(e._isCompleted=!0),e._isReverse=e._currentTime>t&&e._currentPlayTimes==i,e._currentTime=t,e._currentPlayTimes=i,!0)},e.prototype.setCurrentTime=function(t){switch(this._setCurrentTime(t),this._keyFrameCount){case 0:break;case 1:this._currentFrame=this._timeline.frames[0],this._onArriveAtFrame(!1),this._onUpdateFrame(!1);break;default:this._currentFrame=this._timeline.frames[Math.floor(this._currentTime*this._frameRate)],this._onArriveAtFrame(!1),this._onUpdateFrame(!1)}this._currentFrame=null},e.prototype.fadeIn=function(t,e,i,n){this._armature=t,this._animationState=e,this._timeline=i;var a=this==this._animationState._timeline;this._hasAsynchronyTimeline=a||this._animationState.animationData.hasAsynchronyTimeline,this._frameRate=this._armature.armatureData.frameRate,this._keyFrameCount=this._timeline.frames.length,this._frameCount=this._animationState.animationData.frameCount,this._position=this._animationState._position,this._duration=this._animationState._duration,this._animationDutation=this._animationState.animationData.duration,this._timeScale=a?1:1/this._timeline.scale,this._timeOffset=a?0:this._timeline.offset,this._onFadeIn(),this.setCurrentTime(n)},e.prototype.fadeOut=function(){},e.prototype.update=function(t){var e=this;if(!e._isCompleted&&e._setCurrentTime(t)&&e._keyFrameCount){var i=e._keyFrameCount>1?Math.floor(e._currentTime*e._frameRate):0,n=e._timeline.frames[i];e._currentFrame!=n&&(e._currentFrame=n,e._onArriveAtFrame(!0)),e._onUpdateFrame(!0)}},e}(t.BaseObject);t.TimelineState=e;var i=function(e){function i(){e.call(this)}return __extends(i,e),i._getEasingValue=function(t,e){var i=1;if(e>2)return t;if(e>1)i=.5*(1-Math.cos(t*Math.PI)),e-=1;else if(e>0)i=1-Math.pow(1-t,2);else if(e>=-1)e*=-1,i=Math.pow(t,2);else{if(!(e>=-2))return t;e*=-1,i=Math.acos(1-2*t)/Math.PI,e-=1}return(i-t)*e+t},i._getCurveEasingValue=function(t,e){for(var i=0,n=0,a=0,r=e.length;a<r;a+=2)if(i=e[a],n=e[a+1],i>=t){if(0==a)return n*t/i;var s=e[a-2],o=e[a-1];return o+(n-o)*(t-s)/(i-s)}return n+(1-n)*(t-i)/(1-i)},i.prototype._onClear=function(){e.prototype._onClear.call(this),this._tweenProgress=0,this._tweenEasing=t.DragonBones.NO_TWEEN,this._curve=null},i.prototype._onArriveAtFrame=function(e){var i=this;i._tweenEasing=i._currentFrame.tweenEasing,i._curve=i._currentFrame.curve,(i._keyFrameCount<=1||i._currentFrame.next==i._timeline.frames[0]&&(i._tweenEasing!=t.DragonBones.NO_TWEEN||i._curve)&&i._animationState.playTimes>0&&i._animationState.currentPlayTimes==i._animationState.playTimes-1)&&(i._tweenEasing=t.DragonBones.NO_TWEEN,i._curve=null)},i.prototype._onUpdateFrame=function(e){var n=this;n._tweenEasing!=t.DragonBones.NO_TWEEN?(n._tweenProgress=(n._currentTime-n._currentFrame.position+n._position)/n._currentFrame.duration,0!=n._tweenEasing&&(n._tweenProgress=i._getEasingValue(n._tweenProgress,n._tweenEasing))):n._curve?(n._tweenProgress=(n._currentTime-n._currentFrame.position+n._position)/n._currentFrame.duration,n._tweenProgress=i._getCurveEasingValue(n._tweenProgress,n._curve)):n._tweenProgress=0},i.prototype._updateExtensionKeyFrame=function(t,e,i){var n=0;if(t.type==e.type)for(var a=0,r=t.tweens.length;a<r;++a){var s=e.tweens[a]-t.tweens[a];i.tweens[a]=s,0!=s&&(n=2)}if(0==n){i.type!=t.type&&(n=1,i.type=t.type),i.tweens.length!=t.tweens.length&&(n=1,i.tweens.length=t.tweens.length),i.keys.length!=t.keys.length&&(n=1,i.keys.length=t.keys.length);for(var a=0,r=t.keys.length;a<r;++a){var o=t.keys[a];i.keys[a]!=o&&(n=1,i.keys[a]=o)}}return n},i}(e);t.TweenTimelineState=i}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i.toString=function(){return"[class dragonBones.AnimationTimelineState]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this._isStarted=!1},i.prototype._onCrossFrame=function(e){for(var i=this,n=e.actions,a=0,r=n.length;a<r;++a)i._armature._bufferAction(n[a]);for(var s=i._armature._display,o=e.events,a=0,r=o.length;a<r;++a){var l=o[a],h="";switch(l.type){case 0:h=t.EventObject.FRAME_EVENT;break;case 1:h=t.EventObject.SOUND_EVENT}if((1==l.type?t.EventObject._soundEventManager||s:s).hasEvent(h)){var _=t.BaseObject.borrowObject(t.EventObject);_.animationState=i._animationState,l.bone&&(_.bone=i._armature.getBone(l.bone.name)),l.slot&&(_.slot=i._armature.getSlot(l.slot.name)),_.name=l.name,_.data=l.data,i._armature._bufferEvent(_,h)}}},i.prototype.update=function(e){var i=this,n=i._currentTime,a=i._currentPlayTimes;if(!i._isCompleted&&i._setCurrentTime(e)){var r=i._armature._display;if(!i._isStarted&&0!=e&&(i._isStarted=!0,r.hasEvent(t.EventObject.START))){var s=t.BaseObject.borrowObject(t.EventObject);s.animationState=i._animationState,i._armature._bufferEvent(s,t.EventObject.START)}if(i._keyFrameCount){var o=i._keyFrameCount>1?Math.floor(i._currentTime*i._frameRate):0,l=i._timeline.frames[o];if(i._currentFrame!=l)if(i._keyFrameCount>1){var h=i._currentFrame;if(i._currentFrame=l,!h){var _=Math.floor(n*i._frameRate);h=i._timeline.frames[_],i._isReverse||(n<=h.position||a!=i._currentPlayTimes)&&(h=h.prev)}if(i._isReverse)for(;h!=l;)i._onCrossFrame(h),h=h.prev;else for(;h!=l;)h=h.next,i._onCrossFrame(h)}else i._currentFrame=l,i._onCrossFrame(i._currentFrame)}if(a!=i._currentPlayTimes){var u=i._isCompleted?t.EventObject.COMPLETE:t.EventObject.LOOP_COMPLETE;if(r.hasEvent(u)){var s=t.BaseObject.borrowObject(t.EventObject);s.animationState=i._animationState,i._armature._bufferEvent(s,u)}}}},i}(t.TimelineState);t.AnimationTimelineState=e;var i=function(e){function i(){e.call(this),this._transform=new t.Transform,this._currentTransform=new t.Transform,this._durationTransform=new t.Transform}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneTimelineState]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.bone=null,this._tweenTransform=0,this._tweenRotate=0,this._tweenScale=0,this._boneTransform=null,this._originTransform=null,this._transform.identity(),this._currentTransform.identity(),this._durationTransform.identity()},i.prototype._onFadeIn=function(){this._originTransform=this._timeline.originTransform,this._boneTransform=this.bone._animationPose},i.prototype._onArriveAtFrame=function(i){var n=this;if(e.prototype._onArriveAtFrame.call(this,i),n._currentTransform.copyFrom(n._currentFrame.transform),n._tweenTransform=1,n._tweenRotate=1,n._tweenScale=1,n._keyFrameCount>1&&(n._tweenEasing!=t.DragonBones.NO_TWEEN||n._curve)){var a=n._currentFrame.next,r=a.transform;n._durationTransform.x=r.x-n._currentTransform.x,n._durationTransform.y=r.y-n._currentTransform.y,0==n._durationTransform.x&&0==n._durationTransform.y||(n._tweenTransform=2);var s=n._currentFrame.tweenRotate;if(s==s){if(s)if(s>0?r.skewY>=n._currentTransform.skewY:r.skewY<=n._currentTransform.skewY){var o=s>0?s-1:s+1;n._durationTransform.skewX=r.skewX-n._currentTransform.skewX+t.DragonBones.PI_D*o,n._durationTransform.skewY=r.skewY-n._currentTransform.skewY+t.DragonBones.PI_D*o}else n._durationTransform.skewX=r.skewX-n._currentTransform.skewX+t.DragonBones.PI_D*s,n._durationTransform.skewY=r.skewY-n._currentTransform.skewY+t.DragonBones.PI_D*s;else n._durationTransform.skewX=t.Transform.normalizeRadian(r.skewX-n._currentTransform.skewX),n._durationTransform.skewY=t.Transform.normalizeRadian(r.skewY-n._currentTransform.skewY);0==n._durationTransform.skewX&&0==n._durationTransform.skewY||(n._tweenRotate=2)}else n._durationTransform.skewX=0,n._durationTransform.skewY=0;n._currentFrame.tweenScale?(n._durationTransform.scaleX=r.scaleX-n._currentTransform.scaleX,n._durationTransform.scaleY=r.scaleY-n._currentTransform.scaleY,0==n._durationTransform.scaleX&&0==n._durationTransform.scaleY||(n._tweenScale=2)):(n._durationTransform.scaleX=0,n._durationTransform.scaleY=0)}else n._durationTransform.x=0,n._durationTransform.y=0,n._durationTransform.skewX=0,n._durationTransform.skewY=0,n._durationTransform.scaleX=0,n._durationTransform.scaleY=0},i.prototype._onUpdateFrame=function(t){var i=this;if(i._tweenTransform||i._tweenRotate||i._tweenScale){e.prototype._onUpdateFrame.call(this,t);var n=0;i._tweenTransform&&(1==i._tweenTransform?(i._tweenTransform=0,n=0):n=i._tweenProgress,i._animationState.additiveBlending?(i._transform.x=i._currentTransform.x+i._durationTransform.x*n,i._transform.y=i._currentTransform.y+i._durationTransform.y*n):(i._transform.x=i._originTransform.x+i._currentTransform.x+i._durationTransform.x*n,i._transform.y=i._originTransform.y+i._currentTransform.y+i._durationTransform.y*n)),i._tweenRotate&&(1==i._tweenRotate?(i._tweenRotate=0,n=0):n=i._tweenProgress,i._animationState.additiveBlending?(i._transform.skewX=i._currentTransform.skewX+i._durationTransform.skewX*n,i._transform.skewY=i._currentTransform.skewY+i._durationTransform.skewY*n):(i._transform.skewX=i._originTransform.skewX+i._currentTransform.skewX+i._durationTransform.skewX*n,i._transform.skewY=i._originTransform.skewY+i._currentTransform.skewY+i._durationTransform.skewY*n)),i._tweenScale&&(1==i._tweenScale?(i._tweenScale=0,n=0):n=i._tweenProgress,i._animationState.additiveBlending?(i._transform.scaleX=i._currentTransform.scaleX+i._durationTransform.scaleX*n,i._transform.scaleY=i._currentTransform.scaleY+i._durationTransform.scaleY*n):(i._transform.scaleX=i._originTransform.scaleX*(i._currentTransform.scaleX+i._durationTransform.scaleX*n),i._transform.scaleY=i._originTransform.scaleY*(i._currentTransform.scaleY+i._durationTransform.scaleY*n))),i.bone.invalidUpdate()}},i.prototype.fadeOut=function(){this._transform.skewX=t.Transform.normalizeRadian(this._transform.skewX),this._transform.skewY=t.Transform.normalizeRadian(this._transform.skewY)},i.prototype.update=function(t){var i=this;e.prototype.update.call(this,t);var n=i._animationState._weightResult;if(n>0){0==i.bone._blendIndex?(i._boneTransform.x=i._transform.x*n,i._boneTransform.y=i._transform.y*n,i._boneTransform.skewX=i._transform.skewX*n,i._boneTransform.skewY=i._transform.skewY*n,i._boneTransform.scaleX=(i._transform.scaleX-1)*n+1,i._boneTransform.scaleY=(i._transform.scaleY-1)*n+1):(i._boneTransform.x+=i._transform.x*n,i._boneTransform.y+=i._transform.y*n,i._boneTransform.skewX+=i._transform.skewX*n,i._boneTransform.skewY+=i._transform.skewY*n,i._boneTransform.scaleX+=(i._transform.scaleX-1)*n,i._boneTransform.scaleY+=(i._transform.scaleY-1)*n),i.bone._blendIndex++;var a=i._animationState._fadeProgress;a<1&&i.bone.invalidUpdate()}},i}(t.TweenTimelineState);t.BoneTimelineState=i;var n=function(e){function i(){e.call(this),this._color=new t.ColorTransform,this._durationColor=new t.ColorTransform}return __extends(i,e),i.toString=function(){return"[class dragonBones.SlotTimelineState]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.slot=null,this._colorDirty=!1,this._tweenColor=0,this._slotColor=null,this._color.identity(),this._durationColor.identity()},i.prototype._onFadeIn=function(){this._slotColor=this.slot._colorTransform},i.prototype._onArriveAtFrame=function(i){var n=this;if(e.prototype._onArriveAtFrame.call(this,i),n._animationState._isDisabled(n.slot))return n._tweenEasing=t.DragonBones.NO_TWEEN,n._curve=null,void(n._tweenColor=0);if(n.slot._displayDataSet){var a=n._currentFrame.displayIndex;n.slot.displayIndex>=0&&a>=0?n.slot._displayDataSet.displays.length>1&&n.slot._setDisplayIndex(a):n.slot._setDisplayIndex(a),n.slot._updateMeshData(!0)}if(n._currentFrame.displayIndex>=0){n._tweenColor=0;var r=n._currentFrame.color;if(n._keyFrameCount>1&&(n._tweenEasing!=t.DragonBones.NO_TWEEN||n._curve)){var s=n._currentFrame.next,o=s.color;r!=o&&s.displayIndex>=0&&(n._durationColor.alphaMultiplier=o.alphaMultiplier-r.alphaMultiplier,n._durationColor.redMultiplier=o.redMultiplier-r.redMultiplier,n._durationColor.greenMultiplier=o.greenMultiplier-r.greenMultiplier,n._durationColor.blueMultiplier=o.blueMultiplier-r.blueMultiplier,n._durationColor.alphaOffset=o.alphaOffset-r.alphaOffset,n._durationColor.redOffset=o.redOffset-r.redOffset,n._durationColor.greenOffset=o.greenOffset-r.greenOffset,n._durationColor.blueOffset=o.blueOffset-r.blueOffset,0==n._durationColor.alphaMultiplier&&0==n._durationColor.redMultiplier&&0==n._durationColor.greenMultiplier&&0==n._durationColor.blueMultiplier&&0==n._durationColor.alphaOffset&&0==n._durationColor.redOffset&&0==n._durationColor.greenOffset&&0==n._durationColor.blueOffset||(n._tweenColor=2))}0==n._tweenColor&&(n._slotColor.alphaMultiplier==r.alphaMultiplier&&n._slotColor.redMultiplier==r.redMultiplier&&n._slotColor.greenMultiplier==r.greenMultiplier&&n._slotColor.blueMultiplier==r.blueMultiplier&&n._slotColor.alphaOffset==r.alphaOffset&&n._slotColor.redOffset==r.redOffset&&n._slotColor.greenOffset==r.greenOffset&&n._slotColor.blueOffset==r.blueOffset||(n._tweenColor=1))}else n._tweenEasing=t.DragonBones.NO_TWEEN,n._curve=null,n._tweenColor=0},i.prototype._onUpdateFrame=function(t){var i=this;e.prototype._onUpdateFrame.call(this,t);var n=0;if(i._tweenColor){1==i._tweenColor?(i._tweenColor=0,n=0):n=i._tweenProgress;var a=i._currentFrame.color;i._color.alphaMultiplier=a.alphaMultiplier+i._durationColor.alphaMultiplier*n,i._color.redMultiplier=a.redMultiplier+i._durationColor.redMultiplier*n,i._color.greenMultiplier=a.greenMultiplier+i._durationColor.greenMultiplier*n,i._color.blueMultiplier=a.blueMultiplier+i._durationColor.blueMultiplier*n,i._color.alphaOffset=a.alphaOffset+i._durationColor.alphaOffset*n,i._color.redOffset=a.redOffset+i._durationColor.redOffset*n,i._color.greenOffset=a.greenOffset+i._durationColor.greenOffset*n,i._color.blueOffset=a.blueOffset+i._durationColor.blueOffset*n,i._colorDirty=!0}},i.prototype.fadeOut=function(){this._tweenColor=0},i.prototype.update=function(t){var i=this;if(e.prototype.update.call(this,t),0!=i._tweenColor||i._colorDirty){var n=i._animationState._weightResult;if(n>0){var a=i._animationState._fadeProgress;a<1?(i._slotColor.alphaMultiplier+=(i._color.alphaMultiplier-i._slotColor.alphaMultiplier)*a,i._slotColor.redMultiplier+=(i._color.redMultiplier-i._slotColor.redMultiplier)*a,i._slotColor.greenMultiplier+=(i._color.greenMultiplier-i._slotColor.greenMultiplier)*a,i._slotColor.blueMultiplier+=(i._color.blueMultiplier-i._slotColor.blueMultiplier)*a,i._slotColor.alphaOffset+=(i._color.alphaOffset-i._slotColor.alphaOffset)*a,i._slotColor.redOffset+=(i._color.redOffset-i._slotColor.redOffset)*a,i._slotColor.greenOffset+=(i._color.greenOffset-i._slotColor.greenOffset)*a,i._slotColor.blueOffset+=(i._color.blueOffset-i._slotColor.blueOffset)*a,i.slot._colorDirty=!0):i._colorDirty&&(i._colorDirty=!1,i._slotColor.alphaMultiplier=i._color.alphaMultiplier,i._slotColor.redMultiplier=i._color.redMultiplier,i._slotColor.greenMultiplier=i._color.greenMultiplier,i._slotColor.blueMultiplier=i._color.blueMultiplier,i._slotColor.alphaOffset=i._color.alphaOffset,i._slotColor.redOffset=i._color.redOffset,i._slotColor.greenOffset=i._color.greenOffset,i._slotColor.blueOffset=i._color.blueOffset,i.slot._colorDirty=!0)}}},i}(t.TweenTimelineState);t.SlotTimelineState=n;var a=function(e){function i(){e.call(this),this._ffdVertices=[]}return __extends(i,e),i.toString=function(){return"[class dragonBones.FFDTimelineState]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.slot=null,this._tweenFFD=0,this._slotFFDVertices=null,this._durationFFDFrame&&(this._durationFFDFrame.returnToPool(),this._durationFFDFrame=null),this._ffdVertices.length&&(this._ffdVertices.length=0)},i.prototype._onFadeIn=function(){this._slotFFDVertices=this.slot._ffdVertices,this._durationFFDFrame=t.BaseObject.borrowObject(t.ExtensionFrameData),this._durationFFDFrame.tweens.length=this._slotFFDVertices.length,this._ffdVertices.length=this._slotFFDVertices.length;for(var e=0,i=this._durationFFDFrame.tweens.length;e<i;++e)this._durationFFDFrame.tweens[e]=0;for(var e=0,i=this._ffdVertices.length;e<i;++e)this._ffdVertices[e]=0},i.prototype._onArriveAtFrame=function(i){var n=this;if(e.prototype._onArriveAtFrame.call(this,i),n._tweenFFD=0,(n._tweenEasing!=t.DragonBones.NO_TWEEN||n._curve)&&(n._tweenFFD=n._updateExtensionKeyFrame(n._currentFrame,n._currentFrame.next,n._durationFFDFrame)),0==n._tweenFFD)for(var a=n._currentFrame.tweens,r=0,s=a.length;r<s;++r)if(n._slotFFDVertices[r]!=a[r]){n._tweenFFD=1;break}},i.prototype._onUpdateFrame=function(t){var i=this;e.prototype._onUpdateFrame.call(this,t);var n=0;if(0!=i._tweenFFD){1==i._tweenFFD?(i._tweenFFD=0,n=0):n=i._tweenProgress;for(var a=i._currentFrame.tweens,r=i._durationFFDFrame.tweens,s=0,o=a.length;s<o;++s)i._ffdVertices[s]=a[s]+r[s]*n;i.slot._ffdDirty=!0}},i.prototype.update=function(t){var i=this;e.prototype.update.call(this,t);var n=i._animationState._weightResult;if(n>0){if(0==i.slot._blendIndex)for(var a=0,r=i._ffdVertices.length;a<r;++a)i._slotFFDVertices[a]=i._ffdVertices[a]*n;else for(var a=0,r=i._ffdVertices.length;a<r;++a)i._slotFFDVertices[a]+=i._ffdVertices[a]*n;i.slot._blendIndex++;var s=i._animationState._fadeProgress;s<1&&(i.slot._ffdDirty=!0)}},i}(t.TweenTimelineState);t.FFDTimelineState=a}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function e(){this.time=(new Date).getTime()/t.DragonBones.SECOND_TO_MILLISECOND,this.timeScale=1,this._animatebles=[]}return Object.defineProperty(e,"clock",{get:function(){return e._clock||(e._clock=new e),e._clock},enumerable:!0,configurable:!0}),e.prototype.advanceTime=function(e){if(e!=e&&(e=0),e<0&&(e=(new Date).getTime()/t.DragonBones.SECOND_TO_MILLISECOND-this.time),e*=this.timeScale,e<0?this.time-=e:this.time+=e,e){for(var i=0,n=0,a=this._animatebles.length;i<a;++i){var r=this._animatebles[i];r?(n>0&&(this._animatebles[i-n]=r,this._animatebles[i]=null),r.advanceTime(e)):n++}if(n>0){for(a=this._animatebles.length;i<a;++i){var r=this._animatebles[i];r?this._animatebles[i-n]=r:n++}this._animatebles.length-=n}}},e.prototype.contains=function(t){return this._animatebles.indexOf(t)>=0},e.prototype.add=function(e){e&&this._animatebles.indexOf(e)<0&&(this._animatebles.push(e),t.DragonBones.DEBUG&&e instanceof t.Armature&&t.DragonBones.addArmature(e))},e.prototype.remove=function(e){var i=this._animatebles.indexOf(e);i>=0&&(this._animatebles[i]=null,t.DragonBones.DEBUG&&e instanceof t.Armature&&t.DragonBones.removeArmature(e))},e.prototype.clear=function(){for(var t=0,e=this._animatebles.length;t<e;++t)this._animatebles[t]=null},e._clock=null,e}();t.WorldClock=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this._bones=[],this._slots=[],this._actions=[],this._events=[],this.enableCache=!1}return __extends(i,e),i.toString=function(){return"[class dragonBones.Armature]"},i.prototype._onClear=function(){if(this.userData=null,this._bonesDirty=!1,this._cacheFrameIndex=-1,this._armatureData=null,this._skinData=null,this._animation&&(this._animation.returnToPool(),this._animation=null),this._display&&(this._display._onClear(),this._display=null),this._parent=null,this._replacedTexture=null,this._delayDispose=!1,this._lockDispose=!1,this._slotsDirty=!1,this._bones.length){for(var t=0,e=this._bones.length;t<e;++t)this._bones[t].returnToPool();this._bones.length=0}if(this._slots.length){for(var t=0,e=this._slots.length;t<e;++t)this._slots[t].returnToPool();this._slots.length=0}if(this._actions.length){for(var t=0,e=this._actions.length;t<e;++t)this._actions[t].returnToPool();this._actions.length=0}if(this._events.length){for(var t=0,e=this._events.length;t<e;++t)this._events[t].returnToPool();this._events.length=0}},i.prototype._sortBones=function(){var t=this._bones.length;if(t){var e=this._bones.concat(),i=0,n=0;for(this._bones.length=0;n<t;){var a=e[i++];i>=t&&(i=0),this._bones.indexOf(a)>=0||a.parent&&this._bones.indexOf(a.parent)<0||a.ik&&this._bones.indexOf(a.ik)<0||(a.ik&&a.ikChain>0&&a.ikChainIndex==a.ikChain?this._bones.splice(this._bones.indexOf(a.parent)+1,0,a):this._bones.push(a),n++)}}},i.prototype._sortSlots=function(){},i.prototype._doAction=function(t){switch(t.type){case 0:this._animation.play(t.data[0],t.data[1]);break;case 1:this._animation.stop(t.data[0]);break;case 2:this._animation.gotoAndPlayByTime(t.data[0],t.data[1],t.data[2]);break;case 3:this._animation.gotoAndStopByTime(t.data[0],t.data[1]);break;case 4:this._animation.fadeIn(t.data[0],t.data[1],t.data[2]);break;case 5:}},i.prototype._addBoneToBoneList=function(t){this._bones.indexOf(t)<0&&(this._bonesDirty=!0,this._bones[this._bones.length]=t,this._animation._timelineStateDirty=!0)},i.prototype._removeBoneFromBoneList=function(t){var e=this._bones.indexOf(t);e>=0&&(this._bones.splice(e,1),this._animation._timelineStateDirty=!0)},i.prototype._addSlotToSlotList=function(t){this._slots.indexOf(t)<0&&(this._slotsDirty=!0,this._slots[this._slots.length]=t,this._animation._timelineStateDirty=!0)},i.prototype._removeSlotFromSlotList=function(t){var e=this._slots.indexOf(t);e>=0&&(this._slots.splice(e,1),this._animation._timelineStateDirty=!0)},i.prototype._bufferAction=function(t){this._actions.push(t)},i.prototype._bufferEvent=function(t,e){t.type=e,t.armature=this,this._events.push(t)},i.prototype.dispose=function(){this._delayDispose=!0,this._lockDispose||this.returnToPool()},i.prototype.advanceTime=function(e){var i=this;if(!i._lockDispose){i._lockDispose=!0;var n=e*i._animation.timeScale;i._animation._advanceTime(n),i._bonesDirty&&(i._bonesDirty=!1,i._sortBones()),i._slotsDirty&&(i._slotsDirty=!1,i._sortSlots());for(var a=0,r=i._bones.length;a<r;++a)i._bones[a]._update(i._cacheFrameIndex);for(var a=0,r=i._slots.length;a<r;++a){var s=i._slots[a];s._update(i._cacheFrameIndex);var o=s._childArmature;o&&(s.inheritAnimation?o.advanceTime(n):o.advanceTime(e))}if(t.DragonBones.DEBUG_DRAW&&i._display._debugDraw(),i._events.length>0){for(var a=0,r=i._events.length;a<r;++a){var l=i._events[a];t.EventObject._soundEventManager&&l.type==t.EventObject.SOUND_EVENT?t.EventObject._soundEventManager._dispatchEvent(l):i._display._dispatchEvent(l),l.returnToPool()}i._events.length=0}if(i._actions.length>0){for(var a=0,r=i._actions.length;a<r;++a){var h=i._actions[a];if(h.slot){var s=i.getSlot(h.slot.name);if(s){var o=s._childArmature;o&&o._doAction(h)}}else if(h.bone)for(var _=0,u=i._slots.length;_<u;++_){var o=i._slots[_]._childArmature;o&&o._doAction(h)}else this._doAction(h)}i._actions.length=0}i._lockDispose=!1}i._delayDispose&&i.returnToPool()},i.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),t){var i=this.getBone(t);if(i&&(i.invalidUpdate(),e))for(var n=0,a=this._slots.length;n<a;++n){var r=this._slots[n];r.parent==i&&r.invalidUpdate()}}else{for(var n=0,a=this._bones.length;n<a;++n)this._bones[n].invalidUpdate();if(e)for(var n=0,a=this._slots.length;n<a;++n)this._slots[n].invalidUpdate()}},i.prototype.getSlot=function(t){for(var e=0,i=this._slots.length;e<i;++e){var n=this._slots[e];if(n.name==t)return n}return null},i.prototype.getSlotByDisplay=function(t){if(t)for(var e=0,i=this._slots.length;e<i;++e){var n=this._slots[e];if(n.display==t)return n}return null},i.prototype.addSlot=function(t,e){var i=this.getBone(e);if(!i)throw new Error;t._setArmature(this),t._setParent(i)},i.prototype.removeSlot=function(t){if(!t||t.armature!=this)throw new Error;t._setParent(null),t._setArmature(null)},i.prototype.getBone=function(t){for(var e=0,i=this._bones.length;e<i;++e){var n=this._bones[e];if(n.name==t)return n}return null},i.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return e?e.parent:null},i.prototype.addBone=function(t,e){if(void 0===e&&(e=null),!t)throw new Error;t._setArmature(this),t._setParent(e?this.getBone(e):null)},i.prototype.removeBone=function(t){if(!t||t.armature!=this)throw new Error;t._setParent(null),t._setArmature(null)},i.prototype.replaceTexture=function(t){this._replacedTexture=t;for(var e=0,i=this._slots.length;e<i;++e)this._slots[e].invalidUpdate();
},i.prototype.getBones=function(){return this._bones},i.prototype.getSlots=function(){return this._slots},Object.defineProperty(i.prototype,"name",{get:function(){return this._armatureData?this._armatureData.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!=t){this._armatureData.cacheFrames(t);for(var e=0,i=this._slots.length;e<i;++e){var n=this._slots[e],a=n.childArmature;a&&(a.cacheFrameRate=t)}}},enumerable:!0,configurable:!0}),i.prototype.enableAnimationCache=function(t){this.cacheFrameRate=t},i.prototype.hasEventListener=function(t){this._display.hasEvent(t)},i.prototype.addEventListener=function(t,e,i){this._display.addEvent(t,e,i)},i.prototype.removeEventListener=function(t,e,i){this._display.removeEvent(t,e,i)},i.prototype.getDisplay=function(){return this._display},i}(t.BaseObject);t.Armature=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this.global=new t.Transform,this.origin=new t.Transform,this.offset=new t.Transform,this._globalTransformMatrix=new t.Matrix}return __extends(i,e),i.prototype._onClear=function(){this.userData=null,this.name=null,this.globalTransformMatrix=this._globalTransformMatrix,this.global.identity(),this.origin.identity(),this.offset.identity(),this._armature=null,this._parent=null,this._globalTransformMatrix.identity()},i.prototype._setArmature=function(t){this._armature=t},i.prototype._setParent=function(t){this._parent=t},Object.defineProperty(i.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.TransformObject=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this._animationPose=new t.Transform,this._bones=[],this._slots=[]}return __extends(i,e),i.toString=function(){return"[class dragonBones.Bone]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.ikBendPositive=!1,this.ikWeight=0,this.length=0,this._transformDirty=2,this._blendIndex=0,this._cacheFrames=null,this._animationPose.identity(),this._visible=!0,this._ikChain=0,this._ikChainIndex=0,this._ik=null,this._bones.length&&(this._bones.length=0),this._slots.length&&(this._slots.length=0)},i.prototype._updateGlobalTransformMatrix=function(){if(this._parent){var t=this._parent.global.skewY,e=this._parent.globalTransformMatrix;if(this.inheritScale)this.inheritRotation||(this.global.skewX-=t,this.global.skewY-=t),this.global.toMatrix(this.globalTransformMatrix),this.globalTransformMatrix.concat(e),this.inheritTranslation||(this.globalTransformMatrix.tx=this.global.x,this.globalTransformMatrix.ty=this.global.y),this.global.fromMatrix(this.globalTransformMatrix);else{if(this.inheritTranslation){var i=this.global.x,n=this.global.y;this.global.x=e.a*i+e.c*n+e.tx,this.global.y=e.d*n+e.b*i+e.ty}this.inheritRotation&&(this.global.skewX+=t,this.global.skewY+=t),this.global.toMatrix(this.globalTransformMatrix)}}else this.global.toMatrix(this.globalTransformMatrix)},i.prototype._computeIKA=function(){var t=this._ik.global,e=this.globalTransformMatrix.a*this.length,i=this.globalTransformMatrix.b*this.length,n=(Math.atan2(t.y-this.global.y,t.x-this.global.x)+this.offset.skewY-2*this.global.skewY+Math.atan2(i,e))*this.ikWeight;this.global.skewX+=n,this.global.skewY+=n,this.global.toMatrix(this.globalTransformMatrix)},i.prototype._computeIKB=function(){var t=this._parent.global,e=this._ik.global,i=this.globalTransformMatrix.a*this.length,n=this.globalTransformMatrix.b*this.length,a=i*i+n*n,r=Math.sqrt(a),s=this.global.x-t.x,o=this.global.y-t.y,l=s*s+o*o,h=Math.sqrt(l);s=e.x-t.x,o=e.y-t.y;var _=s*s+o*o,u=Math.sqrt(_),f=0;if(r+h<=u||u+r<=h||u+h<=r)f=Math.atan2(e.y-t.y,e.x-t.x)+this._parent.offset.skewY,r+h<=u||h<r&&(f+=Math.PI);else{var m=(l-a+_)/(2*_),c=Math.sqrt(l-m*m*_)/u,p=t.x+s*m,d=t.y+o*m,g=-o*c,y=s*c;this.ikBendPositive?(this.global.x=p-g,this.global.y=d-y):(this.global.x=p+g,this.global.y=d+y),f=Math.atan2(this.global.y-t.y,this.global.x-t.x)+this._parent.offset.skewY}f=(f-t.skewY)*this.ikWeight,t.skewX+=f,t.skewY+=f,t.toMatrix(this._parent.globalTransformMatrix),this._parent._transformDirty=1,this.global.x=t.x+Math.cos(t.skewY)*h,this.global.y=t.y+Math.sin(t.skewY)*h;var v=(Math.atan2(e.y-this.global.y,e.x-this.global.x)+this.offset.skewY-2*this.global.skewY+Math.atan2(n,i))*this.ikWeight;this.global.skewX+=v,this.global.skewY+=v,this.global.toMatrix(this.globalTransformMatrix)},i.prototype._setArmature=function(t){if(this._armature!=t){this._ik=null;var e=null,i=null;if(this._armature&&(e=this.getSlots(),i=this.getBones(),this._armature._removeBoneFromBoneList(this)),this._armature=t,this._armature&&this._armature._addBoneToBoneList(this),e)for(var n=0,a=e.length;n<a;++n){var r=e[n];r.parent==this&&r._setArmature(this._armature)}if(i)for(var n=0,a=i.length;n<a;++n){var s=i[n];s.parent==this&&s._setArmature(this._armature)}}},i.prototype._setIK=function(t,e,i){if(t){if(e==i){var n=this._parent;if(e&&n?e=1:(e=0,i=0,n=this),n==t||n.contains(t))t=null,e=0,i=0;else for(var a=t;a.ik&&a.ikChain;){if(n.contains(a.ik)){t=null,e=0,i=0;break}a=a.parent}}}else e=0,i=0;this._ik=t,this._ikChain=e,this._ikChainIndex=i,this._armature&&(this._armature._bonesDirty=!0)},i.prototype._update=function(e){var i=this;if(i._blendIndex=0,e>=0){var n=i._cacheFrames[e];i.globalTransformMatrix==n?i._transformDirty=0:n?(i._transformDirty=2,i.globalTransformMatrix=n):2==i._transformDirty||i._parent&&0!=i._parent._transformDirty||i._ik&&i.ikWeight>0&&0!=i._ik._transformDirty?(i._transformDirty=2,i.globalTransformMatrix=i._globalTransformMatrix):i.globalTransformMatrix!=i._globalTransformMatrix?(i._transformDirty=0,i._cacheFrames[e]=i.globalTransformMatrix):(i._transformDirty=2,i.globalTransformMatrix=i._globalTransformMatrix)}else(2==i._transformDirty||i._parent&&0!=i._parent._transformDirty||i._ik&&i.ikWeight>0&&0!=i._ik._transformDirty)&&(i._transformDirty=2,i.globalTransformMatrix=i._globalTransformMatrix);0!=i._transformDirty&&(2==i._transformDirty?(i._transformDirty=1,i.globalTransformMatrix==i._globalTransformMatrix&&(i.global.x=i.origin.x+i.offset.x+i._animationPose.x,i.global.y=i.origin.y+i.offset.y+i._animationPose.y,i.global.skewX=i.origin.skewX+i.offset.skewX+i._animationPose.skewX,i.global.skewY=i.origin.skewY+i.offset.skewY+i._animationPose.skewY,i.global.scaleX=i.origin.scaleX*i.offset.scaleX*i._animationPose.scaleX,i.global.scaleY=i.origin.scaleY*i.offset.scaleY*i._animationPose.scaleY,i._updateGlobalTransformMatrix(),i._ik&&i._ikChainIndex==i._ikChain&&i.ikWeight>0&&(i.inheritTranslation&&i._ikChain>0&&i._parent?i._computeIKB():i._computeIKA()),e>=0&&(i.globalTransformMatrix=t.BoneTimelineData.cacheFrame(i._cacheFrames,e,i._globalTransformMatrix)))):i._transformDirty=0)},i.prototype.invalidUpdate=function(){this._transformDirty=2},i.prototype.contains=function(t){if(t){if(t==this)return!1;for(var e=t;e!=this&&e;)e=e.parent;return e==this}return!1},i.prototype.getBones=function(){this._bones.length=0;for(var t=this._armature.getBones(),e=0,i=t.length;e<i;++e){var n=t[e];n.parent==this&&this._bones.push(n)}return this._bones},i.prototype.getSlots=function(){this._slots.length=0;for(var t=this._armature.getSlots(),e=0,i=t.length;e<i;++e){var n=t[e];n.parent==this&&this._slots.push(n)}return this._slots},Object.defineProperty(i.prototype,"ikChain",{get:function(){return this._ikChain},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ikChainIndex",{get:function(){return this._ikChainIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ik",{get:function(){return this._ik},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!=t){this._visible=t;for(var e=this._armature.getSlots(),i=0,n=e.length;i<n;++i){var a=e[i];a._parent==this&&a._updateVisible()}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slot",{get:function(){for(var t=this._armature.getSlots(),e=0,i=t.length;e<i;++e){var n=t[e];if(n.parent==this)return n}return null},enumerable:!0,configurable:!0}),i}(t.TransformObject);t.Bone=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this),this._colorTransform=new t.ColorTransform,this._ffdVertices=[],this._replacedDisplayDataSet=[],this._localMatrix=new t.Matrix,this._displayList=[],this._meshBones=[]}return __extends(i,e),i.prototype._onClear=function(){e.prototype._onClear.call(this);for(var i=[],n=0,a=this._displayList.length;n<a;++n){var r=this._displayList[n];r!=this._rawDisplay&&r!=this._meshDisplay&&i.indexOf(r)<0&&i.push(r)}for(var n=0,a=i.length;n<a;++n){var r=i[n];r instanceof t.Armature?r.dispose():this._disposeDisplay(r)}this._meshDisplay&&this._meshDisplay!=this._rawDisplay&&this._disposeDisplay(this._meshDisplay),this._rawDisplay&&this._disposeDisplay(this._rawDisplay),this.inheritAnimation=!0,this.displayController=null,this._colorDirty=!1,this._ffdDirty=!1,this._blendIndex=0,this._zOrder=0,this._displayDataSet=null,this._meshData=null,this._childArmature=null,this._rawDisplay=null,this._meshDisplay=null,this._cacheFrames=null,this._colorTransform.identity(),this._ffdVertices.length&&(this._ffdVertices.length=0),this._replacedDisplayDataSet.length&&(this._replacedDisplayDataSet.length=0),this._displayDirty=!1,this._blendModeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._displayIndex=0,this._blendMode=0,this._display=null,this._localMatrix.identity(),this._displayList.length&&(this._displayList.length=0),this._meshBones.length&&(this._meshBones.length=0)},i.prototype._isMeshBonesUpdate=function(){for(var t=0,e=this._meshBones.length;t<e;++t)if(0!=this._meshBones[t]._transformDirty)return!0;return!1},i.prototype._updateDisplay=function(){var e=this._display||this._rawDisplay,i=this._childArmature;this._displayIndex>=0&&this._displayIndex<this._displayList.length?(this._display=this._displayList[this._displayIndex],this._display instanceof t.Armature?(this._childArmature=this._display,this._display=this._childArmature._display):this._childArmature=null):(this._display=null,this._childArmature=null);var n=this._display||this._rawDisplay;if(n!=e&&(this._onUpdateDisplay(),e?this._replaceDisplay(e):this._addDisplay(),this._blendModeDirty=!0,this._colorDirty=!0),this._displayDataSet&&this._displayIndex>=0&&this._displayIndex<this._displayDataSet.displays.length&&(this.origin.copyFrom(this._displayDataSet.displays[this._displayIndex].transform),this._originDirty=!0),this._updateMeshData(!1),n!=this._rawDisplay&&n!=this._meshDisplay||this._updateFrame(),this._childArmature!=i&&(i&&(i._parent=null,this.inheritAnimation&&i.animation.reset()),this._childArmature&&(this._childArmature._parent=this,this.inheritAnimation))){var a=this._armature.cacheFrameRate;a&&(this._childArmature.cacheFrameRate=a);var r=this._armature.armatureData.getSlot(this.name);if(r.actions.length>0)for(var s=0,o=r.actions.length;s<o;++s)this._childArmature._bufferAction(r.actions[s]);else this._childArmature.animation.play()}},i.prototype._updateLocalTransformMatrix=function(){this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix)},i.prototype._updateGlobalTransformMatrix=function(){this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(this._parent.globalTransformMatrix),this.global.fromMatrix(this.globalTransformMatrix)},i.prototype._setArmature=function(t){this._armature!=t&&(this._armature&&this._armature._removeSlotFromSlotList(this),this._armature=t,this._onUpdateDisplay(),this._armature?(this._armature._addSlotToSlotList(this),this._addDisplay()):this._removeDisplay())},i.prototype._updateMeshData=function(t){var e=this._meshData;if(this._meshDisplay&&this._displayDataSet&&this._displayIndex>=0&&this._displayIndex<this._displayDataSet.displays.length?this._meshData=this._displayDataSet.displays[this._displayIndex].mesh:this._meshData=null,this._meshData!=e){if(this._meshData){if(this._meshData.skinned){this._meshBones.length=this._meshData.bones.length;for(var i=0,n=this._meshBones.length;i<n;++i)this._meshBones[i]=this._armature.getBone(this._meshData.bones[i].name);for(var a=0,i=0,n=this._meshData.boneIndices.length;i<n;++i)a+=this._meshData.boneIndices[i].length;this._ffdVertices.length=2*a}else this._meshBones.length=0,this._ffdVertices.length=this._meshData.vertices.length;for(var i=0,n=this._ffdVertices.length;i<n;++i)this._ffdVertices[i]=0;this._ffdDirty=!0}else this._meshBones.length=0,this._ffdVertices.length=0;t&&this._armature.animation._updateFFDTimelineStates()}},i.prototype._update=function(e){var i=this;if(i._blendIndex=0,i._displayDirty&&(i._displayDirty=!1,i._updateDisplay()),i._display&&(i._blendModeDirty&&(i._blendModeDirty=!1,i._updateBlendMode()),i._colorDirty&&(i._colorDirty=!1,i._updateColor()),!i._meshData||((i._ffdDirty||i._meshData.skinned&&i._isMeshBonesUpdate())&&(i._ffdDirty=!1,i._updateMesh()),!i._meshData.skinned))){if(i._originDirty&&(i._originDirty=!1,i._transformDirty=!0,i._updateLocalTransformMatrix()),e>=0){var n=i._cacheFrames[e];i.globalTransformMatrix==n?i._transformDirty=!1:n?(i._transformDirty=!0,i.globalTransformMatrix=n):i._transformDirty||0!=i._parent._transformDirty?(i._transformDirty=!0,i.globalTransformMatrix=i._globalTransformMatrix):i.globalTransformMatrix!=i._globalTransformMatrix?(i._transformDirty=!1,i._cacheFrames[e]=i.globalTransformMatrix):(i._transformDirty=!0,i.globalTransformMatrix=i._globalTransformMatrix)}else(i._transformDirty||0!=i._parent._transformDirty)&&(i._transformDirty=!0,i.globalTransformMatrix=i._globalTransformMatrix);i._transformDirty&&(i._transformDirty=!1,i.globalTransformMatrix==i._globalTransformMatrix&&(i._updateGlobalTransformMatrix(),e>=0&&(i.globalTransformMatrix=t.SlotTimelineData.cacheFrame(i._cacheFrames,e,i._globalTransformMatrix))),i._updateTransform())}},i.prototype._setDisplayList=function(e){if(e&&e.length){this._displayList.length!=e.length&&(this._displayList.length=e.length);for(var i=0,n=this._displayList.length;i<n;++i){var a=e[i];a&&a!=this._rawDisplay&&a!=this._meshDisplay&&!(a instanceof t.Armature)&&this._displayList.indexOf(a)<0&&this._initDisplay(a),this._displayList[i]=a}}else this._displayList.length&&(this._displayList.length=0);return this._displayIndex>=0&&this._displayIndex<this._displayList.length?this._displayDirty=this._display!=this._displayList[this._displayIndex]:this._displayDirty=null!=this._display,this._displayDirty},i.prototype._setDisplayIndex=function(t){return this._displayIndex!=t&&(this._displayIndex=t,this._displayDirty=!0,this._displayDirty)},i.prototype._setBlendMode=function(t){return this._blendMode!=t&&(this._blendMode=t,this._blendModeDirty=!0,!0)},i.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0,!0},i.prototype.invalidUpdate=function(){this._displayDirty=!0},Object.defineProperty(i.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"MeshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t)&&this._update(-1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayList",{get:function(){return this._displayList.concat()},set:function(e){var i=this._displayList.concat(),n=[];this._setDisplayList(e)&&this._update(-1);for(var a=0,r=i.length;a<r;++a){var s=i[a];s!=this._rawDisplay&&s!=this._meshDisplay&&this._displayList.indexOf(s)<0&&n.indexOf(s)<0&&n.push(s)}for(var a=0,r=n.length;a<r;++a){var s=n[a];s instanceof t.Armature?s.dispose():this._disposeDisplay(s)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"display",{get:function(){return this._display},set:function(t){if(this._display!=t){var e=this._displayList.length;if(this._displayIndex<0&&0==e&&(this._displayIndex=0),!(this._displayIndex<0)){var i=this.displayList;e<=this._displayIndex&&(i.length=this._displayIndex+1),i[this._displayIndex]=t,this.displayList=i}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!=t&&(t.display.advanceTimeBySelf(!1),this.display=t)},enumerable:!0,configurable:!0}),i.prototype.getDisplay=function(){return this._display},i.prototype.setDisplay=function(t){this.display=t},i}(t.TransformObject);t.Slot=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function e(e){void 0===e&&(e=null),this.autoSearch=!1,this._dataParser=null,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dataParser=e||t.ObjectDataParser.getInstance()}return e.prototype._getTextureData=function(t,e){var i=this._textureAtlasDataMap[t];if(i)for(var n=0,a=i.length;n<a;++n){var r=i[n].getTextureData(e);if(r)return r}if(this.autoSearch)for(var n in this._textureAtlasDataMap){i=this._textureAtlasDataMap[n];for(var s=0,o=i.length;s<o;++s){var l=i[s];if(l.autoSearch){var r=l.getTextureData(e);if(r)return r}}}return null},e.prototype._fillBuildArmaturePackage=function(t,e,i,n){if(t){var a=this._dragonBonesDataMap[t];if(a){var r=a.getArmature(e);if(r)return n.dataName=t,n.data=a,n.armature=r,n.skin=r.getSkin(i),n.skin||(n.skin=r.defaultSkin),!0}}if(!t||this.autoSearch)for(var s in this._dragonBonesDataMap){var a=this._dragonBonesDataMap[s];if(!t||a.autoSearch){var r=a.getArmature(e);if(r)return n.dataName=s,n.data=a,n.armature=r,n.skin=r.getSkin(i),n.skin||(n.skin=r.defaultSkin),!0}}return!1},e.prototype._buildBones=function(e,i){for(var n=e.armature.sortedBones,a=0,r=n.length;a<r;++a){var s=n[a],o=t.BaseObject.borrowObject(t.Bone);o.name=s.name,o.inheritTranslation=s.inheritTranslation,o.inheritRotation=s.inheritRotation,o.inheritScale=s.inheritScale,o.length=s.length,o.origin.copyFrom(s.transform),s.parent?i.addBone(o,s.parent.name):i.addBone(o),s.ik&&(o.ikBendPositive=s.bendPositive,o.ikWeight=s.weight,o._setIK(i.getBone(s.ik.name),s.chain,s.chainIndex))}},e.prototype._buildSlots=function(t,e){var i=t.skin,n=t.armature.defaultSkin,a={};for(var r in n.slots){var s=n.slots[r];a[s.slot.name]=s}if(i!=n)for(var r in i.slots){var s=i.slots[r];a[s.slot.name]=s}for(var o=t.armature.sortedSlots,r=0,l=o.length;r<l;++r){var h=o[r],s=a[h.name];if(s){var _=this._generateSlot(t,s);_&&(_._displayDataSet=s,_._setDisplayIndex(h.displayIndex),_._setBlendMode(h.blendMode),_._setColor(h.color),_._replacedDisplayDataSet.length=_._displayDataSet.displays.length,e.addSlot(_,h.parent.name))}}},e.prototype._replaceSlotDisplay=function(t,e,i,n){if(n<0&&(n=i.displayIndex),n>=0){var a=i.displayList;if(a.length<=n&&(a.length=n+1),e.texture||(e.texture=this._getTextureData(t.dataName,e.name)),1==e.type){var r=this.buildArmature(e.name,t.dataName);a[n]=r}else i._replacedDisplayDataSet.length<=n&&(i._replacedDisplayDataSet.length=n+1),i._replacedDisplayDataSet[n]=e,e.mesh?a[n]=i.MeshDisplay:a[n]=i.rawDisplay;i.displayList=a,i.invalidUpdate()}},e.prototype.parseDragonBonesData=function(t,e){void 0===e&&(e=null);var i=this._dataParser.parseDragonBonesData(t,1);return this.addDragonBonesData(i,e),i},e.prototype.parseTextureAtlasData=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=0);var a=this._generateTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,a,n),this._generateTextureAtlasData(a,e),this.addTextureAtlasData(a,i),a},e.prototype.getDragonBonesData=function(t){return this._dragonBonesDataMap[t]},e.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),!t)throw new Error;e=e||t.name,e?this._dragonBonesDataMap[e]?console.warn("Same name data."):this._dragonBonesDataMap[e]=t:console.warn("Unnamed data.")},e.prototype.removeDragonBonesData=function(e,i){void 0===i&&(i=!0);var n=this._dragonBonesDataMap[e];if(n){if(i){if(t.DragonBones.DEBUG)for(var a=0,r=t.DragonBones._armatures.length;a<r;++a){var s=t.DragonBones._armatures[a];if(s.armatureData.parent==n)throw new Error("ArmatureData: "+s.armatureData.name+" DragonBonesData: "+e)}n.returnToPool()}delete this._dragonBonesDataMap[e]}},e.prototype.getTextureAtlasData=function(t){return this._textureAtlasDataMap[t]},e.prototype.addTextureAtlasData=function(t,e){if(void 0===e&&(e=null),!t)throw new Error;if(e=e||t.name){var i=this._textureAtlasDataMap[e]=this._textureAtlasDataMap[e]||[];i.indexOf(t)<0&&i.push(t)}else console.warn("Unnamed data.")},e.prototype.removeTextureAtlasData=function(t,e){void 0===e&&(e=!0);var i=this._textureAtlasDataMap[t];if(i){if(e)for(var n=0,a=i.length;n<a;++n)i[n].returnToPool();delete this._textureAtlasDataMap[t]}},e.prototype.clear=function(t){void 0===t&&(t=!0);for(var e in this._dragonBonesDataMap)t&&this._dragonBonesDataMap[e].returnToPool(),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var i=this._textureAtlasDataMap[e],n=0,a=i.length;n<a;++n)i[n].returnToPool();delete this._textureAtlasDataMap[e]}},e.prototype.buildArmature=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n={};if(this._fillBuildArmaturePackage(e,t,i,n)){var a=this._generateArmature(n);if(this._buildBones(n,a),this._buildSlots(n,a),a.armatureData.actions.length>0)for(var r=0,s=a.armatureData.actions.length;r<s;++r)a._bufferAction(a.armatureData.actions[r]);return a.advanceTime(0),a}return null},e.prototype.copyAnimationsToArmature=function(e,i,n,a,r){void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r=!0);var s={};if(this._fillBuildArmaturePackage(a,i,n,s)){var o=s.armature;if(r)e.animation.animations=o.animations;else{var l={};for(var h in e.animation.animations)l[h]=e.animation.animations[h];for(var h in o.animations)l[h]=o.animations[h];e.animation.animations=l}if(s.skin){for(var _=e.getSlots(),u=0,f=_.length;u<f;++u)for(var m=_[u],c=m.displayList,p=0,d=c.length;p<d;++p){var g=c[p];if(g instanceof t.Armature){var y=s.skin.getSlot(m.name).displays;if(p<y.length){var v=y[p];1==v.type&&this.copyAnimationsToArmature(g,v.name,n,a,r)}}}return!0}}return!1},e.prototype.replaceSlotDisplay=function(t,e,i,n,a,r){void 0===r&&(r=-1);var s={};if(this._fillBuildArmaturePackage(t,e,null,s)){var o=s.skin.getSlot(i);if(o)for(var l=0,h=o.displays.length;l<h;++l){var _=o.displays[l];if(_.name==n){this._replaceSlotDisplay(s,_,a,r);break}}}},e.prototype.replaceSlotDisplayList=function(t,e,i,n){var a={};if(this._fillBuildArmaturePackage(t,e,null,a)){var r=a.skin.getSlot(i);if(r)for(var s=0,o=0,l=r.displays.length;o<l;++o){var h=r.displays[o];this._replaceSlotDisplay(a,h,n,s++)}}},e.prototype.dispose=function(){this.clear()},e}();t.BaseFactory=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(){function e(){this._data=null,this._armature=null,this._skin=null,this._slotDisplayDataSet=null,this._mesh=null,this._animation=null,this._timeline=null,this._isOldData=!1,this._isGlobalTransform=!1,this._isAutoTween=!1,this._animationTweenEasing=0,this._timelinePivot=new t.Point,this._armatureScale=1,this._helpPoint=new t.Point,this._helpTransformA=new t.Transform,this._helpTransformB=new t.Transform,this._helpMatrix=new t.Matrix,this._rawBones=[]}return e._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 0;case"armature":return 0;case"movieclip":return 1;default:return 0}},e._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"armature":return 1;case"mesh":return 2;default:return 0}},e._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},e._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"stop":return 1;case"gotoandplay":return 2;case"gotoandstop":return 3;case"fadein":return 4;case"fadeout":return 5;default:return 4}},e.prototype._getTimelineFrameMatrix=function(e,i,n,a){var r=Math.floor(n*e.frameCount/e.duration);if(1==i.frames.length||r>=i.frames.length)a.copyFrom(i.frames[0].transform);else{var s=i.frames[r],o=0;s.tweenEasing!=t.DragonBones.NO_TWEEN?(o=(n-s.position)/s.duration,0!=s.tweenEasing&&(o=t.TweenTimelineState._getEasingValue(o,s.tweenEasing))):s.curve&&(o=(n-s.position)/s.duration,o=t.TweenTimelineState._getCurveEasingValue(o,s.curve));var l=s.next;a.x=l.transform.x-s.transform.x,a.y=l.transform.y-s.transform.y,a.skewX=t.Transform.normalizeRadian(l.transform.skewX-s.transform.skewX),a.skewY=t.Transform.normalizeRadian(l.transform.skewY-s.transform.skewY),a.scaleX=l.transform.scaleX-s.transform.scaleX,a.scaleY=l.transform.scaleY-s.transform.scaleY,a.x=s.transform.x+a.x*o,a.y=s.transform.y+a.y*o,a.skewX=s.transform.skewX+a.skewX*o,a.skewY=s.transform.skewY+a.skewY*o,a.scaleX=s.transform.scaleX+a.scaleX*o,a.scaleY=s.transform.scaleY+a.scaleY*o}a.add(i.originTransform)},e.prototype._globalToLocal=function(t){for(var e=[],i=t.sortedBones.concat().reverse(),n=0,a=i.length;n<a;++n){var r=i[n];r.parent&&(r.parent.transform.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(r.transform.x,r.transform.y,r.transform),r.transform.rotation-=r.parent.transform.rotation);for(var s in t.animations){var o=t.animations[s],l=o.getBoneTimeline(r.name);if(l){var h=r.parent?o.getBoneTimeline(r.parent.name):null;this._helpTransformB.copyFrom(l.originTransform),e.length=0;for(var _=0,u=l.frames.length;_<u;++_){var f=l.frames[_];e.indexOf(f)>=0||(e.push(f),h?(this._getTimelineFrameMatrix(o,h,f.position,this._helpTransformA),f.transform.add(this._helpTransformB),this._helpTransformA.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(f.transform.x,f.transform.y,f.transform),f.transform.rotation-=this._helpTransformA.rotation):f.transform.add(this._helpTransformB),f.transform.minus(r.transform),0==_?(l.originTransform.copyFrom(f.transform),f.transform.identity()):f.transform.minus(l.originTransform))}}}}},e.prototype._mergeFrameToAnimationTimeline=function(e,i,n){var a=Math.floor(e.position*this._armature.frameRate),r=this._animation.frames;if(0==r.length){var s=t.BaseObject.borrowObject(t.AnimationFrameData);if(s.position=0,this._animation.frameCount>1){r.length=this._animation.frameCount+1;var o=t.BaseObject.borrowObject(t.AnimationFrameData);o.position=this._animation.frameCount/this._armature.frameRate,r[0]=s,r[this._animation.frameCount]=o}}var l=null,h=r[a];if(!h||0!=a&&r[a-1]!=h.prev){l=t.BaseObject.borrowObject(t.AnimationFrameData),l.position=a/this._armature.frameRate,r[a]=l;for(var _=a+1,u=r.length;_<u;++_)h&&r[_]==h&&(r[_]=null)}else l=h;if(i)for(var _=0,u=i.length;_<u;++_)l.actions.push(i[_]);if(n)for(var _=0,u=n.length;_<u;++_)l.events.push(n[_]);for(var f=null,m=null,_=0,u=r.length;_<u;++_){var c=r[_];c&&m!=c?(m=c,f&&(m.prev=f,f.next=m,f.duration=m.position-f.position),f=m):r[_]=f}m.duration=this._animation.duration-m.position,m=r[0],f.next=m,m.prev=f},e.parseDragonBonesData=function(e){return t.ObjectDataParser.getInstance().parseDragonBonesData(e)},e.parseTextureAtlasData=function(i,n){void 0===n&&(n=1);for(var a={},r=i[e.SUB_TEXTURE],s=0,o=r.length;s<o;s++){var l=r[s],h=l[e.NAME],_=new t.Rectangle,u=null;_.x=l[e.X]/n,_.y=l[e.Y]/n,_.width=l[e.WIDTH]/n,_.height=l[e.HEIGHT]/n,e.FRAME_WIDTH in l&&(u=new t.Rectangle,u.x=l[e.FRAME_X]/n,u.y=l[e.FRAME_Y]/n,u.width=l[e.FRAME_WIDTH]/n,u.height=l[e.FRAME_HEIGHT]/n),a[h]={region:_,frame:u,rotated:!1}}return a},e.DATA_VERSION_2_3="2.3",e.DATA_VERSION_3_0="3.0",e.DATA_VERSION_4_0="4.0",e.DATA_VERSION="4.5",e.TEXTURE_ATLAS="TextureAtlas",e.SUB_TEXTURE="SubTexture",e.FORMAT="format",e.IMAGE_PATH="imagePath",e.WIDTH="width",e.HEIGHT="height",e.ROTATED="rotated",e.FRAME_X="frameX",e.FRAME_Y="frameY",e.FRAME_WIDTH="frameWidth",e.FRAME_HEIGHT="frameHeight",e.DRADON_BONES="dragonBones",e.ARMATURE="armature",e.BONE="bone",e.IK="ik",e.SLOT="slot",e.SKIN="skin",e.DISPLAY="display",e.ANIMATION="animation",e.FFD="ffd",e.FRAME="frame",e.PIVOT="pivot",e.TRANSFORM="transform",e.AABB="aabb",e.COLOR="color",e.FILTER="filter",e.VERSION="version",e.IS_GLOBAL="isGlobal",e.FRAME_RATE="frameRate",e.TYPE="type",e.NAME="name",e.PARENT="parent",e.LENGTH="length",e.DATA="data",e.DISPLAY_INDEX="displayIndex",e.Z_ORDER="z",e.BLEND_MODE="blendMode",e.INHERIT_TRANSLATION="inheritTranslation",e.INHERIT_ROTATION="inheritRotation",e.INHERIT_SCALE="inheritScale",e.TARGET="target",e.BEND_POSITIVE="bendPositive",e.CHAIN="chain",e.WEIGHT="weight",e.FADE_IN_TIME="fadeInTime",e.PLAY_TIMES="playTimes",e.SCALE="scale",e.OFFSET="offset",e.POSITION="position",e.DURATION="duration",e.TWEEN_EASING="tweenEasing",e.TWEEN_ROTATE="tweenRotate",e.TWEEN_SCALE="tweenScale",e.CURVE="curve",e.EVENT="event",e.SOUND="sound",e.ACTION="action",e.ACTIONS="actions",e.DEFAULT_ACTIONS="defaultActions",e.X="x",e.Y="y",e.SKEW_X="skX",e.SKEW_Y="skY",e.SCALE_X="scX",e.SCALE_Y="scY",e.ALPHA_OFFSET="aO",e.RED_OFFSET="rO",e.GREEN_OFFSET="gO",e.BLUE_OFFSET="bO",e.ALPHA_MULTIPLIER="aM",e.RED_MULTIPLIER="rM",e.GREEN_MULTIPLIER="gM",e.BLUE_MULTIPLIER="bM",e.UVS="uvs",e.VERTICES="vertices",e.TRIANGLES="triangles",e.WEIGHTS="weights",e.SLOT_POSE="slotPose",e.BONE_POSE="bonePose",e.TWEEN="tween",e.KEY="key",e.COLOR_TRANSFORM="colorTransform",e.TIMELINE="timeline",e.PIVOT_X="pX",e.PIVOT_Y="pY",e.LOOP="loop",e.AUTO_TWEEN="autoTween",e.HIDE="hide",e.RECTANGLE="rectangle",e.ELLIPSE="ellipse",e}();t.DataParser=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(){e.call(this)}return __extends(i,e),i._getBoolean=function(t,e,i){if(e in t){var n=t[e],a=typeof n;if("boolean"==a)return n;if("string"!=a)return Boolean(n);switch(n){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return i},i._getNumber=function(t,e,i){if(e in t){var n=t[e];return null==n||"NaN"==n?i:Number(n)}return i},i._getString=function(t,e,i){return e in t?String(t[e]):i},i._getParameter=function(t,e,i){return t&&t.length>e?t[e]:i},i.prototype._parseArmature=function(e){var n=t.BaseObject.borrowObject(t.ArmatureData);if(n.name=i._getString(e,i.NAME,null),n.frameRate=i._getNumber(e,i.FRAME_RATE,this._data.frameRate)||this._data.frameRate,i.TYPE in e&&"string"==typeof e[i.TYPE]?n.type=i._getArmatureType(e[i.TYPE]):n.type=i._getNumber(e,i.TYPE,0),this._armature=n,this._rawBones.length=0,i.AABB in e){var a=e[i.AABB];n.aabb.x=i._getNumber(a,i.X,0),n.aabb.y=i._getNumber(a,i.Y,0),n.aabb.width=i._getNumber(a,i.WIDTH,0),n.aabb.height=i._getNumber(a,i.HEIGHT,0)}if(i.BONE in e)for(var r=e[i.BONE],s=0,o=r.length;s<o;++s){var l=r[s],h=this._parseBone(l);n.addBone(h,i._getString(l,i.PARENT,null)),this._rawBones.push(h)}if(i.IK in e)for(var _=e[i.IK],s=0,o=_.length;s<o;++s)this._parseIK(_[s]);if(i.SLOT in e)for(var u=e[i.SLOT],s=0,o=u.length;s<o;++s)n.addSlot(this._parseSlot(u[s]));if(i.SKIN in e)for(var f=e[i.SKIN],s=0,o=f.length;s<o;++s)n.addSkin(this._parseSkin(f[s]));
if(i.ANIMATION in e)for(var m=e[i.ANIMATION],s=0,o=m.length;s<o;++s)n.addAnimation(this._parseAnimation(m[s]));return(i.ACTIONS in e||i.DEFAULT_ACTIONS in e)&&this._parseActionData(e,n.actions,null,null),this._isOldData&&this._isGlobalTransform&&this._globalToLocal(n),this._armature=null,this._rawBones.length=0,n},i.prototype._parseBone=function(e){var n=t.BaseObject.borrowObject(t.BoneData);return n.name=i._getString(e,i.NAME,null),n.inheritTranslation=i._getBoolean(e,i.INHERIT_TRANSLATION,!0),n.inheritRotation=i._getBoolean(e,i.INHERIT_ROTATION,!0),n.inheritScale=i._getBoolean(e,i.INHERIT_SCALE,!0),n.length=i._getNumber(e,i.LENGTH,0)*this._armatureScale,i.TRANSFORM in e&&this._parseTransform(e[i.TRANSFORM],n.transform),this._isOldData&&(n.inheritRotation=!0,n.inheritScale=!1),n},i.prototype._parseIK=function(t){var e=this._armature.getBone(i._getString(t,i.BONE in t?i.BONE:i.NAME,null));e&&(e.ik=this._armature.getBone(i._getString(t,i.TARGET,null)),e.bendPositive=i._getBoolean(t,i.BEND_POSITIVE,!0),e.chain=i._getNumber(t,i.CHAIN,0),e.weight=i._getNumber(t,i.WEIGHT,1),e.chain>0&&e.parent&&!e.parent.ik?(e.parent.ik=e.ik,e.parent.chainIndex=0,e.parent.chain=0,e.chainIndex=1):(e.chain=0,e.chainIndex=0))},i.prototype._parseSlot=function(e){var n=t.BaseObject.borrowObject(t.SlotData);return n.name=i._getString(e,i.NAME,null),n.parent=this._armature.getBone(i._getString(e,i.PARENT,null)),n.displayIndex=i._getNumber(e,i.DISPLAY_INDEX,0),n.zOrder=i._getNumber(e,i.Z_ORDER,this._armature.sortedSlots.length),i.COLOR in e?(n.color=t.SlotData.generateColor(),this._parseColorTransform(e[i.COLOR],n.color)):n.color=t.SlotData.DEFAULT_COLOR,i.BLEND_MODE in e&&"string"==typeof e[i.BLEND_MODE]?n.blendMode=i._getBlendMode(e[i.BLEND_MODE]):n.blendMode=i._getNumber(e,i.BLEND_MODE,0),(i.ACTIONS in e||i.DEFAULT_ACTIONS in e)&&this._parseActionData(e,n.actions,null,null),this._isOldData&&(i.COLOR_TRANSFORM in e?(n.color=t.SlotData.generateColor(),this._parseColorTransform(e[i.COLOR_TRANSFORM],n.color)):n.color=t.SlotData.DEFAULT_COLOR),n},i.prototype._parseSkin=function(e){var n=t.BaseObject.borrowObject(t.SkinData);if(n.name=i._getString(e,i.NAME,"__default")||"__default",i.SLOT in e){this._skin=n;for(var a=e[i.SLOT],r=0,s=a.length;r<s;++r)this._isOldData&&this._armature.addSlot(this._parseSlot(a[r])),n.addSlot(this._parseSlotDisplaySet(a[r]));this._skin=null}return n},i.prototype._parseSlotDisplaySet=function(e){var n=t.BaseObject.borrowObject(t.SlotDisplayDataSet);if(n.slot=this._armature.getSlot(i._getString(e,i.NAME,null)),i.DISPLAY in e){var a=e[i.DISPLAY],r=n.displays;this._slotDisplayDataSet=n;for(var s=0,o=a.length;s<o;++s)r.push(this._parseDisplay(a[s]));this._slotDisplayDataSet=null}return n},i.prototype._parseDisplay=function(e){var n=t.BaseObject.borrowObject(t.DisplayData);if(n.name=i._getString(e,i.NAME,null),i.TYPE in e&&"string"==typeof e[i.TYPE]?n.type=i._getDisplayType(e[i.TYPE]):n.type=i._getNumber(e,i.TYPE,0),n.isRelativePivot=!0,i.PIVOT in e){var a=e[i.PIVOT];n.pivot.x=i._getNumber(a,i.X,0),n.pivot.y=i._getNumber(a,i.Y,0)}else if(this._isOldData){var r=e[i.TRANSFORM];n.isRelativePivot=!1,n.pivot.x=i._getNumber(r,i.PIVOT_X,0)*this._armatureScale,n.pivot.y=i._getNumber(r,i.PIVOT_Y,0)*this._armatureScale}else n.pivot.x=.5,n.pivot.y=.5;switch(i.TRANSFORM in e&&this._parseTransform(e[i.TRANSFORM],n.transform),n.type){case 0:break;case 1:break;case 2:n.mesh=this._parseMesh(e)}return n},i.prototype._parseMesh=function(e){var n=t.BaseObject.borrowObject(t.MeshData),a=e[i.VERTICES],r=e[i.UVS],s=e[i.TRIANGLES],o=Math.floor(a.length/2),l=Math.floor(s.length/3),h=new Array(this._armature.sortedBones.length);if(n.skinned=i.WEIGHTS in e&&e[i.WEIGHTS].length>0,n.uvs.length=2*o,n.vertices.length=2*o,n.vertexIndices.length=3*l,n.skinned){if(n.boneIndices.length=o,n.weights.length=o,n.boneVertices.length=o,i.SLOT_POSE in e){var _=e[i.SLOT_POSE];n.slotPose.a=_[0],n.slotPose.b=_[1],n.slotPose.c=_[2],n.slotPose.d=_[3],n.slotPose.tx=_[4],n.slotPose.ty=_[5]}if(i.BONE_POSE in e)for(var u=e[i.BONE_POSE],f=0,m=u.length;f<m;f+=7){var c=u[f],p=h[c]=new t.Matrix;p.a=u[f+1],p.b=u[f+2],p.c=u[f+3],p.d=u[f+4],p.tx=u[f+5],p.ty=u[f+6],p.invert()}}for(var f=0,d=0,m=a.length;f<m;f+=2){var g=f+1,y=f/2,v=n.vertices[f]=a[f]*this._armatureScale,T=n.vertices[g]=a[g]*this._armatureScale;if(n.uvs[f]=r[f],n.uvs[g]=r[g],n.skinned){var b=e[i.WEIGHTS],D=b[d],O=n.boneIndices[y]=new Array(D),E=n.weights[y]=new Array(D),S=n.boneVertices[y]=new Array(2*D);n.slotPose.transformPoint(v,T,this._helpPoint),v=n.vertices[f]=this._helpPoint.x,T=n.vertices[g]=this._helpPoint.y;for(var A=0;A<D;++A){var x=d+1+2*A,c=b[x],w=this._rawBones[c],B=n.bones.indexOf(w);B<0&&(B=n.bones.length,n.bones[B]=w,n.inverseBindPose[B]=h[c]),n.inverseBindPose[B].transformPoint(v,T,this._helpPoint),O[A]=B,E[A]=b[x+1],S[2*A]=this._helpPoint.x,S[2*A+1]=this._helpPoint.y}d+=2*D+1}}for(var f=0,m=s.length;f<m;++f)n.vertexIndices[f]=s[f];return n},i.prototype._parseAnimation=function(e){var n=t.BaseObject.borrowObject(t.AnimationData);n.name=i._getString(e,i.NAME,"__default")||"__default",n.frameCount=Math.max(i._getNumber(e,i.DURATION,1),1),n.position=i._getNumber(e,i.POSITION,0)/this._armature.frameRate,n.duration=n.frameCount/this._armature.frameRate,n.playTimes=i._getNumber(e,i.PLAY_TIMES,1),n.fadeInTime=i._getNumber(e,i.FADE_IN_TIME,0),this._animation=n;var a=i._getString(e,i.ANIMATION,null);if(a)return n.animation=this._armature.getAnimation(a),!n.animation,n;if(this._parseTimeline(e,n,this._parseAnimationFrame),i.BONE in e)for(var r=e[i.BONE],s=0,o=r.length;s<o;++s)n.addBoneTimeline(this._parseBoneTimeline(r[s]));if(i.SLOT in e)for(var l=e[i.SLOT],s=0,o=l.length;s<o;++s)n.addSlotTimeline(this._parseSlotTimeline(l[s]));if(i.FFD in e)for(var h=e[i.FFD],s=0,o=h.length;s<o;++s)n.addFFDTimeline(this._parseFFDTimeline(h[s]));if(this._isOldData){if(this._isAutoTween=i._getBoolean(e,i.AUTO_TWEEN,!0),this._animationTweenEasing=i._getNumber(e,i.TWEEN_EASING,0)||0,n.playTimes=i._getNumber(e,i.LOOP,1),i.TIMELINE in e){for(var _=e[i.TIMELINE],s=0,o=_.length;s<o;++s)n.addBoneTimeline(this._parseBoneTimeline(_[s]));for(var s=0,o=_.length;s<o;++s)n.addSlotTimeline(this._parseSlotTimeline(_[s]))}}else this._isAutoTween=!1,this._animationTweenEasing=0;for(var s in this._armature.bones){var u=this._armature.bones[s];if(!n.getBoneTimeline(u.name)){var f=t.BaseObject.borrowObject(t.BoneTimelineData),m=t.BaseObject.borrowObject(t.BoneFrameData);f.bone=u,f.frames[0]=m,n.addBoneTimeline(f)}}for(var s in this._armature.slots){var c=this._armature.slots[s];if(!n.getSlotTimeline(c.name)){var p=t.BaseObject.borrowObject(t.SlotTimelineData),d=t.BaseObject.borrowObject(t.SlotFrameData);p.slot=c,d.displayIndex=c.displayIndex,c.color==t.SlotData.DEFAULT_COLOR?d.color=t.SlotFrameData.DEFAULT_COLOR:(d.color=t.SlotFrameData.generateColor(),d.color.copyFrom(c.color)),p.frames[0]=d,n.addSlotTimeline(p),this._isOldData&&(d.displayIndex=-1)}}return this._animation=null,n},i.prototype._parseBoneTimeline=function(e){var n=t.BaseObject.borrowObject(t.BoneTimelineData);n.bone=this._armature.getBone(i._getString(e,i.NAME,null)),this._parseTimeline(e,n,this._parseBoneFrame);for(var a=n.originTransform,r=null,s=0,o=n.frames.length;s<o;++s){var l=n.frames[s];r?r!=l&&l.transform.minus(a):(a.copyFrom(l.transform),l.transform.identity(),0==a.scaleX&&(a.scaleX=.001),0==a.scaleY&&(a.scaleY=.001)),r=l}return 1==n.scale&&0==n.offset||(this._animation.hasAsynchronyTimeline=!0),this._isOldData&&(i.PIVOT_X in e||i.PIVOT_Y in e)?(this._timelinePivot.x=i._getNumber(e,i.PIVOT_X,0),this._timelinePivot.y=i._getNumber(e,i.PIVOT_Y,0)):this._timelinePivot.clear(),n},i.prototype._parseSlotTimeline=function(e){var n=t.BaseObject.borrowObject(t.SlotTimelineData);return n.slot=this._armature.getSlot(i._getString(e,i.NAME,null)),this._parseTimeline(e,n,this._parseSlotFrame),1==n.scale&&0==n.offset||(this._animation.hasAsynchronyTimeline=!0),n},i.prototype._parseFFDTimeline=function(e){var n=t.BaseObject.borrowObject(t.FFDTimelineData);n.skin=this._armature.getSkin(i._getString(e,i.SKIN,null)),n.slot=n.skin.getSlot(i._getString(e,i.SLOT,null));for(var a=i._getString(e,i.NAME,null),r=0,s=n.slot.displays.length;r<s;++r){var o=n.slot.displays[r];if(o.mesh&&o.name==a){n.displayIndex=r,this._mesh=o.mesh;break}}return this._parseTimeline(e,n,this._parseFFDFrame),this._mesh=null,n},i.prototype._parseAnimationFrame=function(e,n,a){var r=t.BaseObject.borrowObject(t.AnimationFrameData);return this._parseFrame(e,r,n,a),(i.ACTION in e||i.ACTIONS in e)&&this._parseActionData(e,r.actions,null,null),(i.EVENT in e||i.SOUND in e)&&this._parseEventData(e,r.events,null,null),r},i.prototype._parseBoneFrame=function(e,n,a){var r=t.BaseObject.borrowObject(t.BoneFrameData);if(r.tweenRotate=i._getNumber(e,i.TWEEN_ROTATE,0),r.tweenScale=i._getBoolean(e,i.TWEEN_SCALE,!0),this._parseTweenFrame(e,r,n,a),i.TRANSFORM in e){var s=e[i.TRANSFORM];this._parseTransform(s,r.transform),this._isOldData&&(this._helpPoint.x=this._timelinePivot.x+i._getNumber(s,i.PIVOT_X,0),this._helpPoint.y=this._timelinePivot.y+i._getNumber(s,i.PIVOT_Y,0),r.transform.toMatrix(this._helpMatrix),this._helpMatrix.transformPoint(this._helpPoint.x,this._helpPoint.y,this._helpPoint,!0),r.transform.x+=this._helpPoint.x,r.transform.y+=this._helpPoint.y)}var o=this._timeline.bone;if(i.ACTION in e||i.ACTIONS in e){var l=this._armature.getSlot(o.name),h=[];this._parseActionData(e,h,o,l),this._mergeFrameToAnimationTimeline(r,h,null)}if(i.EVENT in e||i.SOUND in e){var _=[];this._parseEventData(e,_,o,null),this._mergeFrameToAnimationTimeline(r,null,_)}return r},i.prototype._parseSlotFrame=function(e,n,a){var r=t.BaseObject.borrowObject(t.SlotFrameData);if(r.displayIndex=i._getNumber(e,i.DISPLAY_INDEX,0),this._parseTweenFrame(e,r,n,a),i.COLOR in e||i.COLOR_TRANSFORM in e?(r.color=t.SlotFrameData.generateColor(),this._parseColorTransform(e[i.COLOR]||e[i.COLOR_TRANSFORM],r.color)):r.color=t.SlotFrameData.DEFAULT_COLOR,this._isOldData)i._getBoolean(e,i.HIDE,!1)&&(r.displayIndex=-1);else if(i.ACTION in e||i.ACTIONS in e){var s=this._timeline.slot,o=[];this._parseActionData(e,o,s.parent,s),this._mergeFrameToAnimationTimeline(r,o,null)}return r},i.prototype._parseFFDFrame=function(e,n,a){var r=t.BaseObject.borrowObject(t.ExtensionFrameData);r.type=i._getNumber(e,i.TYPE,0),this._parseTweenFrame(e,r,n,a);for(var s=e[i.VERTICES],o=i._getNumber(e,i.OFFSET,0),l=0,h=0,_=0,u=this._mesh.vertices.length;_<u;_+=2)if(!s||_<o||_-o>=s.length?(l=0,h=0):(l=s[_-o]*this._armatureScale,h=s[_+1-o]*this._armatureScale),this._mesh.skinned){this._mesh.slotPose.transformPoint(l,h,this._helpPoint,!0),l=this._helpPoint.x,h=this._helpPoint.y;for(var f=this._mesh.boneIndices[_/2],m=0,c=f.length;m<c;++m){var p=f[m];this._mesh.inverseBindPose[p].transformPoint(l,h,this._helpPoint,!0),r.tweens.push(this._helpPoint.x,this._helpPoint.y)}}else r.tweens.push(l,h);return r},i.prototype._parseTweenFrame=function(e,n,a,r){this._parseFrame(e,n,a,r),n.duration>0?(i.TWEEN_EASING in e?n.tweenEasing=i._getNumber(e,i.TWEEN_EASING,t.DragonBones.NO_TWEEN):this._isOldData?n.tweenEasing=this._isAutoTween?this._animationTweenEasing:t.DragonBones.NO_TWEEN:n.tweenEasing=t.DragonBones.NO_TWEEN,this._isOldData&&1==this._animation.scale&&1==this._timeline.scale&&n.duration*this._armature.frameRate<2&&(n.tweenEasing=t.DragonBones.NO_TWEEN),i.CURVE in e&&(n.curve=t.TweenFrameData.samplingCurve(e[i.CURVE],r))):(n.tweenEasing=t.DragonBones.NO_TWEEN,n.curve=null)},i.prototype._parseFrame=function(t,e,i,n){e.position=i/this._armature.frameRate,e.duration=n/this._armature.frameRate},i.prototype._parseTimeline=function(e,n,a){if(n.scale=i._getNumber(e,i.SCALE,1),n.offset=i._getNumber(e,i.OFFSET,0),this._timeline=n,i.FRAME in e){var r=e[i.FRAME];if(r.length)if(1==r.length)n.frames.length=1,n.frames[0]=a.call(this,r[0],0,i._getNumber(r[0],i.DURATION,1));else{n.frames.length=this._animation.frameCount+1;for(var s=0,o=0,l=null,h=null,_=0,u=0,f=this._animation.frameCount+1;_<f;++_){if(s+o<=_&&u<r.length){var m=r[u++];s=_,o=i._getNumber(m,i.DURATION,1),l=a.call(this,m,s,o),h&&(h.next=l,l.prev=h,this._isOldData&&h instanceof t.TweenFrameData&&m[i.DISPLAY_INDEX]==-1&&(h.tweenEasing=t.DragonBones.NO_TWEEN)),h=l}n.frames[_]=l}l.duration=this._animation.duration-l.position,l=n.frames[0],h.next=l,l.prev=h,this._isOldData&&h instanceof t.TweenFrameData&&r[0][i.DISPLAY_INDEX]==-1&&(h.tweenEasing=t.DragonBones.NO_TWEEN)}}this._timeline=null},i.prototype._parseActionData=function(e,n,a,r){var s=e[i.ACTION]||e[i.ACTIONS]||e[i.DEFAULT_ACTIONS];if("string"==typeof s){var o=t.BaseObject.borrowObject(t.ActionData);o.type=4,o.data=[s,-1,-1],o.bone=a,o.slot=r,n.push(o)}else if(s instanceof Array)for(var l=0,h=s.length;l<h;++l){var _=s[l]instanceof Array?s[l]:null,o=t.BaseObject.borrowObject(t.ActionData),u=_?null:s[l].gotoAndPlay;if(_){var f=_[0];"string"==typeof f?o.type=i._getActionType(f):o.type=i._getParameter(_,0,4)}else o.type=2;switch(o.type){case 0:o.data=[_?i._getParameter(_,1,null):u,i._getParameter(_,2,-1)];break;case 1:o.data=[_?i._getParameter(_,1,null):u];break;case 2:o.data=[_?i._getParameter(_,1,null):u,i._getParameter(_,2,0),i._getParameter(_,3,-1)];break;case 3:o.data=[_?i._getParameter(_,1,null):u,i._getParameter(_,2,0)];break;case 4:o.data=[_?i._getParameter(_,1,null):u,i._getParameter(_,2,-1),i._getParameter(_,3,-1)];break;case 5:o.data=[_?i._getParameter(_,1,null):u,i._getParameter(_,2,0)]}o.bone=a,o.slot=r,n.push(o)}},i.prototype._parseEventData=function(e,n,a,r){if(i.SOUND in e){var s=t.BaseObject.borrowObject(t.EventData);s.type=1,s.name=e[i.SOUND],s.bone=a,s.slot=r,n.push(s)}if(i.EVENT in e){var o=t.BaseObject.borrowObject(t.EventData);o.type=0,o.name=e[i.EVENT],o.bone=a,o.slot=r,i.DATA in e&&(o.data=e[i.DATA]),n.push(o)}},i.prototype._parseTransform=function(e,n){n.x=i._getNumber(e,i.X,0)*this._armatureScale,n.y=i._getNumber(e,i.Y,0)*this._armatureScale,n.skewX=i._getNumber(e,i.SKEW_X,0)*t.DragonBones.ANGLE_TO_RADIAN,n.skewY=i._getNumber(e,i.SKEW_Y,0)*t.DragonBones.ANGLE_TO_RADIAN,n.scaleX=i._getNumber(e,i.SCALE_X,1),n.scaleY=i._getNumber(e,i.SCALE_Y,1)},i.prototype._parseColorTransform=function(t,e){e.alphaMultiplier=.01*i._getNumber(t,i.ALPHA_MULTIPLIER,100),e.redMultiplier=.01*i._getNumber(t,i.RED_MULTIPLIER,100),e.greenMultiplier=.01*i._getNumber(t,i.GREEN_MULTIPLIER,100),e.blueMultiplier=.01*i._getNumber(t,i.BLUE_MULTIPLIER,100),e.alphaOffset=i._getNumber(t,i.ALPHA_OFFSET,0),e.redOffset=i._getNumber(t,i.RED_OFFSET,0),e.greenOffset=i._getNumber(t,i.GREEN_OFFSET,0),e.blueOffset=i._getNumber(t,i.BLUE_OFFSET,0)},i.prototype.parseDragonBonesData=function(e,n){if(void 0===n&&(n=1),e){var a=i._getString(e,i.VERSION,null);if(this._isOldData=a==i.DATA_VERSION_2_3||a==i.DATA_VERSION_3_0,this._isOldData?this._isGlobalTransform=i._getBoolean(e,i.IS_GLOBAL,!0):this._isGlobalTransform=!1,this._armatureScale=n,a==i.DATA_VERSION||a==i.DATA_VERSION_4_0||this._isOldData){var r=t.BaseObject.borrowObject(t.DragonBonesData);if(r.name=i._getString(e,i.NAME,null),r.frameRate=i._getNumber(e,i.FRAME_RATE,24)||24,i.ARMATURE in e){this._data=r;for(var s=e[i.ARMATURE],o=0,l=s.length;o<l;++o)r.addArmature(this._parseArmature(s[o]));this._data=null}return r}throw new Error("Nonsupport data version.")}throw new Error},i.prototype.parseTextureAtlasData=function(e,n,a){if(void 0===a&&(a=0),e){if(n.name=i._getString(e,i.NAME,null),n.imagePath=i._getString(e,i.IMAGE_PATH,null),a>0?n.scale=a:a=n.scale=i._getNumber(e,i.SCALE,n.scale),a=1/a,i.SUB_TEXTURE in e)for(var r=e[i.SUB_TEXTURE],s=0,o=r.length;s<o;++s){var l=r[s],h=n.generateTextureData();h.name=i._getString(l,i.NAME,null),h.rotated=i._getBoolean(l,i.ROTATED,!1),h.region.x=i._getNumber(l,i.X,0)*a,h.region.y=i._getNumber(l,i.Y,0)*a,h.region.width=i._getNumber(l,i.WIDTH,0)*a,h.region.height=i._getNumber(l,i.HEIGHT,0)*a;var _=i._getNumber(l,i.FRAME_WIDTH,-1),u=i._getNumber(l,i.FRAME_HEIGHT,-1);_>0&&u>0&&(h.frame=t.TextureData.generateRectangle(),h.frame.x=i._getNumber(l,i.FRAME_X,0)*a,h.frame.y=i._getNumber(l,i.FRAME_Y,0)*a,h.frame.width=_*a,h.frame.height=u*a),n.addTextureData(h)}return n}throw new Error},i.getInstance=function(){return i._instance||(i._instance=new i),i._instance},i._instance=null,i}(t.DataParser);t.ObjectDataParser=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this),this.textures={}}return __extends(e,t),e.prototype._onClear=function(){this.autoSearch=!1,this.scale=1,this.name=null,this.imagePath=null;for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t]},e.prototype.dispose=function(){this.returnToPool()},e.prototype.addTextureData=function(t){t&&t.name&&!this.textures[t.name]&&(this.textures[t.name]=t,t.parent=this)},e.prototype.getTextureData=function(t){return this.textures[t]},e}(t.BaseObject);t.TextureAtlasData=e;var i=function(e){function i(){e.call(this),this.region=new t.Rectangle}return __extends(i,e),i.generateRectangle=function(){return new t.Rectangle},i.prototype._onClear=function(){this.rotated=!1,this.name=null,this.frame=null,this.parent=null,this.region.clear()},i}(t.BaseObject);t.TextureData=i}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function n(){e.call(this)}return __extends(n,e),n.toString=function(){return"[class dragonBones.EgretTextureAtlasData]"},n.prototype._onClear=function(){e.prototype._onClear.call(this),this.texture&&(this.texture=null)},n.prototype.generateTextureData=function(){return t.BaseObject.borrowObject(i)},n}(t.TextureAtlasData);t.EgretTextureAtlasData=e;var i=function(t){function e(){t.call(this)}return __extends(e,t),e.toString=function(){return"[class dragonBones.EgretTextureData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.texture&&(this.texture.dispose(),this.texture=null)},e}(t.TextureData);t.EgretTextureData=i}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(t,i,n,a){e.call(this,t,i,n,a)}return __extends(i,e),Object.defineProperty(i.prototype,"eventObject",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameLabel",{get:function(){return this.eventObject.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sound",{get:function(){return this.eventObject.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationName",{get:function(){return this.eventObject.animationState.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"armature",{get:function(){return this.eventObject.armature},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bone",{get:function(){return this.eventObject.bone},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slot",{get:function(){return this.eventObject.slot},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationState",{get:function(){return this.eventObject.animationState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movementID",{get:function(){return this.animationName},enumerable:!0,configurable:!0}),i.START=t.EventObject.START,i.LOOP_COMPLETE=t.EventObject.LOOP_COMPLETE,i.COMPLETE=t.EventObject.COMPLETE,i.FADE_IN=t.EventObject.FADE_IN,i.FADE_IN_COMPLETE=t.EventObject.FADE_IN_COMPLETE,i.FADE_OUT=t.EventObject.FADE_OUT,i.FADE_OUT_COMPLETE=t.EventObject.FADE_OUT_COMPLETE,i.FRAME_EVENT=t.EventObject.FRAME_EVENT,i.SOUND_EVENT=t.EventObject.SOUND_EVENT,i.ANIMATION_FRAME_EVENT=t.EventObject.FRAME_EVENT,i.BONE_FRAME_EVENT=t.EventObject.FRAME_EVENT,i.MOVEMENT_FRAME_EVENT=t.EventObject.FRAME_EVENT,i.SOUND=t.EventObject.SOUND_EVENT,i}(egret.Event);t.EgretEvent=e;var i=function(i){function n(){i.call(this),n._clock||(n._clock=new t.WorldClock,n._clock.time=.001*egret.getTimer(),egret.startTick(n._clockHandler,n))}return __extends(n,i),n._clockHandler=function(t){t*=.001;var e=n.passTime>0?n.passTime:t-n._clock.time;return n._clock.advanceTime(e),n._clock.time=t,!1},n.prototype._onClear=function(){this._armature=null,this._debugDrawer=null},n.prototype._dispatchEvent=function(t){var i=egret.Event.create(e,t.type);i.data=t,this.dispatchEvent(i),egret.Event.release(i)},n.prototype._debugDraw=function(){this._debugDrawer||(this._debugDrawer=new egret.Shape),this.addChild(this._debugDrawer),this._debugDrawer.graphics.clear();for(var t=this._armature.getBones(),e=0,i=t.length;e<i;++e){var n=t[e],a=Math.max(n.length,5),r=n.globalTransformMatrix.tx,s=n.globalTransformMatrix.ty,o=r+n.globalTransformMatrix.a*a,l=s+n.globalTransformMatrix.b*a;this._debugDrawer.graphics.lineStyle(1,n.ik?16711680:65280,.5),this._debugDrawer.graphics.moveTo(r,s),this._debugDrawer.graphics.lineTo(o,l)}},n.prototype.hasEvent=function(t){return this.hasEventListener(t)},n.prototype.addEvent=function(t,e,i){this.addEventListener(t,e,i)},n.prototype.removeEvent=function(t,e,i){this.removeEventListener(t,e,i)},n.prototype.advanceTimeBySelf=function(t){t?n._clock.add(this._armature):n._clock.remove(this._armature)},n.prototype.dispose=function(){this._armature&&(this.advanceTimeBySelf(!1),this._armature.dispose(),this._armature=null)},Object.defineProperty(n.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),n.passTime=0,n._clock=null,n}(egret.DisplayObjectContainer);t.EgretArmatureDisplay=i;var n=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(e);t.AnimationEvent=n;var a=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(e);t.FrameEvent=a;var r=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(e);t.SoundEvent=r;var s=function(e){function i(i,n,a){void 0===a&&(a=1),e.call(this),this._onClear(),this.texture=i,t.ObjectDataParser.getInstance().parseTextureAtlasData(n,this,a)}return __extends(i,e),i.toString=function(){return"[class dragonBones.EgretTextureAtlas]"},i}(t.EgretTextureAtlasData);t.EgretTextureAtlas=s;var o=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e}(s);t.EgretSheetAtlas=o;var l=function(){function e(){}return e.getInstance=function(){return t.EventObject._soundEventManager},e}();t.SoundEventManager=l;var h=function(){function t(){}return t}();t.AnimationCacheManager=h}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this,i),t.EventObject._soundEventManager||(t.EventObject._soundEventManager=new t.EgretArmatureDisplay)}return __extends(i,e),i.prototype._generateTextureAtlasData=function(e,i){return e?e.texture=i:e=t.BaseObject.borrowObject(t.EgretTextureAtlasData),e},i.prototype._generateArmature=function(e){var i=t.BaseObject.borrowObject(t.Armature),n=new t.EgretArmatureDisplay;return i._armatureData=e.armature,i._skinData=e.skin,i._animation=t.BaseObject.borrowObject(t.Animation),i._display=n,n._armature=i,i._animation._armature=i,i.animation.animations=e.armature.animations,i},i.prototype._generateSlot=function(e,i){var n=t.BaseObject.borrowObject(t.EgretSlot),a=i.slot,r=[];n.name=a.name,n._rawDisplay=new egret.Bitmap;for(var s=0,o=i.displays.length;s<o;++s){var l=i.displays[s];switch(l.type){case 0:l.texture||(l.texture=this._getTextureData(e.dataName,l.name)),r.push(n._rawDisplay);break;case 2:l.texture||(l.texture=this._getTextureData(e.dataName,l.name)),"webgl"==egret.Capabilities.renderMode?(n._meshDisplay||(n._meshDisplay=new egret.Mesh),r.push(n._meshDisplay)):r.push(n._rawDisplay);break;case 1:var h=this.buildArmature(l.name,e.dataName);if(h){if(a.actions.length>0)for(var _=0,u=a.actions.length;_<u;++_)h._bufferAction(a.actions[_]);else h.animation.play();l.armature=h.armatureData}r.push(h);break;default:r.push(null)}}return n._setDisplayList(r),n},i.prototype.buildArmatureDisplay=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.buildArmature(t,e,i),a=n?n._display:null;return a&&a.advanceTimeBySelf(!0),a},i.prototype.getTextureDisplay=function(t,e){void 0===e&&(e=null);var i=this._getTextureData(e,t);return i?new egret.Bitmap(i.texture):null},Object.defineProperty(i.prototype,"soundEventManater",{get:function(){return t.EventObject._soundEventManager},enumerable:!0,configurable:!0}),i.prototype.addSkeletonData=function(t,e){void 0===e&&(e=null),this.addDragonBonesData(t,e)},i.prototype.getSkeletonData=function(t){return this.getDragonBonesData(t)},i.prototype.removeSkeletonData=function(t){this.removeDragonBonesData(t)},i.prototype.addTextureAtlas=function(t,e){void 0===e&&(e=null),this.addTextureAtlasData(t,e)},i.prototype.getTextureAtlas=function(t){return this.getTextureAtlasData(t)},i.prototype.removeTextureAtlas=function(t){this.removeTextureAtlasData(t)},i.prototype.buildFastArmature=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=null),this.buildArmature(t,e,i)},i}(t.BaseFactory);t.EgretFactory=e}(dragonBones||(dragonBones={}));var dragonBones;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.toString=function(){return"[class dragonBones.EgretSlot]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.transformUpdateEnabled=!1,this._renderDisplay=null,this._colorFilter=null},e.prototype._onUpdateDisplay=function(){this._rawDisplay||(this._rawDisplay=new egret.Bitmap),this._renderDisplay=this._display||this._rawDisplay},e.prototype._initDisplay=function(t){},e.prototype._addDisplay=function(){var t=this._armature._display;t.addChild(this._renderDisplay)},e.prototype._replaceDisplay=function(t){var e=this._armature._display,i=t;e.addChild(this._renderDisplay),e.swapChildren(this._renderDisplay,i),e.removeChild(i)},e.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},e.prototype._disposeDisplay=function(t){},e.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible},e.prototype._updateBlendMode=function(){if(this._blendMode<e.BLEND_MODE_LIST.length){var t=e.BLEND_MODE_LIST[this._blendMode];t&&(this._renderDisplay.blendMode=t)}},e.prototype._updateColor=function(){if(1!=this._colorTransform.redMultiplier||1!=this._colorTransform.greenMultiplier||1!=this._colorTransform.blueMultiplier||0!=this._colorTransform.redOffset||0!=this._colorTransform.greenOffset||0!=this._colorTransform.blueOffset){this._colorFilter||(this._colorFilter=new egret.ColorMatrixFilter);var t=this._colorFilter.matrix;t[0]=this._colorTransform.redMultiplier,t[6]=this._colorTransform.greenMultiplier,t[12]=this._colorTransform.blueMultiplier,t[18]=this._colorTransform.alphaMultiplier,t[4]=this._colorTransform.redOffset,t[9]=this._colorTransform.greenOffset,t[14]=this._colorTransform.blueOffset,t[19]=this._colorTransform.alphaOffset,this._colorFilter.matrix=t;var e=this._renderDisplay.filters;e||(e=[]),e.indexOf(this._colorFilter)<0&&e.push(this._colorFilter),this._renderDisplay.filters=e}else this._colorFilter&&(this._colorFilter=null,this._renderDisplay.filters=null),this._renderDisplay.$setAlpha(this._colorTransform.alphaMultiplier)},e.prototype._updateFilters=function(){},e.prototype._updateFrame=function(){var t=this._renderDisplay;if(this._display&&this._displayIndex>=0){var e=this._displayIndex<this._displayDataSet.displays.length?this._displayDataSet.displays[this._displayIndex]:null,i=this._displayIndex<this._replacedDisplayDataSet.length?this._replacedDisplayDataSet[this._displayIndex]:null,n=i||e,a=n.texture;if(a){var r=a.parent.texture;!a.texture&&r&&(a.texture=new egret.Texture,a.texture._bitmapData=r._bitmapData,a.texture.$initData(a.region.x,a.region.y,Math.min(a.region.width,r.textureWidth-a.region.x),Math.min(a.region.height,r.textureHeight-a.region.y),0,0,Math.min(a.region.width,r.textureWidth-a.region.x),Math.min(a.region.height,r.textureHeight-a.region.y),r.textureWidth,r.textureHeight));var s=this._armature._replacedTexture||a.texture;if(s){if(this._meshData&&this._display==this._meshDisplay){var o=this._meshDisplay,l=o.$renderNode;l.uvs.length=0,l.vertices.length=0,l.indices.length=0;for(var h=0,_=this._meshData.vertices.length;h<_;++h)l.uvs[h]=this._meshData.uvs[h],l.vertices[h]=this._meshData.vertices[h];for(var h=0,_=this._meshData.vertexIndices.length;h<_;++h)l.indices[h]=this._meshData.vertexIndices[h];if(o.$setBitmapData(s),o.$updateVertices(),o.$invalidateTransform(),this._meshData.skinned){var u=o.matrix;u.identity(),o.matrix=u}}else{var f=a.frame||a.region,m=f.width,c=f.height;a.rotated&&(m=f.height,c=f.width);var p=n.pivot.x,d=n.pivot.y;n.isRelativePivot&&(p=m*p,d=c*d),a.frame&&(p+=a.frame.x,d+=a.frame.y),e&&e!=n&&(p+=e.transform.x-n.transform.x,d+=e.transform.y-n.transform.y),t.$setBitmapData(s),t.$setAnchorOffsetX(p),t.$setAnchorOffsetY(d)}return void this._updateVisible()}}}t.visible=!1,t.$setBitmapData(null),t.$setAnchorOffsetX(0),t.$setAnchorOffsetY(0),t.x=0,t.y=0},e.prototype._updateMesh=function(){var t=this._meshDisplay,e=t.$renderNode,i=this._ffdVertices.length>0;if(this._meshData.skinned){for(var n=0,a=0,r=this._meshData.vertices.length;n<r;n+=2){for(var s=n/2,o=this._meshData.boneIndices[s],l=this._meshData.boneVertices[s],h=this._meshData.weights[s],_=0,u=0,f=0,m=o.length;f<m;++f){var c=this._meshBones[o[f]],p=c.globalTransformMatrix,d=h[f],g=0,y=0;i?(g=l[2*f]+this._ffdVertices[a],y=l[2*f+1]+this._ffdVertices[a+1]):(g=l[2*f],y=l[2*f+1]),_+=(p.a*g+p.c*y+p.tx)*d,u+=(p.b*g+p.d*y+p.ty)*d,a+=2}e.vertices[n]=_,e.vertices[n+1]=u}t.$updateVertices(),t.$invalidateTransform()}else if(i){for(var v=this._meshData.vertices,n=0,r=this._meshData.vertices.length;n<r;n+=2){var _=v[n]+this._ffdVertices[n],u=v[n+1]+this._ffdVertices[n+1];e.vertices[n]=_,e.vertices[n+1]=u}t.$updateVertices(),t.$invalidateTransform()}},e.prototype._updateTransform=function(){this._renderDisplay.$setMatrix(this.globalTransformMatrix,this.transformUpdateEnabled)},e.BLEND_MODE_LIST=[egret.BlendMode.NORMAL,egret.BlendMode.ADD,null,null,null,egret.BlendMode.ERASE,null,null,null,null,null,null,null,null],e}(t.Slot);t.EgretSlot=e}(dragonBones||(dragonBones={}));

 //libs/modules/underscore/underscore.min.js
(function(){function n(n){function r(r,t,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=t(e,r[a],a,r)}return e}return function(t,e,u,i){e=x(e,i,4);var o=!O(t)&&y.keys(t),a=(o||t).length,l=n>0?0:a-1;return arguments.length<3&&(u=t[o?o[l]:l],l+=n),r(t,e,u,o,l,a)}}function r(n){return function(r,t,e){t=b(t,e);for(var u=A(r),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(t(r[i],i,r))return i;return-1}}function t(n,r,t){return function(e,u,i){var o=0,a=A(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(t&&i&&a)return i=t(e,u),e[i]===u?i:-1;if(u!==u)return i=r(s.call(e,o,a),y.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,r){var t=z.length,e=n.constructor,u=y.isFunction(e)&&e.prototype||a,i="constructor";for(y.has(n,i)&&!y.contains(r,i)&&r.push(i);t--;)i=z[t],i in n&&n[i]!==u[i]&&!y.contains(r,i)&&r.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,l=Function.prototype,c=o.push,s=o.slice,f=a.toString,p=a.hasOwnProperty,h=Array.isArray,g=Object.keys,v=l.bind,d=Object.create,m=function(){},y=function(n){return n instanceof y?n:this instanceof y?void(this._wrapped=n):new y(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):u._=y,y.VERSION="1.8.3";var x=function(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,i){return n.call(r,t,e,u,i)}}return function(){return n.apply(r,arguments)}},b=function(n,r,t){return null==n?y.identity:y.isFunction(n)?x(n,r,t):y.isObject(n)?y.matcher(n):y.property(n)};y.iteratee=function(n,r){return b(n,r,1/0)};var w=function(n,r){return function(t){var e=arguments.length;if(2>e||null==t)return t;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,l=0;a>l;l++){var c=o[l];r&&void 0!==t[c]||(t[c]=i[c])}return t}},_=function(n){if(!y.isObject(n))return{};if(d)return d(n);m.prototype=n;var r=new m;return m.prototype=null,r},j=function(n){return function(r){return null==r?void 0:r[n]}},k=Math.pow(2,53)-1,A=j("length"),O=function(n){var r=A(n);return"number"==typeof r&&r>=0&&k>=r};y.each=y.forEach=function(n,r,t){r=x(r,t);var e,u;if(O(n))for(e=0,u=n.length;u>e;e++)r(n[e],e,n);else{var i=y.keys(n);for(e=0,u=i.length;u>e;e++)r(n[i[e]],i[e],n)}return n},y.map=y.collect=function(n,r,t){r=b(r,t);for(var e=!O(n)&&y.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i},y.reduce=y.foldl=y.inject=n(1),y.reduceRight=y.foldr=n(-1),y.find=y.detect=function(n,r,t){var e;return e=O(n)?y.findIndex(n,r,t):y.findKey(n,r,t),void 0!==e&&-1!==e?n[e]:void 0},y.filter=y.select=function(n,r,t){var e=[];return r=b(r,t),y.each(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e},y.reject=function(n,r,t){return y.filter(n,y.negate(b(r)),t)},y.every=y.all=function(n,r,t){r=b(r,t);for(var e=!O(n)&&y.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},y.some=y.any=function(n,r,t){r=b(r,t);for(var e=!O(n)&&y.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},y.contains=y.includes=y.include=function(n,r,t,e){return O(n)||(n=y.values(n)),("number"!=typeof t||e)&&(t=0),y.indexOf(n,r,t)>=0},y.invoke=function(n,r){var t=s.call(arguments,2),e=y.isFunction(r);return y.map(n,function(n){var u=e?r:n[r];return null==u?u:u.apply(n,t)})},y.pluck=function(n,r){return y.map(n,y.property(r))},y.where=function(n,r){return y.filter(n,y.matcher(r))},y.findWhere=function(n,r){return y.find(n,y.matcher(r))},y.max=function(n,r,t){var e,u,i=-(1/0),o=-(1/0);if(null==r&&null!=n){n=O(n)?n:y.values(n);for(var a=0,l=n.length;l>a;a++)e=n[a],e>i&&(i=e)}else r=b(r,t),y.each(n,function(n,t,e){u=r(n,t,e),(u>o||u===-(1/0)&&i===-(1/0))&&(i=n,o=u)});return i},y.min=function(n,r,t){var e,u,i=1/0,o=1/0;if(null==r&&null!=n){n=O(n)?n:y.values(n);for(var a=0,l=n.length;l>a;a++)e=n[a],i>e&&(i=e)}else r=b(r,t),y.each(n,function(n,t,e){u=r(n,t,e),(o>u||u===1/0&&i===1/0)&&(i=n,o=u)});return i},y.shuffle=function(n){for(var r,t=O(n)?n:y.values(n),e=t.length,u=Array(e),i=0;e>i;i++)r=y.random(0,i),r!==i&&(u[i]=u[r]),u[r]=t[i];return u},y.sample=function(n,r,t){return null==r||t?(O(n)||(n=y.values(n)),n[y.random(n.length-1)]):y.shuffle(n).slice(0,Math.max(0,r))},y.sortBy=function(n,r,t){return r=b(r,t),y.pluck(y.map(n,function(n,t,e){return{value:n,index:t,criteria:r(n,t,e)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(e>t||void 0===e)return-1}return n.index-r.index}),"value")};var E=function(n){return function(r,t,e){var u={};return t=b(t,e),y.each(r,function(e,i){var o=t(e,i,r);n(u,e,o)}),u}};y.groupBy=E(function(n,r,t){y.has(n,t)?n[t].push(r):n[t]=[r]}),y.indexBy=E(function(n,r,t){n[t]=r}),y.countBy=E(function(n,r,t){y.has(n,t)?n[t]++:n[t]=1}),y.toArray=function(n){return n?y.isArray(n)?s.call(n):O(n)?y.map(n,y.identity):y.values(n):[]},y.size=function(n){return null==n?0:O(n)?n.length:y.keys(n).length},y.partition=function(n,r,t){r=b(r,t);var e=[],u=[];return y.each(n,function(n,t,i){(r(n,t,i)?e:u).push(n)}),[e,u]},y.first=y.head=y.take=function(n,r,t){return null!=n?null==r||t?n[0]:y.initial(n,n.length-r):void 0},y.initial=function(n,r,t){return s.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},y.last=function(n,r,t){return null!=n?null==r||t?n[n.length-1]:y.rest(n,Math.max(0,n.length-r)):void 0},y.rest=y.tail=y.drop=function(n,r,t){return s.call(n,null==r||t?1:r)},y.compact=function(n){return y.filter(n,y.identity)};var S=function(n,r,t,e){for(var u=[],i=0,o=e||0,a=A(n);a>o;o++){var l=n[o];if(O(l)&&(y.isArray(l)||y.isArguments(l))){r||(l=S(l,r,t));var c=0,s=l.length;for(u.length+=s;s>c;)u[i++]=l[c++]}else t||(u[i++]=l)}return u};y.flatten=function(n,r){return S(n,r,!1)},y.without=function(n){return y.difference(n,s.call(arguments,1))},y.uniq=y.unique=function(n,r,t,e){y.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=b(t,e));for(var u=[],i=[],o=0,a=A(n);a>o;o++){var l=n[o],c=t?t(l,o,n):l;r?(o&&i===c||u.push(l),i=c):t?y.contains(i,c)||(i.push(c),u.push(l)):y.contains(u,l)||u.push(l)}return u},y.union=function(){return y.uniq(S(arguments,!0,!0))},y.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=A(n);u>e;e++){var i=n[e];if(!y.contains(r,i)){for(var o=1;t>o&&y.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},y.difference=function(n){var r=S(arguments,!0,!0,1);return y.filter(n,function(n){return!y.contains(r,n)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(n){for(var r=n&&y.max(n,A).length||0,t=Array(r),e=0;r>e;e++)t[e]=y.pluck(n,e);return t},y.object=function(n,r){for(var t={},e=0,u=A(n);u>e;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},y.findIndex=r(1),y.findLastIndex=r(-1),y.sortedIndex=function(n,r,t,e){t=b(t,e,1);for(var u=t(r),i=0,o=A(n);o>i;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i},y.indexOf=t(1,y.findIndex,y.sortedIndex),y.lastIndexOf=t(-1,y.findLastIndex),y.range=function(n,r,t){null==r&&(r=n||0,n=0),t=t||1;for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;e>i;i++,n+=t)u[i]=n;return u};var C=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=_(n.prototype),o=n.apply(i,u);return y.isObject(o)?o:i};y.bind=function(n,r){if(v&&n.bind===v)return v.apply(n,s.call(arguments,1));if(!y.isFunction(n))throw new TypeError("Bind must be called on a function");var t=s.call(arguments,2),e=function(){return C(n,e,r,this,t.concat(s.call(arguments)))};return e},y.partial=function(n){var r=s.call(arguments,1),t=function(){for(var e=0,u=r.length,i=Array(u),o=0;u>o;o++)i[o]=r[o]===y?arguments[e++]:r[o];for(;e<arguments.length;)i.push(arguments[e++]);return C(n,t,this,this,i)};return t},y.bindAll=function(n){var r,t,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(r=1;e>r;r++)t=arguments[r],n[t]=y.bind(n[t],n);return n},y.memoize=function(n,r){var t=function(e){var u=t.cache,i=""+(r?r.apply(this,arguments):e);return y.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return t.cache={},t},y.delay=function(n,r){var t=s.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},r)},y.defer=y.partial(y.delay,y,1),y.throttle=function(n,r,t){var e,u,i,o=null,a=0;t||(t={});var l=function(){a=t.leading===!1?0:y.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var c=y.now();a||t.leading!==!1||(a=c);var s=r-(c-a);return e=this,u=arguments,0>=s||s>r?(o&&(clearTimeout(o),o=null),a=c,i=n.apply(e,u),o||(e=u=null)):o||t.trailing===!1||(o=setTimeout(l,s)),i}},y.debounce=function(n,r,t){var e,u,i,o,a,l=function(){var c=y.now()-o;r>c&&c>=0?e=setTimeout(l,r-c):(e=null,t||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=y.now();var c=t&&!e;return e||(e=setTimeout(l,r)),c&&(a=n.apply(i,u),i=u=null),a}},y.wrap=function(n,r){return y.partial(r,n)},y.negate=function(n){return function(){return!n.apply(this,arguments)}},y.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},y.after=function(n,r){return function(){return--n<1?r.apply(this,arguments):void 0}},y.before=function(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),1>=n&&(r=null),t}},y.once=y.partial(y.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(n){if(!y.isObject(n))return[];if(g)return g(n);var r=[];for(var t in n)y.has(n,t)&&r.push(t);return F&&e(n,r),r},y.allKeys=function(n){if(!y.isObject(n))return[];var r=[];for(var t in n)r.push(t);return F&&e(n,r),r},y.values=function(n){for(var r=y.keys(n),t=r.length,e=Array(t),u=0;t>u;u++)e[u]=n[r[u]];return e},y.mapObject=function(n,r,t){r=b(r,t);for(var e,u=y.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=r(n[e],e,n);return o},y.pairs=function(n){for(var r=y.keys(n),t=r.length,e=Array(t),u=0;t>u;u++)e[u]=[r[u],n[r[u]]];return e},y.invert=function(n){for(var r={},t=y.keys(n),e=0,u=t.length;u>e;e++)r[n[t[e]]]=t[e];return r},y.functions=y.methods=function(n){var r=[];for(var t in n)y.isFunction(n[t])&&r.push(t);return r.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(n,r,t){r=b(r,t);for(var e,u=y.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],r(n[e],e,n))return e},y.pick=function(n,r,t){var e,u,i={},o=n;if(null==o)return i;y.isFunction(r)?(u=y.allKeys(o),e=x(r,t)):(u=S(arguments,!1,!1,1),e=function(n,r,t){return r in t},o=Object(o));for(var a=0,l=u.length;l>a;a++){var c=u[a],s=o[c];e(s,c,o)&&(i[c]=s)}return i},y.omit=function(n,r,t){if(y.isFunction(r))r=y.negate(r);else{var e=y.map(S(arguments,!1,!1,1),String);r=function(n,r){return!y.contains(e,r)}}return y.pick(n,r,t)},y.defaults=w(y.allKeys,!0),y.create=function(n,r){var t=_(n);return r&&y.extendOwn(t,r),t},y.clone=function(n){return y.isObject(n)?y.isArray(n)?n.slice():y.extend({},n):n},y.tap=function(n,r){return r(n),n},y.isMatch=function(n,r){var t=y.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0};var M=function(n,r,t,e){if(n===r)return 0!==n||1/n===1/r;if(null==n||null==r)return n===r;n instanceof y&&(n=n._wrapped),r instanceof y&&(r=r._wrapped);var u=f.call(n);if(u!==f.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!==+n?+r!==+r:0===+n?1/+n===1/r:+n===+r;case"[object Date]":case"[object Boolean]":return+n===+r}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof r)return!1;var o=n.constructor,a=r.constructor;if(o!==a&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}t=t||[],e=e||[];for(var l=t.length;l--;)if(t[l]===n)return e[l]===r;if(t.push(n),e.push(r),i){if(l=n.length,l!==r.length)return!1;for(;l--;)if(!M(n[l],r[l],t,e))return!1}else{var c,s=y.keys(n);if(l=s.length,y.keys(r).length!==l)return!1;for(;l--;)if(c=s[l],!y.has(r,c)||!M(n[c],r[c],t,e))return!1}return t.pop(),e.pop(),!0};y.isEqual=function(n,r){return M(n,r)},y.isEmpty=function(n){return null==n?!0:O(n)&&(y.isArray(n)||y.isString(n)||y.isArguments(n))?0===n.length:0===y.keys(n).length},y.isElement=function(n){return!(!n||1!==n.nodeType)},y.isArray=h||function(n){return"[object Array]"===f.call(n)},y.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){y["is"+n]=function(r){return f.call(r)==="[object "+n+"]"}}),y.isArguments(arguments)||(y.isArguments=function(n){return y.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(n){return"function"==typeof n||!1}),y.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},y.isNaN=function(n){return y.isNumber(n)&&n!==+n},y.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===f.call(n)},y.isNull=function(n){return null===n},y.isUndefined=function(n){return void 0===n},y.has=function(n,r){return null!=n&&p.call(n,r)},y.noConflict=function(){return u._=i,this},y.identity=function(n){return n},y.constant=function(n){return function(){return n}},y.noop=function(){},y.property=j,y.propertyOf=function(n){return null==n?function(){}:function(r){return n[r]}},y.matcher=y.matches=function(n){return n=y.extendOwn({},n),function(r){return y.isMatch(r,n)}},y.times=function(n,r,t){var e=Array(Math.max(0,n));r=x(r,t,1);for(var u=0;n>u;u++)e[u]=r(u);return e},y.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},y.now=Date.now||function(){return(new Date).getTime()};var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=y.invert($),I=function(n){var r=function(r){return n[r]},t="(?:"+y.keys(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}};y.escape=I($),y.unescape=I(N),y.result=function(n,r,t){var e=null==n?void 0:n[r];return void 0===e&&(e=t),y.isFunction(e)?e.call(n):e};var R=0;y.uniqueId=function(n){var r=++R+"";return n?n+r:r},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,q=function(n){return"\\"+B[n]};y.template=function(n,r,t){!r&&t&&(r=t),r=y.defaults({},r,y.templateSettings);var e=RegExp([(r.escape||L).source,(r.interpolate||L).source,(r.evaluate||L).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(r,t,e,o,a){return i+=n.slice(u,a).replace(T,q),u=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(r.variable||"obj","_",i)}catch(a){throw a.source=i,a}var l=function(n){return o.call(this,n,y)},c=r.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},y.chain=function(n){var r=y(n);return r._chain=!0,r};var U=function(n,r){return n._chain?y(r).chain():r};y.mixin=function(n){y.each(y.functions(n),function(r){var t=y[r]=n[r];y.prototype[r]=function(){var n=[this._wrapped];return c.apply(n,arguments),U(this,t.apply(y,n))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=o[n];y.prototype[n]=function(){var t=this._wrapped;return r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],U(this,t)}}),y.each(["concat","join","slice"],function(n){var r=o[n];y.prototype[n]=function(){return U(this,r.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this),!function(n,r){"use strict";var t=r.prototype.trim,e=r.prototype.trimRight,u=r.prototype.trimLeft,i=function(n){return 1*n||0},o=function(n,r){if(1>r)return"";for(var t="";r>0;)1&r&&(t+=n),r>>=1,n+=n;return t},a=[].slice,l=function(n){return null==n?"\\s":n.source?n.source:"["+h.escapeRegExp(n)+"]"},c={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},s={};for(var f in c)s[c[f]]=f;var p=function(){function n(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}var t=o,e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};return e.format=function(e,u){var i,o,a,l,c,s,f,h=1,g=e.length,v="",d=[];for(o=0;g>o;o++)if(v=n(e[o]),"string"===v)d.push(e[o]);else if("array"===v){if(l=e[o],l[2])for(i=u[h],a=0;a<l[2].length;a++){if(!i.hasOwnProperty(l[2][a]))throw new Error(p('[_.sprintf] property "%s" does not exist',l[2][a]));i=i[l[2][a]]}else i=l[1]?u[l[1]]:u[h++];if(/[^s]/.test(l[8])&&"number"!=n(i))throw new Error(p("[_.sprintf] expecting number but found %s",n(i)));switch(l[8]){case"b":i=i.toString(2);break;case"c":i=r.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=l[7]?i.toExponential(l[7]):i.toExponential();break;case"f":i=l[7]?parseFloat(i).toFixed(l[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=r(i))&&l[7]?i.substring(0,l[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(l[8])&&l[3]&&i>=0?"+"+i:i,s=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-r(i).length,c=l[6]?t(s,f):"",d.push(l[5]?i+c:c+i)}return d.join("")},e.cache={},e.parse=function(n){for(var r=n,t=[],e=[],u=0;r;){if(null!==(t=/^[^\x25]+/.exec(r)))e.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(r)))e.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw new Error("[_.sprintf] huh?");if(t[2]){u|=1;var i=[],o=t[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(i.push(a[1]);""!==(o=o.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(o)))i.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");i.push(a[1])}t[2]=i}else u|=2;if(3===u)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(t)}r=r.substring(t[0].length)}return e},e}(),h={VERSION:"2.3.0",isBlank:function(n){return null==n&&(n=""),/^\s*$/.test(n)},stripTags:function(n){return null==n?"":r(n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){return n=null==n?"":r(n),n.charAt(0).toUpperCase()+n.slice(1)},chop:function(n,t){return null==n?[]:(n=r(n),t=~~t,t>0?n.match(new RegExp(".{1,"+t+"}","g")):[n])},clean:function(n){return h.strip(n).replace(/\s+/g," ")},count:function(n,t){return null==n||null==t?0:r(n).split(t).length-1},chars:function(n){return null==n?[]:r(n).split("")},swapCase:function(n){return null==n?"":r(n).replace(/\S/g,function(n){return n===n.toUpperCase()?n.toLowerCase():n.toUpperCase()})},escapeHTML:function(n){return null==n?"":r(n).replace(/[&<>"']/g,function(n){return"&"+s[n]+";"})},unescapeHTML:function(n){return null==n?"":r(n).replace(/\&([^;]+);/g,function(n,t){var e;return t in c?c[t]:(e=t.match(/^#x([\da-fA-F]+)$/))?r.fromCharCode(parseInt(e[1],16)):(e=t.match(/^#(\d+)$/))?r.fromCharCode(~~e[1]):n})},escapeRegExp:function(n){return null==n?"":r(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(n,r,t,e){var u=h.chars(n);return u.splice(~~r,~~t,e),u.join("")},insert:function(n,r,t){return h.splice(n,r,0,t)},include:function(n,t){return""===t?!0:null==n?!1:-1!==r(n).indexOf(t)},join:function(){var n=a.call(arguments),r=n.shift();return null==r&&(r=""),n.join(r)},lines:function(n){return null==n?[]:r(n).split("\n")},reverse:function(n){return h.chars(n).reverse().join("")},startsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=r(n),t=r(t),n.length>=t.length&&n.slice(0,t.length)===t)},endsWith:function(n,t){return""===t?!0:null==n||null==t?!1:(n=r(n),t=r(t),n.length>=t.length&&n.slice(n.length-t.length)===t)},succ:function(n){return null==n?"":(n=r(n),n.slice(0,-1)+r.fromCharCode(n.charCodeAt(n.length-1)+1))},titleize:function(n){return null==n?"":r(n).replace(/(?:^|\s)\S/g,function(n){return n.toUpperCase()})},camelize:function(n){return h.trim(n).replace(/[-_\s]+(.)?/g,function(n,r){return r.toUpperCase()})},underscored:function(n){return h.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return h.trim(n).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(n){return h.titleize(r(n).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(n){return h.capitalize(h.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(n,e){return null==n?"":!e&&t?t.call(n):(e=l(e),r(n).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(n,t){return null==n?"":!t&&u?u.call(n):(t=l(t),r(n).replace(new RegExp("^"+t+"+"),""))},rtrim:function(n,t){return null==n?"":!t&&e?e.call(n):(t=l(t),r(n).replace(new RegExp(t+"+$"),""))},truncate:function(n,t,e){return null==n?"":(n=r(n),e=e||"...",t=~~t,n.length>t?n.slice(0,t)+e:n)},prune:function(n,t,e){if(null==n)return"";if(n=r(n),t=~~t,e=null!=e?r(e):"...",n.length<=t)return n;var u=function(n){return n.toUpperCase()!==n.toLowerCase()?"A":" "},i=n.slice(0,t+1).replace(/.(?=\W*\w*$)/g,u);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):h.rtrim(i.slice(0,i.length-1)),(i+e).length>n.length?n:n.slice(0,i.length)+e},words:function(n,r){return h.isBlank(n)?[]:h.trim(n,r).split(r||/\s+/)},pad:function(n,t,e,u){n=null==n?"":r(n),t=~~t;var i=0;switch(e?e.length>1&&(e=e.charAt(0)):e=" ",u){case"right":return i=t-n.length,n+o(e,i);case"both":return i=t-n.length,o(e,Math.ceil(i/2))+n+o(e,Math.floor(i/2));default:return i=t-n.length,o(e,i)+n}},lpad:function(n,r,t){return h.pad(n,r,t)},rpad:function(n,r,t){return h.pad(n,r,t,"right")},lrpad:function(n,r,t){return h.pad(n,r,t,"both")},sprintf:p,vsprintf:function(n,r){return r.unshift(n),p.apply(null,r)},toNumber:function(n,t){if(null==n||""==n)return 0;n=r(n);var e=i(i(n).toFixed(~~t));return 0!==e||n.match(/^0+$/)?e:Number.NaN},numberFormat:function(n,r,t,e){if(isNaN(n)||null==n)return"";n=n.toFixed(~~r),e=e||",";var u=n.split("."),i=u[0],o=u[1]?(t||".")+u[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+e)+o},strRight:function(n,t){if(null==n)return"";n=r(n),t=null!=t?r(t):t;var e=t?n.indexOf(t):-1;return~e?n.slice(e+t.length,n.length):n},strRightBack:function(n,t){if(null==n)return"";n=r(n),t=null!=t?r(t):t;var e=t?n.lastIndexOf(t):-1;return~e?n.slice(e+t.length,n.length):n},strLeft:function(n,t){if(null==n)return"";n=r(n),t=null!=t?r(t):t;var e=t?n.indexOf(t):-1;return~e?n.slice(0,e):n},strLeftBack:function(n,r){if(null==n)return"";n+="",r=null!=r?""+r:r;var t=n.lastIndexOf(r);return~t?n.slice(0,t):n},toSentence:function(n,r,t,e){r=r||", ",t=t||" and ";var u=n.slice(),i=u.pop();return n.length>2&&e&&(t=h.rtrim(r)+t),u.length?u.join(r)+t+i:i},toSentenceSerial:function(){var n=a.call(arguments);return n[3]=!0,h.toSentence.apply(h,n)},slugify:function(n){if(null==n)return"";var t="",e="aaaaaaaaceeeeeiiiilnoooooouuuunczz",u=new RegExp(l(t),"g");return n=r(n).toLowerCase().replace(u,function(n){var r=t.indexOf(n);return e.charAt(r)||"-"}),h.dasherize(n.replace(/[^\w\s-]/g,""))},surround:function(n,r){return[r,n,r].join("")},quote:function(n){return h.surround(n,'"')},exports:function(){var n={};for(var r in this)this.hasOwnProperty(r)&&!r.match(/^(?:include|contains|reverse)$/)&&(n[r]=this[r]);return n},repeat:function(n,t,e){if(null==n)return"";if(t=~~t,null==e)return o(r(n),t);for(var u=[];t>0;u[--t]=n);return u.join(e)},levenshtein:function(n,t){if(null==n&&null==t)return 0;if(null==n)return r(t).length;if(null==t)return r(n).length;n=r(n),t=r(t);for(var e,u,i=[],o=0;o<=t.length;o++)for(var a=0;a<=n.length;a++)u=o&&a?n.charAt(a-1)===t.charAt(o-1)?e:Math.min(i[a],i[a-1],e)+1:o+a,e=i[a],i[a]=u;return i.pop()}};h.strip=h.trim,h.lstrip=h.ltrim,h.rstrip=h.rtrim,h.center=h.lrpad,h.rjust=h.lpad,h.ljust=h.rpad,h.contains=h.include,h.q=h.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=h),exports._s=h):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return h}):(n._=n._||{},n._.string=n._.str=h)}(this,String),_.mixin(_.str.exports());

 //libs/modules/dcagent/dcagent.min.js
var DCAgentPaymentConfig=function(){},DCAgentConfig=function(){};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.DCAgent={})}(this,function(t){"use strict";function e(){}function n(t){return"function"==typeof t}function r(t){return t&&"[object Object]"===ze.call(t)}function o(t){console.log("---- DCAgent log start ----\n"+t+"\n---- DCAgent log end   ----")}function i(t){var e,n,r;return e=Date.now(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r=n.replace(/[xy]/g,function(t){var n;return n=(e+16*Math.random())%16|0,e=Math.floor(e/16),"x"===t?n.toString(16):(7&n|8).toString(16)}),(t||"")+r.replace(/-/g,"").toUpperCase()}function c(t){var e,n;for(e in t)n=t[e],t[e]=n;var r=arguments.length>=2?[].slice.call(arguments,1):[];return r.forEach(function(r){var o;o=[];for(e in r)n=r[e],o.push(t[e]=n);return o}),t}function u(t){return We(function(){var e="0";t.setItem(e,e);var n=t.getItem(e)===e;return t.removeItem(e),n})}function a(t){for(var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n="",r=0;e>r;r+=1)n+=t;return n}function s(t,e,n){return t?t&&t.length>=n?t:t+a(e,Math.ceil(n-t.length)/e.length):t}function f(t,e,n){return function(){Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);var r,o;for(r=0;r<e.length;r+=1)if(o=e[r],We(o,this,arguments)===!1)return;var i=We(t,this,arguments);if(i===!1)return!1;for(r=0;r<n.length;r+=1)o=n[r],We(o,this,arguments);return i}}function g(t){if(!t)return"";var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);return e?e[3]:""}function d(t,e,n){return[].slice.call(t,e,n)}function l(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?10:arguments[2];return t>=1e21&&(t=9527e16),Xe.parseInt(t,n)||e}function p(t){return Math.min(99e19,t)}function m(t){try{return t?JSON.stringify(t):null}catch(e){o("invalid json format")}return null}function b(t){try{return t?JSON.parse(t):null}catch(e){o("invalid json string")}return null}function j(t,e){var n=this;this.duration=e,this.status="running",this.timer=qe(function(){return n.run()},this.duration),this.run=function(){"cancelled"!==n.status&&(Be(n.timer),Ce.attempt(t),n.timer=qe(function(){return n.run()},n.duration))},this.stop=function(){n.status="stopped",Be(n.timer)},this.reset=function(t){"cancelled"!==n.status&&(n.stop(),t&&(n.duration=t),n.run())},this.cancel=function(){this.status="cancelled",Be(this.timer)}}function T(t){Ne&&(Ne.stop(),qe(function(){Ne&&Ne.reset(t)},t),t&&(Fe.interval=t))}function v(){Ne&&(Ne.cancel(),Ne=null)}function I(){Ne&&Ne.stop()}function E(){Ne&&Ne.run()}function h(t,e){Ne=new j(t,e)}function O(){if(Ye)return Ye;if(en+=1,!(en>4)){var t={egret:"egret",layabox:"layabox",cocos:"cc.game",impact:"ig",phaser:"Phaser",pixi:"PIXI",create:"createjs",three:"THREE",gameMaker:"asset_get_type",playCanvas:"pc.fw",turbulenz:"TurbulenzEngine",quintus:"Quintus",melon:"me.game",lychee:"lychee",wade:"wade.addSceneObject",crafty:"Crafty",lime:"lime.Scene",enchant:"enchant",isogenic:"IgeEngine",gameclosure:"GC.Application",panda:"game.Scene",kiwi:"Kiwi",jaws:"jaws",sirius2d:"ss2d",collie:"collie",physics:"Physics",stage:"Stage.Anim",babylon:"BABYLON"};for(var e in t){var n=t[e];if(n.indexOf(".")>-1){var r=n.split("."),o=Xe[r[0]];if(o&&o[r[1]])return Ye=e,e}else if(Xe[n])return Ye=e,e}}}function y(){var t=Fe.loginTime||Fe.initTime;return{loginTime:t,onlineTime:Ce.parseInt(Date.now()/1e3)-t||1,extendMap:{from:Fe.from,engine:O()||"",app:Fe.app}}}function _(t,e){var n={headerInfo:pn,onlineInfo:y(),errorInfoList:tn.concat(),eventInfoList:mn.concat()};return t&&(n.paymentInfo=t),e&&(n.userInfo=e),n}function S(){mn.length=0,tn.length=0}function A(){if($e&&n($e.createElement)){var t=$e.createElement("div");if(!t)return!1;if(n(t.querySelector)){t.innerHTML="<i></i>";var e=t.querySelector("i");return!!e&&"I"===e.tagName}if(n(t.getElementsByTagName)){var r=t.getElementsByTagName("i");return!!r&&1===r.length}}return!1}function L(t){return pn.appId+"."+t}function N(t,e){t=L(t),fr.setItem(t,e),ar.set(t,e,3650)}function D(t){return t=L(t),fr.getItem(t)||ar.get(t)}function C(t,e){fr.setItem(L(t),e)}function R(t){return fr.getItem(L(t))}function w(t){fr.removeItem(L(t))}function x(){Ue.setItem(xe.LOGOUT_TIME,Ce.parseInt(Date.now()/1e3)),(tn.length||mn.length)&&Ue.setItem(xe.QUIT_SNAPSHOT,Ce.jsonStringify(_()))}function U(){var t=Ue.getItem(xe.QUIT_SNAPSHOT);return t&&Ce.jsonParse(t)}function M(t){bn>=we.MAX_ERROR_COUNT||(tn.push(t),bn+=1)}function P(t){mn.push(t)}function V(t,e){if(!t)return void Ce.tryThrow("Missing eventId");var n=function(t){return t.replace(/%/g,"_")};arguments.length>2&&(e=arguments[2]);var r={};if(Ce.isObject(e))for(var o in e)r[n(o)]="number"==typeof e[o]?e[o]:encodeURIComponent(e[o]);var i={eventId:n(t),eventMap:r};return Re.addEvent(i),e&&e.immediate?(De.stop(),De.run(),!1):void 0}function G(){return pn.uid||""}function H(t){var e=Xe.egret,n=new e.URLLoader,r=Date.now();n.addEventListener(e.Event.COMPLETE,function(e){var n=Date.now()-r,o=e.target,i="success"===o.data;Ce.attempt(i?t.success:t.error,o,[o,n,n>=t.timeout]),Ce.attempt(t.complete,o,[o,n])});var o=new e.URLRequest(t.url);o.method=t.method||e.URLRequestMethod.POST,o.data=Ce.jsonStringify(t.data),n.load(o)}function F(){return Xe.cc.loader.getXMLHttpRequest()}function k(t){var e=lr();sr.timeout&&(e.timeout=t.timeout),e.open(t.method||"POST",t.url,!0),sr.setContentType(e,"text/plain; charset=UTF-8");var n=Date.now();e.onreadystatechange=function(){if(4===this.readyState){var e=this.status>=200&&this.status<300,r=Date.now()-n;Ce.attempt(e?t.success:t.error,this,[this,r]),Ce.attempt(t.complete,this,[this,r]),this.onreadystatechange=null,this.ontimeout=null}},sr.timeout&&(e.ontimeout=function(){var e=Date.now()-n;Ce.attempt(t.error,this,[this,e,!0]),Ce.attempt(t.complete,this,[this,e]),this.onreadystatechange=null,this.ontimeout=null}),e.send(Ce.jsonStringify(t.data))}function X(){var t=!0,e=!0,n=lr();try{n.timeout=1}catch(r){t=!1}try{n.contentType="text/plain; charset=UTF-8"}catch(r){e=!1}var o=Me.useXDR?function(t,n){e&&(t.contentType=n)}:function(t,e){t.setRequestHeader("Content-Type",e)};return{timeout:t,contentType:e,setContentType:o}}function q(e,n){var r=Date.now();if(!n){if(r-Tr<we.ASAP_TIMEOUT)return void Ce.tryThrow("Request dropped: rate limit");Tr=r}jr+=1,t.report=e.data,pr({url:e.url,data:e.data,success:function(t,n){Ce.attempt(e.success,t,[t,n])},error:function(t,n,r){gr+=1,Ce.attempt(e.error,t,[t,n,r])},complete:function(t,n){if(Ce.attempt(e.complete,t,[t,n]),t.getAllResponseHeaders&&t.getResponseHeader){var r=t.getAllResponseHeaders(),o="X-Rate-Limit";if(-1!==r.indexOf(o)){var i=Ce.parseInt(t.getResponseHeader(o));i>1&&De.reset(1e3*i)}}}})}function B(t){if(!t)return!1;var e=t.onlineInfo.onlineTime;return 1>e||e>we.MAX_ONLINE_TIME?(Ce.tryThrow("Illegal online time"),!1):!0}function K(){return Fe.inited?void 0:(Ce.tryThrow("DCAgent.init needed"),!1)}function Y(){return Fe.loginTime?void 0:(Ce.tryThrow("DCAgent.login needed"),!1)}function z(){return Fe.destroyed?(Ce.tryThrow("DCAgent is destroyed already"),!1):void 0}function Q(t){return t+"?__deuid="+pn.uid+"&__deappid="+pn.appId}function J(t){return t+"?type=h520&appId="+pn.appId+"&uid="+pn.uid+"&mac="+(pn.mac||"")+"&imei="+(pn.imei||"")+"&idfa="+(pn.idfa||"")}function W(t,e,n){if(t||!Ce.hiddenProperty||!$e[Ce.hiddenProperty]){var r={url:Ve.appendOnline(Ve.API_PATH)},o=1;jr&&jr%Fe.oss===0&&(Re.addEvent({eventId:xe.REQ_KEY,eventMap:{succ:jr-gr,fail:gr,total:jr}}),o+=1),r.data=Re.collect(e,n);var i=r.data.eventInfoList[r.data.eventInfoList.length-o];if(i&&i.eventMap&&i.eventMap.immediate&&(t=!0),Pe.isParamsValid(r.data)){Re.clear();var c=r.data.errorInfoList,u=r.data.eventInfoList;(u.length||c.length)&&(r.error=function(){c.forEach(function(t){Re.addError(t)}),u.forEach(function(t){Re.addEvent(t)})}),q(r,t)}}}function $(t){t||(t=we.ASAP_TIMEOUT),Be(mr),De.stop(),mr=qe(function(){De.run()},t)}function Z(t){if(!t)return void Ce.tryThrow("Missing accountID");if(pn.accountId===t)return void(Fe.loginTime=Fe.loginTime||Ce.parseInt(Date.now()/1e3));Ge.setPollingDebounce(Fe.interval),W(!0),Fe.loginTime=Ce.parseInt(Date.now()/1e3);var e=xe.ACCOUNT_RELATED_SETTINGS+","+xe.ACCOUNT_ROLE_SETTINGS;e.split(",").forEach(function(t){return pn[t]=""}),pn.age=we.DEFAULT_AGE,pn.gender=we.DEFAULT_GENDER,pn.roleLevel=we.DEFAULT_ROLE_LEVEL,pn.accountId=t,W(!0)}function te(t,e,n,r){var o=arguments;xe.ACCOUNT_ROLE_SETTINGS.split(",").forEach(function(t,e){return pn[t]=o[e]||""}),pn.roleLevel=Ce.parseInt(r)||1}function ee(t,e,n,r){te(t,e,n,r),V("DE_EVENT_CREATE_ROLE",{roleId:String(t),roleRace:String(e),roleClass:String(n)})}function ne(t){pn.gender=2===t?2:1}function re(t){pn.gameServer=String(t)}function oe(t){t=Ce.parseInt(t),pn.age=t>0&&128>t?t:0}function ie(t){pn.accountType=String(t)}function ce(t,e){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_TASK,{actionType:"taskUnfinish",taskId:String(t),elapsed:e})}function ue(t,e){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_TASK,{actionType:"taskFinish",taskId:String(t),elapsed:e})}function ae(t){if(!t||!t.hasOwnProperty("amount"))return void Ce.tryThrow("Missing amount");var e={currencyAmount:Ce.max(parseFloat(t.amount,10)||0),currencyType:t.currencyType||"CNY",payType:String(t.payType||""),iapid:String(t.iapid||""),payTime:Ce.parseInt(Date.now()/1e3),extendMap:{orderId:String(t.orderId||"")}};return e.currencyAmount<=0?void Ce.tryThrow("amount must be greater than 0"):(W(!0,e),e)}function se(t,e){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_MISSION,{actionType:"guankaUnfinish",guankaId:String(t),duration:e})}function fe(t,e){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_MISSION,{actionType:"guankaFinish",guankaId:String(t),duration:e})}function ge(t,e,n){return t=Ce.parseInt(t),e=Ce.parseInt(e),n=Ce.parseInt(n),0>t||0>e||t>e||0>n?(Ce.tryThrow("Argument error"),!1):(pn.roleLevel=e,void V(xe.EVT_LEVEL,{startLevel:t,endLevel:e,duration:n}))}function de(t,e,n,r){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_ITEM,{actionType:"itemUse",itemId:String(t),itemNum:e,reason:String(r),missonID:String(n)})}function le(t,e,n,r){return e=Ce.parseInt(e),0>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_ITEM,{actionType:"itemGet",itemId:String(t),itemNum:e,reason:String(r),missonID:String(n)})}function pe(t,e,n,r,o){return e=Ce.parseInt(e),r=Ce.parseInt(r),0>e||0>r?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_ITEM,{actionType:"itemBuy",itemId:String(t),itemNum:e,coinType:String(n),coinNum:r,missonID:String(o)})}function me(t,e,n,r){return e=Ce.parseInt(e),t=Ce.parseInt(t),0>e||0>t?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_COIN,{actionType:"coinUse",coinType:String(n),balanceNum:e,coinNum:t,reason:String(r)})}function be(t,e,n,r){return e=Ce.parseInt(e),t=Ce.parseInt(t),0>e||0>t||t>e?(Ce.tryThrow("Argument error"),!1):void V(xe.EVT_COIN,{actionType:"coinGet",coinType:String(n),balanceNum:e,coinNum:t,reason:String(r)})}function je(){for(var t=["pagehide","beforeunload","unload"],e=0;e<t.length;e+=1)if("on"+t[e]in Xe)return t[e]}function Te(t){if(Xe.addEventListener){var e=je();e&&Xe.addEventListener(e,t)}}function ve(t){if(Fe.storage&&(Te(Re.saveToStorage),!t)){var e=Re.loadFromStorage();e&&(q({url:Ve.appendOnline(Ve.API_PATH),data:e},!0),Ue.removeItem(xe.QUIT_SNAPSHOT))}}function Ie(){Xe.addEventListener&&Xe.addEventListener("error",function(t){Ce.attempt(function(){var e={},n=["colno","filename","lineno","message"];n.forEach(function(n){return e[n]=t[n]||"1"});var r=t.error||{};if(e.stack=encodeURIComponent(r.stack||r.stacktrace||""),e.type=r.name||"Error",e.timestamp=parseInt(t.timeStamp/1e3),Ce.isFunction(Fe.getErrorScene)){var o=Ce.attempt(Fe.getErrorScene,r,[t]);if(o){if(Ce.isObject(o)){var i="";for(var c in o)i+=" "+c+"="+o[c]+"\n";o=i}else o=String(o);e.stack+="\n\nError scene:\n"+encodeURIComponent(o)}}Re.addError(e)})},!1)}function Ee(){var t=Date.now().toString(36).toUpperCase(),e=He.engine;return e.egret?xe.EGRET_PREFIX+t:e.layabox?xe.LAYA_PREFIX+t:e.cocos?xe.COCOS_PREFIX+t:xe.UNKNOW_ENGINE+t}function he(){var t;try{if(He.engine.layabox){var e=Xe.layabox.getDeviceInfo()||{};t=e.mac||e.idfa,t=t&&t.replace(/[-_:=\s]+/g,"").toUpperCase()}}catch(n){t=null}return t=Ce.padding(t,xe.PADDING_STRING,we.UID_MIN_LENGTH),t||Ce.uuid(Ee())}function Oe(t){if(pn.uid){var e=Ce.padding(pn.uid,xe.PADDING_STRING,we.UID_MIN_LENGTH);t!==e&&(pn.uid=e,t=e,Ue.setItem(xe.CREATE_TIME,Ce.parseInt(Date.now()/1e3)))}var n=t||he();return Ue.setUID(xe.CLIENT_KEY,n),n}function ye(t){var e=Ue.getUID(xe.CLIENT_KEY),n=e?0:1,r=Oe(e);pn.uid=r,pn.accountId=r,t.errorReport&&Ie(),Fe.initTime=Ce.parseInt(Date.now()/1e3);var o=Ue.getItem(xe.CREATE_TIME);o||(o=Fe.initTime,Ue.setItem(xe.CREATE_TIME,o)),Fe.createTime=Ce.parseInt(o);var i=or.href||"!";Re.addEvent({eventId:xe.EVT_PV,eventMap:{page:encodeURI(i.split("?")[0])}});var c=n?{actTime:o,regTime:o}:null;W(!0,null,c),ve(n);var u=1e3*Math.max(we.MIN_ONLINE_INTERVAL,parseFloat(t.interval||we.MIN_ONLINE_INTERVAL));De.set(W,u),Fe.interval=u,Fe.inited=!0}function _e(t){return Fe.storage=Ce.isLocalStorageSupported(Ue),t.uid||Fe.storage?Fe.inited?"Initialization ignored":t&&t.appId?(t.appId=t.appId.toUpperCase(),Fe.oss="number"==typeof t.oss?t.oss:0,Fe.getErrorScene=t.getErrorScene,Fe.app=t.appName||"",Fe.from=t.from||Ce.getHostName($e.referrer),void xe.USER_INIT_BASE_SETTINGS.split(",").forEach(function(e){t.hasOwnProperty(e)&&(pn[e]=t[e])})):"Missing appId":Me.hasStorage?"Storage quota error":"Storage not support"}function Se(t){if(Pe.shouldNotBeDestoryed()!==!1){var e=_e(t);if(e)return Ce.tryThrow(e);ye(t),Ce.isDebug||q({url:Ve.appendEcho(Me.protocol+"//"+xe.HOST+"/echo"),method:"GET"},!0)}}function Ae(){return Fe.inited}function Le(){v(),Fe.destroyed=!0}var Ne,De={get reset(){return T},get cancel(){return v},get stop(){return I},get run(){return E},get set(){return h}},Ce={get isDebug(){return Qe},get noop(){return e},get isFunction(){return n},get isObject(){return r},get log(){return o},get tryThrow(){return Je},get uuid(){return i},get extend(){return c},get attempt(){return We},get isLocalStorageSupported(){return u},get repeat(){return a},get padding(){return s},get aspect(){return f},get getHostName(){return g},get hiddenProperty(){return Ze},get slice(){return d},get parseInt(){return l},get max(){return p},get jsonStringify(){return m},get jsonParse(){return b}},Re={get getOnlineInfo(){return y},get collect(){return _},get clear(){return S},get saveToStorage(){return x},get loadFromStorage(){return U},get addError(){return M},get addEvent(){return P}},we={get REQUEST_TIME_OUT(){return nn},get MAX_ONLINE_TIME(){return rn},get MIN_ONLINE_INTERVAL(){return on},get UID_MIN_LENGTH(){return cn},get ASAP_TIMEOUT(){return un},get MAX_ERROR_COUNT(){return an},get DEFAULT_AGE(){return sn},get DEFAULT_GENDER(){return fn},get DEFAULT_ROLE_LEVEL(){return gn},get DEFAULT_NET_TYPE(){return dn},get DEFAULT_PLATFORM(){return ln}},xe={get HOST(){return Dn},get CREATE_TIME(){return Cn},get EGRET_PREFIX(){return Rn},get LAYA_PREFIX(){return wn},get COCOS_PREFIX(){return xn},get UNKNOW_ENGINE(){return Un},get PARENT_KEY(){return Mn},get EVENTS_KEY(){return Pn},get ERRORS_KEY(){return Vn},get CLIENT_KEY(){return Gn},get QUIT_SNAPSHOT(){return Hn},get LOGOUT_TIME(){return Fn},get API_PATH(){return kn},get PADDING_STRING(){return Xn},get REQ_KEY(){return qn},get USER_INIT_BASE_SETTINGS(){return Bn},get ACCOUNT_RELATED_SETTINGS(){return Kn},get ACCOUNT_ROLE_SETTINGS(){return Yn},get EVT_COIN(){return zn},get EVT_ITEM(){return Qn},get EVT_LEVEL(){return Jn},get EVT_MISSION(){return Wn},get EVT_TASK(){return $n},get EVT_PV(){return Zn}},Ue={get setUID(){return N},get getUID(){return D},get setItem(){return C},get getItem(){return R},get removeItem(){return w}},Me={get hasStorage(){return er},get isStandardBrowser(){return nr},get hasCookie(){return rr},get protocol(){return ir},get useXDR(){return cr},get device(){return An}},Pe={get isParamsValid(){return B},get shouldBeInited(){return K},get shouldBeLoggedIn(){return Y},get shouldNotBeDestoryed(){return z}},Ve={get API_PATH(){return vr},get appendOnline(){return Q},get appendEcho(){return J}},Ge={get setPollingDebounce(){return $}},He={get engine(){return Ke},get"default"(){return O}},Fe={inited:!1},ke=(1,eval)("this"),Xe=ke||{},qe=Xe.setTimeout,Be=Xe.clearTimeout,Ke={isEgret:!!Xe.egret,isLayabox:!!Xe.layabox,isCocos:!!Xe.cc&&!!Xe.cc.game};Ke.isEgret&&!qe&&(qe=function(t,e){Xe.egret.setTimeout(t,Xe,e)},Be=function(t){Xe.egret.clearTimeout(t)});var Ye,ze=Object.prototype.toString,Qe=Xe.DCAGENT_DEBUG_OPEN,Je=Qe?function(t){throw new Error(t)}:function(t){o(t)},We=Qe?function(t,e,r){return n(t)?t.apply(e,r):void 0}:function(t,e,r){if(n(t))try{return t.apply(e,r)}catch(i){o("exec error for function:\n "+t.toString())}},$e=ke.document||{},Ze="hidden"in $e?"hidden":"webkitHidden"in $e?"webkitHidden":"mozHidden"in $e?"mozHidden":"msHidden"in $e?"msHidden":null,tn=[],en=0;t.version=27;var nn=3e4,rn=172800,on=40,cn=32,un=5e3,an=100,sn=0,fn=0,gn=0,dn=3,ln=0,pn={accountId:"",accountType:"",age:we.DEFAULT_AGE,appId:"",appVersion:"",brand:"",channel:"",customDeviceId:"",gameServer:"",gender:we.DEFAULT_GENDER,idfa:"",imei:"",lonLat:"",mac:"",netType:we.DEFAULT_NET_TYPE,operator:"",osVersion:"",platform:we.DEFAULT_PLATFORM,resolution:"",roleClass:"",roleId:"",roleLevel:we.DEFAULT_ROLE_LEVEL,roleRace:"",simCardOp:"",uid:"",ver:t.version},mn=[],bn=0,jn=we.DEFAULT_PLATFORM,Tn=Xe.screen||{},vn=Tn.width&&Tn.width+"*"+Tn.height,In="0*0";vn||(vn=In);var En="",hn="",On=Xe.navigator&&Xe.navigator.userAgent||"";if(!On){var yn=["ios","android"];if(Ke.layabox){var _n=Xe.layabox.getDeviceInfo()||{};vn=_n.resolution||In,hn=_n.phonemodel,jn=yn.indexOf(_n.os.toLowerCase()),En=(_n.os+" "+_n.osversion).toLowerCase()}else if(Ke.cocos){var Sn=Xe.cc.view.getViewPortRect()||{};vn=Sn.width+"*"+Sn.height,jn=yn.indexOf(Xe.cc.sys.os.toLowerCase())}-1===[0,1,2,3].indexOf(jn)&&(jn=we.DEFAULT_PLATFORM)}var An={resolution:vn,brand:hn,osVersion:En,platform:jn};for(var Ln in An)pn[Ln]=pn[Ln]||An[Ln];var Nn,Dn="rd.gdatacube.net",Cn="dcagent_create_time",Rn="EGRET",wn="LAYA",xn="COCOS",Un="UE",Mn="dcagent_parent_id",Pn="dcagent_client_events",Vn="dcagent_client_errors",Gn="dcagent_client_id",Hn="dcagent_snapshot",Fn="dc_p_lo",kn="/dc/hh5/sync",Xn="0A",qn="DE_EVENT_OSS",Bn="appId,appVersion,brand,channel,customDeviceId,idfa,imei,lonLat,mac,netType,operator,osVersion,platform,simCardOp,uid",Kn="accountId,accountType,age,gender,gameServer",Yn="roleId,roleRace,roleClass,roleLevel",zn="DE_EVENT_COIN_ACTION",Qn="DE_EVENT_ITEM_ACTION",Jn="DE_EVENT_LEVELUP",Wn="DE_EVENT_GUANKA_ACTION",$n="DE_EVENT_TASK_ACTION",Zn="DE_EVENT_PV",tr={get:function(t){var e="(^|)\\s*"+t+"=([^\\s]*)",n=$e.cookie.match(new RegExp(e));return n&&n.length>=3?decodeURIComponent(n[2]):null},set:function(t,e,n,r,o,i){var c;n&&(c=new Date,c.setTime(c.getTime()+864e5*n));var u=n?" expires="+c.toGMTString():"",a=" path="+(o||"/"),s=r?" domain="+r:"",f=i?" secure":"";$e.cookie=t+"="+encodeURIComponent(e)+u+a+s+f},remove:function(t,e,n){tr.set(t,"",-1,e,n)}},er=!!Xe.localStorage||Ke.isEgret||Ke.isCocos||Ke.isLayabox,nr=A(),rr=nr&&"cookie"in $e,or=ke.location||{},ir="https:"===or.protocol?"https:":"http:",cr=!!Xe.XDomainRequest,ur=Me.hasCookie?tr:{get:Ce.noop,set:Ce.noop},ar=ur;Nn=Ke.isEgret?Xe.egret.localStorage:Ke.isCocos?Xe.cc.sys.localStorage:er?Xe.localStorage:{getItem:e,setItem:e,removeItem:e};var sr,fr=Nn,gr=0,dr=Me.useXDR?function(){return new Xe.XDomainRequest}:function(){return new Xe.XMLHttpRequest},lr=Ke.isCocos?F:dr,pr=function(){return Xe.XMLHttpRequest||Ke.isCocos?(sr=X(),k):Ke.isEgret?H:(Ce.log("XMLHttpRequest not found"),Ce.noop)}();t.report;var mr,br,jr=0,Tr=Date.now()-we.ASAP_TIMEOUT,vr=Me.protocol+"//"+xe.HOST+xe.API_PATH,Ir={login:Z,getUid:G,onEvent:V},Er={onCoinGet:be,onCoinUse:me,onItemBuy:pe,onItemProduce:le,onItemUse:de,onLevelUp:ge,onMissionFinished:fe,onMissionUnfinished:se,onPayment:ae,onTaskFinished:ue,onTaskUnfinished:ce,setAccountType:ie,setAge:oe,setGameServer:re,setGender:ne,setRoleInfo:te,createRole:ee},hr=[Pe.shouldNotBeDestoryed,Pe.shouldBeInited],Or=[Pe.shouldNotBeDestoryed,Pe.shouldBeLoggedIn],yr=[function(){return Ge.setPollingDebounce()}];for(br in Ir)t[br]=Ce.aspect(Ir[br],hr,"onEvent"===br&&yr);for(br in Er)t[br]=Ce.aspect(Er[br],Or,"onPayment"!==br&&yr);t.init=Se,t.isReady=Ae,t.destroy=Le;var _r=Xe.DCAgentObject;if(_r){var Sr=Xe[_r];if(Ce.isFunction(Sr)){var Ar=Sr.cache;Ar.length&&(Ar.forEach(function(e){Ce.attempt(t[e[0]],t,Ce.slice(e,1))}),Ar.length=0)}}var Lr={get isNew(){var t=Fe.loginTime||Fe.initTime;return Fe.createTime===t},get initTime(){return Fe.initTime},get createTime(){return Fe.createTime},get loginTime(){return Fe.loginTime},get lastLogoutTime(){return parseInt(Ue.getItem(xe.LOGOUT_TIME))},get reportCount(){return jr},get reportFailedCount(){return gr}};t.state=Fe,t.player=Lr});

 //libs/modules/moment/moment.min.js
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Pn.apply(null,arguments)}function e(t){Pn=t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,n,i){return Ot(t,e,n,i,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(t){return null==t._pf&&(t._pf=u()),t._pf}function l(t){if(null==t._isValid){var e=d(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function c(t){var e=a(NaN);return null!=t?o(d(e),t):d(e).userInvalidated=!0,e}function f(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=d(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Hn.length>0)for(n in Hn)i=Hn[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function h(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Ln===!1&&(Ln=!0,t.updateOffset(this),Ln=!1)}function m(t){return t instanceof h||null!=t&&null!=t._isAMomentObject}function _(t){return 0>t?Math.ceil(t):Math.floor(t)}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=_(e)),n}function p(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&o++;return o+s}function g(){}function D(t){return t?t.toLowerCase().replace("_","-"):t}function v(t){for(var e,n,i,r,s=0;s<t.length;){for(r=D(t[s]).split("-"),e=r.length,n=D(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=M(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&p(r,n,!0)>=e-1)break;e--}s++}return null}function M(t){var e=null;if(!In[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=xn._abbr,require("./locale/"+t),Y(e)}catch(n){}return In[t]}function Y(t,e){var n;return t&&(n="undefined"==typeof e?S(t):w(t,e),n&&(xn=n)),xn._abbr}function w(t,e){return null!==e?(e.abbr=t,In[t]=In[t]||new g,In[t].set(e),Y(t),In[t]):(delete In[t],null)}function S(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xn;if(!n(t)){if(e=M(t))return e;t=[t]}return v(t)}function k(t,e){var n=t.toLowerCase();An[n]=An[n+"s"]=An[e]=t}function T(t){return"string"==typeof t?An[t]||An[t.toLowerCase()]:void 0}function b(t){var e,n,i={};for(n in t)s(t,n)&&(e=T(n),e&&(i[e]=t[n]));return i}function O(e,n){return function(i){return null!=i?(W(this,e,i),t.updateOffset(this,n),this):U(this,e)}}function U(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function W(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function C(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function G(t,e,n){var i=""+Math.abs(t),r=e-i.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function F(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(jn[t]=r),e&&(jn[e[0]]=function(){return G(r.apply(this,arguments),e[1],e[2])}),n&&(jn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function x(t){var e,n,i=t.match(zn);for(e=0,n=i.length;n>e;e++)jn[i[e]]?i[e]=jn[i[e]]:i[e]=P(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function H(t,e){return t.isValid()?(e=L(e,t.localeData()),Zn[e]=Zn[e]||x(e),Zn[e](t)):t.localeData().invalidDate()}function L(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Nn.lastIndex=0;i>=0&&Nn.test(t);)t=t.replace(Nn,n),Nn.lastIndex=0,i-=1;return t}function I(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function A(t,e,n){ri[t]=I(e)?e:function(t){return t&&n?n:e}}function z(t,e){return s(ri,t)?ri[t](e._strict,e._locale):new RegExp(N(t))}function N(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=y(t)}),n=0;n<t.length;n++)si[t[n]]=i}function j(t,e){Z(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function E(t,e,n){null!=e&&s(si,t)&&si[t](e,n._a,n,t)}function V(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function q(t){return this._months[t.month()]}function J(t){return this._monthsShort[t.month()]}function $(t,e,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function R(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),V(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function B(e){return null!=e?(R(this,e),t.updateOffset(this,!0),this):U(this,"Month")}function Q(){return V(this.year(),this.month())}function X(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[ai]<0||n[ai]>11?ai:n[ui]<1||n[ui]>V(n[oi],n[ai])?ui:n[di]<0||n[di]>24||24===n[di]&&(0!==n[li]||0!==n[ci]||0!==n[fi])?di:n[li]<0||n[li]>59?li:n[ci]<0||n[ci]>59?ci:n[fi]<0||n[fi]>999?fi:-1,d(t)._overflowDayOfYear&&(oi>e||e>ui)&&(e=ui),d(t).overflow=e),t}function K(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function tt(t,e){var n=!0;return o(function(){return n&&(K(t+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function et(t,e){_i[t]||(K(e),_i[t]=!0)}function nt(t){var e,n,i=t._i,r=yi.exec(i);if(r){for(d(t).iso=!0,e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f=pi[e][0];break}for(e=0,n=gi.length;n>e;e++)if(gi[e][1].exec(i)){t._f+=(r[6]||" ")+gi[e][0];break}i.match(ei)&&(t._f+="Z"),Mt(t)}else t._isValid=!1}function it(e){var n=Di.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(nt(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function rt(t,e,n,i,r,s,o){var a=new Date(t,e,n,i,r,s,o);return 1970>t&&a.setFullYear(t),a}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ot(t){return at(t)?366:365}function at(t){return t%4===0&&t%100!==0||t%400===0}function ut(){return at(this.year())}function dt(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Ut(t).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(t){return dt(t,this._week.dow,this._week.doy).week}function ct(){return this._week.dow}function ft(){return this._week.doy}function ht(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function mt(t){var e=dt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function _t(t,e,n,i,r){var s,o=6+r-i,a=st(t,0,1+o),u=a.getUTCDay();return r>u&&(u+=7),n=null!=n?1*n:r,s=1+o+7*(e-1)-u+n,{year:s>0?t:t-1,dayOfYear:s>0?s:ot(t-1)+s}}function yt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function pt(t,e,n){return null!=t?t:null!=e?e:n}function gt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Dt(t){var e,n,i,r,s=[];if(!t._d){for(i=gt(t),t._w&&null==t._a[ui]&&null==t._a[ai]&&vt(t),t._dayOfYear&&(r=pt(t._a[oi],i[oi]),t._dayOfYear>ot(r)&&(d(t)._overflowDayOfYear=!0),n=st(r,0,t._dayOfYear),t._a[ai]=n.getUTCMonth(),t._a[ui]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[di]&&0===t._a[li]&&0===t._a[ci]&&0===t._a[fi]&&(t._nextDay=!0,t._a[di]=0),t._d=(t._useUTC?st:rt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[di]=24)}}function vt(t){var e,n,i,r,s,o,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,o=4,n=pt(e.GG,t._a[oi],dt(Ut(),1,4).year),i=pt(e.W,1),r=pt(e.E,1)):(s=t._locale._week.dow,o=t._locale._week.doy,n=pt(e.gg,t._a[oi],dt(Ut(),s,o).year),i=pt(e.w,1),null!=e.d?(r=e.d,s>r&&++i):r=null!=e.e?e.e+s:s),a=_t(n,i,r,o,s),t._a[oi]=a.year,t._dayOfYear=a.dayOfYear}function Mt(e){if(e._f===t.ISO_8601)return void nt(e);e._a=[],d(e).empty=!0;var n,i,r,s,o,a=""+e._i,u=a.length,l=0;for(r=L(e._f,e._locale).match(zn)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(z(s,e))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&d(e).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),l+=i.length),jn[s]?(i?d(e).empty=!1:d(e).unusedTokens.push(s),E(s,i,e)):e._strict&&!i&&d(e).unusedTokens.push(s);d(e).charsLeftOver=u-l,a.length>0&&d(e).unusedInput.push(a),d(e).bigHour===!0&&e._a[di]<=12&&e._a[di]>0&&(d(e).bigHour=void 0),e._a[di]=Yt(e._locale,e._a[di],e._meridiem),Dt(e),X(e)}function Yt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function wt(t){var e,n,i,r,s;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=f({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Mt(e),l(e)&&(s+=d(e).charsLeftOver,s+=10*d(e).unusedTokens.length,d(e).score=s,(null==i||i>s)&&(i=s,n=e));o(t,n||e)}function St(t){if(!t._d){var e=b(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Dt(t)}}function kt(t){var e=new h(X(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var e=t._i,r=t._f;return t._locale=t._locale||S(t._l),null===e||void 0===r&&""===e?c({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),m(e)?new h(X(e)):(n(r)?wt(t):r?Mt(t):i(e)?t._d=e:bt(t),t))}function bt(e){var s=e._i;void 0===s?e._d=new Date:i(s)?e._d=new Date(+s):"string"==typeof s?it(e):n(s)?(e._a=r(s.slice(0),function(t){return parseInt(t,10)}),Dt(e)):"object"==typeof s?St(e):"number"==typeof s?e._d=new Date(s):t.createFromInputFallback(e)}function Ot(t,e,n,i,r){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=t,s._f=e,s._strict=i,kt(s)}function Ut(t,e,n,i){return Ot(t,e,n,i,!1)}function Wt(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ut();for(i=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](i)||(i=e[r]);return i}function Ct(){var t=[].slice.call(arguments,0);return Wt("isBefore",t)}function Gt(){var t=[].slice.call(arguments,0);return Wt("isAfter",t)}function Ft(t){var e=b(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Pt(t){return t instanceof Ft}function xt(t,e){F(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+G(~~(t/60),2)+e+G(~~t%60,2)})}function Ht(t){var e=(t||"").match(ei)||[],n=e[e.length-1]||[],i=(n+"").match(Si)||["-",0,0],r=+(60*i[1])+y(i[2]);return"+"===i[0]?r:-r}function Lt(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(m(e)||i(e)?+e:+Ut(e))-+r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Ut(e).local()}function It(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function At(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ht(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=It(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?ee(this,Bt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:It(this)}function zt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Nt(t){return this.utcOffset(0,t)}function Zt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(It(this),"m")),this}function jt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ht(this._i)),this}function Et(t){return t=t?Ut(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Vt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(f(t,this),t=Tt(t),t._a){var e=t._isUTC?a(t._a):Ut(t._a);this._isDSTShifted=this.isValid()&&p(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jt(){return!this._isUTC}function $t(){return this._isUTC}function Rt(){return this._isUTC&&0===this._offset}function Bt(t,e){var n,i,r,o=t,a=null;return Pt(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=ki.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[ui])*n,h:y(a[di])*n,m:y(a[li])*n,s:y(a[ci])*n,ms:y(a[fi])*n}):(a=Ti.exec(t))?(n="-"===a[1]?-1:1,o={y:Qt(a[2],n),M:Qt(a[3],n),d:Qt(a[4],n),h:Qt(a[5],n),m:Qt(a[6],n),s:Qt(a[7],n),w:Qt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Kt(Ut(o.from),Ut(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Ft(o),Pt(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Qt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Kt(t,e){var n;return e=Lt(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function te(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Bt(n,i),ee(this,r,t),this}}function ee(e,n,i,r){var s=n._milliseconds,o=n._days,a=n._months;r=null==r?!0:r,s&&e._d.setTime(+e._d+s*i),o&&W(e,"Date",U(e,"Date")+o*i),a&&R(e,U(e,"Month")+a*i),r&&t.updateOffset(e,o||a)}function ne(t,e){var n=t||Ut(),i=Lt(n,this).startOf("day"),r=this.diff(i,"days",!0),s=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(e&&e[s]||this.localeData().calendar(s,this,Ut(n)))}function ie(){return new h(this)}function re(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this>+t):(n=m(t)?+t:+Ut(t),n<+this.clone().startOf(e))}function se(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+t>+this):(n=m(t)?+t:+Ut(t),+this.clone().endOf(e)<n)}function oe(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function ae(t,e){var n;return e=T(e||"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this===+t):(n=+Ut(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function ue(t,e,n){var i,r,s=Lt(t,this),o=6e4*(s.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(r=de(this,s),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?r:_(r)}function de(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)}function le(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ce(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fe(e){var n=H(this,e||t.defaultFormat);return this.localeData().postformat(n)}function he(t,e){return this.isValid()?Bt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function me(t){return this.from(Ut(),t)}function _e(t,e){return this.isValid()?Bt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ye(t){return this.to(Ut(),t)}function pe(t){var e;return void 0===t?this._locale._abbr:(e=S(t),null!=e&&(this._locale=e),this)}function ge(){return this._locale}function De(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ve(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function Me(){return+this._d-6e4*(this._offset||0)}function Ye(){return Math.floor(+this/1e3)}function we(){return this._offset?new Date(+this):this._d}function Se(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ke(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Te(){return l(this)}function be(){return o({},d(this))}function Oe(){return d(this).overflow}function Ue(t,e){F(0,[t,t.length],0,e)}function We(t,e,n){return dt(Ut([t,11,31+e-n]),e,n).week}function Ce(t){var e=dt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ge(t){var e=dt(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Fe(){return We(this.year(),1,4)}function Pe(){var t=this.localeData()._week;return We(this.year(),t.dow,t.doy)}function xe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function He(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Le(t){return this._weekdays[t.day()]}function Ie(t){return this._weekdaysShort[t.day()]}function Ae(t){return this._weekdaysMin[t.day()]}function ze(t){var e,n,i;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Ut([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ne(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=He(t,this.localeData()),this.add(t-e,"d")):e}function Ze(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function je(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Ee(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ve(t,e){return e._meridiemParse}function qe(t){return"p"===(t+"").toLowerCase().charAt(0)}function Je(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function $e(t,e){e[fi]=y(1e3*("0."+t))}function Re(){return this._isUTC?"UTC":""}function Be(){return this._isUTC?"Coordinated Universal Time":""}function Qe(t){return Ut(1e3*t)}function Xe(){return Ut.apply(null,arguments).parseZone()}function Ke(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function tn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function en(){return this._invalidDate}function nn(t){return this._ordinal.replace("%d",t)}function rn(t){return t}function sn(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)}function on(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function an(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function un(t,e,n,i){var r=S(),s=a().set(i,e);return r[n](s,t)}function dn(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return un(t,e,n,r);var s,o=[];for(s=0;i>s;s++)o[s]=un(t,s,n,r);return o}function ln(t,e){return dn(t,e,"months",12,"month")}function cn(t,e){return dn(t,e,"monthsShort",12,"month")}function fn(t,e){return dn(t,e,"weekdays",7,"day")}function hn(t,e){return dn(t,e,"weekdaysShort",7,"day")}function mn(t,e){return dn(t,e,"weekdaysMin",7,"day")}function _n(){var t=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),t.milliseconds=Ri(t.milliseconds),t.seconds=Ri(t.seconds),t.minutes=Ri(t.minutes),t.hours=Ri(t.hours),t.months=Ri(t.months),t.years=Ri(t.years),this}function yn(t,e,n,i){var r=Bt(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function pn(t,e){return yn(this,t,e,1)}function gn(t,e){return yn(this,t,e,-1)}function Dn(t){return 0>t?Math.floor(t):Math.ceil(t)}function vn(){var t,e,n,i,r,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||0>=s&&0>=o&&0>=a||(s+=864e5*Dn(Yn(a)+o),o=0,a=0),u.milliseconds=s%1e3,t=_(s/1e3),u.seconds=t%60,e=_(t/60),u.minutes=e%60,n=_(e/60),u.hours=n%24,o+=_(n/24),r=_(Mn(o)),a+=r,o-=Dn(Yn(r)),i=_(a/12),a%=12,u.days=o,u.months=a,u.years=i,this}function Mn(t){return 4800*t/146097}function Yn(t){return 146097*t/4800}function wn(t){var e,n,i=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+Mn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Yn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Sn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function kn(t){return function(){return this.as(t)}}function Tn(t){return t=T(t),this[t+"s"]()}function bn(t){return function(){return this._data[t]}}function On(){return _(this.days()/7)}function Un(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Wn(t,e,n){var i=Bt(t).abs(),r=cr(i.as("s")),s=cr(i.as("m")),o=cr(i.as("h")),a=cr(i.as("d")),u=cr(i.as("M")),d=cr(i.as("y")),l=r<fr.s&&["s",r]||1===s&&["m"]||s<fr.m&&["mm",s]||1===o&&["h"]||o<fr.h&&["hh",o]||1===a&&["d"]||a<fr.d&&["dd",a]||1===u&&["M"]||u<fr.M&&["MM",u]||1===d&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,Un.apply(null,l)}function Cn(t,e){return void 0===fr[t]?!1:void 0===e?fr[t]:(fr[t]=e,!0)}function Gn(t){var e=this.localeData(),n=Wn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Fn(){var t,e,n,i=hr(this._milliseconds)/1e3,r=hr(this._days),s=hr(this._months);t=_(i/60),e=_(t/60),i%=60,t%=60,n=_(s/12),s%=12;var o=n,a=s,u=r,d=e,l=t,c=i,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(d||l||c?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var Pn,xn,Hn=t.momentProperties=[],Ln=!1,In={},An={},zn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Nn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zn={},jn={},En=/\d/,Vn=/\d\d/,qn=/\d{3}/,Jn=/\d{4}/,$n=/[+-]?\d{6}/,Rn=/\d\d?/,Bn=/\d{1,3}/,Qn=/\d{1,4}/,Xn=/[+-]?\d{1,6}/,Kn=/\d+/,ti=/[+-]?\d+/,ei=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ri={},si={},oi=0,ai=1,ui=2,di=3,li=4,ci=5,fi=6;F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),k("month","M"),A("M",Rn),A("MM",Rn,Vn),A("MMM",ii),A("MMMM",ii),Z(["M","MM"],function(t,e){e[ai]=y(t)-1}),Z(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[ai]=r:d(n).invalidMonth=t});var hi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_i={};t.suppressDeprecationWarnings=!1;var yi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Di=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),k("year","y"),A("Y",ti),A("YY",Rn,Vn),A("YYYY",Qn,Jn),A("YYYYY",Xn,$n),A("YYYYYY",Xn,$n),Z(["YYYYY","YYYYYY"],oi),Z("YYYY",function(e,n){n[oi]=2===e.length?t.parseTwoDigitYear(e):y(e)}),Z("YY",function(e,n){n[oi]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var vi=O("FullYear",!1);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),A("w",Rn),A("ww",Rn,Vn),A("W",Rn),A("WW",Rn,Vn),j(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});var Mi={dow:0,doy:6};F("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),A("DDD",Bn),A("DDDD",qn),Z(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),t.ISO_8601=function(){};var Yi=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return this>t?this:t}),wi=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return t>this?this:t});xt("Z",":"),xt("ZZ",""),A("Z",ei),A("ZZ",ei),Z(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ht(t)});var Si=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var ki=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ti=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Bt.fn=Ft.prototype;var bi=te(1,"add"),Oi=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ui=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ue("gggg","weekYear"),Ue("ggggg","weekYear"),Ue("GGGG","isoWeekYear"),Ue("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),A("G",ti),A("g",ti),A("GG",Rn,Vn),A("gg",Rn,Vn),A("GGGG",Qn,Jn),A("gggg",Qn,Jn),A("GGGGG",Xn,$n),A("ggggg",Xn,$n),j(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),j(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),F("Q",0,0,"quarter"),k("quarter","Q"),A("Q",En),Z("Q",function(t,e){e[ai]=3*(y(t)-1)}),F("D",["DD",2],"Do","date"),k("date","D"),A("D",Rn),A("DD",Rn,Vn),A("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),Z(["D","DD"],ui),Z("Do",function(t,e){e[ui]=y(t.match(Rn)[0],10)});var Wi=O("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),A("d",Rn),A("e",Rn),A("E",Rn),A("dd",ii),A("ddd",ii),A("dddd",ii),j(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:d(n).invalidWeekday=t}),j(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var Ci="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Gi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Fi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),Ee("a",!0),Ee("A",!1),k("hour","h"),A("a",Ve),A("A",Ve),A("H",Rn),A("h",Rn),A("HH",Rn,Vn),A("hh",Rn,Vn),Z(["H","HH"],di),Z(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),Z(["h","hh"],function(t,e,n){e[di]=y(t),d(n).bigHour=!0});var Pi=/[ap]\.?m?\.?/i,xi=O("Hours",!0);F("m",["mm",2],0,"minute"),k("minute","m"),A("m",Rn),A("mm",Rn,Vn),Z(["m","mm"],li);var Hi=O("Minutes",!1);F("s",["ss",2],0,"second"),k("second","s"),A("s",Rn),A("ss",Rn,Vn),Z(["s","ss"],ci);var Li=O("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),k("millisecond","ms"),A("S",Bn,En),A("SS",Bn,Vn),A("SSS",Bn,qn);var Ii;for(Ii="SSSS";Ii.length<=9;Ii+="S")A(Ii,Kn);for(Ii="S";Ii.length<=9;Ii+="S")Z(Ii,$e);var Ai=O("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var zi=h.prototype;zi.add=bi,zi.calendar=ne,zi.clone=ie,zi.diff=ue,zi.endOf=ve,zi.format=fe,zi.from=he,zi.fromNow=me,zi.to=_e,zi.toNow=ye,zi.get=C,zi.invalidAt=Oe,zi.isAfter=re,zi.isBefore=se,zi.isBetween=oe,zi.isSame=ae,zi.isValid=Te,zi.lang=Ui,zi.locale=pe,zi.localeData=ge,zi.max=wi,zi.min=Yi,zi.parsingFlags=be,zi.set=C,zi.startOf=De,zi.subtract=Oi,zi.toArray=Se,zi.toObject=ke,zi.toDate=we,zi.toISOString=ce,zi.toJSON=ce,zi.toString=le,zi.unix=Ye,zi.valueOf=Me,zi.year=vi,zi.isLeapYear=ut,zi.weekYear=Ce,zi.isoWeekYear=Ge,zi.quarter=zi.quarters=xe,zi.month=B,zi.daysInMonth=Q,zi.week=zi.weeks=ht,zi.isoWeek=zi.isoWeeks=mt,zi.weeksInYear=Pe,zi.isoWeeksInYear=Fe,zi.date=Wi,zi.day=zi.days=Ne,zi.weekday=Ze,zi.isoWeekday=je,zi.dayOfYear=yt,zi.hour=zi.hours=xi,zi.minute=zi.minutes=Hi,zi.second=zi.seconds=Li,
zi.millisecond=zi.milliseconds=Ai,zi.utcOffset=At,zi.utc=Nt,zi.local=Zt,zi.parseZone=jt,zi.hasAlignedHourOffset=Et,zi.isDST=Vt,zi.isDSTShifted=qt,zi.isLocal=Jt,zi.isUtcOffset=$t,zi.isUtc=Rt,zi.isUTC=Rt,zi.zoneAbbr=Re,zi.zoneName=Be,zi.dates=tt("dates accessor is deprecated. Use date instead.",Wi),zi.months=tt("months accessor is deprecated. Use month instead",B),zi.years=tt("years accessor is deprecated. Use year instead",vi),zi.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",zt);var Ni=zi,Zi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ji={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ei="Invalid date",Vi="%d",qi=/\d{1,2}/,Ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$i=g.prototype;$i._calendar=Zi,$i.calendar=Ke,$i._longDateFormat=ji,$i.longDateFormat=tn,$i._invalidDate=Ei,$i.invalidDate=en,$i._ordinal=Vi,$i.ordinal=nn,$i._ordinalParse=qi,$i.preparse=rn,$i.postformat=rn,$i._relativeTime=Ji,$i.relativeTime=sn,$i.pastFuture=on,$i.set=an,$i.months=q,$i._months=hi,$i.monthsShort=J,$i._monthsShort=mi,$i.monthsParse=$,$i.week=lt,$i._week=Mi,$i.firstDayOfYear=ft,$i.firstDayOfWeek=ct,$i.weekdays=Le,$i._weekdays=Ci,$i.weekdaysMin=Ae,$i._weekdaysMin=Fi,$i.weekdaysShort=Ie,$i._weekdaysShort=Gi,$i.weekdaysParse=ze,$i.isPM=qe,$i._meridiemParse=Pi,$i.meridiem=Je,Y("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Y),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",S);var Ri=Math.abs,Bi=kn("ms"),Qi=kn("s"),Xi=kn("m"),Ki=kn("h"),tr=kn("d"),er=kn("w"),nr=kn("M"),ir=kn("y"),rr=bn("milliseconds"),sr=bn("seconds"),or=bn("minutes"),ar=bn("hours"),ur=bn("days"),dr=bn("months"),lr=bn("years"),cr=Math.round,fr={s:45,m:45,h:22,d:26,M:11},hr=Math.abs,mr=Ft.prototype;mr.abs=_n,mr.add=pn,mr.subtract=gn,mr.as=wn,mr.asMilliseconds=Bi,mr.asSeconds=Qi,mr.asMinutes=Xi,mr.asHours=Ki,mr.asDays=tr,mr.asWeeks=er,mr.asMonths=nr,mr.asYears=ir,mr.valueOf=Sn,mr._bubble=vn,mr.get=Tn,mr.milliseconds=rr,mr.seconds=sr,mr.minutes=or,mr.hours=ar,mr.days=ur,mr.weeks=On,mr.months=dr,mr.years=lr,mr.humanize=Gn,mr.toISOString=Fn,mr.toString=Fn,mr.toJSON=Fn,mr.locale=pe,mr.localeData=ge,mr.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fn),mr.lang=Ui,F("X",0,0,"unix"),F("x",0,0,"valueOf"),A("x",ti),A("X",ni),Z("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),Z("x",function(t,e,n){n._d=new Date(y(t))}),t.version="2.10.6",e(Ut),t.fn=Ni,t.min=Ct,t.max=Gt,t.utc=a,t.unix=Qe,t.months=ln,t.isDate=i,t.locale=Y,t.invalid=c,t.duration=Bt,t.isMoment=m,t.weekdays=fn,t.parseZone=Xe,t.localeData=S,t.isDuration=Pt,t.monthsShort=cn,t.weekdaysMin=mn,t.defineLocale=w,t.weekdaysShort=hn,t.normalizeUnits=T,t.relativeTimeThreshold=Cn;var _r=t;return _r});

 //libs/modules/md5/md5.min.js
v ar __define=this.__define||function(t,r,h,i){Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:h,set:i})},md5=function(){function t(){this.hexcase=0,this.b64pad=""}var r=t;return p=r.prototype,p.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},p.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},p.any_md5=function(t,r){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),r)},p.hex_hmac_md5=function(t,r){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(r)))},p.b64_hmac_md5=function(t,r){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(r)))},p.any_hmac_md5=function(t,r,h){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(r)),h)},p.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},p.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},p.rstr_hmac_md5=function(t,r){var h=this.rstr2binl(t);h.length>16&&(h=this.binl_md5(h,8*t.length));for(var i=Array(16),s=Array(16),d=0;16>d;d++)i[d]=909522486^h[d],s[d]=1549556828^h[d];var n=this.binl_md5(i.concat(this.rstr2binl(r)),512+8*r.length);return this.binl2rstr(this.binl_md5(s.concat(n),640))},p.rstr2hex=function(t){try{this.hexcase}catch(r){this.hexcase=0}for(var h,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",d=0;d<t.length;d++)h=t.charCodeAt(d),s+=i.charAt(h>>>4&15)+i.charAt(15&h);return s},p.rstr2b64=function(t){try{this.b64pad}catch(r){this.b64pad=""}for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",s=t.length,d=0;s>d;d+=3)for(var n=t.charCodeAt(d)<<16|(s>d+1?t.charCodeAt(d+1)<<8:0)|(s>d+2?t.charCodeAt(d+2):0),_=0;4>_;_++)i+=8*d+6*_>8*t.length?this.b64pad:h.charAt(n>>>6*(3-_)&63);return i},p.rstr2any=function(t,r){var h,i,s,d,n,_=r.length,e=Array(Math.ceil(t.length/2));for(h=0;h<e.length;h++)e[h]=t.charCodeAt(2*h)<<8|t.charCodeAt(2*h+1);var m=Math.ceil(8*t.length/(Math.log(r.length)/Math.log(2))),f=Array(m);for(i=0;m>i;i++){for(n=Array(),d=0,h=0;h<e.length;h++)d=(d<<16)+e[h],s=Math.floor(d/_),d-=s*_,(n.length>0||s>0)&&(n[n.length]=s);f[i]=d,e=n}var a="";for(h=f.length-1;h>=0;h--)a+=r.charAt(f[h]);return a},p.str2rstr_utf8=function(t){for(var r,h,i="",s=-1;++s<t.length;)r=t.charCodeAt(s),h=s+1<t.length?t.charCodeAt(s+1):0,r>=55296&&56319>=r&&h>=56320&&57343>=h&&(r=65536+((1023&r)<<10)+(1023&h),s++),127>=r?i+=String.fromCharCode(r):2047>=r?i+=String.fromCharCode(192|r>>>6&31,128|63&r):65535>=r?i+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):2097151>=r&&(i+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return i},p.str2rstr_utf16le=function(t){for(var r="",h=0;h<t.length;h++)r+=String.fromCharCode(255&t.charCodeAt(h),t.charCodeAt(h)>>>8&255);return r},p.str2rstr_utf16be=function(t){for(var r="",h=0;h<t.length;h++)r+=String.fromCharCode(t.charCodeAt(h)>>>8&255,255&t.charCodeAt(h));return r},p.rstr2binl=function(t){for(var r=Array(t.length>>2),h=0;h<r.length;h++)r[h]=0;for(var h=0;h<8*t.length;h+=8)r[h>>5]|=(255&t.charCodeAt(h/8))<<h%32;return r},p.binl2rstr=function(t){for(var r="",h=0;h<32*t.length;h+=8)r+=String.fromCharCode(t[h>>5]>>>h%32&255);return r},p.binl_md5=function(t,r){t[r>>5]|=128<<r%32,t[(r+64>>>9<<4)+14]=r;for(var h=1732584193,i=-271733879,s=-1732584194,d=271733878,n=0;n<t.length;n+=16){var _=h,e=i,m=s,f=d;h=this.md5_ff(h,i,s,d,t[n+0],7,-680876936),d=this.md5_ff(d,h,i,s,t[n+1],12,-389564586),s=this.md5_ff(s,d,h,i,t[n+2],17,606105819),i=this.md5_ff(i,s,d,h,t[n+3],22,-1044525330),h=this.md5_ff(h,i,s,d,t[n+4],7,-176418897),d=this.md5_ff(d,h,i,s,t[n+5],12,1200080426),s=this.md5_ff(s,d,h,i,t[n+6],17,-1473231341),i=this.md5_ff(i,s,d,h,t[n+7],22,-45705983),h=this.md5_ff(h,i,s,d,t[n+8],7,1770035416),d=this.md5_ff(d,h,i,s,t[n+9],12,-1958414417),s=this.md5_ff(s,d,h,i,t[n+10],17,-42063),i=this.md5_ff(i,s,d,h,t[n+11],22,-1990404162),h=this.md5_ff(h,i,s,d,t[n+12],7,1804603682),d=this.md5_ff(d,h,i,s,t[n+13],12,-40341101),s=this.md5_ff(s,d,h,i,t[n+14],17,-1502002290),i=this.md5_ff(i,s,d,h,t[n+15],22,1236535329),h=this.md5_gg(h,i,s,d,t[n+1],5,-165796510),d=this.md5_gg(d,h,i,s,t[n+6],9,-1069501632),s=this.md5_gg(s,d,h,i,t[n+11],14,643717713),i=this.md5_gg(i,s,d,h,t[n+0],20,-373897302),h=this.md5_gg(h,i,s,d,t[n+5],5,-701558691),d=this.md5_gg(d,h,i,s,t[n+10],9,38016083),s=this.md5_gg(s,d,h,i,t[n+15],14,-660478335),i=this.md5_gg(i,s,d,h,t[n+4],20,-405537848),h=this.md5_gg(h,i,s,d,t[n+9],5,568446438),d=this.md5_gg(d,h,i,s,t[n+14],9,-1019803690),s=this.md5_gg(s,d,h,i,t[n+3],14,-187363961),i=this.md5_gg(i,s,d,h,t[n+8],20,1163531501),h=this.md5_gg(h,i,s,d,t[n+13],5,-1444681467),d=this.md5_gg(d,h,i,s,t[n+2],9,-51403784),s=this.md5_gg(s,d,h,i,t[n+7],14,1735328473),i=this.md5_gg(i,s,d,h,t[n+12],20,-1926607734),h=this.md5_hh(h,i,s,d,t[n+5],4,-378558),d=this.md5_hh(d,h,i,s,t[n+8],11,-2022574463),s=this.md5_hh(s,d,h,i,t[n+11],16,1839030562),i=this.md5_hh(i,s,d,h,t[n+14],23,-35309556),h=this.md5_hh(h,i,s,d,t[n+1],4,-1530992060),d=this.md5_hh(d,h,i,s,t[n+4],11,1272893353),s=this.md5_hh(s,d,h,i,t[n+7],16,-155497632),i=this.md5_hh(i,s,d,h,t[n+10],23,-1094730640),h=this.md5_hh(h,i,s,d,t[n+13],4,681279174),d=this.md5_hh(d,h,i,s,t[n+0],11,-358537222),s=this.md5_hh(s,d,h,i,t[n+3],16,-722521979),i=this.md5_hh(i,s,d,h,t[n+6],23,76029189),h=this.md5_hh(h,i,s,d,t[n+9],4,-640364487),d=this.md5_hh(d,h,i,s,t[n+12],11,-421815835),s=this.md5_hh(s,d,h,i,t[n+15],16,530742520),i=this.md5_hh(i,s,d,h,t[n+2],23,-995338651),h=this.md5_ii(h,i,s,d,t[n+0],6,-198630844),d=this.md5_ii(d,h,i,s,t[n+7],10,1126891415),s=this.md5_ii(s,d,h,i,t[n+14],15,-1416354905),i=this.md5_ii(i,s,d,h,t[n+5],21,-57434055),h=this.md5_ii(h,i,s,d,t[n+12],6,1700485571),d=this.md5_ii(d,h,i,s,t[n+3],10,-1894986606),s=this.md5_ii(s,d,h,i,t[n+10],15,-1051523),i=this.md5_ii(i,s,d,h,t[n+1],21,-2054922799),h=this.md5_ii(h,i,s,d,t[n+8],6,1873313359),d=this.md5_ii(d,h,i,s,t[n+15],10,-30611744),s=this.md5_ii(s,d,h,i,t[n+6],15,-1560198380),i=this.md5_ii(i,s,d,h,t[n+13],21,1309151649),h=this.md5_ii(h,i,s,d,t[n+4],6,-145523070),d=this.md5_ii(d,h,i,s,t[n+11],10,-1120210379),s=this.md5_ii(s,d,h,i,t[n+2],15,718787259),i=this.md5_ii(i,s,d,h,t[n+9],21,-343485551),h=this.safe_add(h,_),i=this.safe_add(i,e),s=this.safe_add(s,m),d=this.safe_add(d,f)}return[h,i,s,d]},p.md5_cmn=function(t,r,h,i,s,d){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(r,t),this.safe_add(i,d)),s),h)},p.md5_ff=function(t,r,h,i,s,d,n){return this.md5_cmn(r&h|~r&i,t,r,s,d,n)},p.md5_gg=function(t,r,h,i,s,d,n){return this.md5_cmn(r&i|h&~i,t,r,s,d,n)},p.md5_hh=function(t,r,h,i,s,d,n){return this.md5_cmn(r^h^i,t,r,s,d,n)},p.md5_ii=function(t,r,h,i,s,d,n){return this.md5_cmn(h^(r|~i),t,r,s,d,n)},p.safe_add=function(t,r){var h=(65535&t)+(65535&r),i=(t>>16)+(r>>16)+(h>>16);return i<<16|65535&h},p.bit_rol=function(t,r){return t<<r|t>>>32-r},t}();egret.registerClass(md5,"md5");

 //libs/modules/clipBoard/clipBoard.min.js
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ClipBoard=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createContentNode",value:function(){var e=document.createElement("pre");return e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",e.style.width="5px",e.style.height="5px",document.body.appendChild(e),e}},{key:"copy",value:function(e,t){var n=t||{};try{var a=this.createContentNode();a.innerHTML=e;var o=window.getSelection(),r=document.createRange();return r.selectNodeContents(a),o.removeAllRanges(),o.addRange(r),document.execCommand("copy"),this.destroy(a),this.copyHandle(n.success),!0}catch(c){return this.copyHandle(n.error),!1}}},{key:"copyHandle",value:function(e){e&&e.call()}},{key:"destroy",value:function(e){document.body.removeChild(e)}},{key:"bind",value:function(e,t){var n=this,a=function(e){var a=function(e){var a=e.target.attributes["data-copy-content"]||{};n.copy(a.value,t)};e.addEventListener?e.addEventListener("click",function(e){a.call(n,e)}):e.attachEvent&&e.attachEvent("onClick",function(e){a.call(n,e)})};if(e){var o=e;if("string"==typeof o&&(o=document.querySelectorAll(o)),o.length>0)for(var r=0;r<o.length;r++)o[r]instanceof HTMLElement&&a(o[r]);else a(o)}}}]),e}(),superClipBoard=new ClipBoard;window.superClipBoard=superClipBoard;
